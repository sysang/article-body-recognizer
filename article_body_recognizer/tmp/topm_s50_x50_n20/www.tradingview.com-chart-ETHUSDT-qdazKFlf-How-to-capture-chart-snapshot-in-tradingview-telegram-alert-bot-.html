<!DOCTYPE html>
<html>
<head>

      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

        <script> var url = encodeURIComponent('https://www.tradingview.com/chart/ETHUSDT/qdazKFlf-How-to-capture-chart-snapshot-in-tradingview-telegram-alert-bot/');</script>

        <script> var body_html = 'PGJvZHkgPiA8ZGl2ID4gPGRpdiA+IDxkaXYgPiA8ZGl2ID4gIDwvZGl2PiA8ZGl2ID4gPGRpdiA+PHNwYW4gPjxhID5HZXQgc3RhcnRlZDxzbWFsbD48L3NtYWxsPjwvYT48L3NwYW4+PC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDxkaXYgPiA8ZGl2ID4gPGRpdiA+IDxkaXYgPiA8ZGl2ID4gPGRpdiA+IDxkaXYgPiA8ZGl2ID4gPGRpdiA+IDxoMSA+SG93IHRvIGNhcHR1cmUgY2hhcnQgc25hcHNob3QgaW4gdHJhZGluZ3ZpZXctdGVsZWdyYW0gYWxlcnQgYm90PC9oMT4gRWR1Y2F0aW9uIDwvZGl2PiA8L2Rpdj4gPGRpdiA+IEV0aGVyZXVtIC8gVGV0aGVyIChLVUNPSU46RVRIVVNEVCkgPC9kaXY+IDxkaXYgPiBIZVdob011c3ROb3RCZU5hbWVkIDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDxkaXYgPiBLVUNPSU46RVRIVVNEVCBFdGhlcmV1bSAvIFRldGhlciA8L2Rpdj4gPC9kaXY+IDxkaXYgPiA8ZGl2ID4gVHJhZGluZyBUb29scyBoZXdob211c3Rub3RiZW5hbWVkIGludGVncmF0aW9uIDwvZGl2PiA8ZGl2ID4gNDMzNSB2aWV3cyA8L2Rpdj4gPGRpdiA+IDxkaXYgPiAxNTEgPC9kaXY+IDxkaXYgPiAyNCA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2ID4gdHJhZGluZ3Rvb2wgaGV3aG9tdXN0bm90YmVuYW1lZCBpbnRlZ3JhdGlvbiA8L2Rpdj4gPGRpdiA+IDxkaXYgPkhlbGxvIHRyYWRlcnMsIEluIHRoZSBsYXN0IHZpZGVvIHdlIGxlYXJudCBIb3cgdG8gY3JlYXRlIHNpbXBsZSB3ZWItaG9vayB0byBzZW5kIGFsZXJ0cyB0byB0ZWxlZ3JhbS4gSW4gdGhpcyB0dXRvcmlhbCwgd2Ugd2lsbCB0cnkgdG8gYnVpbGQgYSBiaXQgbW9yZSBvbiBpdCBhbmQgdG8gYWxzbyBpbmNsdWRlIGNoYXJ0IHNuYXBzaG90cyBhbG9uZyB3aXRoIHBsYWluIGFsZXJ0IG1lc3NhZ2VzLiBXZWJob29rIGNvZGUgaXMgdXBkYXRlZCBpbiB0aGUgcmVwbGl0IHJlcG9zaXRvcnkgaGVyZTogaHR0cHM6Ly9yZXBsaXQuY29tL0B0cmVuZG9zY29wZS9UcmFkaW5ndi4uLiBPbmNlLCBzZXR1cCwgcnVuIHRoZSByZXBsIGFuZCBjYXB0dXJlIGJhc2UgVVJMIOKsnCBXZWJob29rIEFQSSBXZWJob29rIHBvc3QgcmVxdWVzdCBVUkwgZm9ybWF0IGJlbG93OiA8ZGl2ID48cHJlID4gaHR0cHM6Ly8mbHQ7YmFzZV91cmwmZ3Q7L3dlYmhvb2s/anNvblJlcXVlc3Q9Jmx0O3RydWUvZmFsc2UmZ3Q7dGJsZm10PSZsdDt0YmxmbXQmZ3Q7Y2hhcnQ9Jmx0O2NoYXJ0VXJsJmd0O2xvZ2luUmVxdWlyZWQ9Jmx0O3RydWUvZmFsc2UmZ3Q7PC9wcmU+PC9kaXY+IDx1bD48bGk+IGpzb25SZXF1ZXN0IC0gdHJ1ZS9mYWxzZS4gU2V0IGl0IHRvIHRydWUgb25seSBpZiB5b3UgYXJlIHNlbmRpbmcgYWxlcnRzIGluIHRoZSBmb3JtIG9mIGpzb24uIElmIHNldCB0byB0cnVlIGFuZCB0aGUgYWxlcnQgbWVzc2FnZSBpcyBub3QgaW4ganNvbiBmb3JtYXQsIGl0IHdpbGwgdGhyb3cgZXJyb3IgPC9saT48bGk+IHRibGZtdCAtIFZhbHVlcyB0YWtlbiBmcm9tIHB5dGhvbiBsaWJyYXJ5IHRhYnVsYXRlLiBEZWZpbmVzIGhvdyB0byBkaXNwbGF5IHRoZSBqc29uIG1lc3NhZ2UgaW4gdGFidWxhciBmb3JtYXQuIEFwcGxpY2FibGUgb25seSBpZiBqc29uUmVxdWVzdCBpcyB0cnVlIDwvbGk+PGxpPiBjaGFydCAtIENoYXJ0IFVSTCBmcm9tIHRyYWRpbmd2aWV3IGZvciB3aGljaCBzbmFwc2hvdCBuZWVkIHRvIGJlIGNhcHR1cmVkIDwvbGk+PGxpPiBsb2dpblJlcXVpcmVkIC0gdHJ1ZS9mYWxzZS4gVXNlIHRoaXMgb25seSBpZiB5b3UgYXJlIHVzaW5nIGEgcHJpdmF0ZSBub24gc2hhcmVkIGNoYXJ0IGZvciBzbmFwc2hvdCBvciBpZiB5b3VyIGNoYXJ0IGNvbnRhaW5zIGludml0ZSBvbmx5IHNjcmlwdHMgd2hpY2ggbmVlZHMgdG8gYmUgc2hvd24gaW4gdGhlIGNoYXJ0IHNuYXBzaG90LiA8L2xpPjwvdWw+IOKsnCBDYXB0dXJpbmcgQ2hhcnQgVVJMIE5vdGU6IE1ha2Ugc3VyZSB5b3UgY3JlYXRlIGRpZmZlcmVudCBjaGFydCBmb3IgZGlmZmVyZW50IGluc3RydW1lbnRzIHdoaWNoIHlvdSBhcmUgdHJ5aW5nIHRvIGdldCBhbGVydC4gQWxzbyBtYWtlIHN1cmUgeW91ciBjaGFydCBpcyBzYXZlZCBhbmQgYWxsIHRoZSBpbmRpY2F0b3JzIGFyZSBpbiBwYWxjZS4g4qycIFRlc3Rpbmcgb24gcG9zdG1hbiDirJwgQ3JlYXRpbmcgdGhlIGFsZXJ0IDwvZGl2PiA8L2Rpdj4gPGRpdiA+IFBsZWFzZSBQTSBtZSBpZiB5b3UgbmVlZCBhY2Nlc3MgdG8gYW55IGludml0ZSBvbmx5IHNjcmlwdHMuSm9pbiB0cmFkaW5ndmlldzogaHR0cHM6Ly93d3cudHJhZGluZ3ZpZXcuY29tL2dvcHJvLz9zaGFyZV95b3VyX2xvdmU9c3VkaCA8L2Rpdj4gPGRpdiA+PGRpdiA+PGRpdiA+PGRpdiA+PGRpdiA+VHdpdHRlcjwvZGl2PjxkaXYgPldlYnNpdGU8L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4gPC9kaXY+IDxkaXYgPiA8ZGl2ID4gPGRpdiA+IDxkaXYgPiA8ZGl2ID4gPGRpdiA+IDxoMiA+UmVsYXRlZCBJZGVhczwvaDI+IDwvZGl2PiA8ZGl2ID4gPGRpdiA+IEhvdyB0byBjcmVhdGUgc2ltcGxlIHdlYi1ob29rIHRvIHNlbmQgYWxlcnRzIHRvIFRlbGVncmFtIDxkaXY+IEhlV2hvTXVzdE5vdEJlTmFtZWQgYWJvdXQgRVRIVVNEIDxzcGFuID4gNTcgPC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj48L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvYm9keT4='</script>

      </head>
        <body class="valid" valid="valid" title="valid: True, node: 1, level: 1" node_number="1"> <div class="valid" valid="valid" title="valid: True, node: 2, level: 2" node_number="2"> <div class="valid" valid="valid" title="valid: True, node: 3, level: 3" node_number="3"> <div class="valid" valid="valid" title="valid: True, node: 4, level: 4" node_number="4"> <div class="valid" valid="valid" title="valid: True, node: 5, level: 5" node_number="5">  </div> <div class="valid" valid="valid" title="valid: True, node: 6, level: 5" node_number="6"> <div class="valid" valid="valid" title="valid: True, node: 7, level: 6" node_number="7"><span class="valid" valid="valid" title="valid: True, node: 8, level: 7" node_number="8"><a class="valid" valid="valid" title="valid: True, node: 9, level: 8" node_number="9">Get started<small class="valid" valid="valid" title="valid: True, node: 10, level: 9" node_number="10"/></a></span></div> </div> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 11, level: 3" node_number="11"> <div class="valid" valid="valid" title="valid: True, node: 12, level: 4" node_number="12"> <div class="valid" valid="valid" title="valid: True, node: 13, level: 5" node_number="13"> <div class="valid" valid="valid" title="valid: True, node: 14, level: 6" node_number="14"> <div class="valid" valid="valid" title="valid: True, node: 15, level: 7" node_number="15"> <div class="valid" valid="valid" title="valid: True, node: 16, level: 8" node_number="16"> <div class="valid" valid="valid" title="valid: True, node: 17, level: 9" node_number="17"> <div class="valid" valid="valid" title="valid: True, node: 18, level: 10" node_number="18"> <div class="valid" valid="valid" title="valid: True, node: 19, level: 11" node_number="19"> <h1 class="valid" valid="valid" title="valid: True, node: 20, level: 12" node_number="20">How to capture chart snapshot in tradingview-telegram alert bot</h1> Education </div> </div> <div class="valid" valid="valid" title="valid: True, node: 21, level: 10" node_number="21"> Ethereum / Tether (KUCOIN:ETHUSDT) </div> <div class="valid" valid="valid" title="valid: True, node: 22, level: 10" node_number="22"> HeWhoMustNotBeNamed </div> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 23, level: 8" node_number="23"> KUCOIN:ETHUSDT Ethereum / Tether </div> </div> <div class="valid" valid="valid" title="valid: True, node: 24, level: 7" node_number="24"> <div class="valid" valid="valid" title="valid: True, node: 25, level: 8" node_number="25"> Trading Tools hewhomustnotbenamed integration </div> <div class="valid" valid="valid" title="valid: True, node: 26, level: 8" node_number="26"> 4335 views </div> <div class="valid" valid="valid" title="valid: True, node: 27, level: 8" node_number="27"> <div class="valid" valid="valid" title="valid: True, node: 28, level: 9" node_number="28"> 151 </div> <div class="valid" valid="valid" title="valid: True, node: 29, level: 9" node_number="29"> 24 </div> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 30, level: 7" node_number="30"> tradingtool hewhomustnotbenamed integration </div> <div class="valid" valid="valid" title="valid: True, node: 31, level: 7" node_number="31"> <div class="valid" valid="valid" title="valid: True, node: 32, level: 8" node_number="32">Hello traders, In the last video we learnt How to create simple web-hook to send alerts to telegram. In this tutorial, we will try to build a bit more on it and to also include chart snapshots along with plain alert messages. Webhook code is updated in the replit repository here: https://replit.com/@trendoscope/Tradingv... Once, setup, run the repl and capture base URL &#11036; Webhook API Webhook post request URL format below: <div class="valid" valid="valid" title="valid: True, node: 33, level: 9" node_number="33"><pre class="valid" valid="valid" title="valid: True, node: 34, level: 10" node_number="34"> https://&lt;base_url&gt;/webhook?jsonRequest=&lt;true/false&gt;tblfmt=&lt;tblfmt&gt;chart=&lt;chartUrl&gt;loginRequired=&lt;true/false&gt;</pre></div> <ul class="valid" valid="valid" title="valid: True, node: 35, level: 9" node_number="35"><li class="valid" valid="valid" title="valid: True, node: 36, level: 10" node_number="36"> jsonRequest - true/false. Set it to true only if you are sending alerts in the form of json. If set to true and the alert message is not in json format, it will throw error </li><li class="valid" valid="valid" title="valid: True, node: 37, level: 10" node_number="37"> tblfmt - Values taken from python library tabulate. Defines how to display the json message in tabular format. Applicable only if jsonRequest is true </li><li class="valid" valid="valid" title="valid: True, node: 38, level: 10" node_number="38"> chart - Chart URL from tradingview for which snapshot need to be captured </li><li class="valid" valid="valid" title="valid: True, node: 39, level: 10" node_number="39"> loginRequired - true/false. Use this only if you are using a private non shared chart for snapshot or if your chart contains invite only scripts which needs to be shown in the chart snapshot. </li></ul> &#11036; Capturing Chart URL Note: Make sure you create different chart for different instruments which you are trying to get alert. Also make sure your chart is saved and all the indicators are in palce. &#11036; Testing on postman &#11036; Creating the alert </div> </div> <div class="valid" valid="valid" title="valid: True, node: 40, level: 7" node_number="40"> Please PM me if you need access to any invite only scripts.Join tradingview: https://www.tradingview.com/gopro/?share_your_love=sudh </div> <div class="valid" valid="valid" title="valid: True, node: 41, level: 7" node_number="41"><div class="valid" valid="valid" title="valid: True, node: 42, level: 8" node_number="42"><div class="valid" valid="valid" title="valid: True, node: 43, level: 9" node_number="43"><div class="valid" valid="valid" title="valid: True, node: 44, level: 10" node_number="44"><div class="valid" valid="valid" title="valid: True, node: 45, level: 11" node_number="45">Twitter</div><div class="valid" valid="valid" title="valid: True, node: 46, level: 11" node_number="46">Website</div></div></div></div></div> </div> <div class="valid" valid="valid" title="valid: True, node: 47, level: 6" node_number="47"> <div class="valid" valid="valid" title="valid: True, node: 48, level: 7" node_number="48"> <div class="valid" valid="valid" title="valid: True, node: 49, level: 8" node_number="49"> <div class="valid" valid="valid" title="valid: True, node: 50, level: 9" node_number="50"> <div class="valid" valid="valid" title="valid: True, node: 51, level: 10" node_number="51"> <div class="valid" valid="valid" title="valid: True, node: 52, level: 11" node_number="52"> <h2 class="valid" valid="valid" title="valid: True, node: 53, level: 12" node_number="53">Related Ideas</h2> </div> <div class="valid" valid="valid" title="valid: True, node: 54, level: 11" node_number="54"> <div class="valid" valid="valid" title="valid: True, node: 55, level: 12" node_number="55"> How to create simple web-hook to send alerts to Telegram <div class="valid" valid="valid" title="valid: True, node: 56, level: 13" node_number="56"> HeWhoMustNotBeNamed about ETHUSD <span class="valid" valid="valid" title="valid: True, node: 57, level: 14" node_number="57"> 57 </span> </div> </div> </div> </div></div> </div> </div> </div> </div> </div> </div> </div> </body>
        <style tyle='text/css'>
body{
    position: relative;
    padding-left: 30px;
    top: 60px;
}
* {
    border: 1px solid #eee;
    padding: 5px 12px;
    margin: 3px 0;
    box-sizing: content-box;
    background-color: #fff;
    cursor: no-drop;
}
main:hover > *, section:hover > *, header:hover > *, nav:hover > *, a:hover > *, div:hover > *, p:hover > *, ul:hover > *, h1:hover > *, h2:hover > *, h3:hover > *, li:hover > *, span:hover > *{
    border: 2px solid green;
    background-color: #fffeee;
    padding: 5px 23px !important;
    margin: 1px 0;
    color: green;
}
main:hover, section:hover, header:hover, nav:hover, a:hover, div:hover, p:hover, ul:hover, h1:hover, h2:hover, h3:hover, li:hover, span:hover{
    border: 1px solid #fff;
    background-color: #eee;
}
a, span {
    display: block;
}
.selected {
    border: 2px solid orchid !important;
    opacity: 0.8;
    color: orchid !important;
}
.selected * {
    padding: 2px !important;
    color: orchid !important;
}
.valid {
  cursor: pointer;
}
.btn{
  cursor: pointer;
  font-weight: bolder;
  padding: 8px;
}
</style> 
        <script>function OpenOriginalLink($event){
    $event.stopPropagation();
    console.log(url);
}

function removeItem($event){
    $event.stopPropagation();
    console.log('Remove item: ', url)
    localStorage.removeItem(url)
}

function exportData($event){
    $event.stopPropagation();

    result = []
    for(let i=0; i<localStorage.length; i++) {
        let key = localStorage.key(i);
        result.push(localStorage.getItem(key))
    }
    const _url = URL.createObjectURL(new Blob([result.join("\n")], {type: 'text/plain'}))
    $event.target.href = _url;
    localStorage.clear()
}

var removeItemBtn = document.createElement("BUTTON");   // Create a <button> element
removeItemBtn.innerHTML = "Remove Item";
removeItemBtn.classList.add('btn');
removeItemBtn.style.position = "fixed";
removeItemBtn.style.left = '5px';
removeItemBtn.style.top = 0;
removeItemBtn.style.border = "1px solid";
removeItemBtn.style.boxShadow = "3px 3px #888";
removeItemBtn.onclick = removeItem;
document.body.appendChild(removeItemBtn);

var goToOriginLink = document.createElement("A");   // Create a <button> element
goToOriginLink.innerHTML = "GoToOrigin";
goToOriginLink.classList.add('btn');
goToOriginLink.style.position = "fixed"
goToOriginLink.style.left = '115px'
goToOriginLink.style.top = 0;
goToOriginLink.onclick = OpenOriginalLink;
goToOriginLink.setAttribute('href', decodeURIComponent(url));
goToOriginLink.target = '_blank';
document.body.appendChild(goToOriginLink);

var current = new Date
var exportDataLink = document.createElement("A");   // Create a <button> element
exportDataLink.innerHTML = "Export data";
exportDataLink.classList.add('btn');
exportDataLink.download = current.toISOString() + '.exported.txt';
exportDataLink.style.position = "fixed";
exportDataLink.style.right = '5px';
exportDataLink.style.top = 0;
exportDataLink.style.border = "1px solid #888";
exportDataLink.style.boxShadow = "3px 3px #888";
exportDataLink.onclick = exportData;
document.body.appendChild(exportDataLink);

data = {
    'title': null ,
    'article': null
}

var body = document.getElementsByTagName("body")[0];

body.onclick = function($e){
    var num = $e.target.getAttribute('node_number')
    var valid = $e.target.getAttribute('valid')

    if(!valid){
        console.log("Element is invalid")
        return
    }

    if(data.length > 2){
        data = data.splice(0, 2)
    }

    console.log("node:", $e.target)

    if(!data.title && !data.article){
        data.title = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else if (data.title && !data.article){
        data.article = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else{
        selected = Array.from(document.getElementsByClassName("selected"))
        selected.forEach(function(el){
            el.classList.remove('selected')
        })

        data.title = num;
        data.article = null;
        $e.target.classList.add('selected')

    }

    if(data.title && data.article){
        var obj = {
            url: url,
            text: body_html,
            title: data.title,
            article: data.article,
        }

        var datasetItem = JSON.stringify(obj)
        localStorage.setItem(url, datasetItem)
    }
}
</script> 
      </html>