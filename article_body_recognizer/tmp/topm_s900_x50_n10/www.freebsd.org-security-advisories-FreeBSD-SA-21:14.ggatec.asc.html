<!DOCTYPE html>
<html>
<head>

      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

        <script> var url = encodeURIComponent('https://www.freebsd.org/security/advisories/FreeBSD-SA-21:14.ggatec.asc');</script>

        <script> var body_html = 'PGJvZHk+PHA+LS0tLS1CRUdJTiBQR1AgU0lHTkVEIE1FU1NBR0UtLS0tLSBIYXNoOiBTSEE1MTIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gRnJlZUJTRC1TQS0yMToxNC5nZ2F0ZWMgU2VjdXJpdHkgQWR2aXNvcnkgVGhlIEZyZWVCU0QgUHJvamVjdCBUb3BpYzogUmVtb3RlIGNvZGUgZXhlY3V0aW9uIGluIGdnYXRlYyg4KSBDYXRlZ29yeTogY29yZSBNb2R1bGU6IGdnYXRlYyBBbm5vdW5jZWQ6IDIwMjEtMDgtMjQgQ3JlZGl0czogSm9oYW5uZXMgVG90eiBBZmZlY3RzOiBBbGwgc3VwcG9ydGVkIHZlcnNpb25zIG9mIEZyZWVCU0QuIENvcnJlY3RlZDogMjAyMS0wOC0yNCAxNzo1MDo1MCBVVEMgKHN0YWJsZS8xMywgMTMuMC1TVEFCTEUpIDIwMjEtMDgtMjQgMTc6Mzc6NDUgVVRDIChyZWxlbmcvMTMuMCwgMTMuMC1SRUxFQVNFLXA0KSAyMDIxLTA4LTI0IDE4OjMwOjEzIFVUQyAoc3RhYmxlLzEyLCAxMi4yLVNUQUJMRSkgMjAyMS0wOC0yNCAxODozMjoxNSBVVEMgKHJlbGVuZy8xMi4yLCAxMi4yLVJFTEVBU0UtcDEwKSAyMDIxLTA4LTI0IDE4OjI5OjM1IFVUQyAoc3RhYmxlLzExLCAxMS40LVNUQUJMRSkgMjAyMS0wOC0yNCAxODozMToyOSBVVEMgKHJlbGVuZy8xMS40LCAxMS40LVJFTEVBU0UtcDEzKSBDVkUgTmFtZTogQ1ZFLTIwMjEtMjk2MzAgRm9yIGdlbmVyYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIEZyZWVCU0QgU2VjdXJpdHkgQWR2aXNvcmllcywgaW5jbHVkaW5nIGRlc2NyaXB0aW9ucyBvZiB0aGUgZmllbGRzIGFib3ZlLCBzZWN1cml0eSBicmFuY2hlcywgYW5kIHRoZSBmb2xsb3dpbmcgc2VjdGlvbnMsIHBsZWFzZSB2aXNpdCA8aHR0cHM6PjwvaHR0cHM6Pi4gSS4gQmFja2dyb3VuZCBHRU9NIEdhdGUgaXMgYSBHRU9NIG1vZHVsZSB0aGF0IHJlZmxlY3RzIEkvTyByZXF1ZXN0cyBpbnRvIHVzZXIgbW9kZSB3aGVyZSB0aGUgZ2dhdGVjKDgpIGRhZW1vbiBmb3dhcmRzIHRob3NlIHJlcXVlc3RzIHRvIGdnYXRlZCg4KSwgcG9zc2libHkgb3ZlciB0aGUgbmV0d29yayB0byBhbm90aGVyIG1hY2hpbmUuIElJLiBQcm9ibGVtIERlc2NyaXB0aW9uIFRoZSBnZ2F0ZWMoOCkgZGFlbW9uIGRvZXMgbm90IHZhbGlkYXRlIHRoZSBzaXplIG9mIGEgcmVzcG9uc2UgYmVmb3JlIHdyaXRpbmcgaXQgdG8gYSBmaXhlZC1zaXplZCBidWZmZXIuIFRoaXMgYWxsb3dzIHRvIG92ZXJ3cml0ZSB0aGUgc3RhY2sgb2YgZ2dhdGVjKDgpLiBJSUkuIEltcGFjdCBBIG1hbGljaW91cyBnZ2F0ZWQoOCkgb3IgYW4gYXR0YWNrZXIgaW4gYSBwcml2aWxlZGdlZCBuZXR3b3JrIHBvc2l0aW9uIGNhbiBvdmVyd3JpdGUgdGhlIHN0YWNrIHdpdGggY3JhZnRlZCBjb250ZW50IGFuZCBwb3RlbnRpYWxseSBleGVjdXRlIGFyYml0cmFyeSBjb2RlLiBJVi4gV29ya2Fyb3VuZCBObyB3b3JrYXJvdW5kIGlzIGF2YWlsYWJsZSBidXQgc3lzdGVtcyBub3QgdXNpbmcgZ2dhdGVjKDgpIGFyZSBub3QgYWZmZWN0ZWQuIE5laXRoZXIgZ2dhdGVjKDgpIG5vciBnZ2F0ZWQoOCkgYXJlIGVuYWJsZWQgYnkgZGVmYXVsdCBhbmQgbmVlZCBleHBsaWNpdCBjb25maWd1cmF0aW9uIGJ5IHRoZSBzdXBlci11c2VyLiBWLiBTb2x1dGlvbiBVcGdyYWRlIHlvdXIgdnVsbmVyYWJsZSBzeXN0ZW0gdG8gYSBzdXBwb3J0ZWQgRnJlZUJTRCBzdGFibGUgb3IgcmVsZWFzZSAvIHNlY3VyaXR5IGJyYW5jaCAocmVsZW5nKSBkYXRlZCBhZnRlciB0aGUgY29ycmVjdGlvbiBkYXRlLiBSZXN0YXJ0IGFueSBnZ2F0ZWMoOCkgaW5zdGFuY2VzLiBFeGlzdGluZyBnZ2F0ZSBkZXZpY2VzIGNhbiBiZSBrZXB0IGFsaXZlIGFuZCByZXN0YXJ0ZWQgd2l0aCBgZ2dhdGVjIHJlc2N1ZWAuIFBlcmZvcm0gb25lIG9mIHRoZSBmb2xsb3dpbmc6IDEpIFRvIHVwZGF0ZSB5b3VyIHZ1bG5lcmFibGUgc3lzdGVtIHZpYSBhIGJpbmFyeSBwYXRjaDogU3lzdGVtcyBydW5uaW5nIGEgUkVMRUFTRSB2ZXJzaW9uIG9mIEZyZWVCU0Qgb24gdGhlIGFtZDY0LCBpMzg2LCBvciAob24gRnJlZUJTRCAxMyBhbmQgbGF0ZXIpIGFybTY0IHBsYXRmb3JtcyBjYW4gYmUgdXBkYXRlZCB2aWEgdGhlIGZyZWVic2QtdXBkYXRlKDgpIHV0aWxpdHk6ICMgZnJlZWJzZC11cGRhdGUgZmV0Y2ggIyBmcmVlYnNkLXVwZGF0ZSBpbnN0YWxsIDIpIFRvIHVwZGF0ZSB5b3VyIHZ1bG5lcmFibGUgc3lzdGVtIHZpYSBhIHNvdXJjZSBjb2RlIHBhdGNoOiBUaGUgZm9sbG93aW5nIHBhdGNoZXMgaGF2ZSBiZWVuIHZlcmlmaWVkIHRvIGFwcGx5IHRvIHRoZSBhcHBsaWNhYmxlIEZyZWVCU0QgcmVsZWFzZSBicmFuY2hlcy4gYSkgRG93bmxvYWQgdGhlIHJlbGV2YW50IHBhdGNoIGZyb20gdGhlIGxvY2F0aW9uIGJlbG93LCBhbmQgdmVyaWZ5IHRoZSBkZXRhY2hlZCBQR1Agc2lnbmF0dXJlIHVzaW5nIHlvdXIgUEdQIHV0aWxpdHkuICMgZmV0Y2ggaHR0cHM6Ly9zZWN1cml0eS5GcmVlQlNELm9yZy9wYXRjaGVzL1NBLTIxOjE0L2dnYXRlYy5wYXRjaCAjIGZldGNoIGh0dHBzOi8vc2VjdXJpdHkuRnJlZUJTRC5vcmcvcGF0Y2hlcy9TQS0yMToxNC9nZ2F0ZWMucGF0Y2guYXNjICMgZ3BnIC0tdmVyaWZ5IGdnYXRlYy5wYXRjaC5hc2MgYikgQXBwbHkgdGhlIHBhdGNoLiBFeGVjdXRlIHRoZSBmb2xsb3dpbmcgY29tbWFuZHMgYXMgcm9vdDogIyBjZCAvdXNyL3NyYyAjIHBhdGNoICZsdDsgL3BhdGgvdG8vcGF0Y2ggYykgUmVjb21waWxlIHRoZSBvcGVyYXRpbmcgc3lzdGVtIHVzaW5nIGJ1aWxkd29ybGQgYW5kIGluc3RhbGx3b3JsZCBhcyBkZXNjcmliZWQgaW4gPGh0dHBzOj4uIFJlc3RhcnQgdGhlIGFwcGxpY2FibGUgZGFlbW9ucywgb3IgcmVib290IHRoZSBzeXN0ZW0uIFZJLiBDb3JyZWN0aW9uIGRldGFpbHMgVGhpcyBpc3N1ZSBpcyBjb3JyZWN0ZWQgYnkgdGhlIGNvcnJlc3BvbmRpbmcgR2l0IGNvbW1pdCBoYXNoIG9yIFN1YnZlcnNpb24gcmV2aXNpb24gbnVtYmVyIGluIHRoZSBmb2xsb3dpbmcgc3RhYmxlIGFuZCByZWxlYXNlIGJyYW5jaGVzOiBCcmFuY2gvcGF0aCBIYXNoIFJldmlzaW9uIC0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBzdGFibGUvMTMvIDA3MjliYTJmNDljOSBzdGFibGUvMTMtbjI0NjkzOCByZWxlbmcvMTMuMC8gYzhhMmNjNGJhODQ1IHJlbGVuZy8xMy4wLW4yNDQ3NTcgc3RhYmxlLzEyLyByMzcwMzgzIHJlbGVuZy8xMi4yLyByMzcwMzk0IHN0YWJsZS8xMS8gcjM3MDM4MSByZWxlbmcvMTEuNC8gcjM3MDM4NyAtIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRm9yIEZyZWVCU0QgMTMgYW5kIGxhdGVyOiBSdW4gdGhlIGZvbGxvd2luZyBjb21tYW5kIHRvIHNlZSB3aGljaCBmaWxlcyB3ZXJlIG1vZGlmaWVkIGJ5IGEgcGFydGljdWxhciBjb21taXQ6ICMgZ2l0IHNob3cgLS1zdGF0IDxjb21taXQgPiBPciB2aXNpdCB0aGUgZm9sbG93aW5nIFVSTCwgcmVwbGFjaW5nIE5OTk5OTiB3aXRoIHRoZSBoYXNoOiA8aHR0cHM6PiBUbyBkZXRlcm1pbmUgdGhlIGNvbW1pdCBjb3VudCBpbiBhIHdvcmtpbmcgdHJlZSAoZm9yIGNvbXBhcmlzb24gYWdhaW5zdCBuTk5OTk5OIGluIHRoZSB0YWJsZSBhYm92ZSksIHJ1bjogIyBnaXQgcmV2LWxpc3QgLS1jb3VudCAtLWZpcnN0LXBhcmVudCBIRUFEIEZvciBGcmVlQlNEIDEyIGFuZCBlYXJsaWVyOiBSdW4gdGhlIGZvbGxvd2luZyBjb21tYW5kIHRvIHNlZSB3aGljaCBmaWxlcyB3ZXJlIG1vZGlmaWVkIGJ5IGEgcGFydGljdWxhciByZXZpc2lvbiwgcmVwbGFjaW5nIE5OTk5OTiB3aXRoIHRoZSByZXZpc2lvbiBudW1iZXI6ICMgc3ZuIGRpZmYgLWNOTk5OTk4gLS1zdW1tYXJpemUgc3ZuOi8vc3ZuLmZyZWVic2Qub3JnL2Jhc2UgT3IgdmlzaXQgdGhlIGZvbGxvd2luZyBVUkwsIHJlcGxhY2luZyBOTk5OTk4gd2l0aCB0aGUgcmV2aXNpb24gbnVtYmVyOiA8aHR0cHM6PiBWSUkuIFJlZmVyZW5jZXMgPGh0dHBzOj4gVGhlIGxhdGVzdCByZXZpc2lvbiBvZiB0aGlzIGFkdmlzb3J5IGlzIGF2YWlsYWJsZSBhdCA8aHR0cHM6PiAtLS0tLUJFR0lOIFBHUCBTSUdOQVRVUkUtLS0tLSBpUUl6QkFFQkNnQWRGaUVFL0E2SGl1V3Y1NGdDaldOVjA1ZVM5SjZuNWNJRkFtRWxWMTRBQ2drUTA1ZVM5SjZuIDVjS3lxQkFBaTdlSFVKNVVkNGROSmFjOHpiYWo1dUlsWUYxWFVQQmZtNVhsZXZmVzFiMXZncmZyczBRTTNTdzUgOWVmVFZURVNGVUMrVDl3Vk1ZTzNzOVBPRXdpdTN4MEEvZVJzSDJ0cTlvYVpQUUtkcEFoa0VFUS91cW5OUktmbSBxSFo4WXVTSkdUK0VXRUZwMWliNU80WTc4VHZqTDdTVDArSUcvTzV2Qk1LcWdzeHkyOW82dE9BeTNxOStSVnFqIGhOUU5vN0tiWEJYRW5zL0k3SE40SnNzUVNqZVdPbUs2NVR5NVlBcDFWc05HYkQvN3JTcXNDcDRQL0NhdHZSUTcgMGt6Vk1iL2hrYURuMUc3allPWGJBUGsrWHJVcjljRnJpQ2hqTHVBQXlaUkJmV2NObFBtb3hSZ05vRFZEWTQ0eCBlbG5CQUVtU1BEOWFkd3kyaG9IZXVzaWlVbk43VnJ6NkRKZW94N0JTbmJReDFsYlUrajZxZXYwRUJhTUFtRVVKIFBPeG45d2pmdGgzaGRmUlN4NXAyalNWYUQvMDg2QkJwTVE5S1hvalZPTmdxRTdoRkY0MDIrb29Dbm9yQTJYVGggczA4Y0l5MzhURXlIb1cvcnFyM1NvWHd5dmtNM3ZBalFCbVl6b2NEcW9jZnVmUTdVQ0grU0RGU3NPUnVvZis0TiA5VDJqL1V2R3FtclF2bk1oQXNSZmJkRkltdndVdXQrWkxKek5xVEVqWVdsWnY1OFFFS29jVTBPT3ZyZDJXYjVpIG9rMkNSSWhDeTA4VW5ESXRGU1lJMjhUYU12OFppQ29XTHg3SDArMjBtUWVMYVBGNDVkUVdYejFvNEZyRkhWanggRWRNWnBtaDl0RlU4ajVibTBKNWw4Q3BvaVRac3FaNDFnVHJGeUVkU25PblMxdXZUOGpRPSA9NloyQyAtLS0tLUVORCBQR1AgU0lHTkFUVVJFLS0tLS08L2h0dHBzOj48L2h0dHBzOj48L2h0dHBzOj48L2h0dHBzOj48L2NvbW1pdD48L2h0dHBzOj48L3A+PC9ib2R5Pg=='</script>

      </head>
        <body class="valid" valid="valid" title="valid: True, node: 1, tag: body, level: 1" node_number="1"><p class="valid" valid="valid" title="valid: True, node: 2, tag: p, level: 2" node_number="2">-----BEGIN PGP SIGNED MESSAGE----- Hash: SHA512 ============================================================================= FreeBSD-SA-21:14.ggatec Security Advisory The FreeBSD Project Topic: Remote code execution in ggatec(8) Category: core Module: ggatec Announced: 2021-08-24 Credits: Johannes Totz Affects: All supported versions of FreeBSD. Corrected: 2021-08-24 17:50:50 UTC (stable/13, 13.0-STABLE) 2021-08-24 17:37:45 UTC (releng/13.0, 13.0-RELEASE-p4) 2021-08-24 18:30:13 UTC (stable/12, 12.2-STABLE) 2021-08-24 18:32:15 UTC (releng/12.2, 12.2-RELEASE-p10) 2021-08-24 18:29:35 UTC (stable/11, 11.4-STABLE) 2021-08-24 18:31:29 UTC (releng/11.4, 11.4-RELEASE-p13) CVE Name: CVE-2021-29630 For general information regarding FreeBSD Security Advisories, including descriptions of the fields above, security branches, and the following sections, please visit <https: class="valid" valid="valid" title="valid: True, node: 3, tag: https:, level: 3" node_number="3"/>. I. Background GEOM Gate is a GEOM module that reflects I/O requests into user mode where the ggatec(8) daemon fowards those requests to ggated(8), possibly over the network to another machine. II. Problem Description The ggatec(8) daemon does not validate the size of a response before writing it to a fixed-sized buffer. This allows to overwrite the stack of ggatec(8). III. Impact A malicious ggated(8) or an attacker in a priviledged network position can overwrite the stack with crafted content and potentially execute arbitrary code. IV. Workaround No workaround is available but systems not using ggatec(8) are not affected. Neither ggatec(8) nor ggated(8) are enabled by default and need explicit configuration by the super-user. V. Solution Upgrade your vulnerable system to a supported FreeBSD stable or release / security branch (releng) dated after the correction date. Restart any ggatec(8) instances. Existing ggate devices can be kept alive and restarted with `ggatec rescue`. Perform one of the following: 1) To update your vulnerable system via a binary patch: Systems running a RELEASE version of FreeBSD on the amd64, i386, or (on FreeBSD 13 and later) arm64 platforms can be updated via the freebsd-update(8) utility: # freebsd-update fetch # freebsd-update install 2) To update your vulnerable system via a source code patch: The following patches have been verified to apply to the applicable FreeBSD release branches. a) Download the relevant patch from the location below, and verify the detached PGP signature using your PGP utility. # fetch https://security.FreeBSD.org/patches/SA-21:14/ggatec.patch # fetch https://security.FreeBSD.org/patches/SA-21:14/ggatec.patch.asc # gpg --verify ggatec.patch.asc b) Apply the patch. Execute the following commands as root: # cd /usr/src # patch &lt; /path/to/patch c) Recompile the operating system using buildworld and installworld as described in <https: class="valid" valid="valid" title="valid: True, node: 4, tag: https:, level: 3" node_number="4">. Restart the applicable daemons, or reboot the system. VI. Correction details This issue is corrected by the corresponding Git commit hash or Subversion revision number in the following stable and release branches: Branch/path Hash Revision - ------------------------------------------------------------------------- stable/13/ 0729ba2f49c9 stable/13-n246938 releng/13.0/ c8a2cc4ba845 releng/13.0-n244757 stable/12/ r370383 releng/12.2/ r370394 stable/11/ r370381 releng/11.4/ r370387 - ------------------------------------------------------------------------- For FreeBSD 13 and later: Run the following command to see which files were modified by a particular commit: # git show --stat <commit class="valid" valid="valid" title="valid: True, node: 5, tag: commit, level: 4" node_number="5"> Or visit the following URL, replacing NNNNNN with the hash: <https: class="valid" valid="valid" title="valid: True, node: 6, tag: https:, level: 5" node_number="6"> To determine the commit count in a working tree (for comparison against nNNNNNN in the table above), run: # git rev-list --count --first-parent HEAD For FreeBSD 12 and earlier: Run the following command to see which files were modified by a particular revision, replacing NNNNNN with the revision number: # svn diff -cNNNNNN --summarize svn://svn.freebsd.org/base Or visit the following URL, replacing NNNNNN with the revision number: <https: class="valid" valid="valid" title="valid: True, node: 7, tag: https:, level: 6" node_number="7"> VII. References <https: class="valid" valid="valid" title="valid: True, node: 8, tag: https:, level: 7" node_number="8"> The latest revision of this advisory is available at <https: class="valid" valid="valid" title="valid: True, node: 9, tag: https:, level: 8" node_number="9"> -----BEGIN PGP SIGNATURE----- iQIzBAEBCgAdFiEE/A6HiuWv54gCjWNV05eS9J6n5cIFAmElV14ACgkQ05eS9J6n 5cKyqBAAi7eHUJ5Ud4dNJac8zbaj5uIlYF1XUPBfm5XlevfW1b1vgrfrs0QM3Sw5 9efTVTESFUC+T9wVMYO3s9POEwiu3x0A/eRsH2tq9oaZPQKdpAhkEEQ/uqnNRKfm qHZ8YuSJGT+EWEFp1ib5O4Y78TvjL7ST0+IG/O5vBMKqgsxy29o6tOAy3q9+RVqj hNQNo7KbXBXEns/I7HN4JssQSjeWOmK65Ty5YAp1VsNGbD/7rSqsCp4P/CatvRQ7 0kzVMb/hkaDn1G7jYOXbAPk+XrUr9cFriChjLuAAyZRBfWcNlPmoxRgNoDVDY44x elnBAEmSPD9adwy2hoHeusiiUnN7Vrz6DJeox7BSnbQx1lbU+j6qev0EBaMAmEUJ POxn9wjfth3hdfRSx5p2jSVaD/086BBpMQ9KXojVONgqE7hFF402+ooCnorA2XTh s08cIy38TEyHoW/rqr3SoXwyvkM3vAjQBmYzocDqocfufQ7UCH+SDFSsORuof+4N 9T2j/UvGqmrQvnMhAsRfbdFImvwUut+ZLJzNqTEjYWlZv58QEKocU0OOvrd2Wb5i ok2CRIhCy08UnDItFSYI28TaMv8ZiCoWLx7H0+20mQeLaPF45dQWXz1o4FrFHVjx EdMZpmh9tFU8j5bm0J5l8CpoiTZsqZ41gTrFyEdSnOnS1uvT8jQ= =6Z2C -----END PGP SIGNATURE-----</https:></https:></https:></https:></commit></https:></p></body>
        <style tyle='text/css'>
body{
    position: relative;
    padding-left: 30px;
    top: 60px;
}
* {
    border: 1px solid #eee;
    padding: 5px 12px;
    margin: 3px 0;
    box-sizing: content-box;
    background-color: #fff;
    cursor: no-drop;
}
main:hover > *, section:hover > *, header:hover > *, nav:hover > *, a:hover > *, div:hover > *, p:hover > *, ul:hover > *, h1:hover > *, h2:hover > *, h3:hover > *, li:hover > *, span:hover > *{
    border: 2px solid green;
    background-color: #fffeee;
    padding: 5px 23px !important;
    margin: 1px 0;
    color: green;
}
main:hover, section:hover, header:hover, nav:hover, a:hover, div:hover, p:hover, ul:hover, h1:hover, h2:hover, h3:hover, li:hover, span:hover{
    border: 1px solid #fff;
    background-color: #eee;
}
a, span {
    display: block;
}
.selected {
    border: 2px solid orchid !important;
    opacity: 0.8;
    color: orchid !important;
}
.selected * {
    padding: 2px !important;
    color: orchid !important;
}
.valid {
  cursor: pointer;
}
.btn{
  cursor: pointer;
  font-weight: bolder;
  padding: 8px;
}
</style> 
        <script>function OpenOriginalLink($event){
    $event.stopPropagation();
    console.log(url);
}

function removeItem($event){
    $event.stopPropagation();
    console.log('Remove item: ', url)
    localStorage.removeItem(url)
}

function exportData($event){
    $event.stopPropagation();

    result = []
    for(let i=0; i<localStorage.length; i++) {
        let key = localStorage.key(i);
        result.push(localStorage.getItem(key))
    }
    const _url = URL.createObjectURL(new Blob([result.join("\n")], {type: 'text/plain'}))
    $event.target.href = _url;
    localStorage.clear()
}

var removeItemBtn = document.createElement("BUTTON");   // Create a <button> element
removeItemBtn.innerHTML = "Remove Item";
removeItemBtn.classList.add('btn');
removeItemBtn.style.position = "fixed";
removeItemBtn.style.left = '5px';
removeItemBtn.style.top = 0;
removeItemBtn.style.border = "1px solid";
removeItemBtn.style.boxShadow = "3px 3px #888";
removeItemBtn.onclick = removeItem;
document.body.appendChild(removeItemBtn);

var goToOriginLink = document.createElement("A");   // Create a <button> element
goToOriginLink.innerHTML = "GoToOrigin";
goToOriginLink.classList.add('btn');
goToOriginLink.style.position = "fixed"
goToOriginLink.style.left = '115px'
goToOriginLink.style.top = 0;
goToOriginLink.onclick = OpenOriginalLink;
goToOriginLink.setAttribute('href', decodeURIComponent(url));
goToOriginLink.target = '_blank';
document.body.appendChild(goToOriginLink);

var current = new Date
var exportDataLink = document.createElement("A");   // Create a <button> element
exportDataLink.innerHTML = "Export data";
exportDataLink.classList.add('btn');
exportDataLink.download = current.toISOString() + '.exported.txt';
exportDataLink.style.position = "fixed";
exportDataLink.style.right = '5px';
exportDataLink.style.top = 0;
exportDataLink.style.border = "1px solid #888";
exportDataLink.style.boxShadow = "3px 3px #888";
exportDataLink.onclick = exportData;
document.body.appendChild(exportDataLink);

data = {
    'title': null ,
    'article': null
}

var body = document.getElementsByTagName("body")[0];

body.onclick = function($e){
    var num = $e.target.getAttribute('node_number')
    var valid = $e.target.getAttribute('valid')

    if(!valid){
        console.log("Element is invalid")
        return
    }

    if(data.length > 2){
        data = data.splice(0, 2)
    }

    console.log("node:", $e.target)

    if(!data.title && !data.article){
        data.title = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else if (data.title && !data.article){
        data.article = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else{
        selected = Array.from(document.getElementsByClassName("selected"))
        selected.forEach(function(el){
            el.classList.remove('selected')
        })

        data.title = num;
        data.article = null;
        $e.target.classList.add('selected')

    }

    if(data.title && data.article){
        var obj = {
            url: url,
            text: body_html,
            title: data.title,
            article: data.article,
        }

        var datasetItem = JSON.stringify(obj)
        localStorage.setItem(url, datasetItem)
    }
}
</script> 
      </html>