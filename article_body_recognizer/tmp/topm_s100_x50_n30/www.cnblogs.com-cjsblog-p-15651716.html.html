<!DOCTYPE html>
<html>
<head>

      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

        <script> var url = encodeURIComponent('https://www.cnblogs.com/cjsblog/p/15651716.html');</script>

        <script> var body_html = 'PGJvZHkgPiA8ZGl2ID4gIDwvZGl2PiA8ZGl2ID4gPGRpdiA+IDxkaXYgPiA8aDE+PGEgPueLguS5seeahOi0teWFrOWtkDwvYT4gPC9oMT4gPGgyPuS4uuS9oO+8jOWNg+WNg+S4h+S4h+mBje+8gTwvaDI+IDwvZGl2PiA8ZGl2ID4gPHVsID4gPGxpPjxhID4g5Y2a5a6i5ZutPC9hPiA8L2xpPiA8bGk+IDxhID4g6aaW6aG1PC9hPiA8L2xpPiA8bGk+IDxhID4g5paw6ZqP56yUPC9hPiA8L2xpPiA8bGk+IDxhID4g6IGU57O7PC9hPjwvbGk+IDxsaT4gPGEgPiDorqLpmIU8L2E+IDwvbGk+IDxsaT4gPGEgPiDnrqHnkIY8L2E+IDwvbGk+IDwvdWw+IDwvZGl2PiA8L2Rpdj4gPGRpdiA+IDxkaXYgPiA8ZGl2ID4gPGRpdiA+IDxkaXYgPiA8ZGl2ID4gPGgxID4gPGEgPiBTcHJpbmcgU2VjdXJpdHkg5Z+65LqOVVJM55qE5p2D6ZmQ5Yik5patIDwvYT4gPC9oMT4gPGRpdiA+IDxkaXYgPiA8cCA+MS4gRmlsdGVyU2VjdXJpdHlJbnRlcmNlcHRvciDmupDnoIHpmIXor7s8L3A+IDxwPm9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkud2ViLmFjY2Vzcy5pbnRlcmNlcHQuRmlsdGVyU2VjdXJpdHlJbnRlcmNlcHRvcjwvcD4gPHAgPumAmui/h+i/h+a7pOWZqOWunueOsOWvuUhUVFDotYTmupDov5vooYzlronlhajlpITnkIbjgII8L3A+IDxwPuivpeWuieWFqOaLpuaIquWZqOaJgOmcgOeahCBTZWN1cml0eU1ldGFkYXRhU291cmNlIOexu+Wei+S4uiBGaWx0ZXJJbnZvY2F0aW9uU2VjdXJpdHlNZXRhZGF0YVNvdXJjZeOAgsKgPC9wPiA8cD5kb0ZpbHRlcuaWueazleS4reebtOaOpeiwg+eUqGludm9rZeaWueazlTwvcD4gPHAgPuWfuuacrOmDveaYr+iwg+eUqOeItuexu+eahOaWueazle+8jOmCo+S4i+mdouWwsemHjeeCueeci+S4i+eItuexuyBBYnN0cmFjdFNlY3VyaXR5SW50ZXJjZXB0b3LCoOS4reebuOWFs+aWueazlTwvcD4gPHAgPuS4uuWuieWFqOWvueixoeWunueOsOWuieWFqOaLpuaIqueahOaKveixoeexu+OAgjwvcD4gPHA+QWJzdHJhY3RTZWN1cml0eUludGVyY2VwdG9yIOWwhuehruS/neWuieWFqOaLpuaIquWZqOeahOato+ehruWQr+WKqOmFjee9ruOAgiDlroPov5jlsIblrp7njrDlr7nlronlhajlr7nosaHosIPnlKjnmoTmraPnoa7lpITnkIbvvIzljbPvvJo8L3A+IDxvbD4gPGxpPuS7jiBTZWN1cml0eUNvbnRleHRIb2xkZXIg6I635Y+WIEF1dGhlbnRpY2F0aW9uIOWvueixoeOAgjwvbGk+IDxsaT7pgJrov4flnKhTZWN1cml0eU1ldGFkYXRhU291cmNl5Lit5p+l5om+5a6J5YWo5a+56LGh6K+35rGC77yM56Gu5a6a6K+35rGC5piv5LiO5a6J5YWo6LCD55So6L+Y5piv5YWs5YWx6LCD55So55u45YWz77yIUFPvvJrnroDljZXlnLDmnaXorrLvvIzlsLHmmK/nnIvkuIDkuIvor7fmsYLnmoTotYTmupDmmK/kuI3mmK/lj5fkv53miqTnmoTvvIzlj5fkv53miqTnmoTlsLHmmK/lronlhajosIPnlKjvvIzlsLHopoHmnYPpmZDvvIzkuI3lj5fkv53miqTnmoTlsLHkuI3pnIDopoHmnYPpmZDlsLHlj6/ku6Xorr/pl67vvInjgII8L2xpPiA8bGk+5a+55LqO5Y+X5L+d5oqk55qE6LCD55So77yI5pyJ5LiA5Liq55So5LqO5a6J5YWo5a+56LGh6LCD55So55qEIENvbmZpZ0F0dHJpYnV0ZXMg5YiX6KGo77yJ77yaPG9sPiA8bGk+5aaC5p6cIEF1dGhlbnRpY2F0aW9uLmlzQXV0aGVudGljYXRlZCgpIOi/lOWbniBmYWxzZe+8jOaIluiAhSBhbHdheXNSZWF1dGhlbnRpY2F0ZSDkuLogdHJ1Ze+8jOWImeagueaNrumFjee9rueahCBBdXRoZW50aWNhdGlvbk1hbmFnZXIg5a+56K+35rGC6L+b6KGM6Lqr5Lu96aqM6K+B44CCIOmAmui/h+i6q+S7vemqjOivgeWQju+8jOWwhiBTZWN1cml0eUNvbnRleHRIb2xkZXIg5LiK55qEIEF1dGhlbnRpY2F0aW9uIOWvueixoeabv+aNouS4uui/lOWbnuWAvOOAgjwvbGk+IDxsaT7CoOagueaNrumFjee9rueahEFjY2Vzc0RlY2lzaW9uTWFuYWdlcuaOiOadg+ivt+axguOAgjwvbGk+IDxsaT7pgJrov4fphY3nva7nmoRSdW5Bc01hbmFnZXLmiafooYzku7vkvZVydW4tYXPmm7/mjaLjgII8L2xpPiA8bGk+5bCG5o6n5Yi25p2D5Lyg6YCS5Zue5YW35L2T55qE5a2Q57G777yM5a6D5a6e6ZmF5LiK5bCG57un57ut5omn6KGM5a+56LGh44CC6L+U5Zue5LiA5LiqIEludGVyY2VwdG9yU3RhdHVzVG9rZW4g5Lul5L6/5Zyo5a2Q57G75a6M5oiQ5a+56LGh55qE5omn6KGM5ZCO77yM5YW2IGZpbmFsbHkg5a2Q5Y+l5Y+v5Lul56Gu5L+dIEFic3RyYWN0U2VjdXJpdHlJbnRlcmNlcHRvciDooqvosIPnlKjlubbkvb/nlKggZmluYWxseUludm9jYXRpb24oSW50ZXJjZXB0b3JTdGF0dXNUb2tlbikg5q2j56Gu5aSE55CG44CCPC9saT4gPGxpPuWFt+S9k+eahOWtkOexu+WwhumAmui/hyBhZnRlckludm9jYXRpb24oSW50ZXJjZXB0b3JTdGF0dXNUb2tlbiwgT2JqZWN0KSDmlrnms5Xph43mlrDosIPnlKggQWJzdHJhY3RTZWN1cml0eUludGVyY2VwdG9y44CCPC9saT4gPGxpPuWmguaenCBSdW5Bc01hbmFnZXIg5pu/5o2i5LqGIEF1dGhlbnRpY2F0aW9uIOWvueixoe+8jOWImeWwhiBTZWN1cml0eUNvbnRleHRIb2xkZXIg6L+U5Zue5Yiw6LCD55SoIEF1dGhlbnRpY2F0aW9uTWFuYWdlciDlkI7lrZjlnKjnmoTlr7nosaHjgII8L2xpPiA8bGk+5aaC5p6c5a6a5LmJ5LqGQWZ0ZXJJbnZvY2F0aW9uTWFuYWdlcu+8jOWImeiwg+eUqOWug+W5tuWFgeiuuOWug+abv+aNouWwhuimgei/lOWbnue7meiwg+eUqOiAheeahOWvueixoeOAgjwvbGk+IDwvb2w+PC9saT4gPGxpID7CoOWvueS6juWFrOW8gOeahOiwg+eUqO+8iOWuieWFqOWvueixoeiwg+eUqOayoeaciSBDb25maWdBdHRyaWJ1dGVz77yJ77yaPG9sPiA8bGk+5aaC5LiK5omA6L+w77yM5YW35L2T55qE5a2Q57G75bCG6L+U5Zue5LiA5LiqIEludGVyY2VwdG9yU3RhdHVzVG9rZW7vvIzlnKjmiafooYzlrozlronlhajlr7nosaHlkI7vvIzor6UgSW50ZXJjZXB0b3JTdGF0dXNUb2tlbiDpmo/lkI7ooqvph43mlrDlkYjnjrDnu5kgQWJzdHJhY3RTZWN1cml0eUludGVyY2VwdG9y44CCIEFic3RyYWN0U2VjdXJpdHlJbnRlcmNlcHRvciDlnKjlroPnmoQgYWZ0ZXJJbnZvY2F0aW9uKEludGVyY2VwdG9yU3RhdHVzVG9rZW4sIE9iamVjdCkg6KKr6LCD55So5pe25LiN5Lya6YeH5Y+W6L+b5LiA5q2l55qE6KGM5Yqo44CCPC9saT4gPC9vbD48L2xpPiA8bGk+5o6n5Yi25YaN5qyh6L+U5Zue5Yiw5YW35L2T55qE5a2Q57G777yM5Lul5Y+K5bqU6K+l6L+U5Zue57uZ6LCD55So6ICF55qE5a+56LGh44CC54S25ZCO5a2Q57G75Lya5bCG6K+l57uT5p6c5oiW5byC5bi46L+U5Zue57uZ5Y6f5aeL6LCD55So6ICF44CCPC9saT4gPC9vbD4gPHAgPuS4i+mdouWFt+S9k+adpeecizwvcD4gPHAgPuS7jui/memHjOaIkeS7rOWPr+S7peefpemBk+i/lOWbnm51bGzlkoznqbrpm4blkIjmmK/kuIDmoLfnmoTjgII8L3A+IDxwID48c3BhbiA+5o6l5LiL5p2l55yL5o6I5p2DPC9zcGFuPjwvcD4gPHAgPui/meaYr+aIkeS7rOimgemHjeeCueWFs+azqOeahO+8jOWPr+S7peeci+WIsO+8jOaOiOadg+mdoOeahOaYr8KgYWNjZXNzRGVjaXNpb25NYW5hZ2VyLmRlY2lkZShhdXRoZW50aWNhdGVkLCBvYmplY3QsIGF0dHJpYnV0ZXMpwqA8L3A+IDxwPuWboOatpO+8jOaIkeS7rOaDs+imgeWunueOsOiHquW3seeahOWfuuS6juivt+axglVybOeahOaOiOadg+WPqumcgOiHquWumuS5ieS4gOS4qiBBY2Nlc3NEZWNpc2lvbk1hbmFnZXLCoOWNs+WPrzwvcD4gPHA+5o6l5LiL5p2l77yM5oiR5Lus5p2l5YW35L2T5a6e546w5LiA5LiLPC9wPiA8cCA+Mi4g6Ieq5a6a5LmJ5Z+65LqOdXJs55qE5o6I5p2DPC9wPiA8cD7lhYjmiopTcHJpbmcgU2VjdXJpdHnmjojmnYPnmoTlpKfoh7TmtYHnqIvmtYHnqIvmkYblnKjov5nlhL/vvJo8L3A+IDxwPuiHquWumuS5iUZpbHRlckludm9jYXRpb25TZWN1cml0eU1ldGFkYXRhU291cmNlPC9wPiA8ZGl2ID4gPHByZT48Y29kZSA+cGFja2FnZSBjb20uZXhhbXBsZS5zZWN1cml0eS5jb3JlOyBpbXBvcnQgY29tLmV4YW1wbGUuc2VjdXJpdHkuc2VydmljZS5TeXNQZXJtaXNzaW9uU2VydmljZTsgaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDsgaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuYWNjZXNzLkNvbmZpZ0F0dHJpYnV0ZTsgaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuYWNjZXNzLlNlY3VyaXR5Q29uZmlnOyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS53ZWIuRmlsdGVySW52b2NhdGlvbjsgaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkud2ViLmFjY2Vzcy5pbnRlcmNlcHQuRmlsdGVySW52b2NhdGlvblNlY3VyaXR5TWV0YWRhdGFTb3VyY2U7IGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnN0ZXJlb3R5cGUuQ29tcG9uZW50OyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay51dGlsLkFudFBhdGhNYXRjaGVyOyBpbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsgaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOyBpbXBvcnQgamF2YS51dGlsLkxpc3Q7IGltcG9ydCBqYXZhLnV0aWwuTWFwOyAvKiogKiBAQXV0aG9yIENoZW5nSmlhblNoZW5nICogQERhdGUgMjAyMS8xMi8yICovIEBDb21wb25lbnQgcHVibGljIGNsYXNzIE15RmlsdGVyU2VjdXJpdHlNZXRhZGF0YVNvdXJjZSBpbXBsZW1lbnRzIEZpbHRlckludm9jYXRpb25TZWN1cml0eU1ldGFkYXRhU291cmNlIHsgQEF1dG93aXJlZCBwcml2YXRlIFN5c1Blcm1pc3Npb25TZXJ2aWNlIHN5c1Blcm1pc3Npb25TZXJ2aWNlOyBwcml2YXRlIGZpbmFsIEFudFBhdGhNYXRjaGVyIGFudFBhdGhNYXRjaGVyID0gbmV3IEFudFBhdGhNYXRjaGVyKCk7IEBPdmVycmlkZSBwdWJsaWMgQ29sbGVjdGlvbiZsdDtDb25maWdBdHRyaWJ1dGUmZ3Q7IGdldEF0dHJpYnV0ZXMoT2JqZWN0IG9iamVjdCkgdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB7IEZpbHRlckludm9jYXRpb24gZmkgPSAoRmlsdGVySW52b2NhdGlvbikgb2JqZWN0OyBTdHJpbmcgdXJsID0gZmkuZ2V0UmVxdWVzdFVybCgpOyBTdHJpbmcgaHR0cE1ldGhvZCA9IGZpLmdldFJlcXVlc3QoKS5nZXRNZXRob2QoKTsgTGlzdCZsdDtDb25maWdBdHRyaWJ1dGUmZ3Q7IGF0dHJpYnV0ZXMgPSBuZXcgQXJyYXlMaXN0Jmx0OyZndDsoKTsgTWFwJmx0O1N0cmluZywgU3RyaW5nJmd0OyB1cmxSb2xlTWFwID0gc3lzUGVybWlzc2lvblNlcnZpY2UuZ2V0QWxsVXJsUm9sZSgpOyBmb3IgKE1hcC5FbnRyeSZsdDtTdHJpbmcsIFN0cmluZyZndDsgZW50cnkgOiB1cmxSb2xlTWFwLmVudHJ5U2V0KCkpIHsgaWYgKGFudFBhdGhNYXRjaGVyLm1hdGNoKGVudHJ5LmdldEtleSgpLCB1cmwpKSB7IHJldHVybiBTZWN1cml0eUNvbmZpZy5jcmVhdGVMaXN0KGVudHJ5LmdldFZhbHVlKCkpOyB9IH0gLy8g6L+U5ZuebnVsbOWSjOepuuWIl+ihqOaYr+S4gOagt+eahO+8jOmDveihqOekuuW9k+WJjeiuv+mXrueahOi1hOa6kOS4jemcgOimgeadg+mZkO+8jOaJgOacieS6uumDveWPr+S7peiuv+mXriByZXR1cm4gYXR0cmlidXRlczsgLy8gcmV0dXJuIG51bGw7IH0gQE92ZXJyaWRlIHB1YmxpYyBDb2xsZWN0aW9uJmx0O0NvbmZpZ0F0dHJpYnV0ZSZndDsgZ2V0QWxsQ29uZmlnQXR0cmlidXRlcygpIHsgcmV0dXJuIG51bGw7IH0gQE92ZXJyaWRlIHB1YmxpYyBib29sZWFuIHN1cHBvcnRzKENsYXNzJmx0Oz8mZ3Q7IGNsYXp6KSB7IHJldHVybiBGaWx0ZXJJbnZvY2F0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oY2xhenopOyB9IH08L2NvZGU+PC9wcmU+IDwvZGl2PiA8cD7ov5nph4zpnIDopoHor7TmmI7kuIDkuIvvvIzlhbblrp5TcHJpbmcgU2VjdXJpdHnph4zpnaLor7TnmoRyb2xl5LiN5LiA5a6a6KGo56S655qE5piv5oiR5Lus6Ieq5bex5bu655qE6YKj5Liq6KeS6Imy6KGo77yM5oiR5Lus5Y+v5Lul6L+Z5qC355CG6Kej77yM5bCx5piv5a6D6L+Z6YeM55qE5omA6LCTcm9sZeWPquaYr+S4gOS4quadg+mZkOagh+ivhuOAguaIkeS7rOWcqOW7uuihqOeahOaXtuWAme+8jOmAmuW4uOacgOWfuuacrOeahOaYrzXlvKDooajvvIjnlKjmiLfooajjgIHop5LoibLooajjgIHmnYPpmZDooajjgIHnlKjmiLfop5LoibLlhbPns7vooajjgIHop5LoibLmnYPpmZDlhbPns7vooajvvInvvIzmiJHku6zlj6/ku6Xmiorlj5fkv53miqTnmoTotYTmupDvvIjpgJrluLjmmK/kuIDkuKp1cmzvvInkuI7op5LoibLlhbPogZTotbfmnaXvvIzlu7rnq4vlk6rkupvop5LoibLlj6/ku6Xorr/pl67lk6rkupvotYTmupDvvIzkuZ/lj6/ku6Xnm7TmjqXliKTmlq3otYTmupDnmoTmnYPpmZDvvIjpgJrluLjmmK/mnYPpmZDnvJbnoIEv5qCH6K+G77yJ44CCPC9wPiA8cCA+5Y+q6KaB5pyJ6L+Z5Liq5YWz57O777yM5Ymp5LiL55qE5bCx5piv5YaZ5rOV5LiN5ZCM6ICM5bey44CC5aaC5p6c5L2g5oqKcm9sZeeQhuino+aIkOi1hOa6kOeahOadg+mZkOagh+ivhueahOivne+8jOmCo+S5iOi/lOWbnueahENvbGxlY3Rpb24mbHQ7Q29uZmlnQXR0cmlidXRlJmd0O+S4reWwseacgOWkmuacieS4gOS4quWFg+e0oO+8jOWmguaenOeQhuino+aIkOinkuiJsueahOivne+8jOmCo+S5iOWPr+iDveacieWkmuS4quWFg+e0oOOAguWwsei/meS5iOeCueWEv+S4nOilv++8jOWGmeazleS4jeWQjOiAjOW3su+8jOacrOi0qOaYr+S4gOagt+eahOOAgjwvcD4gPHA+6Ieq5a6a5LmJQWNjZXNzRGVjaXNpb25NYW5hZ2VyPC9wPiA8ZGl2ID4gPHByZT48Y29kZSA+cGFja2FnZSBjb20uZXhhbXBsZS5zZWN1cml0eS5jb3JlOyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5hY2Nlc3MuQWNjZXNzRGVjaXNpb25NYW5hZ2VyOyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5hY2Nlc3MuQWNjZXNzRGVuaWVkRXhjZXB0aW9uOyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5hY2Nlc3MuQ29uZmlnQXR0cmlidXRlOyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5hdXRoZW50aWNhdGlvbi5JbnN1ZmZpY2llbnRBdXRoZW50aWNhdGlvbkV4Y2VwdGlvbjsgaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuY29yZS5BdXRoZW50aWNhdGlvbjsgaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuY29yZS5HcmFudGVkQXV0aG9yaXR5OyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zdGVyZW90eXBlLkNvbXBvbmVudDsgaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOyAvKiogKiBAQXV0aG9yIENoZW5nSmlhblNoZW5nICogQERhdGUgMjAyMS8xMi8yICovIEBDb21wb25lbnQgcHVibGljIGNsYXNzIE15QWNjZXNzRGVjaXNpb25NYW5hZ2VyIGltcGxlbWVudHMgQWNjZXNzRGVjaXNpb25NYW5hZ2VyIHsgQE92ZXJyaWRlIHB1YmxpYyB2b2lkIGRlY2lkZShBdXRoZW50aWNhdGlvbiBhdXRoZW50aWNhdGlvbiwgT2JqZWN0IG9iamVjdCwgQ29sbGVjdGlvbiZsdDtDb25maWdBdHRyaWJ1dGUmZ3Q7IGNvbmZpZ0F0dHJpYnV0ZXMpIHRocm93cyBBY2Nlc3NEZW5pZWRFeGNlcHRpb24sIEluc3VmZmljaWVudEF1dGhlbnRpY2F0aW9uRXhjZXB0aW9uIHsgQ29sbGVjdGlvbiZsdDs/IGV4dGVuZHMgR3JhbnRlZEF1dGhvcml0eSZndDsgYXV0aG9yaXRpZXMgPSBhdXRoZW50aWNhdGlvbi5nZXRBdXRob3JpdGllcygpOyBTeXN0ZW0ub3V0LnByaW50bG4oYXV0aG9yaXRpZXMpOyBTeXN0ZW0ub3V0LnByaW50bG4oY29uZmlnQXR0cmlidXRlcyk7IC8vIOafpeeci+W9k+WJjeeUqOaIt+aYr+WQpuacieWvueW6lOeahOadg+mZkOiuv+mXruivpeS/neaKpOi1hOa6kCBmb3IgKENvbmZpZ0F0dHJpYnV0ZSBhdHRyaWJ1dGUgOiBjb25maWdBdHRyaWJ1dGVzKSB7IGZvciAoR3JhbnRlZEF1dGhvcml0eSBhdXRob3JpdHkgOiBhdXRob3JpdGllcykgeyBpZiAoYXV0aG9yaXR5LmdldEF1dGhvcml0eSgpLmVxdWFscyhhdHRyaWJ1dGUuZ2V0QXR0cmlidXRlKCkpKSB7IHJldHVybjsgfSB9IH0gdGhyb3cgbmV3IEFjY2Vzc0RlbmllZEV4Y2VwdGlvbigiQWNjZXNzIGlzIGRlbmllZCIpOyB9IEBPdmVycmlkZSBwdWJsaWMgYm9vbGVhbiBzdXBwb3J0cyhDb25maWdBdHRyaWJ1dGUgYXR0cmlidXRlKSB7IHJldHVybiB0cnVlOyB9IEBPdmVycmlkZSBwdWJsaWMgYm9vbGVhbiBzdXBwb3J0cyhDbGFzcyZsdDs/Jmd0OyBjbGF6eikgeyByZXR1cm4gdHJ1ZTsgfSB9IDwvY29kZT48L3ByZT4gPC9kaXY+IDxwPmRlY2lkZeaWueazleeahOS4ieS4quWPguaVsO+8jOS+neasoeihqOekuu+8mjwvcD4gPHVsPiA8bGk+6LCD55So6ICF77yI6Z2e56m677yJPC9saT4gPGxpPuiiq+iwg+eUqOeahOWuieWFqOWvueixoTwvbGk+IDxsaT7kuI7ooqvosIPnlKjnmoTlronlhajlr7nosaHlhbPogZTnmoTphY3nva7lsZ7mgKc8L2xpPiA8L3VsPiA8cD7phY3nva5XZWJTZWN1cml0eUNvbmZpZzwvcD4gPGRpdiA+IDxwcmU+PGNvZGUgPnBhY2thZ2UgY29tLmV4YW1wbGUuc2VjdXJpdHkuY29uZmlnOyBpbXBvcnQgY29tLmV4YW1wbGUuc2VjdXJpdHkuY29yZS5NeUFjY2Vzc0RlY2lzaW9uTWFuYWdlcjsgaW1wb3J0IGNvbS5leGFtcGxlLnNlY3VyaXR5LmNvcmUuTXlGaWx0ZXJTZWN1cml0eU1ldGFkYXRhU291cmNlOyBpbXBvcnQgY29tLmV4YW1wbGUuc2VjdXJpdHkuY29yZS5NeVVzZXJEZXRhaWxzU2VydmljZTsgaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDsgaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuY29udGV4dC5hbm5vdGF0aW9uLkJlYW47IGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmNvbnRleHQuYW5ub3RhdGlvbi5Db25maWd1cmF0aW9uOyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb25maWcuYW5ub3RhdGlvbi5PYmplY3RQb3N0UHJvY2Vzc29yOyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb25maWcuYW5ub3RhdGlvbi5hdXRoZW50aWNhdGlvbi5idWlsZGVycy5BdXRoZW50aWNhdGlvbk1hbmFnZXJCdWlsZGVyOyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb25maWcuYW5ub3RhdGlvbi53ZWIuYnVpbGRlcnMuSHR0cFNlY3VyaXR5OyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb25maWcuYW5ub3RhdGlvbi53ZWIuY29uZmlndXJhdGlvbi5XZWJTZWN1cml0eUNvbmZpZ3VyZXJBZGFwdGVyOyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jcnlwdG8uYmNyeXB0LkJDcnlwdFBhc3N3b3JkRW5jb2RlcjsgaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuY3J5cHRvLnBhc3N3b3JkLlBhc3N3b3JkRW5jb2RlcjsgaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkud2ViLmFjY2Vzcy5pbnRlcmNlcHQuRmlsdGVyU2VjdXJpdHlJbnRlcmNlcHRvcjsgLyoqICogQEF1dGhvciBDaGVuZ0ppYW5TaGVuZyAqIEBEYXRlIDIwMjEvMTIvNiAqLyBAQ29uZmlndXJhdGlvbiBwdWJsaWMgY2xhc3MgV2ViU2VjdXJpdHlDb25maWcgZXh0ZW5kcyBXZWJTZWN1cml0eUNvbmZpZ3VyZXJBZGFwdGVyIHsgQEF1dG93aXJlZCBwcml2YXRlIE15VXNlckRldGFpbHNTZXJ2aWNlIG15VXNlckRldGFpbHNTZXJ2aWNlOyBAQXV0b3dpcmVkIHByaXZhdGUgTXlBY2Nlc3NEZWNpc2lvbk1hbmFnZXIgbXlBY2Nlc3NEZWNpc2lvbk1hbmFnZXI7IEBBdXRvd2lyZWQgcHJpdmF0ZSBNeUZpbHRlclNlY3VyaXR5TWV0YWRhdGFTb3VyY2UgbXlGaWx0ZXJTZWN1cml0eU1ldGFkYXRhU291cmNlOyBAT3ZlcnJpZGUgcHJvdGVjdGVkIHZvaWQgY29uZmlndXJlKEF1dGhlbnRpY2F0aW9uTWFuYWdlckJ1aWxkZXIgYXV0aCkgdGhyb3dzIEV4Y2VwdGlvbiB7IGF1dGgudXNlckRldGFpbHNTZXJ2aWNlKG15VXNlckRldGFpbHNTZXJ2aWNlKS5wYXNzd29yZEVuY29kZXIocGFzc3dvcmRFbmNvZGVyKCkpOyB9IEBPdmVycmlkZSBwcm90ZWN0ZWQgdm9pZCBjb25maWd1cmUoSHR0cFNlY3VyaXR5IGh0dHApIHRocm93cyBFeGNlcHRpb24geyBodHRwLmZvcm1Mb2dpbigpIC5hbmQoKSAuYXV0aG9yaXplUmVxdWVzdHMoKSAud2l0aE9iamVjdFBvc3RQcm9jZXNzb3IobmV3IE9iamVjdFBvc3RQcm9jZXNzb3ImbHQ7RmlsdGVyU2VjdXJpdHlJbnRlcmNlcHRvciZndDsoKSB7IEBPdmVycmlkZSBwdWJsaWMgJmx0O08gZXh0ZW5kcyBGaWx0ZXJTZWN1cml0eUludGVyY2VwdG9yJmd0OyBPIHBvc3RQcm9jZXNzKE8gb2JqZWN0KSB7IG9iamVjdC5zZXRTZWN1cml0eU1ldGFkYXRhU291cmNlKG15RmlsdGVyU2VjdXJpdHlNZXRhZGF0YVNvdXJjZSk7IG9iamVjdC5zZXRBY2Nlc3NEZWNpc2lvbk1hbmFnZXIobXlBY2Nlc3NEZWNpc2lvbk1hbmFnZXIpOyByZXR1cm4gb2JqZWN0OyB9IH0pIC5hbnlSZXF1ZXN0KCkuYXV0aGVudGljYXRlZCgpOyB9IEBCZWFuIHB1YmxpYyBQYXNzd29yZEVuY29kZXIgcGFzc3dvcmRFbmNvZGVyKCkgeyByZXR1cm4gbmV3IEJDcnlwdFBhc3N3b3JkRW5jb2RlcigpOyB9IH08L2NvZGU+PC9wcmU+IDwvZGl2PiA8cD7lhbblroPkuI3ph43opoHnmoTlsLHnm7TmjqXotLTlh7rmnaXkuoY8L3A+IDxwPnBvbS54bWw8L3A+IDxkaXYgPiA8cHJlPjxjb2RlID4mbHQ7P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCI/Jmd0OyAmbHQ7cHJvamVjdCB4bWxucz0iaHR0cDovL21hdmVuLmFwYWNoZS5vcmcvUE9NLzQuMC4wIiB4bWxuczp4c2k9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIiB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHA6Ly9tYXZlbi5hcGFjaGUub3JnL1BPTS80LjAuMCBodHRwczovL21hdmVuLmFwYWNoZS5vcmcveHNkL21hdmVuLTQuMC4wLnhzZCImZ3Q7ICZsdDttb2RlbFZlcnNpb24mZ3Q7NC4wLjAmbHQ7L21vZGVsVmVyc2lvbiZndDsgJmx0O3BhcmVudCZndDsgJmx0O2dyb3VwSWQmZ3Q7b3JnLnNwcmluZ2ZyYW1ld29yay5ib290Jmx0Oy9ncm91cElkJmd0OyAmbHQ7YXJ0aWZhY3RJZCZndDtzcHJpbmctYm9vdC1zdGFydGVyLXBhcmVudCZsdDsvYXJ0aWZhY3RJZCZndDsgJmx0O3ZlcnNpb24mZ3Q7Mi42LjEmbHQ7L3ZlcnNpb24mZ3Q7ICZsdDtyZWxhdGl2ZVBhdGgvJmd0OyAmbHQ7IS0tIGxvb2t1cCBwYXJlbnQgZnJvbSByZXBvc2l0b3J5IC0tJmd0OyAmbHQ7L3BhcmVudCZndDsgJmx0O2dyb3VwSWQmZ3Q7Y29tLmV4YW1wbGUmbHQ7L2dyb3VwSWQmZ3Q7ICZsdDthcnRpZmFjdElkJmd0O3NlY3VyaXR5LWRlbW8mbHQ7L2FydGlmYWN0SWQmZ3Q7ICZsdDt2ZXJzaW9uJmd0OzAuMC4xLVNOQVBTSE9UJmx0Oy92ZXJzaW9uJmd0OyAmbHQ7bmFtZSZndDtzZWN1cml0eS1kZW1vJmx0Oy9uYW1lJmd0OyAmbHQ7cHJvcGVydGllcyZndDsgJmx0O2phdmEudmVyc2lvbiZndDsxLjgmbHQ7L2phdmEudmVyc2lvbiZndDsgJmx0Oy9wcm9wZXJ0aWVzJmd0OyAmbHQ7ZGVwZW5kZW5jaWVzJmd0OyAmbHQ7ZGVwZW5kZW5jeSZndDsgJmx0O2dyb3VwSWQmZ3Q7b3JnLnNwcmluZ2ZyYW1ld29yay5ib290Jmx0Oy9ncm91cElkJmd0OyAmbHQ7YXJ0aWZhY3RJZCZndDtzcHJpbmctYm9vdC1zdGFydGVyLWRhdGEtanBhJmx0Oy9hcnRpZmFjdElkJmd0OyAmbHQ7L2RlcGVuZGVuY3kmZ3Q7ICZsdDtkZXBlbmRlbmN5Jmd0OyAmbHQ7Z3JvdXBJZCZndDtvcmcuc3ByaW5nZnJhbWV3b3JrLmJvb3QmbHQ7L2dyb3VwSWQmZ3Q7ICZsdDthcnRpZmFjdElkJmd0O3NwcmluZy1ib290LXN0YXJ0ZXItc2VjdXJpdHkmbHQ7L2FydGlmYWN0SWQmZ3Q7ICZsdDsvZGVwZW5kZW5jeSZndDsgJmx0O2RlcGVuZGVuY3kmZ3Q7ICZsdDtncm91cElkJmd0O29yZy5zcHJpbmdmcmFtZXdvcmsuYm9vdCZsdDsvZ3JvdXBJZCZndDsgJmx0O2FydGlmYWN0SWQmZ3Q7c3ByaW5nLWJvb3Qtc3RhcnRlci13ZWImbHQ7L2FydGlmYWN0SWQmZ3Q7ICZsdDsvZGVwZW5kZW5jeSZndDsgJmx0O2RlcGVuZGVuY3kmZ3Q7ICZsdDtncm91cElkJmd0O215c3FsJmx0Oy9ncm91cElkJmd0OyAmbHQ7YXJ0aWZhY3RJZCZndDtteXNxbC1jb25uZWN0b3ItamF2YSZsdDsvYXJ0aWZhY3RJZCZndDsgJmx0O3Njb3BlJmd0O3J1bnRpbWUmbHQ7L3Njb3BlJmd0OyAmbHQ7L2RlcGVuZGVuY3kmZ3Q7ICZsdDtkZXBlbmRlbmN5Jmd0OyAmbHQ7Z3JvdXBJZCZndDtvcmcucHJvamVjdGxvbWJvayZsdDsvZ3JvdXBJZCZndDsgJmx0O2FydGlmYWN0SWQmZ3Q7bG9tYm9rJmx0Oy9hcnRpZmFjdElkJmd0OyAmbHQ7b3B0aW9uYWwmZ3Q7dHJ1ZSZsdDsvb3B0aW9uYWwmZ3Q7ICZsdDsvZGVwZW5kZW5jeSZndDsgJmx0O2RlcGVuZGVuY3kmZ3Q7ICZsdDtncm91cElkJmd0O29yZy5zcHJpbmdmcmFtZXdvcmsuYm9vdCZsdDsvZ3JvdXBJZCZndDsgJmx0O2FydGlmYWN0SWQmZ3Q7c3ByaW5nLWJvb3Qtc3RhcnRlci10ZXN0Jmx0Oy9hcnRpZmFjdElkJmd0OyAmbHQ7c2NvcGUmZ3Q7dGVzdCZsdDsvc2NvcGUmZ3Q7ICZsdDsvZGVwZW5kZW5jeSZndDsgJmx0O2RlcGVuZGVuY3kmZ3Q7ICZsdDtncm91cElkJmd0O29yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkmbHQ7L2dyb3VwSWQmZ3Q7ICZsdDthcnRpZmFjdElkJmd0O3NwcmluZy1zZWN1cml0eS10ZXN0Jmx0Oy9hcnRpZmFjdElkJmd0OyAmbHQ7c2NvcGUmZ3Q7dGVzdCZsdDsvc2NvcGUmZ3Q7ICZsdDsvZGVwZW5kZW5jeSZndDsgJmx0Oy9kZXBlbmRlbmNpZXMmZ3Q7ICZsdDtidWlsZCZndDsgJmx0O3BsdWdpbnMmZ3Q7ICZsdDtwbHVnaW4mZ3Q7ICZsdDtncm91cElkJmd0O29yZy5zcHJpbmdmcmFtZXdvcmsuYm9vdCZsdDsvZ3JvdXBJZCZndDsgJmx0O2FydGlmYWN0SWQmZ3Q7c3ByaW5nLWJvb3QtbWF2ZW4tcGx1Z2luJmx0Oy9hcnRpZmFjdElkJmd0OyAmbHQ7Y29uZmlndXJhdGlvbiZndDsgJmx0O2V4Y2x1ZGVzJmd0OyAmbHQ7ZXhjbHVkZSZndDsgJmx0O2dyb3VwSWQmZ3Q7b3JnLnByb2plY3Rsb21ib2smbHQ7L2dyb3VwSWQmZ3Q7ICZsdDthcnRpZmFjdElkJmd0O2xvbWJvayZsdDsvYXJ0aWZhY3RJZCZndDsgJmx0Oy9leGNsdWRlJmd0OyAmbHQ7L2V4Y2x1ZGVzJmd0OyAmbHQ7L2NvbmZpZ3VyYXRpb24mZ3Q7ICZsdDsvcGx1Z2luJmd0OyAmbHQ7L3BsdWdpbnMmZ3Q7ICZsdDsvYnVpbGQmZ3Q7ICZsdDsvcHJvamVjdCZndDsgPC9jb2RlPjwvcHJlPiA8L2Rpdj4gPHA+YXBwbGljYXRpb24ueW1sPC9wPiA8ZGl2ID4gPHByZT48Y29kZSA+c3ByaW5nOiBkYXRhc291cmNlOiB1cmw6IGpkYmM6bXlzcWw6Ly9sb2NhbGhvc3Q6MzMwNi9kZW1vMTI2P3NlcnZlclRpbWV6b25lPUFzaWEvU2hhbmdoYWljaGFyYWN0ZXJFbmNvZGluZz11dGY4dXNlU1NMPWZhbHNlIGRyaXZlci1jbGFzcy1uYW1lOiBjb20ubXlzcWwuY2ouamRiYy5Ecml2ZXIgdXNlcm5hbWU6IHJvb3QgcGFzc3dvcmQ6IDEyMzQ1NiBqcGE6IGRhdGFiYXNlOiBteXNxbCBzaG93LXNxbDogdHJ1ZSA8Y29kZT48L2NvZGU+PC9jb2RlPjwvcHJlPiA8L2Rpdj4gPHA+U3lzUGVybWlzc2lvbkVudGl0eS5qYXZhPC9wPiA8ZGl2ID4gPHByZT48Y29kZSA+cGFja2FnZSBjb20uZXhhbXBsZS5zZWN1cml0eS5lbnRpdHk7IGltcG9ydCBsb21ib2suR2V0dGVyOyBpbXBvcnQgbG9tYm9rLlNldHRlcjsgaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLio7IGltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsgLyoqICogQEF1dGhvciBDaGVuZ0ppYW5TaGVuZyAqIEBEYXRlIDIwMjEvMTIvNiAqLyBAR2V0dGVyIEBTZXR0ZXIgQEVudGl0eSBAVGFibGUobmFtZSA9ICJzeXNfcGVybWlzc2lvbiIpIHB1YmxpYyBjbGFzcyBTeXNQZXJtaXNzaW9uRW50aXR5IGltcGxlbWVudHMgU2VyaWFsaXphYmxlIHsgQElkIEBHZW5lcmF0ZWRWYWx1ZShzdHJhdGVneSA9IEdlbmVyYXRpb25UeXBlLkFVVE8pIHByaXZhdGUgSW50ZWdlciBpZDsgLyoqIOadg+mZkOe8luegge+8iOagh+ivhu+8iSAqLyBwcml2YXRlIFN0cmluZyBjb2RlOyAvKiog5p2D6ZmQ5ZCN56ewICovIHByaXZhdGUgU3RyaW5nIG5hbWU7IC8qKiDmnYPpmZBVUkwgKi8gcHJpdmF0ZSBTdHJpbmcgdXJsOyB9IDwvY29kZT48L3ByZT4gPC9kaXY+IDxwPlN5c1JvbGVFbnRpdHkuamF2YTwvcD4gPGRpdiA+IDxwcmU+PGNvZGUgPnBhY2thZ2UgY29tLmV4YW1wbGUuc2VjdXJpdHkuZW50aXR5OyBpbXBvcnQgbG9tYm9rLkdldHRlcjsgaW1wb3J0IGxvbWJvay5TZXR0ZXI7IGltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS4qOyBpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7IGltcG9ydCBqYXZhLnV0aWwuU2V0OyAvKiogKiBAQXV0aG9yIENoZW5nSmlhblNoZW5nICogQERhdGUgMjAyMS8xMi82ICovIEBHZXR0ZXIgQFNldHRlciBARW50aXR5IEBUYWJsZShuYW1lID0gInN5c19yb2xlIikgcHVibGljIGNsYXNzIFN5c1JvbGVFbnRpdHkgaW1wbGVtZW50cyBTZXJpYWxpemFibGUgeyBASWQgQEdlbmVyYXRlZFZhbHVlKHN0cmF0ZWd5ID0gR2VuZXJhdGlvblR5cGUuQVVUTykgcHJpdmF0ZSBJbnRlZ2VyIGlkOyAvKiog6KeS6Imy57yW56CBICovIHByaXZhdGUgU3RyaW5nIGNvZGU7IC8qKiDop5LoibLlkI3np7AgKi8gcHJpdmF0ZSBTdHJpbmcgbmFtZTsgQE1hbnlUb01hbnkgQEpvaW5UYWJsZShuYW1lID0gInN5c19yb2xlX3Blcm1pc3Npb24iLCBqb2luQ29sdW1ucyA9IHtASm9pbkNvbHVtbihuYW1lID0gInJvbGVfaWQiKX0sIGludmVyc2VKb2luQ29sdW1ucyA9IHtASm9pbkNvbHVtbihuYW1lID0gInBlcm1pc3Npb25faWQiKX0pIHByaXZhdGUgU2V0Jmx0O1N5c1Blcm1pc3Npb25FbnRpdHkmZ3Q7IHBlcm1pc3Npb25zOyB9IDwvY29kZT48L3ByZT4gPC9kaXY+IDxwPlN5c1VzZXJFbnRpdHkuamF2YTwvcD4gPGRpdiA+IDxwcmU+PGNvZGUgPnBhY2thZ2UgY29tLmV4YW1wbGUuc2VjdXJpdHkuZW50aXR5OyBpbXBvcnQgbG9tYm9rLkdldHRlcjsgaW1wb3J0IGxvbWJvay5TZXR0ZXI7IGltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS4qOyBpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7IGltcG9ydCBqYXZhLnV0aWwuU2V0OyAvKiogKiBAQXV0aG9yIENoZW5nSmlhblNoZW5nICogQERhdGUgMjAyMS8xMi82ICovIEBHZXR0ZXIgQFNldHRlciBARW50aXR5IEBUYWJsZShuYW1lID0gInN5c191c2VyIikgcHVibGljIGNsYXNzIFN5c1VzZXJFbnRpdHkgaW1wbGVtZW50cyBTZXJpYWxpemFibGUgeyBASWQgQEdlbmVyYXRlZFZhbHVlKHN0cmF0ZWd5ID0gR2VuZXJhdGlvblR5cGUuQVVUTykgcHJpdmF0ZSBJbnRlZ2VyIGlkOyAvKiog55So5oi35ZCNICovIHByaXZhdGUgU3RyaW5nIHVzZXJuYW1lOyAvKiog5a+G56CBICovIHByaXZhdGUgU3RyaW5nIHBhc3N3b3JkOyBATWFueVRvTWFueSBASm9pblRhYmxlKG5hbWUgPSAic3lzX3VzZXJfcm9sZSIsIGpvaW5Db2x1bW5zID0ge0BKb2luQ29sdW1uKG5hbWUgPSAidXNlcl9pZCIpfSwgaW52ZXJzZUpvaW5Db2x1bW5zID0ge0BKb2luQ29sdW1uKG5hbWUgPSAicm9sZV9pZCIpfSkgcHJpdmF0ZSBTZXQmbHQ7U3lzUm9sZUVudGl0eSZndDsgcm9sZXM7IH0gPC9jb2RlPjwvcHJlPiA8L2Rpdj4gPHA+U3lzVXNlclJlcG9zaXRvcnkuamF2YTwvcD4gPGRpdiA+IDxwcmU+PGNvZGUgPnBhY2thZ2UgY29tLmV4YW1wbGUuc2VjdXJpdHkucmVwb3NpdG9yeTsgaW1wb3J0IGNvbS5leGFtcGxlLnNlY3VyaXR5LmVudGl0eS5TeXNVc2VyRW50aXR5OyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLmpwYS5yZXBvc2l0b3J5LkpwYVJlcG9zaXRvcnk7IGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEuanBhLnJlcG9zaXRvcnkuSnBhU3BlY2lmaWNhdGlvbkV4ZWN1dG9yOyAvKiogKiBAQXV0aG9yIENoZW5nSmlhblNoZW5nICogQERhdGUgMjAyMS8xMi82ICovIHB1YmxpYyBpbnRlcmZhY2UgU3lzVXNlclJlcG9zaXRvcnkgZXh0ZW5kcyBKcGFSZXBvc2l0b3J5Jmx0O1N5c1VzZXJFbnRpdHksIEludGVnZXImZ3Q7LCBKcGFTcGVjaWZpY2F0aW9uRXhlY3V0b3ImbHQ7U3lzVXNlckVudGl0eSZndDsgeyBTeXNVc2VyRW50aXR5IGZpbmRCeVVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSk7IH0gPC9jb2RlPjwvcHJlPiA8L2Rpdj4gPHA+U3lzUGVybWlzc2lvblNlcnZpY2VJbXBsLmphdmHCoDwvcD4gPGRpdiA+IDxwcmU+PGNvZGUgPnBhY2thZ2UgY29tLmV4YW1wbGUuc2VjdXJpdHkuc2VydmljZS5pbXBsOyBpbXBvcnQgY29tLmV4YW1wbGUuc2VjdXJpdHkuZW50aXR5LlN5c1Blcm1pc3Npb25FbnRpdHk7IGltcG9ydCBjb20uZXhhbXBsZS5zZWN1cml0eS5yZXBvc2l0b3J5LlN5c1Blcm1pc3Npb25SZXBvc2l0b3J5OyBpbXBvcnQgY29tLmV4YW1wbGUuc2VjdXJpdHkuc2VydmljZS5TeXNQZXJtaXNzaW9uU2VydmljZTsgaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5TZXJ2aWNlOyBpbXBvcnQgamF2YXguYW5ub3RhdGlvbi5SZXNvdXJjZTsgaW1wb3J0IGphdmEudXRpbC5MaXN0OyBpbXBvcnQgamF2YS51dGlsLk1hcDsgaW1wb3J0IGphdmEudXRpbC5zdHJlYW0uQ29sbGVjdG9yczsgLyoqICogQEF1dGhvciBDaGVuZ0ppYW5TaGVuZyAqIEBEYXRlIDIwMjEvMTIvNiAqLyBAU2VydmljZSBwdWJsaWMgY2xhc3MgU3lzUGVybWlzc2lvblNlcnZpY2VJbXBsIGltcGxlbWVudHMgU3lzUGVybWlzc2lvblNlcnZpY2UgeyBAUmVzb3VyY2UgcHJpdmF0ZSBTeXNQZXJtaXNzaW9uUmVwb3NpdG9yeSBzeXNQZXJtaXNzaW9uUmVwb3NpdG9yeTsgQE92ZXJyaWRlIHB1YmxpYyBNYXAmbHQ7U3RyaW5nLCBTdHJpbmcmZ3Q7IGdldEFsbFVybFJvbGUoKSB7IExpc3QmbHQ7U3lzUGVybWlzc2lvbkVudGl0eSZndDsgbGlzdCA9IHN5c1Blcm1pc3Npb25SZXBvc2l0b3J5LmZpbmRBbGwoKTsgcmV0dXJuIGxpc3Quc3RyZWFtKCkuY29sbGVjdChDb2xsZWN0b3JzLnRvTWFwKFN5c1Blcm1pc3Npb25FbnRpdHk6OmdldFVybCwgU3lzUGVybWlzc2lvbkVudGl0eTo6Z2V0Q29kZSkpOyB9IH0gPC9jb2RlPjwvcHJlPiA8L2Rpdj4gPHA+TXlVc2VyRGV0YWlscy5qYXZhPC9wPiA8ZGl2ID4gPHByZT48Y29kZSA+cGFja2FnZSBjb20uZXhhbXBsZS5zZWN1cml0eS5kb21haW47IGltcG9ydCBsb21ib2suQWxsQXJnc0NvbnN0cnVjdG9yOyBpbXBvcnQgbG9tYm9rLk5vQXJnc0NvbnN0cnVjdG9yOyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb3JlLkdyYW50ZWRBdXRob3JpdHk7IGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvcmUuYXV0aG9yaXR5LlNpbXBsZUdyYW50ZWRBdXRob3JpdHk7IGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvcmUudXNlcmRldGFpbHMuVXNlckRldGFpbHM7IGltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsgaW1wb3J0IGphdmEudXRpbC5TZXQ7IC8qKiAqIEBBdXRob3IgQ2hlbmdKaWFuU2hlbmcgKiBARGF0ZSAyMDIxLzEyLzYgKi8gQE5vQXJnc0NvbnN0cnVjdG9yIEBBbGxBcmdzQ29uc3RydWN0b3IgcHVibGljIGNsYXNzIE15VXNlckRldGFpbHMgaW1wbGVtZW50cyBVc2VyRGV0YWlscyB7IHByaXZhdGUgU3RyaW5nIHVzZXJuYW1lOyBwcml2YXRlIFN0cmluZyBwYXNzd29yZDsgcHJpdmF0ZSBib29sZWFuIGVuYWJsZWQ7IHByaXZhdGUgU2V0Jmx0O1NpbXBsZUdyYW50ZWRBdXRob3JpdHkmZ3Q7IGF1dGhvcml0aWVzOyBAT3ZlcnJpZGUgcHVibGljIENvbGxlY3Rpb24mbHQ7PyBleHRlbmRzIEdyYW50ZWRBdXRob3JpdHkmZ3Q7IGdldEF1dGhvcml0aWVzKCkgeyByZXR1cm4gYXV0aG9yaXRpZXM7IH0gQE92ZXJyaWRlIHB1YmxpYyBTdHJpbmcgZ2V0UGFzc3dvcmQoKSB7IHJldHVybiBwYXNzd29yZDsgfSBAT3ZlcnJpZGUgcHVibGljIFN0cmluZyBnZXRVc2VybmFtZSgpIHsgcmV0dXJuIHVzZXJuYW1lOyB9IEBPdmVycmlkZSBwdWJsaWMgYm9vbGVhbiBpc0FjY291bnROb25FeHBpcmVkKCkgeyByZXR1cm4gdHJ1ZTsgfSBAT3ZlcnJpZGUgcHVibGljIGJvb2xlYW4gaXNBY2NvdW50Tm9uTG9ja2VkKCkgeyByZXR1cm4gdHJ1ZTsgfSBAT3ZlcnJpZGUgcHVibGljIGJvb2xlYW4gaXNDcmVkZW50aWFsc05vbkV4cGlyZWQoKSB7IHJldHVybiB0cnVlOyB9IEBPdmVycmlkZSBwdWJsaWMgYm9vbGVhbiBpc0VuYWJsZWQoKSB7IHJldHVybiBlbmFibGVkOyB9IH0gPC9jb2RlPjwvcHJlPiA8L2Rpdj4gPHA+TXlVc2VyRGV0YWlsc1NlcnZpY2UuamF2YTwvcD4gPGRpdiA+IDxwcmU+PGNvZGUgPnBhY2thZ2UgY29tLmV4YW1wbGUuc2VjdXJpdHkuY29yZTsgaW1wb3J0IGNvbS5leGFtcGxlLnNlY3VyaXR5LmRvbWFpbi5NeVVzZXJEZXRhaWxzOyBpbXBvcnQgY29tLmV4YW1wbGUuc2VjdXJpdHkuZW50aXR5LlN5c1Blcm1pc3Npb25FbnRpdHk7IGltcG9ydCBjb20uZXhhbXBsZS5zZWN1cml0eS5lbnRpdHkuU3lzVXNlckVudGl0eTsgaW1wb3J0IGNvbS5leGFtcGxlLnNlY3VyaXR5LnJlcG9zaXRvcnkuU3lzVXNlclJlcG9zaXRvcnk7IGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvcmUuYXV0aG9yaXR5LlNpbXBsZUdyYW50ZWRBdXRob3JpdHk7IGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvcmUudXNlcmRldGFpbHMuVXNlckRldGFpbHM7IGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvcmUudXNlcmRldGFpbHMuVXNlckRldGFpbHNTZXJ2aWNlOyBpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb3JlLnVzZXJkZXRhaWxzLlVzZXJuYW1lTm90Rm91bmRFeGNlcHRpb247IGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnN0ZXJlb3R5cGUuU2VydmljZTsgaW1wb3J0IGphdmF4LmFubm90YXRpb24uUmVzb3VyY2U7IGltcG9ydCBqYXZheC50cmFuc2FjdGlvbi5UcmFuc2FjdGlvbmFsOyBpbXBvcnQgamF2YS51dGlsLlNldDsgaW1wb3J0IGphdmEudXRpbC5zdHJlYW0uQ29sbGVjdG9yczsgLyoqICogQEF1dGhvciBDaGVuZ0ppYW5TaGVuZyAqIEBEYXRlIDIwMjEvMTIvNiAqLyBAVHJhbnNhY3Rpb25hbCBAU2VydmljZSBwdWJsaWMgY2xhc3MgTXlVc2VyRGV0YWlsc1NlcnZpY2UgaW1wbGVtZW50cyBVc2VyRGV0YWlsc1NlcnZpY2UgeyBAUmVzb3VyY2UgcHJpdmF0ZSBTeXNVc2VyUmVwb3NpdG9yeSBzeXNVc2VyUmVwb3NpdG9yeTsgQE92ZXJyaWRlIHB1YmxpYyBVc2VyRGV0YWlscyBsb2FkVXNlckJ5VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKSB0aHJvd3MgVXNlcm5hbWVOb3RGb3VuZEV4Y2VwdGlvbiB7IFN5c1VzZXJFbnRpdHkgc3lzVXNlckVudGl0eSA9IHN5c1VzZXJSZXBvc2l0b3J5LmZpbmRCeVVzZXJuYW1lKHVzZXJuYW1lKTsgaWYgKG51bGwgPT0gc3lzVXNlckVudGl0eSkgeyB0aHJvdyBuZXcgVXNlcm5hbWVOb3RGb3VuZEV4Y2VwdGlvbigi55So5oi35LiN5a2Y5ZyoIik7IH0gU2V0Jmx0O1NpbXBsZUdyYW50ZWRBdXRob3JpdHkmZ3Q7IGF1dGhvcml0aWVzID0gc3lzVXNlckVudGl0eS5nZXRSb2xlcygpLnN0cmVhbSgpIC5mbGF0TWFwKHJvbGVJZC0mZ3Q7cm9sZUlkLmdldFBlcm1pc3Npb25zKCkuc3RyZWFtKCkpIC5tYXAoU3lzUGVybWlzc2lvbkVudGl0eTo6Z2V0Q29kZSkgLm1hcChTaW1wbGVHcmFudGVkQXV0aG9yaXR5OjpuZXcpIC5jb2xsZWN0KENvbGxlY3RvcnMudG9TZXQoKSk7IHJldHVybiBuZXcgTXlVc2VyRGV0YWlscyhzeXNVc2VyRW50aXR5LmdldFVzZXJuYW1lKCksIHN5c1VzZXJFbnRpdHkuZ2V0UGFzc3dvcmQoKSwgdHJ1ZSwgYXV0aG9yaXRpZXMpOyB9IH0gPC9jb2RlPjwvcHJlPiA8L2Rpdj4gPHA+SGVsbG9Db250cm9sbGVyLmphdmE8L3A+IDxkaXYgPiA8cHJlPjxjb2RlID5wYWNrYWdlIGNvbS5leGFtcGxlLnNlY3VyaXR5LmNvbnRyb2xsZXI7IGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLndlYi5iaW5kLmFubm90YXRpb24uR2V0TWFwcGluZzsgaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5SZXF1ZXN0TWFwcGluZzsgaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5SZXN0Q29udHJvbGxlcjsgLyoqICogQEF1dGhvciBDaGVuZ0ppYW5TaGVuZyAqIEBEYXRlIDIwMjEvMTIvNiAqLyBAUmVzdENvbnRyb2xsZXIgQFJlcXVlc3RNYXBwaW5nKCIvaGVsbG8iKSBwdWJsaWMgY2xhc3MgSGVsbG9Db250cm9sbGVyIHsgQEdldE1hcHBpbmcoIi9zYXlIZWxsbyIpIHB1YmxpYyBTdHJpbmcgc2F5SGVsbG8oKSB7IHJldHVybiAiSGVsbG8iOyB9IEBHZXRNYXBwaW5nKCIvc2F5SGkiKSBwdWJsaWMgU3RyaW5nIHNheUhpKCkgeyByZXR1cm4gIkhpIjsgfSB9PC9jb2RlPjwvcHJlPiA8L2Rpdj4gPHAgPuaVsOaNruW6k+iEmuacrOWmguS4izwvcD4gPGRpdiA+IDxwcmU+PGNvZGUgPlNFVCBOQU1FUyB1dGY4bWI0OyBTRVQgRk9SRUlHTl9LRVlfQ0hFQ0tTID0gMDsgLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAtLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHN5c19wZXJtaXNzaW9uIC0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRFJPUCBUQUJMRSBJRiBFWElTVFMgYHN5c19wZXJtaXNzaW9uYDsgQ1JFQVRFIFRBQkxFIGBzeXNfcGVybWlzc2lvbmAgKCBgaWRgIGludCgxMSkgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsIGBjb2RlYCB2YXJjaGFyKDI1NSkgQ0hBUkFDVEVSIFNFVCB1dGY4IENPTExBVEUgdXRmOF9nZW5lcmFsX2NpIE5PVCBOVUxMIENPTU1FTlQgJ+adg+mZkOe8luegge+8iOagh+ivhu+8iScsIGBuYW1lYCB2YXJjaGFyKDI1NSkgQ0hBUkFDVEVSIFNFVCB1dGY4IENPTExBVEUgdXRmOF9nZW5lcmFsX2NpIE5PVCBOVUxMIENPTU1FTlQgJ+adg+mZkOWQjeensCcsIGB1cmxgIHZhcmNoYXIoMjU1KSBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X2dlbmVyYWxfY2kgTk9UIE5VTEwgQ09NTUVOVCAn5p2D6ZmQVVJMJywgUFJJTUFSWSBLRVkgKGBpZGApIFVTSU5HIEJUUkVFICkgRU5HSU5FID0gSW5ub0RCIEFVVE9fSU5DUkVNRU5UID0gNSBDSEFSQUNURVIgU0VUID0gdXRmOCBDT0xMQVRFID0gdXRmOF9nZW5lcmFsX2NpIFJPV19GT1JNQVQgPSBEeW5hbWljOyAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC0tIFJlY29yZHMgb2Ygc3lzX3Blcm1pc3Npb24gLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBJTlNFUlQgSU5UTyBgc3lzX3Blcm1pc3Npb25gIFZBTFVFUyAoMSwgJ2hvbWUnLCAn6aaW6aG1JywgJy9ob21lLyoqJyk7IElOU0VSVCBJTlRPIGBzeXNfcGVybWlzc2lvbmAgVkFMVUVTICgyLCAndXNlcjphZGQnLCAn5re75Yqg55So5oi3JywgJy91c2VyL2FkZCcpOyBJTlNFUlQgSU5UTyBgc3lzX3Blcm1pc3Npb25gIFZBTFVFUyAoMywgJ3VzZXI6ZGVsZXRlJywgJ+WIoOmZpOeUqOaItycsICcvdXNlci9kZWxldGUnKTsgSU5TRVJUIElOVE8gYHN5c19wZXJtaXNzaW9uYCBWQUxVRVMgKDQsICdoZWxsbzpzYXlIZWxsbycsICfmiZPmi5vlkbwnLCAnL2hlbGxvL3NheUhlbGxvJyk7IC0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLS0gVGFibGUgc3RydWN0dXJlIGZvciBzeXNfcm9sZSAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIERST1AgVEFCTEUgSUYgRVhJU1RTIGBzeXNfcm9sZWA7IENSRUFURSBUQUJMRSBgc3lzX3JvbGVgICggYGlkYCBpbnQoMTEpIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULCBgY29kZWAgdmFyY2hhcigyNTUpIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfZ2VuZXJhbF9jaSBOT1QgTlVMTCBDT01NRU5UICfop5LoibLnvJbnoIEnLCBgbmFtZWAgdmFyY2hhcigyNTUpIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfZ2VuZXJhbF9jaSBOT1QgTlVMTCBDT01NRU5UICfop5LoibLlkI3np7AnLCBQUklNQVJZIEtFWSAoYGlkYCkgVVNJTkcgQlRSRUUgKSBFTkdJTkUgPSBJbm5vREIgQVVUT19JTkNSRU1FTlQgPSA0IENIQVJBQ1RFUiBTRVQgPSB1dGY4IENPTExBVEUgPSB1dGY4X2dlbmVyYWxfY2kgUk9XX0ZPUk1BVCA9IER5bmFtaWM7IC0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLS0gUmVjb3JkcyBvZiBzeXNfcm9sZSAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIElOU0VSVCBJTlRPIGBzeXNfcm9sZWAgVkFMVUVTICgxLCAnZW1wbG95ZWUnLCAn5ZGY5belJyk7IElOU0VSVCBJTlRPIGBzeXNfcm9sZWAgVkFMVUVTICgyLCAnZW5naW5lZXInLCAn5bel56iL5biIJyk7IElOU0VSVCBJTlRPIGBzeXNfcm9sZWAgVkFMVUVTICgzLCAnbGVhZGVyJywgJ+e7hOmVvycpOyAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC0tIFRhYmxlIHN0cnVjdHVyZSBmb3Igc3lzX3JvbGVfcGVybWlzc2lvbiAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIERST1AgVEFCTEUgSUYgRVhJU1RTIGBzeXNfcm9sZV9wZXJtaXNzaW9uYDsgQ1JFQVRFIFRBQkxFIGBzeXNfcm9sZV9wZXJtaXNzaW9uYCAoIGBpZGAgaW50KDExKSBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCwgYHJvbGVfaWRgIGludCgxMSkgTk9UIE5VTEwgQ09NTUVOVCAn6KeS6ImySUQnLCBgcGVybWlzc2lvbl9pZGAgaW50KDExKSBOT1QgTlVMTCBDT01NRU5UICfmnYPpmZBJRCcsIFBSSU1BUlkgS0VZIChgaWRgKSBVU0lORyBCVFJFRSApIEVOR0lORSA9IElubm9EQiBBVVRPX0lOQ1JFTUVOVCA9IDggQ0hBUkFDVEVSIFNFVCA9IHV0ZjggQ09MTEFURSA9IHV0ZjhfZ2VuZXJhbF9jaSBST1dfRk9STUFUID0gRHluYW1pYzsgLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAtLSBSZWNvcmRzIG9mIHN5c19yb2xlX3Blcm1pc3Npb24gLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBJTlNFUlQgSU5UTyBgc3lzX3JvbGVfcGVybWlzc2lvbmAgVkFMVUVTICgxLCAxLCAxKTsgSU5TRVJUIElOVE8gYHN5c19yb2xlX3Blcm1pc3Npb25gIFZBTFVFUyAoMiwgMiwgMSk7IElOU0VSVCBJTlRPIGBzeXNfcm9sZV9wZXJtaXNzaW9uYCBWQUxVRVMgKDMsIDIsIDIpOyBJTlNFUlQgSU5UTyBgc3lzX3JvbGVfcGVybWlzc2lvbmAgVkFMVUVTICg0LCAzLCAxKTsgSU5TRVJUIElOVE8gYHN5c19yb2xlX3Blcm1pc3Npb25gIFZBTFVFUyAoNSwgMywgMik7IElOU0VSVCBJTlRPIGBzeXNfcm9sZV9wZXJtaXNzaW9uYCBWQUxVRVMgKDYsIDMsIDMpOyBJTlNFUlQgSU5UTyBgc3lzX3JvbGVfcGVybWlzc2lvbmAgVkFMVUVTICg3LCAzLCA0KTsgLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAtLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHN5c191c2VyIC0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRFJPUCBUQUJMRSBJRiBFWElTVFMgYHN5c191c2VyYDsgQ1JFQVRFIFRBQkxFIGBzeXNfdXNlcmAgKCBgaWRgIGludCgxMSkgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsIGB1c2VybmFtZWAgdmFyY2hhcigyNTUpIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfZ2VuZXJhbF9jaSBOT1QgTlVMTCBDT01NRU5UICfnlKjmiLflkI0nLCBgcGFzc3dvcmRgIHZhcmNoYXIoMjU1KSBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X2dlbmVyYWxfY2kgTk9UIE5VTEwgQ09NTUVOVCAn5a+G56CBJywgUFJJTUFSWSBLRVkgKGBpZGApIFVTSU5HIEJUUkVFICkgRU5HSU5FID0gSW5ub0RCIEFVVE9fSU5DUkVNRU5UID0gMiBDSEFSQUNURVIgU0VUID0gdXRmOCBDT0xMQVRFID0gdXRmOF9nZW5lcmFsX2NpIFJPV19GT1JNQVQgPSBEeW5hbWljOyAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC0tIFJlY29yZHMgb2Ygc3lzX3VzZXIgLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBJTlNFUlQgSU5UTyBgc3lzX3VzZXJgIFZBTFVFUyAoMSwgJ3poYW5nc2FuJywgJyQyYSQxMCRlNHdGc0ZIUUNOalBlNXRUSk1Qa1J1S0d3bU1HQzQ1cGZqTXVwWTlud2JUdW9LUTBiS2MvdScpOyAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC0tIFRhYmxlIHN0cnVjdHVyZSBmb3Igc3lzX3VzZXJfcm9sZSAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIERST1AgVEFCTEUgSUYgRVhJU1RTIGBzeXNfdXNlcl9yb2xlYDsgQ1JFQVRFIFRBQkxFIGBzeXNfdXNlcl9yb2xlYCAoIGBpZGAgaW50KDExKSBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCwgYHVzZXJfaWRgIGludCgxMSkgTk9UIE5VTEwgQ09NTUVOVCAn55So5oi3SUQnLCBgcm9sZV9pZGAgaW50KDExKSBOT1QgTlVMTCBDT01NRU5UICfop5LoibJJRCcsIFBSSU1BUlkgS0VZIChgaWRgKSBVU0lORyBCVFJFRSApIEVOR0lORSA9IElubm9EQiBBVVRPX0lOQ1JFTUVOVCA9IDQgQ0hBUkFDVEVSIFNFVCA9IHV0ZjggQ09MTEFURSA9IHV0ZjhfZ2VuZXJhbF9jaSBST1dfRk9STUFUID0gRHluYW1pYzsgLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAtLSBSZWNvcmRzIG9mIHN5c191c2VyX3JvbGUgLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBJTlNFUlQgSU5UTyBgc3lzX3VzZXJfcm9sZWAgVkFMVUVTICgxLCAxLCAxKTsgSU5TRVJUIElOVE8gYHN5c191c2VyX3JvbGVgIFZBTFVFUyAoMiwgMSwgMik7IElOU0VSVCBJTlRPIGBzeXNfdXNlcl9yb2xlYCBWQUxVRVMgKDMsIDEsIDMpOyBTRVQgRk9SRUlHTl9LRVlfQ0hFQ0tTID0gMTs8L2NvZGU+PC9wcmU+IDwvZGl2PiA8cD7mtY/op4jlmajorr/pl67CoGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9oZWxsby9zYXlIaSDmraPluLjov5Tlm57vvIzkuI3nlKjnmbvlvZXvvIzlm6DkuLrmsqHmnInlnKhzeXNfcGVybWlzc2lvbuihqOS4remFjee9ruivpei1hOa6kO+8jOS5n+WwseaYr+ivtOWug+S4jeaYr+S4gOS4quWPl+S/neaKpOeahOi1hOa6kO+8iOWFrOW8gOi1hOa6kO+8iTwvcD4gPHA+6K6/6ZeuaHR0cDovL2xvY2FsaG9zdDo4MDgwL2hlbGxvL3NheUhlbGxv5YiZ6ZyA6KaB5YWI55m75b2V77yM55SoemhhbmdzYW7nmbvlvZXmiJDlip/ku6XlkI7mraPnoa7ov5Tlm57CoDwvcD4gPHA+6aG555uu57uT5p6E5aaC5LiLPC9wPiA8L2Rpdj4gPC9kaXY+IDxkaXYgPnBvc3RlZCBAIDIwMjEtMTItMDYgMjA6MzEg5bqf54mp5aSn5biI5YWEIOmYheivuygwKSDor4TorrooMCkg57yW6L6RIOaUtuiXjyDkuL7miqU8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGRpdiA+IDxkaXYgPuWIt+aWsOivhOiuuuWIt+aWsOmhtemdoui/lOWbnumhtumDqDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGRpdiA+IENvcHlyaWdodCDCqSAyMDIxIOW6n+eJqeWkp+W4iOWFhCA8c3BhbiA+UG93ZXJlZCBieSAuTkVUIDYgb24gS3ViZXJuZXRlczwvc3Bhbj4gPC9kaXY+IDwvZGl2PiA8L2JvZHk+'</script>

      </head>
        <body class="valid" valid="valid" title="valid: True, node: 1, level: 1" node_number="1"> <div class="valid" valid="valid" title="valid: True, node: 2, level: 2" node_number="2">  </div> <div class="valid" valid="valid" title="valid: True, node: 3, level: 2" node_number="3"> <div class="valid" valid="valid" title="valid: True, node: 4, level: 3" node_number="4"> <div class="valid" valid="valid" title="valid: True, node: 5, level: 4" node_number="5"> <h1 class="valid" valid="valid" title="valid: True, node: 6, level: 5" node_number="6"><a class="valid" valid="valid" title="valid: True, node: 7, level: 6" node_number="7">&#29378;&#20081;&#30340;&#36149;&#20844;&#23376;</a> </h1> <h2 class="valid" valid="valid" title="valid: True, node: 8, level: 5" node_number="8">&#20026;&#20320;&#65292;&#21315;&#21315;&#19975;&#19975;&#36941;&#65281;</h2> </div> <div class="valid" valid="valid" title="valid: True, node: 9, level: 4" node_number="9"> <ul class="valid" valid="valid" title="valid: True, node: 10, level: 5" node_number="10"> <li class="valid" valid="valid" title="valid: True, node: 11, level: 6" node_number="11"><a class="valid" valid="valid" title="valid: True, node: 12, level: 7" node_number="12"> &#21338;&#23458;&#22253;</a> </li> <li class="valid" valid="valid" title="valid: True, node: 13, level: 6" node_number="13"> <a class="valid" valid="valid" title="valid: True, node: 14, level: 7" node_number="14"> &#39318;&#39029;</a> </li> <li class="valid" valid="valid" title="valid: True, node: 15, level: 6" node_number="15"> <a class="valid" valid="valid" title="valid: True, node: 16, level: 7" node_number="16"> &#26032;&#38543;&#31508;</a> </li> <li class="valid" valid="valid" title="valid: True, node: 17, level: 6" node_number="17"> <a class="valid" valid="valid" title="valid: True, node: 18, level: 7" node_number="18"> &#32852;&#31995;</a></li> <li class="valid" valid="valid" title="valid: True, node: 19, level: 6" node_number="19"> <a class="valid" valid="valid" title="valid: True, node: 20, level: 7" node_number="20"> &#35746;&#38405;</a> </li> <li class="valid" valid="valid" title="valid: True, node: 21, level: 6" node_number="21"> <a class="valid" valid="valid" title="valid: True, node: 22, level: 7" node_number="22"> &#31649;&#29702;</a> </li> </ul> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 23, level: 3" node_number="23"> <div class="valid" valid="valid" title="valid: True, node: 24, level: 4" node_number="24"> <div class="valid" valid="valid" title="valid: True, node: 25, level: 5" node_number="25"> <div class="valid" valid="valid" title="valid: True, node: 26, level: 6" node_number="26"> <div class="valid" valid="valid" title="valid: True, node: 27, level: 7" node_number="27"> <div class="valid" valid="valid" title="valid: True, node: 28, level: 8" node_number="28"> <h1 class="valid" valid="valid" title="valid: True, node: 29, level: 9" node_number="29"> <a class="valid" valid="valid" title="valid: True, node: 30, level: 10" node_number="30"> Spring Security &#22522;&#20110;URL&#30340;&#26435;&#38480;&#21028;&#26029; </a> </h1> <div class="valid" valid="valid" title="valid: True, node: 31, level: 9" node_number="31"> <div class="valid" valid="valid" title="valid: True, node: 32, level: 10" node_number="32"> <p class="valid" valid="valid" title="valid: True, node: 33, level: 11" node_number="33">1. FilterSecurityInterceptor &#28304;&#30721;&#38405;&#35835;</p> <p class="valid" valid="valid" title="valid: True, node: 34, level: 11" node_number="34">org.springframework.security.web.access.intercept.FilterSecurityInterceptor</p> <p class="valid" valid="valid" title="valid: True, node: 35, level: 11" node_number="35">&#36890;&#36807;&#36807;&#28388;&#22120;&#23454;&#29616;&#23545;HTTP&#36164;&#28304;&#36827;&#34892;&#23433;&#20840;&#22788;&#29702;&#12290;</p> <p class="valid" valid="valid" title="valid: True, node: 36, level: 11" node_number="36">&#35813;&#23433;&#20840;&#25318;&#25130;&#22120;&#25152;&#38656;&#30340; SecurityMetadataSource &#31867;&#22411;&#20026; FilterInvocationSecurityMetadataSource&#12290;&#160;</p> <p class="valid" valid="valid" title="valid: True, node: 37, level: 11" node_number="37">doFilter&#26041;&#27861;&#20013;&#30452;&#25509;&#35843;&#29992;invoke&#26041;&#27861;</p> <p class="valid" valid="valid" title="valid: True, node: 38, level: 11" node_number="38">&#22522;&#26412;&#37117;&#26159;&#35843;&#29992;&#29238;&#31867;&#30340;&#26041;&#27861;&#65292;&#37027;&#19979;&#38754;&#23601;&#37325;&#28857;&#30475;&#19979;&#29238;&#31867; AbstractSecurityInterceptor&#160;/p> <p class="valid" valid="valid" title="valid: True, node: 39, level: 11" node_number="39">&#20026;&#23433;&#20840;&#23545;&#35937;&#23454;&#29616;&#23433;&#20840;&#25318;&#25130;&#30340;&#25277;&#35937;&#31867;&#12290;</p> <p class="valid" valid="valid" title="valid: True, node: 40, level: 11" node_number="40">AbstractSecurityInterceptor &#23558;&#30830;&#20445;&#23433;&#20840;&#25318;&#25130;&#22120;&#30340;&#27491;&#30830;&#21551;&#21160;&#37197;&#32622;&#12290; &#23427;&#36824;&#23558;&#23454;&#29616;&#23545;&#23433;&#20840;&#23545;&#35937;&#35843;&#29992;&#30340;&#27491;&#30830;&#22788;&#29702;&#65292;&#21363;&#65306;</p> <ol class="valid" valid="valid" title="valid: True, node: 41, level: 11" node_number="41"> <li class="valid" valid="valid" title="valid: True, node: 42, level: 12" node_number="42">&#20174; SecurityContextHolder &#33719;&#21462; Authentication &#23545;&#35937;&#12290;</li> <li class="valid" valid="valid" title="valid: True, node: 43, level: 12" node_number="43">&#36890;&#36807;&#22312;SecurityMetadataSource&#20013;&#26597;&#25214;&#23433;&#20840;&#23545;&#35937;&#35831;&#27714;&#65292;&#30830;&#23450;&#35831;&#27714;&#26159;&#19982;&#23433;&#20840;&#35843;&#29992;&#36824;&#26159;&#20844;&#20849;&#35843;&#29992;&#30456;&#20851;&#65288;PS&#65306;&#31616;&#21333;&#22320;&#26469;&#35762;&#65292;&#23601;&#26159;&#30475;&#19968;&#19979;&#35831;&#27714;&#30340;&#36164;&#28304;&#26159;&#19981;&#26159;&#21463;&#20445;&#25252;&#30340;&#65292;&#21463;&#20445;&#25252;&#30340;&#23601;&#26159;&#23433;&#20840;&#35843;&#29992;&#65292;&#23601;&#35201;&#26435;&#38480;&#65292;&#19981;&#21463;&#20445;&#25252;&#30340;&#23601;&#19981;&#38656;&#35201;&#26435;&#38480;&#23601;&#21487;&#20197;&#35775;&#38382;&#65289;&#12290;</li> <li class="valid" valid="valid" title="valid: True, node: 44, level: 12" node_number="44">&#23545;&#20110;&#21463;&#20445;&#25252;&#30340;&#35843;&#29992;&#65288;&#26377;&#19968;&#20010;&#29992;&#20110;&#23433;&#20840;&#23545;&#35937;&#35843;&#29992;&#30340; ConfigAttributes &#21015;&#34920;&#65289;&#65306;<ol class="valid" valid="valid" title="valid: True, node: 45, level: 13" node_number="45"> <li class="valid" valid="valid" title="valid: True, node: 46, level: 14" node_number="46">&#22914;&#26524; Authentication.isAuthenticated() &#36820;&#22238; false&#65292;&#25110;&#32773; alwaysReauthenticate &#20026; true&#65292;&#21017;&#26681;&#25454;&#37197;&#32622;&#30340; AuthenticationManager &#23545;&#35831;&#27714;&#36827;&#34892;&#36523;&#20221;&#39564;&#35777;&#12290; &#36890;&#36807;&#36523;&#20221;&#39564;&#35777;&#21518;&#65292;&#23558; SecurityContextHolder &#19978;&#30340; Authentication &#23545;&#35937;&#26367;&#25442;&#20026;&#36820;&#22238;&#20540;&#12290;</li> <li class="valid" valid="valid" title="valid: True, node: 47, level: 14" node_number="47">&#160;&#26681;&#25454;&#37197;&#32622;&#30340;AccessDecisionManager&#25480;&#26435;&#35831;&#27714;&#12290;</li> <li class="valid" valid="valid" title="valid: True, node: 48, level: 14" node_number="48">&#36890;&#36807;&#37197;&#32622;&#30340;RunAsManager&#25191;&#34892;&#20219;&#20309;run-as&#26367;&#25442;&#12290;</li> <li class="valid" valid="valid" title="valid: True, node: 49, level: 14" node_number="49">&#23558;&#25511;&#21046;&#26435;&#20256;&#36882;&#22238;&#20855;&#20307;&#30340;&#23376;&#31867;&#65292;&#23427;&#23454;&#38469;&#19978;&#23558;&#32487;&#32493;&#25191;&#34892;&#23545;&#35937;&#12290;&#36820;&#22238;&#19968;&#20010; InterceptorStatusToken &#20197;&#20415;&#22312;&#23376;&#31867;&#23436;&#25104;&#23545;&#35937;&#30340;&#25191;&#34892;&#21518;&#65292;&#20854; finally &#23376;&#21477;&#21487;&#20197;&#30830;&#20445; AbstractSecurityInterceptor &#34987;&#35843;&#29992;&#24182;&#20351;&#29992; finallyInvocation(InterceptorStatusToken) &#27491;&#30830;&#22788;&#29702;&#12290;</li> <li class="valid" valid="valid" title="valid: True, node: 50, level: 14" node_number="50">&#20855;&#20307;&#30340;&#23376;&#31867;&#23558;&#36890;&#36807; afterInvocation(InterceptorStatusToken, Object) &#26041;&#27861;&#37325;&#26032;&#35843;&#29992; AbstractSecurityInterceptor&#12290;</li> <li class="valid" valid="valid" title="valid: True, node: 51, level: 14" node_number="51">&#22914;&#26524; RunAsManager &#26367;&#25442;&#20102; Authentication &#23545;&#35937;&#65292;&#21017;&#23558; SecurityContextHolder &#36820;&#22238;&#21040;&#35843;&#29992; AuthenticationManager &#21518;&#23384;&#22312;&#30340;&#23545;&#35937;&#12290;</li> <li class="valid" valid="valid" title="valid: True, node: 52, level: 14" node_number="52">&#22914;&#26524;&#23450;&#20041;&#20102;AfterInvocationManager&#65292;&#21017;&#35843;&#29992;&#23427;&#24182;&#20801;&#35768;&#23427;&#26367;&#25442;&#23558;&#35201;&#36820;&#22238;&#32473;&#35843;&#29992;&#32773;&#30340;&#23545;&#35937;&#12290;</li> </ol></li> <li class="valid" valid="valid" title="valid: True, node: 53, level: 12" node_number="53">&#160;&#23545;&#20110;&#20844;&#24320;&#30340;&#35843;&#29992;&#65288;&#23433;&#20840;&#23545;&#35937;&#35843;&#29992;&#27809;&#26377; ConfigAttributes&#65289;&#65306;<ol class="valid" valid="valid" title="valid: True, node: 54, level: 13" node_number="54"> <li class="valid" valid="valid" title="valid: True, node: 55, level: 14" node_number="55">&#22914;&#19978;&#25152;&#36848;&#65292;&#20855;&#20307;&#30340;&#23376;&#31867;&#23558;&#36820;&#22238;&#19968;&#20010; InterceptorStatusToken&#65292;&#22312;&#25191;&#34892;&#23436;&#23433;&#20840;&#23545;&#35937;&#21518;&#65292;&#35813; InterceptorStatusToken &#38543;&#21518;&#34987;&#37325;&#26032;&#21576;&#29616;&#32473; AbstractSecurityInterceptor&#12290; AbstractSecurityInterceptor &#22312;&#23427;&#30340; afterInvocation(InterceptorStatusToken, Object) &#34987;&#35843;&#29992;&#26102;&#19981;&#20250;&#37319;&#21462;&#36827;&#19968;&#27493;&#30340;&#34892;&#21160;&#12290;</li> </ol></li> <li class="valid" valid="valid" title="valid: True, node: 56, level: 12" node_number="56">&#25511;&#21046;&#20877;&#27425;&#36820;&#22238;&#21040;&#20855;&#20307;&#30340;&#23376;&#31867;&#65292;&#20197;&#21450;&#24212;&#35813;&#36820;&#22238;&#32473;&#35843;&#29992;&#32773;&#30340;&#23545;&#35937;&#12290;&#28982;&#21518;&#23376;&#31867;&#20250;&#23558;&#35813;&#32467;&#26524;&#25110;&#24322;&#24120;&#36820;&#22238;&#32473;&#21407;&#22987;&#35843;&#29992;&#32773;&#12290;</li> </ol> <p class="valid" valid="valid" title="valid: True, node: 57, level: 11" node_number="57">&#19979;&#38754;&#20855;&#20307;&#26469;&#30475;</p> <p class="valid" valid="valid" title="valid: True, node: 58, level: 11" node_number="58">&#20174;&#36825;&#37324;&#25105;&#20204;&#21487;&#20197;&#30693;&#36947;&#36820;&#22238;null&#21644;&#31354;&#38598;&#21512;&#26159;&#19968;&#26679;&#30340;&#12290;</p> <p class="valid" valid="valid" title="valid: True, node: 59, level: 11" node_number="59"><span class="valid" valid="valid" title="valid: True, node: 60, level: 12" node_number="60">&#25509;&#19979;&#26469;&#30475;&#25480;&#26435;</span></p> <p class="valid" valid="valid" title="valid: True, node: 61, level: 11" node_number="61">&#36825;&#26159;&#25105;&#20204;&#35201;&#37325;&#28857;&#20851;&#27880;&#30340;&#65292;&#21487;&#20197;&#30475;&#21040;&#65292;&#25480;&#26435;&#38752;&#30340;&#26159;&#160;accessDecisionManager.decide(authenticated, object, attributes)&#160;</p> <p class="valid" valid="valid" title="valid: True, node: 62, level: 11" node_number="62">&#22240;&#27492;&#65292;&#25105;&#20204;&#24819;&#35201;&#23454;&#29616;&#33258;&#24049;&#30340;&#22522;&#20110;&#35831;&#27714;Url&#30340;&#25480;&#26435;&#21482;&#38656;&#33258;&#23450;&#20041;&#19968;&#20010; AccessDecisionManager&#160;&#21363;&#21487;</p> <p class="valid" valid="valid" title="valid: True, node: 63, level: 11" node_number="63">&#25509;&#19979;&#26469;&#65292;&#25105;&#20204;&#26469;&#20855;&#20307;&#23454;&#29616;&#19968;&#19979;</p> <p class="valid" valid="valid" title="valid: True, node: 64, level: 11" node_number="64">2. &#33258;&#23450;&#20041;&#22522;&#20110;url&#30340;&#25480;&#26435;</p> <p class="valid" valid="valid" title="valid: True, node: 65, level: 11" node_number="65">&#20808;&#25226;Spring Security&#25480;&#26435;&#30340;&#22823;&#33268;&#27969;&#31243;&#27969;&#31243;&#25670;&#22312;&#36825;&#20799;&#65306;</p> <p class="valid" valid="valid" title="valid: True, node: 66, level: 11" node_number="66">&#33258;&#23450;&#20041;FilterInvocationSecurityMetadataSource</p> <div class="valid" valid="valid" title="valid: True, node: 67, level: 11" node_number="67"> <pre class="valid" valid="valid" title="valid: True, node: 68, level: 12" node_number="68"><code class="valid" valid="valid" title="valid: True, node: 69, level: 13" node_number="69">package com.example.security.core; import com.example.security.service.SysPermissionService; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.security.access.ConfigAttribute; import org.springframework.security.access.SecurityConfig; import org.springframework.security.web.FilterInvocation; import org.springframework.security.web.access.intercept.FilterInvocationSecurityMetadataSource; import org.springframework.stereotype.Component; import org.springframework.util.AntPathMatcher; import java.util.ArrayList; import java.util.Collection; import java.util.List; import java.util.Map; /** * @Author ChengJianSheng * @Date 2021/12/2 */ @Component public class MyFilterSecurityMetadataSource implements FilterInvocationSecurityMetadataSource { @Autowired private SysPermissionService sysPermissionService; private final AntPathMatcher antPathMatcher = new AntPathMatcher(); @Override public Collection&lt;ConfigAttribute&gt; getAttributes(Object object) throws IllegalArgumentException { FilterInvocation fi = (FilterInvocation) object; String url = fi.getRequestUrl(); String httpMethod = fi.getRequest().getMethod(); List&lt;ConfigAttribute&gt; attributes = new ArrayList&lt;&gt;(); Map&lt;String, String&gt; urlRoleMap = sysPermissionService.getAllUrlRole(); for (Map.Entry&lt;String, String&gt; entry : urlRoleMap.entrySet()) { if (antPathMatcher.match(entry.getKey(), url)) { return SecurityConfig.createList(entry.getValue()); } } // &#36820;&#22238;null&#21644;&#31354;&#21015;&#34920;&#26159;&#19968;&#26679;&#30340;&#65292;&#37117;&#34920;&#31034;&#24403;&#21069;&#35775;&#38382;&#30340;&#36164;&#28304;&#19981;&#38656;&#35201;&#26435;&#38480;&#65292;&#25152;&#26377;&#20154;&#37117;&#21487;&#20197;&#35775;&#38382; return attributes; // return null; } @Override public Collection&lt;ConfigAttribute&gt; getAllConfigAttributes() { return null; } @Override public boolean supports(Class&lt;?&gt; clazz) { return FilterInvocation.class.isAssignableFrom(clazz); } }</code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 70, level: 11" node_number="70">&#36825;&#37324;&#38656;&#35201;&#35828;&#26126;&#19968;&#19979;&#65292;&#20854;&#23454;Spring Security&#37324;&#38754;&#35828;&#30340;role&#19981;&#19968;&#23450;&#34920;&#31034;&#30340;&#26159;&#25105;&#20204;&#33258;&#24049;&#24314;&#30340;&#37027;&#20010;&#35282;&#33394;&#34920;&#65292;&#25105;&#20204;&#21487;&#20197;&#36825;&#26679;&#29702;&#35299;&#65292;&#23601;&#26159;&#23427;&#36825;&#37324;&#30340;&#25152;&#35859;role&#21482;&#26159;&#19968;&#20010;&#26435;&#38480;&#26631;&#35782;&#12290;&#25105;&#20204;&#22312;&#24314;&#34920;&#30340;&#26102;&#20505;&#65292;&#36890;&#24120;&#26368;&#22522;&#26412;&#30340;&#26159;5&#24352;&#34920;&#65288;&#29992;&#25143;&#34920;&#12289;&#35282;&#33394;&#34920;&#12289;&#26435;&#38480;&#34920;&#12289;&#29992;&#25143;&#35282;&#33394;&#20851;&#31995;&#34920;&#12289;&#35282;&#33394;&#26435;&#38480;&#20851;&#31995;&#34920;&#65289;&#65292;&#25105;&#20204;&#21487;&#20197;&#25226;&#21463;&#20445;&#25252;&#30340;&#36164;&#28304;&#65288;&#36890;&#24120;&#26159;&#19968;&#20010;url&#65289;&#19982;&#35282;&#33394;&#20851;&#32852;&#36215;&#26469;&#65292;&#24314;&#31435;&#21738;&#20123;&#35282;&#33394;&#21487;&#20197;&#35775;&#38382;&#21738;&#20123;&#36164;&#28304;&#65292;&#20063;&#21487;&#20197;&#30452;&#25509;/p> <p class="valid" valid="valid" title="valid: True, node: 71, level: 11" node_number="71">&#21482;&#35201;&#26377;&#36825;&#20010;&#20851;&#31995;&#65292;&#21097;&#19979;&#30340;&#23601;&#26159;&#20889;&#27861;&#19981;&#21516;&#32780;&#24050;&#12290;&#22914;&#26524;&#20320;&#25226;role&#29702;&#35299;&#25104;&#36164;&#28304;&#30340;&#26435;&#38480;&#26631;&#35782;&#30340;&#35805;&#65292;&#37027;&#20040;&#36820;&#22238;&#30340;Collection&lt;ConfigAttribute&gt;&#20013;&#23601;&#26368;&#22810;&#26377;&#19968;&#20010;&#20803;&#32032;&#65292;&#22914;&#26524;&#29702;&#35299;&#25104;&#35282;&#33394;&#30340;&#35805;&#65292;&#37027;&#20040;&#21487;&#33021;&#26377;&#22810;&#20010;&#20803;&#32032;&#12290;&#23601;&#36825;&#20040;&#28857;&#20799;&#19996;&#35199;&#65292;&#20889;&#27861;&#19981;&#21516;&#32780;&#24050;&#65292;&#26412;&#36136;&#26159;&#19968;&#26679;&#30340;&#12290;</p> <p class="valid" valid="valid" title="valid: True, node: 72, level: 11" node_number="72">&#33258;&#23450;&#20041;AccessDecisionManager</p> <div class="valid" valid="valid" title="valid: True, node: 73, level: 11" node_number="73"> <pre class="valid" valid="valid" title="valid: True, node: 74, level: 12" node_number="74"><code class="valid" valid="valid" title="valid: True, node: 75, level: 13" node_number="75">package com.example.security.core; import org.springframework.security.access.AccessDecisionManager; import org.springframework.security.access.AccessDeniedException; import org.springframework.security.access.ConfigAttribute; import org.springframework.security.authentication.InsufficientAuthenticationException; import org.springframework.security.core.Authentication; import org.springframework.security.core.GrantedAuthority; import org.springframework.stereotype.Component; import java.util.Collection; /** * @Author ChengJianSheng * @Date 2021/12/2 */ @Component public class MyAccessDecisionManager implements AccessDecisionManager { @Override public void decide(Authentication authentication, Object object, Collection&lt;ConfigAttribute&gt; configAttributes) throws AccessDeniedException, InsufficientAuthenticationException { Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities(); System.out.println(authorities); System.out.println(configAttributes); // &#26597;&#30475;&#24403;&#21069;&#29992;&#25143;&#26159;&#21542;&#26377;&#23545;&#24212;&#30340;&#26435;&#38480;&#35775;&#38382;&#35813;&#20445;&#25252;&#36164;&#28304; for (ConfigAttribute attribute : configAttributes) { for (GrantedAuthority authority : authorities) { if (authority.getAuthority().equals(attribute.getAttribute())) { return; } } } throw new AccessDeniedException("Access is denied"); } @Override public boolean supports(ConfigAttribute attribute) { return true; } @Override public boolean supports(Class&lt;?&gt; clazz) { return true; } } </code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 76, level: 11" node_number="76">decide&#26041;&#27861;&#30340;&#19977;&#20010;&#21442;&#25968;&#65292;&#20381;&#27425;&#34920;&#31034;&#65306;</p> <ul class="valid" valid="valid" title="valid: True, node: 77, level: 11" node_number="77"> <li class="valid" valid="valid" title="valid: True, node: 78, level: 12" node_number="78">&#35843;&#29992;&#32773;&#65288;&#38750;&#31354;&#65289;</li> <li class="valid" valid="valid" title="valid: True, node: 79, level: 12" node_number="79">&#34987;&#35843;&#29992;&#30340;&#23433;&#20840;&#23545;&#35937;</li> <li class="valid" valid="valid" title="valid: True, node: 80, level: 12" node_number="80">&#19982;&#34987;&#35843;&#29992;&#30340;&#23433;&#20840;&#23545;&#35937;&#20851;&#32852;&#30340;&#37197;&#32622;&#23646;&#24615;</li> </ul> <p class="valid" valid="valid" title="valid: True, node: 81, level: 11" node_number="81">&#37197;&#32622;WebSecurityConfig</p> <div class="valid" valid="valid" title="valid: True, node: 82, level: 11" node_number="82"> <pre class="valid" valid="valid" title="valid: True, node: 83, level: 12" node_number="83"><code class="valid" valid="valid" title="valid: True, node: 84, level: 13" node_number="84">package com.example.security.config; import com.example.security.core.MyAccessDecisionManager; import com.example.security.core.MyFilterSecurityMetadataSource; import com.example.security.core.MyUserDetailsService; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.security.config.annotation.ObjectPostProcessor; import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder; import org.springframework.security.config.annotation.web.builders.HttpSecurity; import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter; import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder; import org.springframework.security.crypto.password.PasswordEncoder; import org.springframework.security.web.access.intercept.FilterSecurityInterceptor; /** * @Author ChengJianSheng * @Date 2021/12/6 */ @Configuration public class WebSecurityConfig extends WebSecurityConfigurerAdapter { @Autowired private MyUserDetailsService myUserDetailsService; @Autowired private MyAccessDecisionManager myAccessDecisionManager; @Autowired private MyFilterSecurityMetadataSource myFilterSecurityMetadataSource; @Override protected void configure(AuthenticationManagerBuilder auth) throws Exception { auth.userDetailsService(myUserDetailsService).passwordEncoder(passwordEncoder()); } @Override protected void configure(HttpSecurity http) throws Exception { http.formLogin() .and() .authorizeRequests() .withObjectPostProcessor(new ObjectPostProcessor&lt;FilterSecurityInterceptor&gt;() { @Override public &lt;O extends FilterSecurityInterceptor&gt; O postProcess(O object) { object.setSecurityMetadataSource(myFilterSecurityMetadataSource); object.setAccessDecisionManager(myAccessDecisionManager); return object; } }) .anyRequest().authenticated(); } @Bean public PasswordEncoder passwordEncoder() { return new BCryptPasswordEncoder(); } }</code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 85, level: 11" node_number="85">&#20854;&#23427;&#19981;&#37325;&#35201;&#30340;&#23601;&#30452;&#25509;&#36148;&#20986;&#26469;&#20102;</p> <p class="valid" valid="valid" title="valid: True, node: 86, level: 11" node_number="86">pom.xml</p> <div class="valid" valid="valid" title="valid: True, node: 87, level: 11" node_number="87"> <pre class="valid" valid="valid" title="valid: True, node: 88, level: 12" node_number="88"><code class="valid" valid="valid" title="valid: True, node: 89, level: 13" node_number="89">&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.6.1&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;groupId&gt;com.example&lt;/groupId&gt; &lt;artifactId&gt;security-demo&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;security-demo&lt;/name&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.security&lt;/groupId&gt; &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;excludes&gt; &lt;exclude&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;/exclude&gt; &lt;/excludes&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt; &lt;/project&gt; </code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 90, level: 11" node_number="90">application.yml</p> <div class="valid" valid="valid" title="valid: True, node: 91, level: 11" node_number="91"> <pre class="valid" valid="valid" title="valid: True, node: 92, level: 12" node_number="92"><code class="valid" valid="valid" title="valid: True, node: 93, level: 13" node_number="93">spring: datasource: url: jdbc:mysql://localhost:3306/demo126?serverTimezone=Asia/ShanghaicharacterEncoding=utf8useSSL=false driver-class-name: com.mysql.cj.jdbc.Driver username: root password: 123456 jpa: database: mysql show-sql: true <code class="valid" valid="valid" title="valid: True, node: 94, level: 14" node_number="94"/></code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 95, level: 11" node_number="95">SysPermissionEntity.java</p> <div class="valid" valid="valid" title="valid: True, node: 96, level: 11" node_number="96"> <pre class="valid" valid="valid" title="valid: True, node: 97, level: 12" node_number="97"><code class="valid" valid="valid" title="valid: True, node: 98, level: 13" node_number="98">package com.example.security.entity; import lombok.Getter; import lombok.Setter; import javax.persistence.*; import java.io.Serializable; /** * @Author ChengJianSheng * @Date 2021/12/6 */ @Getter @Setter @Entity @Table(name = "sys_permission") public class SysPermissionEntity implements Serializable { @Id @GeneratedValue(strategy = GenerationType.AUTO) private Integer id; /** &#26435;&#38480;&#32534;&#30721;&#65288;&#26631;&#35782;&#65289; */ private String code; /** &#26435;&#38480;&#21517;&#31216; */ private String name; /** &#26435;&#38480;URL */ private String url; } </code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 99, level: 11" node_number="99">SysRoleEntity.java</p> <div class="valid" valid="valid" title="valid: True, node: 100, level: 11" node_number="100"> <pre class="valid" valid="valid" title="valid: True, node: 101, level: 12" node_number="101"><code class="valid" valid="valid" title="valid: True, node: 102, level: 13" node_number="102">package com.example.security.entity; import lombok.Getter; import lombok.Setter; import javax.persistence.*; import java.io.Serializable; import java.util.Set; /** * @Author ChengJianSheng * @Date 2021/12/6 */ @Getter @Setter @Entity @Table(name = "sys_role") public class SysRoleEntity implements Serializable { @Id @GeneratedValue(strategy = GenerationType.AUTO) private Integer id; /** &#35282;&#33394;&#32534;&#30721; */ private String code; /** &#35282;&#33394;&#21517;&#31216; */ private String name; @ManyToMany @JoinTable(name = "sys_role_permission", joinColumns = {@JoinColumn(name = "role_id")}, inverseJoinColumns = {@JoinColumn(name = "permission_id")}) private Set&lt;SysPermissionEntity&gt; permissions; } </code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 103, level: 11" node_number="103">SysUserEntity.java</p> <div class="valid" valid="valid" title="valid: True, node: 104, level: 11" node_number="104"> <pre class="valid" valid="valid" title="valid: True, node: 105, level: 12" node_number="105"><code class="valid" valid="valid" title="valid: True, node: 106, level: 13" node_number="106">package com.example.security.entity; import lombok.Getter; import lombok.Setter; import javax.persistence.*; import java.io.Serializable; import java.util.Set; /** * @Author ChengJianSheng * @Date 2021/12/6 */ @Getter @Setter @Entity @Table(name = "sys_user") public class SysUserEntity implements Serializable { @Id @GeneratedValue(strategy = GenerationType.AUTO) private Integer id; /** &#29992;&#25143;&#21517; */ private String username; /** &#23494;&#30721; */ private String password; @ManyToMany @JoinTable(name = "sys_user_role", joinColumns = {@JoinColumn(name = "user_id")}, inverseJoinColumns = {@JoinColumn(name = "role_id")}) private Set&lt;SysRoleEntity&gt; roles; } </code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 107, level: 11" node_number="107">SysUserRepository.java</p> <div class="valid" valid="valid" title="valid: True, node: 108, level: 11" node_number="108"> <pre class="valid" valid="valid" title="valid: True, node: 109, level: 12" node_number="109"><code class="valid" valid="valid" title="valid: True, node: 110, level: 13" node_number="110">package com.example.security.repository; import com.example.security.entity.SysUserEntity; import org.springframework.data.jpa.repository.JpaRepository; import org.springframework.data.jpa.repository.JpaSpecificationExecutor; /** * @Author ChengJianSheng * @Date 2021/12/6 */ public interface SysUserRepository extends JpaRepository&lt;SysUserEntity, Integer&gt;, JpaSpecificationExecutor&lt;SysUserEntity&gt; { SysUserEntity findByUsername(String username); } </code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 111, level: 11" node_number="111">SysPermissionServiceImpl.java&#160;</p> <div class="valid" valid="valid" title="valid: True, node: 112, level: 11" node_number="112"> <pre class="valid" valid="valid" title="valid: True, node: 113, level: 12" node_number="113"><code class="valid" valid="valid" title="valid: True, node: 114, level: 13" node_number="114">package com.example.security.service.impl; import com.example.security.entity.SysPermissionEntity; import com.example.security.repository.SysPermissionRepository; import com.example.security.service.SysPermissionService; import org.springframework.stereotype.Service; import javax.annotation.Resource; import java.util.List; import java.util.Map; import java.util.stream.Collectors; /** * @Author ChengJianSheng * @Date 2021/12/6 */ @Service public class SysPermissionServiceImpl implements SysPermissionService { @Resource private SysPermissionRepository sysPermissionRepository; @Override public Map&lt;String, String&gt; getAllUrlRole() { List&lt;SysPermissionEntity&gt; list = sysPermissionRepository.findAll(); return list.stream().collect(Collectors.toMap(SysPermissionEntity::getUrl, SysPermissionEntity::getCode)); } } </code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 115, level: 11" node_number="115">MyUserDetails.java</p> <div class="valid" valid="valid" title="valid: True, node: 116, level: 11" node_number="116"> <pre class="valid" valid="valid" title="valid: True, node: 117, level: 12" node_number="117"><code class="valid" valid="valid" title="valid: True, node: 118, level: 13" node_number="118">package com.example.security.domain; import lombok.AllArgsConstructor; import lombok.NoArgsConstructor; import org.springframework.security.core.GrantedAuthority; import org.springframework.security.core.authority.SimpleGrantedAuthority; import org.springframework.security.core.userdetails.UserDetails; import java.util.Collection; import java.util.Set; /** * @Author ChengJianSheng * @Date 2021/12/6 */ @NoArgsConstructor @AllArgsConstructor public class MyUserDetails implements UserDetails { private String username; private String password; private boolean enabled; private Set&lt;SimpleGrantedAuthority&gt; authorities; @Override public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() { return authorities; } @Override public String getPassword() { return password; } @Override public String getUsername() { return username; } @Override public boolean isAccountNonExpired() { return true; } @Override public boolean isAccountNonLocked() { return true; } @Override public boolean isCredentialsNonExpired() { return true; } @Override public boolean isEnabled() { return enabled; } } </code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 119, level: 11" node_number="119">MyUserDetailsService.java</p> <div class="valid" valid="valid" title="valid: True, node: 120, level: 11" node_number="120"> <pre class="valid" valid="valid" title="valid: True, node: 121, level: 12" node_number="121"><code class="valid" valid="valid" title="valid: True, node: 122, level: 13" node_number="122">package com.example.security.core; import com.example.security.domain.MyUserDetails; import com.example.security.entity.SysPermissionEntity; import com.example.security.entity.SysUserEntity; import com.example.security.repository.SysUserRepository; import org.springframework.security.core.authority.SimpleGrantedAuthority; import org.springframework.security.core.userdetails.UserDetails; import org.springframework.security.core.userdetails.UserDetailsService; import org.springframework.security.core.userdetails.UsernameNotFoundException; import org.springframework.stereotype.Service; import javax.annotation.Resource; import javax.transaction.Transactional; import java.util.Set; import java.util.stream.Collectors; /** * @Author ChengJianSheng * @Date 2021/12/6 */ @Transactional @Service public class MyUserDetailsService implements UserDetailsService { @Resource private SysUserRepository sysUserRepository; @Override public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException { SysUserEntity sysUserEntity = sysUserRepository.findByUsername(username); if (null == sysUserEntity) { throw new UsernameNotFoundException("&#29992;&#25143;&#19981;&#23384;&#22312;"); } Set&lt;SimpleGrantedAuthority&gt; authorities = sysUserEntity.getRoles().stream() .flatMap(roleId-&gt;roleId.getPermissions().stream()) .map(SysPermissionEntity::getCode) .map(SimpleGrantedAuthority::new) .collect(Collectors.toSet()); return new MyUserDetails(sysUserEntity.getUsername(), sysUserEntity.getPassword(), true, authorities); } } </code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 123, level: 11" node_number="123">HelloController.java</p> <div class="valid" valid="valid" title="valid: True, node: 124, level: 11" node_number="124"> <pre class="valid" valid="valid" title="valid: True, node: 125, level: 12" node_number="125"><code class="valid" valid="valid" title="valid: True, node: 126, level: 13" node_number="126">package com.example.security.controller; import org.springframework.web.bind.annotation.GetMapping; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController; /** * @Author ChengJianSheng * @Date 2021/12/6 */ @RestController @RequestMapping("/hello") public class HelloController { @GetMapping("/sayHello") public String sayHello() { return "Hello"; } @GetMapping("/sayHi") public String sayHi() { return "Hi"; } }</code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 127, level: 11" node_number="127">&#25968;&#25454;&#24211;&#33050;&#26412;&#22914;&#19979;</p> <div class="valid" valid="valid" title="valid: True, node: 128, level: 11" node_number="128"> <pre class="valid" valid="valid" title="valid: True, node: 129, level: 12" node_number="129"><code class="valid" valid="valid" title="valid: True, node: 130, level: 13" node_number="130">SET NAMES utf8mb4; SET FOREIGN_KEY_CHECKS = 0; -- ---------------------------- -- Table structure for sys_permission -- ---------------------------- DROP TABLE IF EXISTS `sys_permission`; CREATE TABLE `sys_permission` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '&#26435;&#38480;&#32534;&#30721;&#65288;&#26631;&#35782;&#65289;', `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '&#26435;&#38480;&#21517;&#31216;', `url` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '&#26435;&#38480;URL', PRIMARY KEY (`id`) USING BTREE ) ENGINE = InnoDB AUTO_INCREMENT = 5 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic; -- ---------------------------- -- Records of sys_permission -- ---------------------------- INSERT INTO `sys_permission` VALUES (1, 'home', '&#39318;&#39029;', '/home/**'); INSERT INTO `sys_permission` VALUES (2, 'user:add', '&#28155;&#21152;&#29992;&#25143;', '/user/add'); INSERT INTO `sys_permission` VALUES (3, 'user:delete', '&#21024;&#38500;&#29992;&#25143;', '/user/delete'); INSERT INTO `sys_permission` VALUES (4, 'hello:sayHello', '&#25171;&#25307;&#21628;', '/hello/sayHello'); -- ---------------------------- -- Table structure for sys_role -- ---------------------------- DROP TABLE IF EXISTS `sys_role`; CREATE TABLE `sys_role` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '&#35282;&#33394;&#32534;&#30721;', `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '&#35282;&#33394;&#21517;&#31216;', PRIMARY KEY (`id`) USING BTREE ) ENGINE = InnoDB AUTO_INCREMENT = 4 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic; -- ---------------------------- -- Records of sys_role -- ---------------------------- INSERT INTO `sys_role` VALUES (1, 'employee', '&#21592;&#24037;'); INSERT INTO `sys_role` VALUES (2, 'engineer', '&#24037;&#31243;&#24072;'); INSERT INTO `sys_role` VALUES (3, 'leader', '&#32452;&#38271;'); -- ---------------------------- -- Table structure for sys_role_permission -- ---------------------------- DROP TABLE IF EXISTS `sys_role_permission`; CREATE TABLE `sys_role_permission` ( `id` int(11) NOT NULL AUTO_INCREMENT, `role_id` int(11) NOT NULL COMMENT '&#35282;&#33394;ID', `permission_id` int(11) NOT NULL COMMENT '&#26435;&#38480;ID', PRIMARY KEY (`id`) USING BTREE ) ENGINE = InnoDB AUTO_INCREMENT = 8 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic; -- ---------------------------- -- Records of sys_role_permission -- ---------------------------- INSERT INTO `sys_role_permission` VALUES (1, 1, 1); INSERT INTO `sys_role_permission` VALUES (2, 2, 1); INSERT INTO `sys_role_permission` VALUES (3, 2, 2); INSERT INTO `sys_role_permission` VALUES (4, 3, 1); INSERT INTO `sys_role_permission` VALUES (5, 3, 2); INSERT INTO `sys_role_permission` VALUES (6, 3, 3); INSERT INTO `sys_role_permission` VALUES (7, 3, 4); -- ---------------------------- -- Table structure for sys_user -- ---------------------------- DROP TABLE IF EXISTS `sys_user`; CREATE TABLE `sys_user` ( `id` int(11) NOT NULL AUTO_INCREMENT, `username` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '&#29992;&#25143;&#21517;', `password` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '&#23494;&#30721;', PRIMARY KEY (`id`) USING BTREE ) ENGINE = InnoDB AUTO_INCREMENT = 2 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic; -- ---------------------------- -- Records of sys_user -- ---------------------------- INSERT INTO `sys_user` VALUES (1, 'zhangsan', '$2a$10$e4wFsFHQCNjPe5tTJMPkRuKGwmMGC45pfjMupY9nwbTuoKQ0bKc/u'); -- ---------------------------- -- Table structure for sys_user_role -- ---------------------------- DROP TABLE IF EXISTS `sys_user_role`; CREATE TABLE `sys_user_role` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) NOT NULL COMMENT '&#29992;&#25143;ID', `role_id` int(11) NOT NULL COMMENT '&#35282;&#33394;ID', PRIMARY KEY (`id`) USING BTREE ) ENGINE = InnoDB AUTO_INCREMENT = 4 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic; -- ---------------------------- -- Records of sys_user_role -- ---------------------------- INSERT INTO `sys_user_role` VALUES (1, 1, 1); INSERT INTO `sys_user_role` VALUES (2, 1, 2); INSERT INTO `sys_user_role` VALUES (3, 1, 3); SET FOREIGN_KEY_CHECKS = 1;</code></pre> </div> <p class="valid" valid="valid" title="valid: True, node: 131, level: 11" node_number="131">&#27983;&#35272;&#22120;&#35775;&#38382;&#160;http://localhost:8080/hello/sayHi &#27491;&#24120;&#36820;&#22238;&#65292;&#19981;&#29992;&#30331;&#24405;&#65292;&#22240;&#20026;&#27809;&#26377;&#22312;sys_permission&#34920;&#20013;&#37197;&#32622;&#35813;&#36164;&#28304;&#65292;&#20063;&#23601;&#26159;&#35828;&#23427;&#19981;&#26159;&#19968;&#20010;&#21463;&#20445;&#25252;&#30340;&#36164;&#28304;&#65288;&#20844;&#24320;&#36164;&#28304;&#65289;</p> <p class="valid" valid="valid" title="valid: True, node: 132, level: 11" node_number="132">&#35775;&#38382;http://localhost:8080/hello/sayHello&#21017;&#38656;&#35201;&#20808;&#30331;&#24405;&#65292;&#29992;zhangsan&#30331;&#24405;&#25104;&#21151;&#20197;&#21518;&#27491;&#30830;&#36820;&#22238;&#160;</p> <p class="valid" valid="valid" title="valid: True, node: 133, level: 11" node_number="133">&#39033;&#30446;&#32467;&#26500;&#22914;&#19979;</p> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 134, level: 9" node_number="134">posted @ 2021-12-06 20:31 &#24223;&#29289;&#22823;&#24072;&#20804; &#38405;&#35835;(0) &#35780;&#35770;(0) &#32534;&#36753; &#25910;&#34255; &#20030;&#25253;</div> </div> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 135, level: 6" node_number="135"> <div class="valid" valid="valid" title="valid: True, node: 136, level: 7" node_number="136">&#21047;&#26032;&#35780;&#35770;&#21047;&#26032;&#39029;&#38754;&#36820;&#22238;&#39030;&#37096;</div> </div> </div> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 137, level: 3" node_number="137"> Copyright &#169; 2021 &#24223;&#29289;&#22823;&#24072;&#20804; <span class="valid" valid="valid" title="valid: True, node: 138, level: 4" node_number="138">Powered by .NET 6 on Kubernetes</span> </div> </div> </body>
        <style tyle='text/css'>
body{
    position: relative;
    padding-left: 30px;
    top: 60px;
}
* {
    border: 1px solid #eee;
    padding: 5px 12px;
    margin: 3px 0;
    box-sizing: content-box;
    background-color: #fff;
    cursor: no-drop;
}
main:hover > *, section:hover > *, header:hover > *, nav:hover > *, a:hover > *, div:hover > *, p:hover > *, ul:hover > *, h1:hover > *, h2:hover > *, h3:hover > *, li:hover > *, span:hover > *{
    border: 2px solid green;
    background-color: #fffeee;
    padding: 5px 23px !important;
    margin: 1px 0;
    color: green;
}
main:hover, section:hover, header:hover, nav:hover, a:hover, div:hover, p:hover, ul:hover, h1:hover, h2:hover, h3:hover, li:hover, span:hover{
    border: 1px solid #fff;
    background-color: #eee;
}
a, span {
    display: block;
}
.selected {
    border: 2px solid orchid !important;
    opacity: 0.8;
    color: orchid !important;
}
.selected * {
    padding: 2px !important;
    color: orchid !important;
}
.valid {
  cursor: pointer;
}
.btn{
  cursor: pointer;
  font-weight: bolder;
  padding: 8px;
}
</style> 
        <script>function OpenOriginalLink($event){
    $event.stopPropagation();
    console.log(url);
}

function removeItem($event){
    $event.stopPropagation();
    console.log('Remove item: ', url)
    localStorage.removeItem(url)
}

function exportData($event){
    $event.stopPropagation();

    result = []
    for(let i=0; i<localStorage.length; i++) {
        let key = localStorage.key(i);
        result.push(localStorage.getItem(key))
    }
    const _url = URL.createObjectURL(new Blob([result.join("\n")], {type: 'text/plain'}))
    $event.target.href = _url;
    localStorage.clear()
}

var removeItemBtn = document.createElement("BUTTON");   // Create a <button> element
removeItemBtn.innerHTML = "Remove Item";
removeItemBtn.classList.add('btn');
removeItemBtn.style.position = "fixed";
removeItemBtn.style.left = '5px';
removeItemBtn.style.top = 0;
removeItemBtn.style.border = "1px solid";
removeItemBtn.style.boxShadow = "3px 3px #888";
removeItemBtn.onclick = removeItem;
document.body.appendChild(removeItemBtn);

var goToOriginLink = document.createElement("A");   // Create a <button> element
goToOriginLink.innerHTML = "GoToOrigin";
goToOriginLink.classList.add('btn');
goToOriginLink.style.position = "fixed"
goToOriginLink.style.left = '115px'
goToOriginLink.style.top = 0;
goToOriginLink.onclick = OpenOriginalLink;
goToOriginLink.setAttribute('href', decodeURIComponent(url));
goToOriginLink.target = '_blank';
document.body.appendChild(goToOriginLink);

var current = new Date
var exportDataLink = document.createElement("A");   // Create a <button> element
exportDataLink.innerHTML = "Export data";
exportDataLink.classList.add('btn');
exportDataLink.download = current.toISOString() + '.exported.txt';
exportDataLink.style.position = "fixed";
exportDataLink.style.right = '5px';
exportDataLink.style.top = 0;
exportDataLink.style.border = "1px solid #888";
exportDataLink.style.boxShadow = "3px 3px #888";
exportDataLink.onclick = exportData;
document.body.appendChild(exportDataLink);

data = {
    'title': null ,
    'article': null
}

var body = document.getElementsByTagName("body")[0];

body.onclick = function($e){
    var num = $e.target.getAttribute('node_number')
    var valid = $e.target.getAttribute('valid')

    if(!valid){
        console.log("Element is invalid")
        return
    }

    if(data.length > 2){
        data = data.splice(0, 2)
    }

    console.log("node:", $e.target)

    if(!data.title && !data.article){
        data.title = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else if (data.title && !data.article){
        data.article = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else{
        selected = Array.from(document.getElementsByClassName("selected"))
        selected.forEach(function(el){
            el.classList.remove('selected')
        })

        data.title = num;
        data.article = null;
        $e.target.classList.add('selected')

    }

    if(data.title && data.article){
        var obj = {
            url: url,
            text: body_html,
            title: data.title,
            article: data.article,
        }

        var datasetItem = JSON.stringify(obj)
        localStorage.setItem(url, datasetItem)
    }
}
</script> 
      </html>