<!DOCTYPE html>
<html>
<head>

      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

        <script> var url = encodeURIComponent('https://www.cnblogs.com/zhenl/p/15629457.html');</script>

        <script> var body_html = 'PGJvZHkgPiA8ZGl2ID4gIDwvZGl2PiA8ZGl2ID4gPGRpdiA+IDxkaXYgPiA8aDE+PGEgPuWvu+aJvuaXoOWQjeeahOeJuei0qDwvYT4gPC9oMT4gPGRpdiA+55+l6K+G6ZyA6KaB54K55ru055qE56ev57SvPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGRpdiA+IDxkaXYgPiA8ZGl2ID4gPGRpdiA+IDxkaXYgPiA8aDI+IDxhID4gSWRlbnRpdHkgU2VydmVyIDQg5LuO5YWl6Zeo5Yiw6JC95Zyw77yI5YWt77yJ4oCU4oCUIOeugOWNleeahOWNlemhtemdouWuouaIt+erryA8L2E+IDwvaDI+IDxkaXYgPiA8ZGl2ID4g5L2/55Sob2RpYyBKU+WuouaIt+err+W8gOWPkUlkZW50aXR5IFNlcnZlciA0IOiupOivgeeahOWNlemhtemdouW6lOeUqCA8L2Rpdj4gPGRpdiA+IDxwPuWJjemdoueahOmDqOWIhu+8miBJZGVudGl0eSBTZXJ2ZXIgNCDku47lhaXpl6jliLDokL3lnLDvvIjkuIDvvInigJTigJQg5LuOSWRlbnRpdHlTZXJ2ZXI0LkFkbWlu5byA5aeLIDxhID5JZGVudGl0eSBTZXJ2ZXIgNCDku47lhaXpl6jliLDokL3lnLDvvIjkuozvvInigJTigJQg55CG6Kej5o6I5p2D56CB5qih5byPPC9hPiA8YSA+SWRlbnRpdHkgU2VydmVyIDQg5LuO5YWl6Zeo5Yiw6JC95Zyw77yI5LiJ77yJ4oCU4oCUIOWIm+W7uldlYuWuouaIt+errzwvYT4gPGEgPklkZW50aXR5IFNlcnZlciA0IOS7juWFpemXqOWIsOiQveWcsO+8iOWbm++8ieKAlOKAlCDliJvlu7pXZWIgQXBpPC9hPiA8YSA+SWRlbnRpdHkgU2VydmVyIDQg5LuO5YWl6Zeo5Yiw6JC95Zyw77yI5LqU77yJ4oCU4oCUIOS9v+eUqEFqYXgg6K6/6ZeuIFdlYiBBcGk8L2E+PC9wPiA8cD7orqTor4HmnI3liqHlkoznrqHnkIbnmoRnaXRodWLlnLDlnYDvvJogPGEgPmh0dHBzOi8vZ2l0aHViLmNvbS96aGVubC9JRFM0QWRtaW48L2E+IOWuouaIt+err+WPindlYiBhcGnnpLrkvovku6PnoIHnmoRnaXRodWLlnLDlnYDvvJo8YSA+aHR0cHM6Ly9naXRodWIuY29tL3poZW5sL0lEUzRDbGllbnREZW1vPC9hPjwvcD4gPHA+5YmN6Z2i5oiR5Lus5ZyoV2Vi5bqU55So55qE6aG16Z2i5LiK5L2/55SoQWpheOiuv+mXrldlYiBBcGksIOi/meenjeaDheWGteS4i++8jOiupOivgeS7peWPiuiOt+WPlkFjY2VzcyBUb2tlbui/mOaYr+WcqOWQjuWPsOi/m+ihjOeahO+8jOiAjOecn+ato+eahOWNlemhtemdouW6lOeUqOayoeacieWQjuWPsOeahOWPguS4ju+8jHdlYuacjeWKoeWZqOWPqui1t+WIsGhvc3Tmlofku7bnmoTkvZznlKjvvIzov5npg6jliIbmiJHku6znvJblhpnnroDljZXnmoTljZXpobXpnaLlupTnlKjvvIzor5XpqozkuIDkuIvljZXpobXpnaLorr/pl67lj5forqTor4Hkv53miqTnmoRXZWIgQXBp44CCPC9wPiA8cD7miJHku6zlj4LogINJZGVudGl0eSBTZXJ2ZXIgNOeahOWumOe9keekuuS+i+e8luWGmei/meS4quWNlemhtemdouW6lOeUqO+8jOWwhuWFtuS4reeahOiupOivgeacjeWKoeWZqOaUueS4uuaIkeS7rOacrOWcsOi/kOihjOeahOiupOivgeacjeWKoWh0dHA6Ly9sb2NhbGhvc3Q6NDAxMCxXZWIgQXBp5L2/55So5YmN6Z2i57yW5YaZ55qE566A5Y2V56S65L6L77yM5Zyw5Z2A5Li6aHR0cDovL2xvY2FsaG9zdDo1MTUz44CC5Zyo57yW5YaZ5LmL5YmN77yM6aaW5YWI5LiL6L29b2lkY+eahOWuouaIt+err++8jOWPr+S7peS7jmdpdGh1YuS4i+i9ve+8miA8YSA+aHR0cHM6Ly9naXRodWIuY29tL0lkZW50aXR5TW9kZWwvb2lkYy1jbGllbnQtanMvcmVsZWFzZXMvdGFnLzEuMTEuNTwvYT4g44CC5oiR5Lus5L2/55So57yW6K+R5a6M5oiQ55qE5pyA57uI5paH5Lu277yM5bCG5LiL6L2955qE5paH5Lu26Kej5Y6L77yMZGlzdOebruW9leWwseaYr+aIkeS7rOmcgOimgeeahOaWh+S7tuOAgjwvcD4gPHA+6aaW5YWI5L2/55SoVmlzdWFsIFN0dWRpbyAyMDIy5Yib5bu65LiA5Liq56m655qEQXNwLk5ldCBDb3JlIFdlYumhueebru+8jOaIkeS7rOS9v+eUqOi/meS4qumhueebruS9nOS4umh0bWzlkoxqc+aWh+S7tueahOWuv+S4u++8jOmZpOatpOS5i+WkluS4jeWBmuWFtuWug+W3peS9nOOAguWcqOmhueebruebruW9leS4i+WIm+W7und3d3Jvb3Tnm67lvZXvvIznlKjkuo7kv53lrZhodG1s5ZKManPmlofku7bvvIzlsIbkuIvovb3nmoRkaXN055uu5b2V5ou36LSd5Yiw6L+Z5Liq55uu5b2V5Lit77yM55uu5b2V5ZCN5a2X5pS55Li6b2lkYy1jbGllbnQtanMtMS4xMS4144CC54S25ZCO5Zyod3d3cm9vdOS4i+WIm+W7umluZGV4Lmh0bWzjgIFjYWxsYmFjay5odG1s5ZKMYXBwLmpz5LiJ5Liq5paH5Lu277yM5paH5Lu255qE5YaF5a655Zyo5ZCO6Z2i5aGr5YaZ44CC6aG555uu55qE57uT5p6E5aaC5LiL77yaIOeEtuWQjuS/ruaUuWxhbnVjaFNldHRpbmdzLmpzb27vvIzpobnnm67nmoTov5DooYzlnLDlnYDmmK9odHRwOi8vbG9jYWxob3N0OjUyMTDvvJo8L3A+IDxwcmU+PGNvZGU+eyAicHJvZmlsZXMiOiB7ICJJRFM0Q2xpZW50SlMiOiB7ICJjb21tYW5kTmFtZSI6ICJQcm9qZWN0IiwgImRvdG5ldFJ1bk1lc3NhZ2VzIjogdHJ1ZSwgImxhdW5jaEJyb3dzZXIiOiB0cnVlLCAiYXBwbGljYXRpb25VcmwiOiAiaHR0cDovL2xvY2FsaG9zdDo1MjEwIiwgImVudmlyb25tZW50VmFyaWFibGVzIjogeyAiQVNQTkVUQ09SRV9FTlZJUk9OTUVOVCI6ICJEZXZlbG9wbWVudCIgfSB9IH0gfSA8L2NvZGU+PC9wcmU+IDxwPuaOpeS4i+adpeS/ruaUuXByb2dyYW0uY3PvvIzkvb/lupTnlKjmlK/mjIHpnZnmgIHmlofku7bvvJo8L3A+IDxwcmU+PGNvZGU+dmFyIGJ1aWxkZXIgPSBXZWJBcHBsaWNhdGlvbi5DcmVhdGVCdWlsZGVyKGFyZ3MpOyB2YXIgYXBwID0gYnVpbGRlci5CdWlsZCgpOyBhcHAuVXNlRGVmYXVsdEZpbGVzKCk7IGFwcC5Vc2VTdGF0aWNGaWxlcygpOyBhcHAuUnVuKCk7IDwvY29kZT48L3ByZT4gPHA+6L+Z5qC35L+u5pS55ZCO77yM6aG555uu5bCGSW5kZXguaHRtbOS9nOS4uue8uuecgemhtemdouOAgiDnhLblkI7lsLHmmK/kv67mlLlJbmRleC5odG1s44CBY2FsbGJhY2suaHRtbOWSjGFwcC5qc+S4reeahOWGheWuueOAgiBJbmRleC5odG1s5Lit55qE5YaF5a655aaC5LiL77yaPC9wPiA8cHJlPjxjb2RlPiZsdDshRE9DVFlQRSBodG1sJmd0OyAmbHQ7aHRtbCZndDsgJmx0O2hlYWQmZ3Q7ICZsdDttZXRhIGNoYXJzZXQ9InV0Zi04IiAvJmd0OyAmbHQ7dGl0bGUmZ3Q7Jmx0Oy90aXRsZSZndDsgJmx0Oy9oZWFkJmd0OyAmbHQ7Ym9keSZndDsgJmx0O2J1dHRvbiBpZD0ibG9naW4iJmd0O0xvZ2luJmx0Oy9idXR0b24mZ3Q7ICZsdDtidXR0b24gaWQ9ImFwaSImZ3Q7Q2FsbCBBUEkmbHQ7L2J1dHRvbiZndDsgJmx0O2J1dHRvbiBpZD0ibG9nb3V0IiZndDtMb2dvdXQmbHQ7L2J1dHRvbiZndDsgJmx0O3ByZSBpZD0icmVzdWx0cyImZ3Q7Jmx0Oy9wcmUmZ3Q7ICZsdDtzY3JpcHQgc3JjPSJvaWRjLWNsaWVudC1qcy0xLjExLjUvb2lkYy1jbGllbnQuanMiJmd0OyZsdDsvc2NyaXB0Jmd0OyAmbHQ7c2NyaXB0IHNyYz0iYXBwLmpzIiZndDsmbHQ7L3NjcmlwdCZndDsgJmx0Oy9ib2R5Jmd0OyAmbHQ7L2h0bWwmZ3Q7IDwvY29kZT48L3ByZT4gPHA+5YaF5a655b6I566A5Y2V77yM5bCx5piv5Yib5bu65LiJ5Liq5oyJ6ZKu77yM5YiG5Yir5piv55m75b2V44CB55m75Ye65ZKM6LCD55SoQXBp44CC5omA5a6e546w55qE5Yqf6IO95ZyoYXBwLmpz5Lit5a6a5LmJ77yaPC9wPiA8cHJlPjxjb2RlPmZ1bmN0aW9uIGxvZygpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdHMnKS5pbm5lclRleHQgPSAnJzsgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhcmd1bWVudHMsIGZ1bmN0aW9uIChtc2cpIHsgaWYgKG1zZyBpbnN0YW5jZW9mIEVycm9yKSB7IG1zZyA9ICJFcnJvcjogIiArIG1zZy5tZXNzYWdlOyB9IGVsc2UgaWYgKHR5cGVvZiBtc2cgIT09ICdzdHJpbmcnKSB7IG1zZyA9IEpTT04uc3RyaW5naWZ5KG1zZywgbnVsbCwgMik7IH0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdHMnKS5pbm5lckhUTUwgKz0gbXNnICsgJyc7IH0pOyB9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2dpbiIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgbG9naW4sIGZhbHNlKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFwaSIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgYXBpLCBmYWxzZSk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2dvdXQiKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGxvZ291dCwgZmFsc2UpOyB2YXIgY29uZmlnID0geyBhdXRob3JpdHk6ICJodHRwOi8vbG9jYWxob3N0OjQwMTAiLCBjbGllbnRfaWQ6ICJqcyIsIHJlZGlyZWN0X3VyaTogImh0dHA6Ly9sb2NhbGhvc3Q6NTIxMC9jYWxsYmFjay5odG1sIiwgcmVzcG9uc2VfdHlwZTogImNvZGUiLCBzY29wZTogIm9wZW5pZCBwcm9maWxlIG15YXBpIiwgcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpOiAiaHR0cDovL2xvY2FsaG9zdDo1MjEwL2luZGV4Lmh0bWwiLCB9OyB2YXIgbWdyID0gbmV3IE9pZGMuVXNlck1hbmFnZXIoY29uZmlnKTsgbWdyLmdldFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7IGlmICh1c2VyKSB7IGxvZygiVXNlciBsb2dnZWQgaW4iLCB1c2VyLnByb2ZpbGUpOyB9IGVsc2UgeyBsb2coIlVzZXIgbm90IGxvZ2dlZCBpbiIpOyB9IH0pOyBmdW5jdGlvbiBsb2dpbigpIHsgbWdyLnNpZ25pblJlZGlyZWN0KCk7IH0gZnVuY3Rpb24gYXBpKCkgeyBtZ3IuZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsgdmFyIHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjUxNTMvV2VhdGhlckZvcmVjYXN0IjsgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOyB4aHIub3BlbigiR0VUIiwgdXJsKTsgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsgbG9nKHhoci5zdGF0dXMsIEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCkpOyB9IHhoci5zZXRSZXF1ZXN0SGVhZGVyKCJBdXRob3JpemF0aW9uIiwgIkJlYXJlciAiICsgdXNlci5hY2Nlc3NfdG9rZW4pOyB4aHIuc2VuZCgpOyB9KTsgfSBmdW5jdGlvbiBsb2dvdXQoKSB7IG1nci5zaWdub3V0UmVkaXJlY3QoKTsgfSA8L2NvZGU+PC9wcmU+IDxwPmFwcC5qc+S9v+eUqG9pZGMganPlrqLmiLfnq6/kuK3lrprkuYnnmoRPaWRjLlVzZXJNYW5hZ2Vy5a6e546w5a+56K6k6K+B5pyN5Yqh5Zmo55qE6K6/6Zeu77yM5a6M5oiQ6K6k6K+B5ZKM6I635Y+WYWNjZXNzIHRva2Vu55qE5bel5L2c77yM5YW26YWN572u5ZyoY29uZmlnIOS4reWumuS5ie+8jDwvcD4gPHByZT48Y29kZT52YXIgY29uZmlnID0geyBhdXRob3JpdHk6ICJodHRwOi8vbG9jYWxob3N0OjQwMTAiLCBjbGllbnRfaWQ6ICJqcyIsIHJlZGlyZWN0X3VyaTogImh0dHA6Ly9sb2NhbGhvc3Q6NTIxMC9jYWxsYmFjay5odG1sIiwgcmVzcG9uc2VfdHlwZTogImNvZGUiLCBzY29wZTogIm9wZW5pZCBwcm9maWxlIG15YXBpIiwgcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpOiAiaHR0cDovL2xvY2FsaG9zdDo1MjEwL2luZGV4Lmh0bWwiLCB9OyA8L2NvZGU+PC9wcmU+IDxwPuacgOWQju+8jOWumuS5iWNhbGxiYWNrLmh0bWw6PC9wPiA8cHJlPjxjb2RlPiZsdDshRE9DVFlQRSBodG1sJmd0OyAmbHQ7aHRtbCZndDsgJmx0O2hlYWQmZ3Q7ICZsdDttZXRhIGNoYXJzZXQ9InV0Zi04IiAvJmd0OyAmbHQ7dGl0bGUmZ3Q7Jmx0Oy90aXRsZSZndDsgJmx0Oy9oZWFkJmd0OyAmbHQ7Ym9keSZndDsgJmx0O3NjcmlwdCBzcmM9Im9pZGMtY2xpZW50LWpzLTEuMTEuNS9vaWRjLWNsaWVudC5qcyImZ3Q7Jmx0Oy9zY3JpcHQmZ3Q7ICZsdDtzY3JpcHQmZ3Q7IG5ldyBPaWRjLlVzZXJNYW5hZ2VyKHtyZXNwb25zZV9tb2RlOiJxdWVyeSJ9KS5zaWduaW5SZWRpcmVjdENhbGxiYWNrKCkudGhlbihmdW5jdGlvbigpIHsgd2luZG93LmxvY2F0aW9uID0gImluZGV4Lmh0bWwiOyB9KS5jYXRjaChmdW5jdGlvbihlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IH0pOyAmbHQ7L3NjcmlwdCZndDsgJmx0Oy9ib2R5Jmd0OyAmbHQ7L2h0bWwmZ3Q7IDwvY29kZT48L3ByZT4gPHA+5Yiw5q2k77yM5a6i5oi356uv57yW5YaZ5a6M5oiQ77yM5oiR5Lus6L+Y6ZyA6KaB5Zyo6K6k6K+B5pyN5Yqh566h55CG5Lit5a6a5LmJ6L+Z5Liq5a6i5oi356uv77yM5rOo5oSP77yM5Zyo5a6a5LmJ5pe26ZyA6KaB6YCJ5oup5Y2V6aG16Z2i5bqU55So77yaIOWPguiAg+S4iumdomNvbmZpZ+S4reeahOWumuS5ieiuvue9ruWuouaIt+err+eahOWFtuWug+mDqOWIhu+8miDmnIDlkI7kuIDpobnlt6XkvZzmmK/kv67mlLlXZWIgQXBp77yM5aKe5Yqg6L+Z5Liq572R5Z2A55qEQ09SU+iuvue9ru+8mjwvcD4gPHByZT48Y29kZT5idWlsZGVyLlNlcnZpY2VzLkFkZENvcnMob3B0aW9uID0mZ3Q7IG9wdGlvbi5BZGRQb2xpY3koImNvcnMiLCBwb2xpY3kgPSZndDsgcG9saWN5LkFsbG93QW55SGVhZGVyKCkgLkFsbG93QW55TWV0aG9kKCkgLkFsbG93Q3JlZGVudGlhbHMoKSAuV2l0aE9yaWdpbnMobmV3W10geyAiaHR0cHM6Ly9sb2NhbGhvc3Q6NzAwMiIsICJodHRwOi8vbG9jYWxob3N0OjUyMTAiIH0pKSk7IDwvY29kZT48L3ByZT4gPHA+5aW95LqG77yM546w5Zyo5Y+v5Lul5rWL6K+V5LiA5LiL6L+Z5Liq5bqU55So5LqG77yM5ZyoVmlzdWFsIFN0dWRpb+S4reWwhuino+WGs+aWueahiOeahOWQr+WKqOmhueebruiuvue9ruS4uuWkmumhueebruWQr+WKqO+8jOWQjOaXtuWQr+WKqEpTQ2xpZW505ZKMV2ViIEFwaemhueebru+8miA8L3A+IDxwPuaMiUY16L+Q6KGM77yM55WM6Z2i5aaC5LiL77yaIOeCueWHu0xvZ2lu77yM5Lya6YeN5a6a5L2N5Yiw6K6k6K+B5pyN5Yqh5Zmo55qE55m75b2V55WM6Z2iLOeZu+W9leWujOaIkOWQjuS8muaYvuekuueUqOaIt+eahOS/oeaBr++8miDngrnlh7tDYWxsIEFwae+8jOS8muiuv+mXrldlYiBBcGnlubbmmL7npLrnu5PmnpzvvJog5Yiw5q2k77yM5Y2V6aG16Z2i5a6i5oi356uv5a6M5oiQ44CC55u45YWz5Luj56CB5Y+v5Lul5LuOZ2l0aHVi5LiL6L2977yaIDxhID5odHRwczovL2dpdGh1Yi5jb20vemhlbmwvSURTNENsaWVudERlbW88L2E+IOOAgjwvcD4gPC9kaXY+IDxkaXYgPiA8cD7mnKzmlofmnaXoh6rljZrlrqLlm63vvIzkvZzogIXvvJo8YSA+5a+75om+5peg5ZCN55qE54m56LSoPC9hPu+8jOi9rOi9veivt+azqOaYjuWOn+aWh+mTvuaOpe+8mjxhID5odHRwczovL3d3dy5jbmJsb2dzLmNvbS96aGVubC9wLzE1NjI5NDU3Lmh0bWw8L2E+PC9wPiA8L2Rpdj4gPC9kaXY+IDxwID4gcG9zdGVkIG9uIDIwMjEtMTItMDYgMTY6MjAgPGEgPuWvu+aJvuaXoOWQjeeahOeJuei0qDwvYT4g6ZiF6K+7KDExMykg6K+E6K66KDApIOe8lui+kSDmlLbol48gPGEgPuS4vuaKpTwvYT4gPC9wPiA8L2Rpdj4gPC9kaXY+IDxkaXYgPiA8ZGl2ID48YSA+5Yi35paw6K+E6K66PC9hPjxhID7liLfmlrDpobXpnaI8L2E+PGEgPui/lOWbnumhtumDqDwvYT48L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGRpdiA+IDxoMz7lr7zoiKo8L2gzPiA8dWw+IDxsaT4gPGEgPiDljZrlrqLlm608L2E+IDwvbGk+IDxsaT4gPGEgPiDpppbpobU8L2E+IDwvbGk+IDxsaT4gPGEgPiDmlrDpmo/nrJQ8L2E+IDwvbGk+IDxsaT4gPGEgPiDogZTns7s8L2E+IDwvbGk+IDxsaT4gPGEgPiDorqLpmIU8L2E+IDwvbGk+IDxsaT4gPGEgPiDnrqHnkIY8L2E+IDwvbGk+IDwvdWw+IDwvZGl2PiA8L2Rpdj4gPGRpdiA+IDxwID4gUG93ZXJlZCBieTogPGEgPuWNmuWuouWbrTwvYT4gQ29weXJpZ2h0IMKpIDIwMjEg5a+75om+5peg5ZCN55qE54m56LSoIDxzcGFuID5Qb3dlcmVkIGJ5IC5ORVQgNiBvbiBLdWJlcm5ldGVzPC9zcGFuPiA8L3A+IDwvZGl2PiA8L2Rpdj4gPC9ib2R5Pg=='</script>

      </head>
        <body class="valid" valid="valid" title="valid: True, node: 1, level: 1" node_number="1"> <div class="valid" valid="valid" title="valid: True, node: 2, level: 2" node_number="2">  </div> <div class="valid" valid="valid" title="valid: True, node: 3, level: 2" node_number="3"> <div class="valid" valid="valid" title="valid: True, node: 4, level: 3" node_number="4"> <div class="valid" valid="valid" title="valid: True, node: 5, level: 4" node_number="5"> <h1 class="valid" valid="valid" title="valid: True, node: 6, level: 5" node_number="6"><a class="valid" valid="valid" title="valid: True, node: 7, level: 6" node_number="7">&#23547;&#25214;&#26080;&#21517;&#30340;&#29305;&#36136;</a> </h1> <div class="valid" valid="valid" title="valid: True, node: 8, level: 5" node_number="8">&#30693;&#35782;&#38656;&#35201;&#28857;&#28404;&#30340;&#31215;&#32047;</div> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 9, level: 3" node_number="9"> <div class="valid" valid="valid" title="valid: True, node: 10, level: 4" node_number="10"> <div class="valid" valid="valid" title="valid: True, node: 11, level: 5" node_number="11"> <div class="valid" valid="valid" title="valid: True, node: 12, level: 6" node_number="12"> <div class="valid" valid="valid" title="valid: True, node: 13, level: 7" node_number="13"> <h2 class="valid" valid="valid" title="valid: True, node: 14, level: 8" node_number="14"> <a class="valid" valid="valid" title="valid: True, node: 15, level: 9" node_number="15"> Identity Server 4 &#20174;&#20837;&#38376;&#21040;&#33853;&#22320;&#65288;&#20845;&#65289;&#8212;&#8212; &#31616;&#21333;&#30340;&#21333;&#39029;&#38754;&#23458;&#25143;&#31471; </a> </h2> <div class="valid" valid="valid" title="valid: True, node: 16, level: 8" node_number="16"> <div class="valid" valid="valid" title="valid: True, node: 17, level: 9" node_number="17"> &#20351;&#29992;odic JS&#23458;&#25143;&#31471;&#24320;&#21457;Identity Server 4 &#35748;&#35777;&#30340;&#21333;&#39029;&#38754;&#24212;&#29992; </div> <div class="valid" valid="valid" title="valid: True, node: 18, level: 9" node_number="18"> <p class="valid" valid="valid" title="valid: True, node: 19, level: 10" node_number="19">&#21069;&#38754;&#30340;&#37096;&#20998;&#65306; Identity Server 4 &#20174;&#20837;&#38376;&#21040;&#33853;&#22320;&#65288;&#19968;&#65289;&#8212;&#8212; &#20174;IdentityServer4.Admin&#24320;&#22987; <a class="valid" valid="valid" title="valid: True, node: 20, level: 11" node_number="20">Identity Server 4 &#20174;&#20837;&#38376;&#21040;&#33853;&#22320;&#65288;&#20108;&#65289;&#8212;&#8212; &#29702;&#35299;&#25480;&#26435;&#30721;&#27169;&#24335;</a> <a class="valid" valid="valid" title="valid: True, node: 21, level: 11" node_number="21">Identity Server 4 &#20174;&#20837;&#38376;&#21040;&#33853;&#22320;&#65288;&#19977;&#65289;&#8212;&#8212; &#21019;&#24314;Web&#23458;&#25143;&#31471;</a> <a class="valid" valid="valid" title="valid: True, node: 22, level: 11" node_number="22">Identity Server 4 &#20174;&#20837;&#38376;&#21040;&#33853;&#22320;&#65288;&#22235;&#65289;&#8212;&#8212; &#21019;&#24314;Web Api</a> <a class="valid" valid="valid" title="valid: True, node: 23, level: 11" node_number="23">Identity Server 4 &#20174;&#20837;&#38376;&#21040;&#33853;&#22320;&#65288;&#20116;&#65289;&#8212;&#8212; &#20351;&#29992;Ajax &#35775;&#38382; Web Api</a></p> <p class="valid" valid="valid" title="valid: True, node: 24, level: 10" node_number="24">&#35748;&#35777;&#26381;&#21153;&#21644;&#31649;&#29702;&#30340;github&#22320;&#22336;&#65306; <a class="valid" valid="valid" title="valid: True, node: 25, level: 11" node_number="25">https://github.com/zhenl/IDS4Admin</a> &#23458;&#25143;&#31471;&#21450;web api&#31034;&#20363;&#20195;&#30721;&#30340;github&#22320;&#22336;&#65306;<a class="valid" valid="valid" title="valid: True, node: 26, level: 11" node_number="26">https://github.com/zhenl/IDS4ClientDemo</a></p> <p class="valid" valid="valid" title="valid: True, node: 27, level: 10" node_number="27">&#21069;&#38754;&#25105;&#20204;&#22312;Web&#24212;&#29992;&#30340;&#39029;&#38754;&#19978;&#20351;&#29992;Ajax&#35775;&#38382;Web Api, &#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#35748;&#35777;&#20197;&#21450;&#33719;&#21462;Access Token&#36824;&#26159;&#22312;&#21518;&#21488;&#36827;&#34892;&#30340;&#65292;&#32780;&#30495;&#27491;&#30340;&#21333;&#39029;&#38754;&#24212;&#29992;&#27809;&#26377;&#21518;&#21488;&#30340;&#21442;&#19982;&#65292;web&#26381;&#21153;&#22120;&#21482;&#36215;&#21040;host&#25991;&#20214;&#30340;&#20316;&#29992;&#65292;&#36825;&#37096;&#20998;&#25105;&#20204;&#32534;&#20889;&#31616;&#21333;&#30340;&#21333;&#39029;&#38754;&#24212;&#29992;&#65292;&#35797;&#39564;&#19968;&#19979;&#21333;&#39029;&#38754;&#35775;&#38382;&#21463;&#35748;&#35777;&#20445;&#25252;&#30340;Web Api&#12290;</p> <p class="valid" valid="valid" title="valid: True, node: 28, level: 10" node_number="28">&#25105;&#20204;&#21442;&#32771;Identity Server 4&#30340;&#23448;&#32593;&#31034;&#20363;&#32534;&#20889;&#36825;&#20010;&#21333;&#39029;&#38754;&#24212;&#29992;&#65292;&#23558;&#20854;&#20013;&#30340;&#35748;&#35777;&#26381;&#21153;&#22120;&#25913;&#20026;&#25105;&#20204;&#26412;&#22320;&#36816;&#34892;&#30340;&#35748;&#35777;&#26381;&#21153;http://localhost:4010,Web Api&#20351;&#29992;&#21069;&#38754;&#32534;&#20889;&#30340;&#31616;&#21333;&#31034;&#20363;&#65292;&#22320;&#22336;&#20026;http://localhost:5153&#12290;&#22312;&#32534;&#20889;&#20043;&#21069;&#65292;&#39318;&#20808;&#19979;&#36733;oidc&#30340;&#23458;&#25143;&#31471;&#65292;&#21487;&#20197;&#20174;github&#19979;&#36733;&#65306; <a class="valid" valid="valid" title="valid: True, node: 29, level: 11" node_number="29">https://github.com/IdentityModel/oidc-client-js/releases/tag/1.11.5</a> &#12290;&#25105;&#20204;&#20351;&#29992;&#32534;&#35793;&#23436;&#25104;&#30340;&#26368;&#32456;&#25991;&#20214;&#65292;&#23558;&#19979;&#36733;&#30340;&#25991;&#20214;&#35299;&#21387;&#65292;dist&#30446;&#24405;&#23601;&#26159;&#25105;&#20204;&#38656;&#35201;&#30340;&#25991;&#20214;&#12290;</p> <p class="valid" valid="valid" title="valid: True, node: 30, level: 10" node_number="30">&#39318;&#20808;&#20351;&#29992;Visual Studio 2022&#21019;&#24314;&#19968;&#20010;&#31354;&#30340;Asp.Net Core Web&#39033;&#30446;&#65292;&#25105;&#20204;&#20351;&#29992;&#36825;&#20010;&#39033;&#30446;&#20316;&#20026;html&#21644;js&#25991;&#20214;&#30340;&#23487;&#20027;&#65292;&#38500;&#27492;&#20043;&#22806;&#19981;&#20570;&#20854;&#23427;&#24037;&#20316;&#12290;&#22312;&#39033;&#30446;&#30446;&#24405;&#19979;&#21019;&#24314;wwwroot&#30446;&#24405;&#65292;&#29992;&#20110;&#20445;&#23384;html&#21644;js&#25991;&#20214;&#65292;&#23558;&#19979;&#36733;&#30340;dist&#30446;&#24405;&#25335;&#36125;&#21040;&#36825;&#20010;&#30446;&#24405;&#20013;&#65292;&#30446;&#24405;&#21517;&#23383;&#25913;&#20026;oidc-client-js-1.11.5&#12290;&#28982;&#21518;&#22312;wwwroot&#19979;&#21019;&#24314;index.html&#12289;callback.html&#21644;app.js&#19977;&#20010;&#25991;&#20214;&#65292;&#25991;&#20214;&#30340;&#20869;&#23481;&#22312;&#21518;&#38754;&#22635;&#20889;&#12290;&#39033;&#30446;&#30340;&#32467;&#26500;&#22914;&#19979;&#65306; &#28982;&#21518;&#20462;&#25913;lanuchSettings.json&#65292;&#39033;&#30446;&#30340;&#36816;&#34892;&#22320;&#22336;&#26159;http://localhost:5210&#65306;</p> <pre class="valid" valid="valid" title="valid: True, node: 31, level: 10" node_number="31"><code class="valid" valid="valid" title="valid: True, node: 32, level: 11" node_number="32">{ "profiles": { "IDS4ClientJS": { "commandName": "Project", "dotnetRunMessages": true, "launchBrowser": true, "applicationUrl": "http://localhost:5210", "environmentVariables": { "ASPNETCORE_ENVIRONMENT": "Development" } } } } </code></pre> <p class="valid" valid="valid" title="valid: True, node: 33, level: 10" node_number="33">&#25509;&#19979;&#26469;&#20462;&#25913;program.cs&#65292;&#20351;&#24212;&#29992;&#25903;&#25345;&#38745;&#24577;&#25991;&#20214;&#65306;</p> <pre class="valid" valid="valid" title="valid: True, node: 34, level: 10" node_number="34"><code class="valid" valid="valid" title="valid: True, node: 35, level: 11" node_number="35">var builder = WebApplication.CreateBuilder(args); var app = builder.Build(); app.UseDefaultFiles(); app.UseStaticFiles(); app.Run(); </code></pre> <p class="valid" valid="valid" title="valid: True, node: 36, level: 10" node_number="36">&#36825;&#26679;&#20462;&#25913;&#21518;&#65292;&#39033;&#30446;&#23558;Index.html&#20316;&#20026;&#32570;&#30465;&#39029;&#38754;&#12290; &#28982;&#21518;&#23601;&#26159;&#20462;&#25913;Index.html&#12289;callback.html&#21644;app.js&#20013;&#30340;&#20869;&#23481;&#12290; Index.html&#20013;&#30340;&#20869;&#23481;&#22914;&#19979;&#65306;</p> <pre class="valid" valid="valid" title="valid: True, node: 37, level: 10" node_number="37"><code class="valid" valid="valid" title="valid: True, node: 38, level: 11" node_number="38">&lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset="utf-8" /&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;button id="login"&gt;Login&lt;/button&gt; &lt;button id="api"&gt;Call API&lt;/button&gt; &lt;button id="logout"&gt;Logout&lt;/button&gt; &lt;pre id="results"&gt;&lt;/pre&gt; &lt;script src="oidc-client-js-1.11.5/oidc-client.js"&gt;&lt;/script&gt; &lt;script src="app.js"&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt; </code></pre> <p class="valid" valid="valid" title="valid: True, node: 39, level: 10" node_number="39">&#20869;&#23481;&#24456;&#31616;&#21333;&#65292;&#23601;&#26159;&#21019;&#24314;&#19977;&#20010;&#25353;&#38062;&#65292;&#20998;&#21035;&#26159;&#30331;&#24405;&#12289;&#30331;&#20986;&#21644;&#35843;&#29992;Api&#12290;&#25152;&#23454;&#29616;&#30340;&#21151;&#33021;&#22312;app.js&#20013;&#23450;&#20041;&#65306;</p> <pre class="valid" valid="valid" title="valid: True, node: 40, level: 10" node_number="40"><code class="valid" valid="valid" title="valid: True, node: 41, level: 11" node_number="41">function log() { document.getElementById('results').innerText = ''; Array.prototype.forEach.call(arguments, function (msg) { if (msg instanceof Error) { msg = "Error: " + msg.message; } else if (typeof msg !== 'string') { msg = JSON.stringify(msg, null, 2); } document.getElementById('results').innerHTML += msg + ''; }); } document.getElementById("login").addEventListener("click", login, false); document.getElementById("api").addEventListener("click", api, false); document.getElementById("logout").addEventListener("click", logout, false); var config = { authority: "http://localhost:4010", client_id: "js", redirect_uri: "http://localhost:5210/callback.html", response_type: "code", scope: "openid profile myapi", post_logout_redirect_uri: "http://localhost:5210/index.html", }; var mgr = new Oidc.UserManager(config); mgr.getUser().then(function (user) { if (user) { log("User logged in", user.profile); } else { log("User not logged in"); } }); function login() { mgr.signinRedirect(); } function api() { mgr.getUser().then(function (user) { var url = "http://localhost:5153/WeatherForecast"; var xhr = new XMLHttpRequest(); xhr.open("GET", url); xhr.onload = function () { log(xhr.status, JSON.parse(xhr.responseText)); } xhr.setRequestHeader("Authorization", "Bearer " + user.access_token); xhr.send(); }); } function logout() { mgr.signoutRedirect(); } </code></pre> <p class="valid" valid="valid" title="valid: True, node: 42, level: 10" node_number="42">app.js&#20351;&#29992;oidc js&#23458;&#25143;&#31471;&#20013;&#23450;&#20041;&#30340;Oidc.UserManager&#23454;&#29616;&#23545;&#35748;&#35777;&#26381;&#21153;&#22120;&#30340;&#35775;&#38382;&#65292;&#23436;&#25104;&#35748;&#35777;&#21644;&#33719;&#21462;access token&#30340;&#24037;&#20316;&#65292;&#20854;&#37197;&#32622;&#22312;config &#20013;&#23450;&#20041;&#65292;</p> <pre class="valid" valid="valid" title="valid: True, node: 43, level: 10" node_number="43"><code class="valid" valid="valid" title="valid: True, node: 44, level: 11" node_number="44">var config = { authority: "http://localhost:4010", client_id: "js", redirect_uri: "http://localhost:5210/callback.html", response_type: "code", scope: "openid profile myapi", post_logout_redirect_uri: "http://localhost:5210/index.html", }; </code></pre> <p class="valid" valid="valid" title="valid: True, node: 45, level: 10" node_number="45">&#26368;&#21518;&#65292;&#23450;&#20041;callback.html:</p> <pre class="valid" valid="valid" title="valid: True, node: 46, level: 10" node_number="46"><code class="valid" valid="valid" title="valid: True, node: 47, level: 11" node_number="47">&lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset="utf-8" /&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;script src="oidc-client-js-1.11.5/oidc-client.js"&gt;&lt;/script&gt; &lt;script&gt; new Oidc.UserManager({response_mode:"query"}).signinRedirectCallback().then(function() { window.location = "index.html"; }).catch(function(e) { console.error(e); }); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; </code></pre> <p class="valid" valid="valid" title="valid: True, node: 48, level: 10" node_number="48">&#21040;&#27492;&#65292;&#23458;&#25143;&#31471;&#32534;&#20889;&#23436;&#25104;&#65292;&#25105;&#20204;&#36824;&#38656;&#35201;&#22312;&#35748;&#35777;&#26381;&#21153;&#31649;&#29702;&#20013;&#23450;&#20041;&#36825;&#20010;&#23458;&#25143;&#31471;&#65292;&#27880;&#24847;&#65292;&#22312;&#23450;&#20041;&#26102;&#38656;&#35201;&#36873;&#25321;&#21333;&#39029;&#38754;&#24212;&#29992;&#65306; &#21442;&#32771;&#19978;&#38754;config&#20013;&#30340;&#23450;&#20041;&#35774;&#32622;&#23458;&#25143;&#31471;&#30340;&#20854;&#23427;&#37096;&#20998;&#65306; &#26368;&#21518;&#19968;&#39033;&#24037;&#20316;&#26159;&#20462;&#25913;Web Api&#65292;&#22686;&#21152;&#36825;&#20010;&#32593;&#22336;&#30340;CORS&#35774;&#32622;&#65306;</p> <pre class="valid" valid="valid" title="valid: True, node: 49, level: 10" node_number="49"><code class="valid" valid="valid" title="valid: True, node: 50, level: 11" node_number="50">builder.Services.AddCors(option =&gt; option.AddPolicy("cors", policy =&gt; policy.AllowAnyHeader() .AllowAnyMethod() .AllowCredentials() .WithOrigins(new[] { "https://localhost:7002", "http://localhost:5210" }))); </code></pre> <p class="valid" valid="valid" title="valid: True, node: 51, level: 10" node_number="51">&#22909;&#20102;&#65292;&#29616;&#22312;&#21487;&#20197;&#27979;&#35797;&#19968;&#19979;&#36825;&#20010;&#24212;&#29992;&#20102;&#65292;&#22312;Visual Studio&#20013;&#23558;&#35299;&#20915;&#26041;&#26696;&#30340;&#21551;&#21160;&#39033;&#30446;&#35774;&#32622;&#20026;&#22810;&#39033;&#30446;&#21551;&#21160;&#65292;&#21516;&#26102;&#21551;&#21160;JSClient&#21644;Web Api&#39033;&#30446;&#65306; </p> <p class="valid" valid="valid" title="valid: True, node: 52, level: 10" node_number="52">&#25353;F5&#36816;&#34892;&#65292;&#30028;&#38754;&#22914;&#19979;&#65306; &#28857;&#20987;Login&#65292;&#20250;&#37325;&#23450;&#20301;&#21040;&#35748;&#35777;&#26381;&#21153;&#22120;&#30340;&#30331;&#24405;&#30028;&#38754;,&#30331;&#24405;&#23436;&#25104;&#21518;&#20250;&#26174;&#31034;&#29992;&#25143;&#30340;&#20449;&#24687;&#65306; &#28857;&#20987;Call Api&#65292;&#20250;&#35775;&#38382;Web Api&#24182;&#26174;&#31034;&#32467;&#26524;&#65306; &#21040;&#27492;&#65292;&#21333;&#39029;&#38754;&#23458;&#25143;&#31471;&#23436;&#25104;&#12290;&#30456;&#20851;&#20195;&#30721;&#21487;&#20197;&#20174;github&#19979;&#36733;&#65306; <a class="valid" valid="valid" title="valid: True, node: 53, level: 11" node_number="53">https://github.com/zhenl/IDS4ClientDemo</a> &#12290;</p> </div> <div class="valid" valid="valid" title="valid: True, node: 54, level: 9" node_number="54"> <p class="valid" valid="valid" title="valid: True, node: 55, level: 10" node_number="55">&#26412;&#25991;&#26469;&#33258;&#21338;&#23458;&#22253;&#65292;&#20316;&#32773;&#65306;<a class="valid" valid="valid" title="valid: True, node: 56, level: 11" node_number="56">&#23547;&#25214;&#26080;&#21517;&#30340;&#29305;&#36136;</a>&#65292;&#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#25991;&#38142;&#25509;&#65306;<a class="valid" valid="valid" title="valid: True, node: 57, level: 11" node_number="57">https://www.cnblogs.com/zhenl/p/15629457.html</a></p> </div> </div> <p class="valid" valid="valid" title="valid: True, node: 58, level: 8" node_number="58"> posted on 2021-12-06 16:20 <a class="valid" valid="valid" title="valid: True, node: 59, level: 9" node_number="59">&#23547;&#25214;&#26080;&#21517;&#30340;&#29305;&#36136;</a> &#38405;&#35835;(113) &#35780;&#35770;(0) &#32534;&#36753; &#25910;&#34255; <a class="valid" valid="valid" title="valid: True, node: 60, level: 9" node_number="60">&#20030;&#25253;</a> </p> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 61, level: 6" node_number="61"> <div class="valid" valid="valid" title="valid: True, node: 62, level: 7" node_number="62"><a class="valid" valid="valid" title="valid: True, node: 63, level: 8" node_number="63">&#21047;&#26032;&#35780;&#35770;</a><a class="valid" valid="valid" title="valid: True, node: 64, level: 8" node_number="64">&#21047;&#26032;&#39029;&#38754;</a><a class="valid" valid="valid" title="valid: True, node: 65, level: 8" node_number="65">&#36820;&#22238;&#39030;&#37096;</a></div> </div> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 66, level: 4" node_number="66"> <h3 class="valid" valid="valid" title="valid: True, node: 67, level: 5" node_number="67">&#23548;&#33322;</h3> <ul class="valid" valid="valid" title="valid: True, node: 68, level: 5" node_number="68"> <li class="valid" valid="valid" title="valid: True, node: 69, level: 6" node_number="69"> <a class="valid" valid="valid" title="valid: True, node: 70, level: 7" node_number="70"> &#21338;&#23458;&#22253;</a> </li> <li class="valid" valid="valid" title="valid: True, node: 71, level: 6" node_number="71"> <a class="valid" valid="valid" title="valid: True, node: 72, level: 7" node_number="72"> &#39318;&#39029;</a> </li> <li class="valid" valid="valid" title="valid: True, node: 73, level: 6" node_number="73"> <a class="valid" valid="valid" title="valid: True, node: 74, level: 7" node_number="74"> &#26032;&#38543;&#31508;</a> </li> <li class="valid" valid="valid" title="valid: True, node: 75, level: 6" node_number="75"> <a class="valid" valid="valid" title="valid: True, node: 76, level: 7" node_number="76"> &#32852;&#31995;</a> </li> <li class="valid" valid="valid" title="valid: True, node: 77, level: 6" node_number="77"> <a class="valid" valid="valid" title="valid: True, node: 78, level: 7" node_number="78"> &#35746;&#38405;</a> </li> <li class="valid" valid="valid" title="valid: True, node: 79, level: 6" node_number="79"> <a class="valid" valid="valid" title="valid: True, node: 80, level: 7" node_number="80"> &#31649;&#29702;</a> </li> </ul> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 81, level: 3" node_number="81"> <p class="valid" valid="valid" title="valid: True, node: 82, level: 4" node_number="82"> Powered by: <a class="valid" valid="valid" title="valid: True, node: 83, level: 5" node_number="83">&#21338;&#23458;&#22253;</a> Copyright &#169; 2021 &#23547;&#25214;&#26080;&#21517;&#30340;&#29305;&#36136; <span class="valid" valid="valid" title="valid: True, node: 84, level: 5" node_number="84">Powered by .NET 6 on Kubernetes</span> </p> </div> </div> </body>
        <style tyle='text/css'>
body{
    position: relative;
    padding-left: 30px;
    top: 60px;
}
* {
    border: 1px solid #eee;
    padding: 5px 12px;
    margin: 3px 0;
    box-sizing: content-box;
    background-color: #fff;
    cursor: no-drop;
}
main:hover > *, section:hover > *, header:hover > *, nav:hover > *, a:hover > *, div:hover > *, p:hover > *, ul:hover > *, h1:hover > *, h2:hover > *, h3:hover > *, li:hover > *, span:hover > *{
    border: 2px solid green;
    background-color: #fffeee;
    padding: 5px 23px !important;
    margin: 1px 0;
    color: green;
}
main:hover, section:hover, header:hover, nav:hover, a:hover, div:hover, p:hover, ul:hover, h1:hover, h2:hover, h3:hover, li:hover, span:hover{
    border: 1px solid #fff;
    background-color: #eee;
}
a, span {
    display: block;
}
.selected {
    border: 2px solid orchid !important;
    opacity: 0.8;
    color: orchid !important;
}
.selected * {
    padding: 2px !important;
    color: orchid !important;
}
.valid {
  cursor: pointer;
}
.btn{
  cursor: pointer;
  font-weight: bolder;
  padding: 8px;
}
</style> 
        <script>function OpenOriginalLink($event){
    $event.stopPropagation();
    console.log(url);
}

function removeItem($event){
    $event.stopPropagation();
    console.log('Remove item: ', url)
    localStorage.removeItem(url)
}

function exportData($event){
    $event.stopPropagation();

    result = []
    for(let i=0; i<localStorage.length; i++) {
        let key = localStorage.key(i);
        result.push(localStorage.getItem(key))
    }
    const _url = URL.createObjectURL(new Blob([result.join("\n")], {type: 'text/plain'}))
    $event.target.href = _url;
    localStorage.clear()
}

var removeItemBtn = document.createElement("BUTTON");   // Create a <button> element
removeItemBtn.innerHTML = "Remove Item";
removeItemBtn.classList.add('btn');
removeItemBtn.style.position = "fixed";
removeItemBtn.style.left = '5px';
removeItemBtn.style.top = 0;
removeItemBtn.style.border = "1px solid";
removeItemBtn.style.boxShadow = "3px 3px #888";
removeItemBtn.onclick = removeItem;
document.body.appendChild(removeItemBtn);

var goToOriginLink = document.createElement("A");   // Create a <button> element
goToOriginLink.innerHTML = "GoToOrigin";
goToOriginLink.classList.add('btn');
goToOriginLink.style.position = "fixed"
goToOriginLink.style.left = '115px'
goToOriginLink.style.top = 0;
goToOriginLink.onclick = OpenOriginalLink;
goToOriginLink.setAttribute('href', decodeURIComponent(url));
goToOriginLink.target = '_blank';
document.body.appendChild(goToOriginLink);

var current = new Date
var exportDataLink = document.createElement("A");   // Create a <button> element
exportDataLink.innerHTML = "Export data";
exportDataLink.classList.add('btn');
exportDataLink.download = current.toISOString() + '.exported.txt';
exportDataLink.style.position = "fixed";
exportDataLink.style.right = '5px';
exportDataLink.style.top = 0;
exportDataLink.style.border = "1px solid #888";
exportDataLink.style.boxShadow = "3px 3px #888";
exportDataLink.onclick = exportData;
document.body.appendChild(exportDataLink);

data = {
    'title': null ,
    'article': null
}

var body = document.getElementsByTagName("body")[0];

body.onclick = function($e){
    var num = $e.target.getAttribute('node_number')
    var valid = $e.target.getAttribute('valid')

    if(!valid){
        console.log("Element is invalid")
        return
    }

    if(data.length > 2){
        data = data.splice(0, 2)
    }

    console.log("node:", $e.target)

    if(!data.title && !data.article){
        data.title = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else if (data.title && !data.article){
        data.article = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else{
        selected = Array.from(document.getElementsByClassName("selected"))
        selected.forEach(function(el){
            el.classList.remove('selected')
        })

        data.title = num;
        data.article = null;
        $e.target.classList.add('selected')

    }

    if(data.title && data.article){
        var obj = {
            url: url,
            text: body_html,
            title: data.title,
            article: data.article,
        }

        var datasetItem = JSON.stringify(obj)
        localStorage.setItem(url, datasetItem)
    }
}
</script> 
      </html>