<!DOCTYPE html>
<html>
<head>

      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

        <script> var url = encodeURIComponent('https://blog.sentry.io/2021/08/12/distributed-tracing-101-for-full-stack-developers/');</script>

        <script> var body_html = 'PGJvZHk+PGRpdiA+PGRpdiA+PGRpdiA+PGhlYWRlciA+PGRpdiA+PC9kaXY+PC9oZWFkZXI+PGRpdiA+PGRpdiA+PGRpdiA+PGRpdiA+PGRpdiA+PGRpdiA+PGEgPkJsb2c8L2E+PC9kaXY+PC9kaXY+PGRpdiA+PGEgPkFyY2hpdmU8L2E+PGEgPlR3aXR0ZXI8L2E+PGEgPkZlZWQ8L2E+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PG1haW4gPjxkaXYgPjxkaXYgPjxkaXYgPjxkaXYgPjxkaXYgPjxhID48ZGl2ID5TaGFyZSBvbiBUd2l0dGVyPC9kaXY+PC9hPjxhID48ZGl2ID5TaGFyZSBvbiBGYWNlYm9vazwvZGl2PjwvYT48YSA+PGRpdiA+U2hhcmUgb24gSGFja2VyTmV3czwvZGl2PjwvYT48L2Rpdj48YXJ0aWNsZSA+PGRpdiA+PHRpbWUgPkF1Z3VzdCAxMiwgMjAyMTwvdGltZT48L2Rpdj48dWwgPjxsaT48YSA+UGVyZm9ybWFuY2U8L2E+PC9saT48L3VsPjxoMT5EaXN0cmlidXRlZCBUcmFjaW5nIDEwMSBmb3IgRnVsbCBTdGFjayBEZXZlbG9wZXJzPC9oMT48ZGl2ID48cD5XZWxjb21lIHRvIFBhcnQgMSBvZiBvdXIgbXVsdGlwYXJ0IHNlcmllcyBvbiBEaXN0cmlidXRlZCBUcmFjaW5nIGZvciBGdWxsIFN0YWNrIERldmVsb3BlcnMuIEluIHRoaXMgc2VyaWVzLCB3ZeKAmWxsIGJlIGxlYXJuaW5nIHRoZSBpbnMtYW5kLW91dHMgb2YgZGlzdHJpYnV0ZWQgdHJhY2luZyBhbmQgaG93IGl0IGNhbiBhc3Npc3QgeW91IGluIG1vbml0b3JpbmcgdGhlIGluY3JlYXNpbmdseSBjb21wbGV4IHJlcXVpcmVtZW50cyBvZiBmdWxsIHN0YWNrIGFwcGxpY2F0aW9ucy48L3A+IDxwPkluIHRoZSBlYXJseSBkYXlzIG9mIHRoZSB3ZWIsIHdyaXRpbmcgd2ViIGFwcGxpY2F0aW9ucyB3YXMgc2ltcGxlLiBEZXZlbG9wZXJzIGdlbmVyYXRlZCBIVE1MIG9uIHRoZSBzZXJ2ZXIgdXNpbmcgYSBsYW5ndWFnZSBsaWtlIFBIUCwgY29tbXVuaWNhdGVkIHdpdGggYSBzaW5nbGUgcmVsYXRpb25hbCBkYXRhYmFzZSBsaWtlIE15U1FMLCBhbmQgbW9zdCBpbnRlcmFjdGl2aXR5IHdhcyBkcml2ZW4gYnkgc3RhdGljIEhUTUwgZm9ybSBjb21wb25lbnRzLiBXaGlsZSBkZWJ1Z2dpbmcgdG9vbHMgd2VyZSBwcmltaXRpdmUsIHVuZGVyc3RhbmRpbmcgdGhlIGV4ZWN1dGlvbiBmbG93IG9mIHlvdXIgY29kZSB3YXMgc3RyYWlnaHRmb3J3YXJkLjwvcD4gPHA+SW4gdG9kYXnigJlzIG1vZGVybiB3ZWIgc3RhY2sgaXTigJlzIGFueXRoaW5nIGJ1dC4gRnVsbCBzdGFjayBkZXZlbG9wZXJzIGFyZSBleHBlY3RlZCB0byB3cml0ZSBKYXZhU2NyaXB0IGV4ZWN1dGluZyBpbiB0aGUgYnJvd3NlciwgaW50ZXJvcCB3aXRoIG11bHRpcGxlIGRhdGFiYXNlIHRlY2hub2xvZ2llcywgYW5kIGRlcGxveSBzZXJ2ZXIgc2lkZSBjb2RlIG9uIGRpZmZlcmVudCBzZXJ2ZXIgYXJjaGl0ZWN0dXJlcyAoZS5nLiBzZXJ2ZXJsZXNzKS4gV2l0aG91dCB0aGUgcmlnaHQgdG9vbHMsIHVuZGVyc3RhbmRpbmcgaG93IGEgdXNlciBpbnRlcmFjdGlvbiBpbiB0aGUgYnJvd3NlciBjYXNjYWRlcyBpbnRvIGEgNTAwIHNlcnZlciBlcnJvciBkZWVwIGluIHlvdXIgc2VydmVyIHN0YWNrIGlzIG5pZ2gtaW1wb3NzaWJsZS4gRW50ZXI6IGRpc3RyaWJ1dGVkIHRyYWNpbmcuPC9wPiA8L2Rpdj48ZGl2ID4gPHA+RGlzdHJpYnV0ZWQgdHJhY2luZyBpcyBhIG1vbml0b3JpbmcgdGVjaG5pcXVlIHRoYXQgbGlua3MgdGhlIG9wZXJhdGlvbnMgYW5kIHJlcXVlc3RzIG9jY3VycmluZyBiZXR3ZWVuIG11bHRpcGxlIHNlcnZpY2VzLiBUaGlzIGFsbG93cyBkZXZlbG9wZXJzIHRvIOKAnHRyYWNl4oCdIHRoZSBwYXRoIG9mIGFuIGVuZC10by1lbmQgcmVxdWVzdCBhcyBpdCBtb3ZlcyBmcm9tIG9uZSBzZXJ2aWNlIHRvIGFub3RoZXIsIGxldHRpbmcgdGhlbSBwaW5wb2ludCBlcnJvcnMgb3IgcGVyZm9ybWFuY2UgYm90dGxlbmVja3MgaW4gaW5kaXZpZHVhbCBzZXJ2aWNlcyB0aGF0IGFyZSBuZWdhdGl2ZWx5IGFmZmVjdGluZyB0aGUgb3ZlcmFsbCBzeXN0ZW0uPC9wPiA8cD5JbiB0aGlzIHBvc3QsIHdl4oCZbGwgbGVhcm4gbW9yZSBhYm91dCBkaXN0cmlidXRlZCB0cmFjaW5nIGNvbmNlcHRzLCBnbyBvdmVyIGFuIGVuZC10by1lbmQgdHJhY2luZyBleGFtcGxlIGluIGNvZGUsIGFuZCBzZWUgaG93IHRvIHVzZSB0cmFjaW5nIG1ldGFkYXRhIHRvIGFkZCB2YWx1YWJsZSBjb250ZXh0IHRvIHlvdXIgbG9nZ2luZyBhbmQgbW9uaXRvcmluZyB0b29scy4gV2hlbiB3ZeKAmXJlIGRvbmUsIHlvdeKAmWxsIG5vdCBvbmx5IHVuZGVyc3RhbmQgdGhlIGZ1bmRhbWVudGFscyBvZiBkaXN0cmlidXRlZCB0cmFjaW5nLCBidXQgaG93IHlvdSBjYW4gYXBwbHkgdHJhY2luZyB0ZWNobmlxdWVzIHRvIGJlIG1vcmUgZWZmZWN0aXZlIGluIGRlYnVnZ2luZyB5b3VyIGZ1bGwgc3RhY2sgd2ViIGFwcGxpY2F0aW9ucy48L3A+IDxwPkJ1dCBmaXJzdCwgbGV04oCZcyBnbyBiYWNrIHRvIHRoZSBiZWdpbm5pbmc6IHdoYXTigJlzIGRpc3RyaWJ1dGVkIHRyYWNpbmcgYWdhaW4/PC9wPiA8aDIgPiBEaXN0cmlidXRlZCB0cmFjaW5nIGJhc2ljczwvaDI+IDxwPkRpc3RyaWJ1dGVkIHRyYWNpbmcgaXMgYSBtZXRob2Qgb2YgcmVjb3JkaW5nIHRoZSBjb25uZWN0ZWQgb3BlcmF0aW9ucyBvZiBtdWx0aXBsZSBzZXJ2aWNlcy4gVHlwaWNhbGx5LCB0aGVzZSBvcGVyYXRpb25zIGFyZSBpbml0aWF0ZWQgYnkgcmVxdWVzdHMgZnJvbSBvbmUgc2VydmljZSB0byBhbm90aGVyLCB3aGVyZSBhIOKAnHJlcXVlc3TigJ0gY291bGQgYmUgYW4gYWN0dWFsIEhUVFAgcmVxdWVzdCwgb3Igd29yayBpbnZva2VkIHRocm91Z2ggYSB0YXNrIHF1ZXVlIG9yIHNvbWUgb3RoZXIgYXN5bmNocm9ub3VzIG1lYW5zLjwvcD4gPHA+VHJhY2VzIGFyZSBjb21wb3NlZCBvZiB0d28gZnVuZGFtZW50YWwgY29tcG9uZW50czo8L3A+IDx1bD4gPGxpPkEgc3BhbiBkZXNjcmliZXMgYW4gb3BlcmF0aW9uIG9yIOKAnHdvcmvigJ0gdGFraW5nIHBsYWNlIG9uIGEgc2VydmljZS4gU3BhbnMgY2FuIGRlc2NyaWJlIGJyb2FkIG9wZXJhdGlvbnMg4oCTIGZvciBleGFtcGxlLCB0aGUgb3BlcmF0aW9uIG9mIGEgd2ViIHNlcnZlciByZXNwb25kaW5nIHRvIGFuIEhUVFAgcmVxdWVzdCDigJMgb3IgYXMgZ3JhbnVsYXIgYXMgYSBzaW5nbGUgaW52b2NhdGlvbiBvZiBhIGZ1bmN0aW9uLjwvbGk+IDxsaT5BIHRyYWNlIGRlc2NyaWJlcyB0aGUgZW5kLXRvLWVuZCBqb3VybmV5IG9mIG9uZSBvciBtb3JlIGNvbm5lY3RlZCBzcGFucy4gQSB0cmFjZSBpcyBjb25zaWRlcmVkIHRvIGJlIGEgZGlzdHJpYnV0ZWQgdHJhY2UgaWYgaXQgY29ubmVjdHMgc3BhbnMgKOKAnHdvcmvigJ0pIHBlcmZvcm1lZCBvbiBtdWx0aXBsZSBzZXJ2aWNlcy48L2xpPiA8L3VsPiA8cD5MZXTigJlzIHRha2UgYSBsb29rIGF0IGFuIGV4YW1wbGUgb2YgYSBoeXBvdGhldGljYWwgZGlzdHJpYnV0ZWQgdHJhY2UuPC9wPiA8cD5UaGUgZGlhZ3JhbSBhYm92ZSBpbGx1c3RyYXRlcyBob3cgYSB0cmFjZSBiZWdpbnMgaW4gb25lIHNlcnZpY2Ug4oCTIGEgUmVhY3QgYXBwbGljYXRpb24gcnVubmluZyBvbiB0aGUgYnJvd3NlciDigJMgYW5kIGNvbnRpbnVlcyB0aHJvdWdoIGEgY2FsbCB0byBhbiBBUEkgd2ViIHNlcnZlciwgYW5kIGV2ZW4gZnVydGhlciB0byBhIGJhY2tncm91bmQgdGFzayB3b3JrZXIuIFRoZSBzcGFucyBpbiB0aGlzIGRpYWdyYW0gYXJlIHRoZSB3b3JrIHBlcmZvcm1lZCB3aXRoaW4gZWFjaCBzZXJ2aWNlLCBhbmQgZWFjaCBzcGFuIGNhbiBiZSDigJx0cmFjZWTigJ0gYmFjayB0byB0aGUgaW5pdGlhbCB3b3JrIGtpY2tlZCBvZmYgYnkgdGhlIGJyb3dzZXIgYXBwbGljYXRpb24uIExhc3RseSwgc2luY2UgdGhlc2Ugb3BlcmF0aW9ucyBvY2N1ciBvbiBkaWZmZXJlbnQgc2VydmljZXMsIHRoaXMgdHJhY2UgaXMgY29uc2lkZXJlZCB0byBiZSBkaXN0cmlidXRlZC48L3A+IDxwPkFzaWRlOiBTcGFucyB0aGF0IGRlc2NyaWJlIGJyb2FkIG9wZXJhdGlvbnMgKGUuZy4gdGhlIGZ1bGwgbGlmZWN5Y2xlIG9mIGEgd2ViIHNlcnZlciByZXNwb25kaW5nIHRvIGFuIEhUVFAgcmVxdWVzdCkgYXJlIHNvbWV0aW1lcyByZWZlcnJlZCB0byBhcyB0cmFuc2FjdGlvbiBzcGFucyBvciBldmVuIGp1c3QgdHJhbnNhY3Rpb25zLiBXZeKAmWxsIHRhbGsgbW9yZSBhYm91dCB0cmFuc2FjdGlvbnMgdnMuIHNwYW5zIGluIFBhcnQgMiBvZiB0aGlzIHNlcmllcy48L3A+IDxoMiA+VHJhY2UgYW5kIHNwYW4gaWRlbnRpZmllcnM8L2gyPiA8cD5TbyBmYXIgd2XigJl2ZSBpZGVudGlmaWVkIHRoZSBjb21wb25lbnRzIG9mIGEgdHJhY2UsIGJ1dCB3ZSBoYXZlbuKAmXQgZGVzY3JpYmVkIGhvdyB0aG9zZSBjb21wb25lbnRzIGFyZSBsaW5rZWQgdG9nZXRoZXIuPC9wPiA8cD5GaXJzdCwgZWFjaCB0cmFjZSBpcyB1bmlxdWVseSBpZGVudGlmaWVkIHdpdGggYSB0cmFjZSBpZGVudGlmaWVyLiBUaGlzIGlzIGRvbmUgYnkgY3JlYXRpbmcgYSB1bmlxdWUgcmFuZG9tbHkgZ2VuZXJhdGVkIHZhbHVlIChpLmUuIGEgVVVJRCkgaW4gdGhlIHJvb3Qgc3BhbiDigJMgdGhlIGluaXRpYWwgb3BlcmF0aW9uIHRoYXQga2lja3Mgb2ZmIHRoZSBlbnRpcmUgdHJhY2UuIEluIG91ciBleGFtcGxlIGFib3ZlLCB0aGUgcm9vdCBzcGFuIG9jY3VycyBpbiB0aGUgQnJvd3NlciBBcHBsaWNhdGlvbi48L3A+IDxwPlNlY29uZCwgZWFjaCBzcGFuIGZpcnN0IG5lZWRzIHRvIGJlIHVuaXF1ZWx5IGlkZW50aWZpZWQuIFRoaXMgaXMgc2ltaWxhcmx5IGRvbmUgYnkgY3JlYXRpbmcgYSB1bmlxdWUgc3BhbiBpZGVudGlmaWVyIChvciA8Y29kZSA+c3Bhbl9pZDwvY29kZT4pIHdoZW4gdGhlIHNwYW4gYmVnaW5zIGl0cyBvcGVyYXRpb24uIFRoaXMgPGNvZGUgPnNwYW5faWQ8L2NvZGU+IGNyZWF0aW9uIHNob3VsZCBvY2N1ciBhdCBldmVyeSBzcGFuIChvciBvcGVyYXRpb24pIHRoYXQgdGFrZXMgcGxhY2Ugd2l0aGluIGEgdHJhY2UuPC9wPiA8cD5MZXTigJlzIHJldmlzaXQgb3VyIGh5cG90aGV0aWNhbCB0cmFjZSBleGFtcGxlLiBJbiB0aGUgZGlhZ3JhbSBhYm92ZSwgeW914oCZbGwgbm90aWNlIHRoYXQgYSB0cmFjZSBpZGVudGlmaWVyIHVuaXF1ZWx5IGlkZW50aWZpZXMgdGhlIHRyYWNlLCBhbmQgZWFjaCBzcGFuIHdpdGhpbiB0aGF0IHRyYWNlIGFsc28gcG9zc2Vzc2VzIGEgdW5pcXVlIHNwYW4gaWRlbnRpZmllci48L3A+IDxwPkdlbmVyYXRpbmcgPGNvZGUgPnRyYWNlX2lkPC9jb2RlPiBhbmQgPGNvZGUgPnNwYW5faWQ8L2NvZGU+IGlzbuKAmXQgZW5vdWdoIGhvd2V2ZXIuIFRvIGFjdHVhbGx5IGNvbm5lY3QgdGhlc2Ugc2VydmljZXMsIHlvdXIgYXBwbGljYXRpb24gbXVzdCBwcm9wYWdhdGUgd2hhdOKAmXMga25vd24gYXMgYSB0cmFjZSBjb250ZXh0IHdoZW4gbWFraW5nIGEgcmVxdWVzdCBmcm9tIG9uZSBzZXJ2aWNlIHRvIGFub3RoZXIuPC9wPiA8aDIgPiBUcmFjZSBjb250ZXh0PC9oMj4gPHA+VGhlIHRyYWNlIGNvbnRleHQgaXMgdHlwaWNhbGx5IGNvbXBvc2VkIG9mIGp1c3QgdHdvIHZhbHVlczo8L3A+IDx1bD4gPGxpPlRyYWNlIGlkZW50aWZpZXIgKG9yIDxjb2RlID50cmFjZV9pZDwvY29kZT4pOiB0aGUgdW5pcXVlIGlkZW50aWZpZXIgdGhhdCBpcyBnZW5lcmF0ZWQgaW4gdGhlIHJvb3Qgc3BhbiBpbnRlbmRlZCB0byBpZGVudGlmeSB0aGUgZW50aXJldHkgb2YgdGhlIHRyYWNlLiBUaGlzIGlzIHRoZSBzYW1lIHRyYWNlIGlkZW50aWZpZXIgd2UgaW50cm9kdWNlZCBpbiB0aGUgbGFzdCBzZWN0aW9uOyBpdCBpcyBwcm9wYWdhdGVkIHVuY2hhbmdlZCB0byBldmVyeSBkb3duc3RyZWFtIHNlcnZpY2UuPC9saT4gPGxpPlBhcmVudCBpZGVudGlmaWVyIChvciA8Y29kZSA+cGFyZW50X2lkPC9jb2RlPik6IHRoZSBzcGFuX2lkIG9mIHRoZSDigJxwYXJlbnTigJ0gc3BhbiB0aGF0IHNwYXduZWQgdGhlIGN1cnJlbnQgb3BlcmF0aW9uLjwvbGk+IDwvdWw+IDxwPlRoZSBkaWFncmFtIGJlbG93IHZpc3VhbGl6ZXMgaG93IGEgcmVxdWVzdCBraWNrZWQgb2ZmIGluIG9uZSBzZXJ2aWNlIHByb3BhZ2F0ZXMgdGhlIHRyYWNlIGNvbnRleHQgdG8gdGhlIG5leHQgc2VydmljZSBkb3duc3RyZWFtLiBZb3XigJlsbCBub3RpY2UgdGhhdCB0cmFjZV9pZCByZW1haW5zIGNvbnN0YW50LCB3aGlsZSB0aGUgcGFyZW50X2lkIGNoYW5nZXMgYmV0d2VlbiByZXF1ZXN0cywgcG9pbnRpbmcgdG8gdGhlIHBhcmVudCBzcGFuIHRoYXQga2lja2VkIG9mZiB0aGUgbGF0ZXN0IG9wZXJhdGlvbi48L3A+IDxwPldpdGggdGhlc2UgdHdvIHZhbHVlcywgZm9yIGFueSBnaXZlbiBvcGVyYXRpb24sIGl0IGlzIHBvc3NpYmxlIHRvIGRldGVybWluZSB0aGUgb3JpZ2luYXRpbmcgKHJvb3QpIHNlcnZpY2UsIGFuZCB0byByZWNvbnN0cnVjdCBhbGwgcGFyZW50L2FuY2VzdG9yIHNlcnZpY2VzIGluIG9yZGVyIHRoYXQgbGVkIHRvIHRoZSBjdXJyZW50IG9wZXJhdGlvbi48L3A+IDxoMiA+QSB3b3JraW5nIGV4YW1wbGUgd2l0aCBjb2RlPC9oMj4gPHA+VG8gdW5kZXJzdGFuZCB0aGlzIGFsbCBiZXR0ZXIsIGxldOKAmXMgYWN0dWFsbHkgaW1wbGVtZW50IGEgYmFyZS1ib25lcyB0cmFjaW5nIGltcGxlbWVudGF0aW9uLCB1c2luZyB0aGUgZXhhbXBsZSB3ZeKAmXZlIGJlZW4gcmV0dXJuaW5nIHRvLCB3aGVyZWluIGEgYnJvd3NlciBhcHBsaWNhdGlvbiBpcyB0aGUgaW5pdGlhdG9yIG9mIGEgc2VyaWVzIG9mIGRpc3RyaWJ1dGVkIG9wZXJhdGlvbnMgY29ubmVjdGVkIGJ5IGEgdHJhY2UgY29udGV4dC48L3A+IDxwPkZpcnN0LCB0aGUgYnJvd3NlciBhcHBsaWNhdGlvbiByZW5kZXJzIGEgZm9ybTogZm9yIHRoZSBwdXJwb3NlcyBvZiB0aGlzIGV4YW1wbGUsIGFuIOKAnGludml0ZSB1c2Vy4oCdIGZvcm0uIFRoZSBmb3JtIGhhcyBhIHN1Ym1pdCBldmVudCBoYW5kbGVyLCB3aGljaCBmaXJlcyB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZC4gTGV04oCZcyBjb25zaWRlciB0aGlzIHN1Ym1pdCBoYW5kbGVyIG91ciByb290IHNwYW4sIHdoaWNoIG1lYW5zIHRoYXQgd2hlbiB0aGUgaGFuZGxlciBpcyBpbnZva2VkLCBib3RoIGEgPGNvZGUgPnRyYWNlX2lkPC9jb2RlPiBhbmQgPGNvZGUgPnNwYW5faWQ8L2NvZGU+IGFyZSBnZW5lcmF0ZWQuPC9wPiA8cD5OZXh0LCBzb21lIHdvcmsgaXMgZG9uZSB0byBnYXRoZXIgdXNlci1pbnB1dHRlZCB2YWx1ZXMgZnJvbSB0aGUgZm9ybSwgdGhlbiBmaW5hbGx5IGEgPGNvZGUgPmZldGNoPC9jb2RlPiByZXF1ZXN0IGlzIG1hZGUgdG8gb3VyIHdlYiBzZXJ2ZXIgdG8gdGhlIDxjb2RlID4vaW52aXRlVXNlcjwvY29kZT4gQVBJIGVuZHBvaW50LiBBcyBwYXJ0IG9mIHRoaXMgZmV0Y2ggcmVxdWVzdCwgdGhlIHRyYWNlIGNvbnRleHQgaXMgcGFzc2VkIGFzIHR3byBjdXN0b20gSFRUUCBoZWFkZXJzOiA8Y29kZSA+dHJhY2UtaWQ8L2NvZGU+IGFuZCA8Y29kZSA+cGFyZW50LWlkPC9jb2RlPiAod2hpY2ggaXMgdGhlIGN1cnJlbnQgc3BhbuKAmXMgPGNvZGUgPnNwYW5faWQ8L2NvZGU+KS48L3A+IDxkaXYgPjxwcmUgPjxjb2RlID4vLyBicm93c2VyIGFwcCAoSmF2YVNjcmlwdCkgaW1wb3J0IHV1aWQgZnJvbSAndXVpZCc7IGNvbnN0IHRyYWNlSWQgPSB1dWlkLnY0KCk7IGNvbnN0IHNwYW5JZCA9IHV1aWQudjQoKTsgY29uc29sZS5sb2coJ0luaXRpYXRlIGludml0ZVVzZXIgUE9TVCByZXF1ZXN0JywgYHRyYWNlSWQ6ICR7dHJhY2VJZH1gKTsgZmV0Y2goJy9hcGkvdjEvaW52aXRlVXNlcj9lbWFpbD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGVtYWlsKSwgeyBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAndHJhY2UtaWQnOiB0cmFjZUlkLCAncGFyZW50LWlkJzogc3BhbklkLCB9IH0pLnRoZW4oKGRhdGEpID0mZ3Q7IHsgY29uc29sZS5sb2coJ1N1Y2Nlc3MhJyk7IH0pLmNhdGNoKChlcnIpID0mZ3Q7IHsgY29uc29sZS5sb2coJ1NvbWV0aGluZyBiYWQgaGFwcGVuZWQnLCBgdHJhY2VJZDogJHt0cmFjZUlkfWApOyB9KTs8L2NvZGU+PC9wcmU+PC9kaXY+IDxwPk5vdGUgdGhlc2UgYXJlIG5vbi1zdGFuZGFyZCBIVFRQIGhlYWRlcnMgdXNlZCBmb3IgZXhwbGFuYXRvcnkgcHVycG9zZXMuIFRoZXJlIGlzIGFuIGFjdGl2ZSBlZmZvcnQgdG8gc3RhbmRhcmRpemUgdHJhY2luZyBIVFRQIGhlYWRlcnMgYXMgcGFydCBvZiB0aGUgVzNDIHRyYWNlcGFyZW50IHNwZWNpZmljYXRpb24sIHdoaWNoIGlzIHN0aWxsIGluIHRoZSDigJxSZWNvbW1lbmRhdGlvbuKAnSBwaGFzZS4gPC9wPiA8cD5PbiB0aGUgcmVjZWl2aW5nIGVuZCwgdGhlIEFQSSB3ZWIgc2VydmVyIGhhbmRsZXMgdGhlIHJlcXVlc3QgYW5kIGV4dHJhY3RzIHRoZSB0cmFjaW5nIG1ldGFkYXRhIGZyb20gdGhlIEhUVFAgcmVxdWVzdC4gSXQgdGhlbiBxdWV1ZXMgdXAgYSBqb2IgdG8gc2VuZCBhbiBlbWFpbCB0byB0aGUgdXNlciwgYW5kIGF0dGFjaGVzIHRoZSB0cmFjaW5nIGNvbnRleHQgYXMgcGFydCBvZiBhIOKAnG1ldGHigJ0gZmllbGQgaW4gdGhlIGpvYiBkZXNjcmlwdGlvbi4gTGFzdCwgaXQgcmV0dXJucyBhIHJlc3BvbnNlIHdpdGggYSAyMDAgc3RhdHVzIGNvZGUgaW5kaWNhdGluZyB0aGF0IHRoZSBtZXRob2Qgd2FzIHN1Y2Nlc3NmdWwuPC9wPiA8cD5Ob3RlIHRoYXQgd2hpbGUgdGhlIHNlcnZlciByZXR1cm5lZCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2UsIHRoZSBhY3R1YWwg4oCcd29ya+KAnSBpc27igJl0IGRvbmUgdW50aWwgdGhlIGJhY2tncm91bmQgdGFzayB3b3JrZXIgcGlja3MgdXAgdGhlIG5ld2x5IHF1ZXVlZCBqb2IgYW5kIGFjdHVhbGx5IGRlbGl2ZXJzIGFuIGVtYWlsLjwvcD4gPHA+QXQgc29tZSBwb2ludCwgdGhlIHF1ZXVlIHByb2Nlc3NvciBiZWdpbnMgd29ya2luZyBvbiB0aGUgcXVldWVkIGVtYWlsIGpvYi4gQWdhaW4sIHRoZSB0cmFjZSBhbmQgcGFyZW50IGlkZW50aWZpZXJzIGFyZSBleHRyYWN0ZWQsIGp1c3QgYXMgdGhleSB3ZXJlIGVhcmxpZXIgaW4gdGhlIHdlYiBzZXJ2ZXIuPC9wPiA8ZGl2ID48cHJlID48Y29kZSA+Ly8gQVBJIFdlYiBTZXJ2ZXIgY29uc3QgUXVldWUgPSByZXF1aXJlKCdidWxsJyk7IGNvbnN0IGVtYWlsUXVldWUgPSBuZXcgUXVldWUoJ2VtYWlsJyk7IGNvbnN0IHV1aWQgPSByZXF1aXJlKCd1dWlkJyk7IGFwcC5wb3N0KCIvYXBpL3YxL2ludml0ZVVzZXIiLCAocmVxLCByZXMpID0mZ3Q7IHsgY29uc3Qgc3BhbklkID0gdXVpZC52NCgpLCB0cmFjZUlkID0gcmVxLmhlYWRlcnNbInRyYWNlLWlkIl0sIHBhcmVudElkID0gcmVxLmhlYWRlcnNbInBhcmVudC1pZCJdOyBjb25zb2xlLmxvZyggIkFkZGluZyBqb2IgdG8gZW1haWwgcXVldWUiLCBgW3RyYWNlSWQ6ICR7dHJhY2VJZH0sYCwgYHBhcmVudElkOiAke3BhcmVudElkfSxgLCBgc3BhbklkOiAke3NwYW5JZH1dYCApOyBlbWFpbFF1ZXVlLmFkZCh7IHRpdGxlOiAiV2VsY29tZSB0byBvdXIgcHJvZHVjdCIsIHRvOiByZXEucGFyYW1zLmVtYWlsLCBtZXRhOiB7IHRyYWNlSWQ6IHRyYWNlSWQsIC8vIHRoZSBkb3duc3RyZWFtIHNwYW4ncyBwYXJlbnRfaWQgaXMgdGhpcyBzcGFuJ3Mgc3Bhbl9pZCBwYXJlbnRJZDogc3BhbklkLCB9LCB9KTsgcmVzLnN0YXR1cygyMDApLnNlbmQoIm9rIik7IH0pOyAvLyBCYWNrZ3JvdW5kIFRhc2sgV29ya2VyIGVtYWlsUXVldWUucHJvY2Vzcygoam9iLCBkb25lKSA9Jmd0OyB7IGNvbnN0IHNwYW5JZCA9IHV1aWQudjQoKTsgY29uc3QgeyB0cmFjZUlkLCBwYXJlbnRJZCB9ID0gam9iLmRhdGEubWV0YTsgY29uc29sZS5sb2coICJTZW5kaW5nIGVtYWlsIiwgYFt0cmFjZUlkOiAke3RyYWNlSWR9LGAsIGBwYXJlbnRJZDogJHtwYXJlbnRJZH0sYCwgYHNwYW5JZDogJHtzcGFuSWR9XWAgKTsgLy8gYWN0dWFsbHkgc2VuZCB0aGUgZW1haWwgLy8gLi4uIGRvbmUoKTsgfSk7PC9jb2RlPjwvcHJlPjwvZGl2PiA8cD5JZiB5b3XigJlyZSBpbnRlcmVzdGVkIGluIHJ1bm5pbmcgdGhpcyBleGFtcGxlIHlvdXJzZWxmLCB5b3UgY2FuIGZpbmQgdGhlIHNvdXJjZSBjb2RlIG9uIEdpdEh1Yi48L3A+IDxoMiA+TG9nZ2luZyB3aXRoIGRpc3RyaWJ1dGVkIHN5c3RlbXM8L2gyPiA8cD5Zb3XigJlsbCBub3RpY2UgdGhhdCBhdCBldmVyeSBzdGFnZSBvZiBvdXIgZXhhbXBsZSwgYSBsb2dnaW5nIGNhbGwgaXMgbWFkZSB1c2luZyBjb25zb2xlLmxvZyB0aGF0IGFkZGl0aW9uYWxseSBlbWl0cyB0aGUgY3VycmVudCB0cmFjZSwgc3BhbiwgYW5kIHBhcmVudCBpZGVudGlmaWVycy4gSW4gYSBwZXJmZWN0IHN5bmNocm9ub3VzIHdvcmxkIOKAkyBvbmUgd2hlcmUgZWFjaCBzZXJ2aWNlIGNvdWxkIGxvZyB0byB0aGUgc2FtZSBjZW50cmFsaXplZCBsb2dnaW5nIHRvb2wg4oCTIGVhY2ggb2YgdGhlc2UgbG9nZ2luZyBzdGF0ZW1lbnRzIHdvdWxkIGFwcGVhciBzZXF1ZW50aWFsbHk6PC9wPiA8cD5JZiBhbiBleGNlcHRpb24gb3IgZXJyYW50IGJlaGF2aW9yIG9jY3VycmVkIGR1cmluZyB0aGUgY291cnNlIG9mIHRoZXNlIG9wZXJhdGlvbnMsIGl0IHdvdWxkIGJlIHJlbGF0aXZlbHkgdHJpdmlhbCB0byB1c2UgdGhlc2Ugb3IgYWRkaXRpb25hbCBsb2dnaW5nIHN0YXRlbWVudHMgdG8gcGlucG9pbnQgYSBzb3VyY2UuIEJ1dCB0aGUgdW5mb3J0dW5hdGUgcmVhbGl0eSBpcyB0aGF0IHRoZXNlIGFyZSBkaXN0cmlidXRlZCBzZXJ2aWNlcywgd2hpY2ggbWVhbnM6PC9wPiA8dWw+IDxsaT5XZWIgc2VydmVycyB0eXBpY2FsbHkgaGFuZGxlIG1hbnkgY29uY3VycmVudCByZXF1ZXN0cy4gVGhlIHdlYiBzZXJ2ZXIgbWF5IGJlIHBlcmZvcm1pbmcgd29yayAoYW5kIGVtaXR0aW5nIGxvZ2dpbmcgc3RhdGVtZW50cykgYXR0cmlidXRlZCB0byBvdGhlciByZXF1ZXN0cy48L2xpPiA8bGk+TmV0d29yayBsYXRlbmN5IGNhbiBjbG91ZCB0aGUgb3JkZXIgb2Ygb3BlcmF0aW9ucy4gUmVxdWVzdHMgbWFkZSBmcm9tIHVwc3RyZWFtIHNlcnZpY2VzIG1pZ2h0IG5vdCByZWFjaCB0aGVpciBkZXN0aW5hdGlvbiBpbiB0aGUgc2FtZSBvcmRlciB0aGV5IHdlcmUgZmlyZWQuPC9saT4gPGxpPkJhY2tncm91bmQgd29ya2VycyBtYXkgaGF2ZSBxdWV1ZWQgam9icy4gV29ya2VycyBtYXkgaGF2ZSB0byBmaXJzdCB3b3JrIHRocm91Z2ggZWFybGllciBxdWV1ZWQgam9icyBiZWZvcmUgcmVhY2hpbmcgdGhlIGV4YWN0IGpvYiBxdWV1ZWQgdXAgaW4gdGhpcyB0cmFjZS48L2xpPiA8L3VsPiA8cD5JbiBhIG1vcmUgcmVhbGlzdGljIGV4YW1wbGUsIG91ciBsb2dnaW5nIGNhbGxzIG1pZ2h0IGxvb2sgc29tZXRoaW5nIGxpa2UgdGhpcywgd2hpY2ggcmVmbGVjdHMgbXVsdGlwbGUgb3BlcmF0aW9ucyBvY2N1cnJpbmcgY29uY3VycmVudGx5OjwvcD4gPHA+V2l0aG91dCB0cmFjaW5nIG1ldGFkYXRhLCB1bmRlcnN0YW5kaW5nIHRoZSB0b3BvbG9neSBvZiB3aGljaCBhY3Rpb24gaW52b2tlZCB3aGljaCBhY3Rpb24gd291bGQgYmUgaW1wb3NzaWJsZS4gQnV0IGJ5IGVtaXR0aW5nIHRyYWNpbmcgbWV0YSBpbmZvcm1hdGlvbiBhdCBldmVyeSBsb2dnaW5nIGNhbGwsIGl04oCZcyBwb3NzaWJsZSB0byBxdWlja2x5IGZpbHRlciBvbiBhbGwgbG9nZ2luZyBjYWxscyB3aXRoaW4gYSB0cmFjZSBieSBmaWx0ZXJpbmcgb24gPGNvZGUgPnRyYWNlSWQ8L2NvZGU+LCBhbmQgdG8gcmVjb25zdHJ1Y3QgdGhlIGV4YWN0IG9yZGVyIGJ5IGV4YW1pbmluZyA8Y29kZSA+c3BhbklkPC9jb2RlPiBhbmQgPGNvZGUgPnBhcmVudElkPC9jb2RlPiByZWxhdGlvbnNoaXBzLjwvcD4gPHA+VGhpcyBpcyB0aGUgcG93ZXIgb2YgZGlzdHJpYnV0ZWQgdHJhY2luZzogYnkgYXR0YWNoaW5nIG1ldGFkYXRhIGRlc2NyaWJpbmcgdGhlIGN1cnJlbnQgb3BlcmF0aW9uIChzcGFuIGlkKSwgdGhlIHBhcmVudCBvcGVyYXRpb24gdGhhdCBzcGF3bmVkIGl0IChwYXJlbnQgaWQpLCBhbmQgdGhlIHRyYWNlIGlkZW50aWZpZXIgKHRyYWNlIGlkKSwgd2UgY2FuIGF1Z21lbnQgbG9nZ2luZyBhbmQgdGVsZW1ldHJ5IGRhdGEgdG8gYmV0dGVyIHVuZGVyc3RhbmQgdGhlIGV4YWN0IHNlcXVlbmNlIG9mIGV2ZW50cyBvY2N1cnJpbmcgaW4geW91ciBkaXN0cmlidXRlZCBzZXJ2aWNlcy48L3A+IDxoMiA+IFRyYWNpbmcgaW4gdGhlIHJlYWwgd29ybGQ8L2gyPiA8cD5PdmVyIHRoZSBjb3Vyc2Ugb2YgdGhpcyBhcnRpY2xlLCB3ZSBoYXZlIGJlZW4gd29ya2luZyB3aXRoIGEgc29tZXdoYXQgY29udHJpdmVkIGV4YW1wbGUuIEluIGEgcmVhbCBkaXN0cmlidXRlZCB0cmFjaW5nIGVudmlyb25tZW50LCB5b3Ugd291bGRu4oCZdCBnZW5lcmF0ZSBhbmQgcGFzcyBhbGwgeW91ciBzcGFuIGFuZCB0cmFjaW5nIGlkZW50aWZpZXJzIG1hbnVhbGx5LiBOb3Igd291bGQgeW91IHJlbHkgb24gPGNvZGUgPmNvbnNvbGUubG9nPC9jb2RlPiAob3Igb3RoZXIgbG9nZ2luZykgY2FsbHMgdG8gZW1pdCB5b3VyIHRyYWNpbmcgbWV0YWRhdGEgeW91cnNlbGYuIFlvdSB3b3VsZCB1c2UgcHJvcGVyIHRyYWNpbmcgbGlicmFyaWVzIHRvIGhhbmRsZSB0aGUgaW5zdHJ1bWVudGF0aW9uIGFuZCBlbWl0dGluZyBvZiB0cmFjaW5nIGRhdGEgZm9yIHlvdS48L3A+IDxoMiA+T3BlblRlbGVtZXRyeTwvaDI+IDxwPjxhID5PcGVuVGVsZW1ldHJ5PC9hPiBpcyBhIGNvbGxlY3Rpb24gb2Ygb3BlbiBzb3VyY2UgdG9vbHMsIEFQSXMsIGFuZCBTREtzIGZvciBpbnN0cnVtZW50aW5nLCBnZW5lcmF0aW5nLCBhbmQgZXhwb3J0aW5nIHRlbGVtZXRyeSBkYXRhIGZyb20gcnVubmluZyBzb2Z0d2FyZS4gSXQgcHJvdmlkZXMgbGFuZ3VhZ2Utc3BlY2lmaWMgaW1wbGVtZW50YXRpb25zIGZvciBtb3N0IHBvcHVsYXIgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2VzLCBpbmNsdWRpbmcgYm90aCBicm93c2VyIDxhID5KYXZhU2NyaXB0IGFuZCBOb2RlLmpzPC9hPi48L3A+IDxoMiA+U2VudHJ5PC9oMj4gPHA+PGEgPlNlbnRyeTwvYT4gaXMgYW4gb3BlbiBzb3VyY2UgYXBwbGljYXRpb24gbW9uaXRvcmluZyBwcm9kdWN0IHRoYXQgaGVscHMgeW91IGlkZW50aWZ5IGVycm9ycyBhbmQgcGVyZm9ybWFuY2UgYm90dGxlbmVja3MgaW4geW91ciBjb2RlLiBJdCBwcm92aWRlcyBjbGllbnQgbGlicmFyaWVzIGluIGV2ZXJ5IG1ham9yIHByb2dyYW1taW5nIGxhbmd1YWdlIHdoaWNoIGluc3RydW1lbnQgeW91ciBzb2Z0d2FyZeKAmXMgY29kZSB0byBjYXB0dXJlIGJvdGggZXJyb3IgZGF0YSBhbmQgdHJhY2luZyB0ZWxlbWV0cnkuPC9wPiA8cD5TZW50cnkgdXNlcyB0aGlzIHRlbGVtZXRyeSBpbiBhIG51bWJlciBvZiB3YXlzLiBGb3IgZXhhbXBsZSwgU2VudHJ54oCZcyA8YSA+UGVyZm9ybWFuY2UgTW9uaXRvcmluZzwvYT4gZmVhdHVyZSBzZXQgdXNlcyB0cmFjaW5nIGRhdGEgdG8gZ2VuZXJhdGUgd2F0ZXJmYWxsIGRpYWdyYW1zIHRoYXQgaWxsdXN0cmF0ZSB0aGUgZW5kLXRvLWVuZCBsYXRlbmN5IG9mIHlvdXIgZGlzdHJpYnV0ZWQgc2VydmljZXPigJkgb3BlcmF0aW9ucyB3aXRoaW4gYSB0cmFjZS48L3A+IDxwPlNlbnRyeSBhZGRpdGlvbmFsbHkgdXNlcyB0cmFjaW5nIG1ldGFkYXRhIHRvIGF1Z21lbnQgaXRzIEVycm9yIE1vbml0b3JpbmcgY2FwYWJpbGl0aWVzIHRvIHVuZGVyc3RhbmQgaG93IGFuIGVycm9yIHRyaWdnZXJlZCBpbiBvbmUgc2VydmljZSAoZS5nLiBzZXJ2ZXIgYmFja2VuZCkgY2FuIHByb3BhZ2F0ZSB0byBhbiBlcnJvciBpbiBhbm90aGVyIHNlcnZpY2UgKGUuZy4gZnJvbnRlbmQpLjwvcD4gPHA+WW91IGNhbiBsZWFybiBtb3JlIGFib3V0IDxhID5TZW50cnkgYW5kIGRpc3RyaWJ1dGVkIHRyYWNpbmcgaGVyZTwvYT4uPC9wPiA8aDIgPk5leHQ6IFNwYW4gdHJlZXMsIE9wZW5UZWxlbWV0cnksIGFuZCBTZW50cnk8L2gyPiA8cD5Db25ncmF0dWxhdGlvbnM6IHlvdeKAmXZlIGdyYWR1YXRlZCBmcm9tIHBhcnQgMSBvZiBvdXIgc2VyaWVzIG9uIGRpc3RyaWJ1dGVkIHRyYWNpbmcgZm9yIGZ1bGwgc3RhY2sgZGV2ZWxvcGVycy4gQXQgdGhpcyBwb2ludCB5b3Ugc2hvdWxkIHVuZGVyc3RhbmQgd2hhdCBhIHRyYWNlIGlzLCBob3cgdHJhY2UgaW5mb3JtYXRpb24gaXMgcHJvcGFnYXRlZCB0aHJvdWdoIHNlcnZpY2VzIHZpYSB0cmFjaW5nIGNvbnRleHQsIGFuZCBob3cgdHJhY2UgY29udGV4dCBjYW4gYmUgdXNlZCB0byBjb25uZWN0IGxvZ2dpbmcgc3RhdGVtZW50cyBiZXR3ZWVuIG11bHRpcGxlIGRpc3RyaWJ1dGVkIHNlcnZpY2VzLjwvcD4gPHA+U3RheSB0dW5lZCBmb3IgdGhlIG5leHQgcG9zdCBpbiB0aGlzIHNlcmllcywgd2hlcmUgd2XigJlsbCBleHBhbmQgb24gdGhlIE9wZW5UZWxlbWV0cnkgc2V0IG9mIHRyYWNpbmcgdG9vbHMsIGFuZCB0YWtlIGEgZnVydGhlciBkaXZlIGludG8gaG93IFNlbnRyeSBpbmNvcnBvcmF0ZXMgdHJhY2luZyBjb250ZXh0IHRvIGF1Z21lbnQgZXJyb3IgYW5kIHBlcmZvcm1hbmNlIG1vbml0b3JpbmcgdGVsZW1ldHJ5LjwvcD48L2Rpdj48L2FydGljbGU+PGRpdiA+PGRpdiA+WW91ciBjb2RlIGlzIGJyb2tlbi4gTGV0J3MgRml4IGl0LjwvZGl2PjxhID5HZXQgU3RhcnRlZDwvYT48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L21haW4+PGRpdiA+PGRpdiA+PGRpdiA+PGRpdiA+PGRpdiA+PGRpdiA+PGgyPkRvIHlvdSBsaWtlIGNvcnBvcmF0ZSBuZXdzbGV0dGVycz88L2gyPjxwID5OZWl0aGVyIGRvIHdlLiBTaWduIHVwIGFueXdheS48L3A+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9ib2R5Pg=='</script>

      </head>
        <body class="valid" valid="valid" title="valid: True, node: 1, tag: body, level: 1" node_number="1"><div class="valid" valid="valid" title="valid: True, node: 2, tag: div, level: 2" node_number="2"><div class="valid" valid="valid" title="valid: True, node: 3, tag: div, level: 3" node_number="3"><div class="valid" valid="valid" title="valid: True, node: 4, tag: div, level: 4" node_number="4"><header class="valid" valid="valid" title="valid: True, node: 5, tag: header, level: 5" node_number="5"><div class="valid" valid="valid" title="valid: True, node: 6, tag: div, level: 6" node_number="6"/></header><div class="valid" valid="valid" title="valid: True, node: 7, tag: div, level: 5" node_number="7"><div class="valid" valid="valid" title="valid: True, node: 8, tag: div, level: 6" node_number="8"><div class="valid" valid="valid" title="valid: True, node: 9, tag: div, level: 7" node_number="9"><div class="valid" valid="valid" title="valid: True, node: 10, tag: div, level: 8" node_number="10"><div class="valid" valid="valid" title="valid: True, node: 11, tag: div, level: 9" node_number="11"><div class="valid" valid="valid" title="valid: True, node: 12, tag: div, level: 10" node_number="12"><a class="valid" valid="valid" title="valid: True, node: 13, tag: a, level: 11" node_number="13">Blog</a></div></div><div class="valid" valid="valid" title="valid: True, node: 14, tag: div, level: 9" node_number="14"><a class="valid" valid="valid" title="valid: True, node: 15, tag: a, level: 10" node_number="15">Archive</a><a class="valid" valid="valid" title="valid: True, node: 16, tag: a, level: 10" node_number="16">Twitter</a><a class="valid" valid="valid" title="valid: True, node: 17, tag: a, level: 10" node_number="17">Feed</a></div></div></div></div></div><main class="valid" valid="valid" title="valid: True, node: 18, tag: main, level: 5" node_number="18"><div class="valid" valid="valid" title="valid: True, node: 19, tag: div, level: 6" node_number="19"><div class="valid" valid="valid" title="valid: True, node: 20, tag: div, level: 7" node_number="20"><div class="valid" valid="valid" title="valid: True, node: 21, tag: div, level: 8" node_number="21"><div class="valid" valid="valid" title="valid: True, node: 22, tag: div, level: 9" node_number="22"><div class="valid" valid="valid" title="valid: True, node: 23, tag: div, level: 10" node_number="23"><a class="valid" valid="valid" title="valid: True, node: 24, tag: a, level: 11" node_number="24"><div class="valid" valid="valid" title="valid: True, node: 25, tag: div, level: 12" node_number="25">Share on Twitter</div></a><a class="valid" valid="valid" title="valid: True, node: 26, tag: a, level: 11" node_number="26"><div class="valid" valid="valid" title="valid: True, node: 27, tag: div, level: 12" node_number="27">Share on Facebook</div></a><a class="valid" valid="valid" title="valid: True, node: 28, tag: a, level: 11" node_number="28"><div class="valid" valid="valid" title="valid: True, node: 29, tag: div, level: 12" node_number="29">Share on HackerNews</div></a></div><article class="valid" valid="valid" title="valid: True, node: 30, tag: article, level: 10" node_number="30"><div class="valid" valid="valid" title="valid: True, node: 31, tag: div, level: 11" node_number="31"><time class="valid" valid="valid" title="valid: True, node: 32, tag: time, level: 12" node_number="32">August 12, 2021</time></div><ul class="valid" valid="valid" title="valid: True, node: 33, tag: ul, level: 11" node_number="33"><li class="valid" valid="valid" title="valid: True, node: 34, tag: li, level: 12" node_number="34"><a class="valid" valid="valid" title="valid: True, node: 35, tag: a, level: 13" node_number="35">Performance</a></li></ul><h1 class="valid" valid="valid" title="valid: True, node: 36, tag: h1, level: 11" node_number="36">Distributed Tracing 101 for Full Stack Developers</h1><div class="valid" valid="valid" title="valid: True, node: 37, tag: div, level: 11" node_number="37"><p class="valid" valid="valid" title="valid: True, node: 38, tag: p, level: 12" node_number="38">Welcome to Part 1 of our multipart series on Distributed Tracing for Full Stack Developers. In this series, we&#8217;ll be learning the ins-and-outs of distributed tracing and how it can assist you in monitoring the increasingly complex requirements of full stack applications.</p> <p class="valid" valid="valid" title="valid: True, node: 39, tag: p, level: 12" node_number="39">In the early days of the web, writing web applications was simple. Developers generated HTML on the server using a language like PHP, communicated with a single relational database like MySQL, and most interactivity was driven by static HTML form components. While debugging tools were primitive, understanding the execution flow of your code was straightforward.</p> <p class="valid" valid="valid" title="valid: True, node: 40, tag: p, level: 12" node_number="40">In today&#8217;s modern web stack it&#8217;s anything but. Full stack developers are expected to write JavaScript executing in the browser, interop with multiple database technologies, and deploy server side code on different server architectures (e.g. serverless). Without the right tools, understanding how a user interaction in the browser cascades into a 500 server error deep in your server stack is nigh-impossible. Enter: distributed tracing.</p> </div><div class="valid" valid="valid" title="valid: True, node: 41, tag: div, level: 11" node_number="41"> <p class="valid" valid="valid" title="valid: True, node: 42, tag: p, level: 12" node_number="42">Distributed tracing is a monitoring technique that links the operations and requests occurring between multiple services. This allows developers to &#8220;trace&#8221; the path of an end-to-end request as it moves from one service to another, letting them pinpoint errors or performance bottlenecks in individual services that are negatively affecting the overall system.</p> <p class="valid" valid="valid" title="valid: True, node: 43, tag: p, level: 12" node_number="43">In this post, we&#8217;ll learn more about distributed tracing concepts, go over an end-to-end tracing example in code, and see how to use tracing metadata to add valuable context to your logging and monitoring tools. When we&#8217;re done, you&#8217;ll not only understand the fundamentals of distributed tracing, but how you can apply tracing techniques to be more effective in debugging your full stack web applications.</p> <p class="valid" valid="valid" title="valid: True, node: 44, tag: p, level: 12" node_number="44">But first, let&#8217;s go back to the beginning: what&#8217;s distributed tracing again?</p> <h2 class="valid" valid="valid" title="valid: True, node: 45, tag: h2, level: 12" node_number="45"> Distributed tracing basics</h2> <p class="valid" valid="valid" title="valid: True, node: 46, tag: p, level: 12" node_number="46">Distributed tracing is a method of recording the connected operations of multiple services. Typically, these operations are initiated by requests from one service to another, where a &#8220;request&#8221; could be an actual HTTP request, or work invoked through a task queue or some other asynchronous means.</p> <p class="valid" valid="valid" title="valid: True, node: 47, tag: p, level: 12" node_number="47">Traces are composed of two fundamental components:</p> <ul class="valid" valid="valid" title="valid: True, node: 48, tag: ul, level: 12" node_number="48"> <li class="valid" valid="valid" title="valid: True, node: 49, tag: li, level: 13" node_number="49">A span describes an operation or &#8220;work&#8221; taking place on a service. Spans can describe broad operations &#8211; for example, the operation of a web server responding to an HTTP request &#8211; or as granular as a single invocation of a function.</li> <li class="valid" valid="valid" title="valid: True, node: 50, tag: li, level: 13" node_number="50">A trace describes the end-to-end journey of one or more connected spans. A trace is considered to be a distributed trace if it connects spans (&#8220;work&#8221;) performed on multiple services.</li> </ul> <p class="valid" valid="valid" title="valid: True, node: 51, tag: p, level: 12" node_number="51">Let&#8217;s take a look at an example of a hypothetical distributed trace.</p> <p class="valid" valid="valid" title="valid: True, node: 52, tag: p, level: 12" node_number="52">The diagram above illustrates how a trace begins in one service &#8211; a React application running on the browser &#8211; and continues through a call to an API web server, and even further to a background task worker. The spans in this diagram are the work performed within each service, and each span can be &#8220;traced&#8221; back to the initial work kicked off by the browser application. Lastly, since these operations occur on different services, this trace is considered to be distributed.</p> <p class="valid" valid="valid" title="valid: True, node: 53, tag: p, level: 12" node_number="53">Aside: Spans that describe broad operations (e.g. the full lifecycle of a web server responding to an HTTP request) are sometimes referred to as transaction spans or even just transactions. We&#8217;ll talk more about transactions vs. spans in Part 2 of this series.</p> <h2 class="valid" valid="valid" title="valid: True, node: 54, tag: h2, level: 12" node_number="54">Trace and span identifiers</h2> <p class="valid" valid="valid" title="valid: True, node: 55, tag: p, level: 12" node_number="55">So far we&#8217;ve identified the components of a trace, but we haven&#8217;t described how those components are linked together.</p> <p class="valid" valid="valid" title="valid: True, node: 56, tag: p, level: 12" node_number="56">First, each trace is uniquely identified with a trace identifier. This is done by creating a unique randomly generated value (i.e. a UUID) in the root span &#8211; the initial operation that kicks off the entire trace. In our example above, the root span occurs in the Browser Application.</p> <p class="valid" valid="valid" title="valid: True, node: 57, tag: p, level: 12" node_number="57">Second, each span first needs to be uniquely identified. This is similarly done by creating a unique span identifier (or <code class="valid" valid="valid" title="valid: True, node: 58, tag: code, level: 13" node_number="58">span_id</code>) when the span begins its operation. This <code class="valid" valid="valid" title="valid: True, node: 59, tag: code, level: 13" node_number="59">span_id</code> creation should occur at every span (or operation) that takes place within a trace.</p> <p class="valid" valid="valid" title="valid: True, node: 60, tag: p, level: 12" node_number="60">Let&#8217;s revisit our hypothetical trace example. In the diagram above, you&#8217;ll notice that a trace identifier uniquely identifies the trace, and each span within that trace also possesses a unique span identifier.</p> <p class="valid" valid="valid" title="valid: True, node: 61, tag: p, level: 12" node_number="61">Generating <code class="valid" valid="valid" title="valid: True, node: 62, tag: code, level: 13" node_number="62">trace_id</code> and <code class="valid" valid="valid" title="valid: True, node: 63, tag: code, level: 13" node_number="63">span_id</code> isn&#8217;t enough however. To actually connect these services, your application must propagate what&#8217;s known as a trace context when making a request from one service to another.</p> <h2 class="valid" valid="valid" title="valid: True, node: 64, tag: h2, level: 12" node_number="64"> Trace context</h2> <p class="valid" valid="valid" title="valid: True, node: 65, tag: p, level: 12" node_number="65">The trace context is typically composed of just two values:</p> <ul class="valid" valid="valid" title="valid: True, node: 66, tag: ul, level: 12" node_number="66"> <li class="valid" valid="valid" title="valid: True, node: 67, tag: li, level: 13" node_number="67">Trace identifier (or <code class="valid" valid="valid" title="valid: True, node: 68, tag: code, level: 14" node_number="68">trace_id</code>): the unique identifier that is generated in the root span intended to identify the entirety of the trace. This is the same trace identifier we introduced in the last section; it is propagated unchanged to every downstream service.</li> <li class="valid" valid="valid" title="valid: True, node: 69, tag: li, level: 13" node_number="69">Parent identifier (or <code class="valid" valid="valid" title="valid: True, node: 70, tag: code, level: 14" node_number="70">parent_id</code>): the span_id of the &#8220;parent&#8221; span that spawned the current operation.</li> </ul> <p class="valid" valid="valid" title="valid: True, node: 71, tag: p, level: 12" node_number="71">The diagram below visualizes how a request kicked off in one service propagates the trace context to the next service downstream. You&#8217;ll notice that trace_id remains constant, while the parent_id changes between requests, pointing to the parent span that kicked off the latest operation.</p> <p class="valid" valid="valid" title="valid: True, node: 72, tag: p, level: 12" node_number="72">With these two values, for any given operation, it is possible to determine the originating (root) service, and to reconstruct all parent/ancestor services in order that led to the current operation.</p> <h2 class="valid" valid="valid" title="valid: True, node: 73, tag: h2, level: 12" node_number="73">A working example with code</h2> <p class="valid" valid="valid" title="valid: True, node: 74, tag: p, level: 12" node_number="74">To understand this all better, let&#8217;s actually implement a bare-bones tracing implementation, using the example we&#8217;ve been returning to, wherein a browser application is the initiator of a series of distributed operations connected by a trace context.</p> <p class="valid" valid="valid" title="valid: True, node: 75, tag: p, level: 12" node_number="75">First, the browser application renders a form: for the purposes of this example, an &#8220;invite user&#8221; form. The form has a submit event handler, which fires when the form is submitted. Let&#8217;s consider this submit handler our root span, which means that when the handler is invoked, both a <code class="valid" valid="valid" title="valid: True, node: 76, tag: code, level: 13" node_number="76">trace_id</code> and <code class="valid" valid="valid" title="valid: True, node: 77, tag: code, level: 13" node_number="77">span_id</code> are generated.</p> <p class="valid" valid="valid" title="valid: True, node: 78, tag: p, level: 12" node_number="78">Next, some work is done to gather user-inputted values from the form, then finally a <code class="valid" valid="valid" title="valid: True, node: 79, tag: code, level: 13" node_number="79">fetch</code> request is made to our web server to the <code class="valid" valid="valid" title="valid: True, node: 80, tag: code, level: 13" node_number="80">/inviteUser</code> API endpoint. As part of this fetch request, the trace context is passed as two custom HTTP headers: <code class="valid" valid="valid" title="valid: True, node: 81, tag: code, level: 13" node_number="81">trace-id</code> and <code class="valid" valid="valid" title="valid: True, node: 82, tag: code, level: 13" node_number="82">parent-id</code> (which is the current span&#8217;s <code class="valid" valid="valid" title="valid: True, node: 83, tag: code, level: 13" node_number="83">span_id</code>).</p> <div class="valid" valid="valid" title="valid: True, node: 84, tag: div, level: 12" node_number="84"><pre class="valid" valid="valid" title="valid: True, node: 85, tag: pre, level: 13" node_number="85"><code class="valid" valid="valid" title="valid: True, node: 86, tag: code, level: 14" node_number="86">// browser app (JavaScript) import uuid from 'uuid'; const traceId = uuid.v4(); const spanId = uuid.v4(); console.log('Initiate inviteUser POST request', `traceId: ${traceId}`); fetch('/api/v1/inviteUser?email=' + encodeURIComponent(email), { method: 'POST', headers: { 'trace-id': traceId, 'parent-id': spanId, } }).then((data) =&gt; { console.log('Success!'); }).catch((err) =&gt; { console.log('Something bad happened', `traceId: ${traceId}`); });</code></pre></div> <p class="valid" valid="valid" title="valid: True, node: 87, tag: p, level: 12" node_number="87">Note these are non-standard HTTP headers used for explanatory purposes. There is an active effort to standardize tracing HTTP headers as part of the W3C traceparent specification, which is still in the &#8220;Recommendation&#8221; phase. </p> <p class="valid" valid="valid" title="valid: True, node: 88, tag: p, level: 12" node_number="88">On the receiving end, the API web server handles the request and extracts the tracing metadata from the HTTP request. It then queues up a job to send an email to the user, and attaches the tracing context as part of a &#8220;meta&#8221; field in the job description. Last, it returns a response with a 200 status code indicating that the method was successful.</p> <p class="valid" valid="valid" title="valid: True, node: 89, tag: p, level: 12" node_number="89">Note that while the server returned a successful response, the actual &#8220;work&#8221; isn&#8217;t done until the background task worker picks up the newly queued job and actually delivers an email.</p> <p class="valid" valid="valid" title="valid: True, node: 90, tag: p, level: 12" node_number="90">At some point, the queue processor begins working on the queued email job. Again, the trace and parent identifiers are extracted, just as they were earlier in the web server.</p> <div class="valid" valid="valid" title="valid: True, node: 91, tag: div, level: 12" node_number="91"><pre class="valid" valid="valid" title="valid: True, node: 92, tag: pre, level: 13" node_number="92"><code class="valid" valid="valid" title="valid: True, node: 93, tag: code, level: 14" node_number="93">// API Web Server const Queue = require('bull'); const emailQueue = new Queue('email'); const uuid = require('uuid'); app.post("/api/v1/inviteUser", (req, res) =&gt; { const spanId = uuid.v4(), traceId = req.headers["trace-id"], parentId = req.headers["parent-id"]; console.log( "Adding job to email queue", `[traceId: ${traceId},`, `parentId: ${parentId},`, `spanId: ${spanId}]` ); emailQueue.add({ title: "Welcome to our product", to: req.params.email, meta: { traceId: traceId, // the downstream span's parent_id is this span's span_id parentId: spanId, }, }); res.status(200).send("ok"); }); // Background Task Worker emailQueue.process((job, done) =&gt; { const spanId = uuid.v4(); const { traceId, parentId } = job.data.meta; console.log( "Sending email", `[traceId: ${traceId},`, `parentId: ${parentId},`, `spanId: ${spanId}]` ); // actually send the email // ... done(); });</code></pre></div> <p class="valid" valid="valid" title="valid: True, node: 94, tag: p, level: 12" node_number="94">If you&#8217;re interested in running this example yourself, you can find the source code on GitHub.</p> <h2 class="valid" valid="valid" title="valid: True, node: 95, tag: h2, level: 12" node_number="95">Logging with distributed systems</h2> <p class="valid" valid="valid" title="valid: True, node: 96, tag: p, level: 12" node_number="96">You&#8217;ll notice that at every stage of our example, a logging call is made using console.log that additionally emits the current trace, span, and parent identifiers. In a perfect synchronous world &#8211; one where each service could log to the same centralized logging tool &#8211; each of these logging statements would appear sequentially:</p> <p class="valid" valid="valid" title="valid: True, node: 97, tag: p, level: 12" node_number="97">If an exception or errant behavior occurred during the course of these operations, it would be relatively trivial to use these or additional logging statements to pinpoint a source. But the unfortunate reality is that these are distributed services, which means:</p> <ul class="valid" valid="valid" title="valid: True, node: 98, tag: ul, level: 12" node_number="98"> <li class="valid" valid="valid" title="valid: True, node: 99, tag: li, level: 13" node_number="99">Web servers typically handle many concurrent requests. The web server may be performing work (and emitting logging statements) attributed to other requests.</li> <li class="valid" valid="valid" title="valid: True, node: 100, tag: li, level: 13" node_number="100">Network latency can cloud the order of operations. Requests made from upstream services might not reach their destination in the same order they were fired.</li> <li class="valid" valid="valid" title="valid: True, node: 101, tag: li, level: 13" node_number="101">Background workers may have queued jobs. Workers may have to first work through earlier queued jobs before reaching the exact job queued up in this trace.</li> </ul> <p class="valid" valid="valid" title="valid: True, node: 102, tag: p, level: 12" node_number="102">In a more realistic example, our logging calls might look something like this, which reflects multiple operations occurring concurrently:</p> <p class="valid" valid="valid" title="valid: True, node: 103, tag: p, level: 12" node_number="103">Without tracing metadata, understanding the topology of which action invoked which action would be impossible. But by emitting tracing meta information at every logging call, it&#8217;s possible to quickly filter on all logging calls within a trace by filtering on <code class="valid" valid="valid" title="valid: True, node: 104, tag: code, level: 13" node_number="104">traceId</code>, and to reconstruct the exact order by examining <code class="valid" valid="valid" title="valid: True, node: 105, tag: code, level: 13" node_number="105">spanId</code> and <code class="valid" valid="valid" title="valid: True, node: 106, tag: code, level: 13" node_number="106">parentId</code> relationships.</p> <p class="valid" valid="valid" title="valid: True, node: 107, tag: p, level: 12" node_number="107">This is the power of distributed tracing: by attaching metadata describing the current operation (span id), the parent operation that spawned it (parent id), and the trace identifier (trace id), we can augment logging and telemetry data to better understand the exact sequence of events occurring in your distributed services.</p> <h2 class="valid" valid="valid" title="valid: True, node: 108, tag: h2, level: 12" node_number="108"> Tracing in the real world</h2> <p class="valid" valid="valid" title="valid: True, node: 109, tag: p, level: 12" node_number="109">Over the course of this article, we have been working with a somewhat contrived example. In a real distributed tracing environment, you wouldn&#8217;t generate and pass all your span and tracing identifiers manually. Nor would you rely on <code class="valid" valid="valid" title="valid: True, node: 110, tag: code, level: 13" node_number="110">console.log</code> (or other logging) calls to emit your tracing metadata yourself. You would use proper tracing libraries to handle the instrumentation and emitting of tracing data for you.</p> <h2 class="valid" valid="valid" title="valid: True, node: 111, tag: h2, level: 12" node_number="111">OpenTelemetry</h2> <p class="valid" valid="valid" title="valid: True, node: 112, tag: p, level: 12" node_number="112"><a class="valid" valid="valid" title="valid: True, node: 113, tag: a, level: 13" node_number="113">OpenTelemetry</a> is a collection of open source tools, APIs, and SDKs for instrumenting, generating, and exporting telemetry data from running software. It provides language-specific implementations for most popular programming languages, including both browser <a class="valid" valid="valid" title="valid: True, node: 114, tag: a, level: 13" node_number="114">JavaScript and Node.js</a>.</p> <h2 class="valid" valid="valid" title="valid: True, node: 115, tag: h2, level: 12" node_number="115">Sentry</h2> <p class="valid" valid="valid" title="valid: True, node: 116, tag: p, level: 12" node_number="116"><a class="valid" valid="valid" title="valid: True, node: 117, tag: a, level: 13" node_number="117">Sentry</a> is an open source application monitoring product that helps you identify errors and performance bottlenecks in your code. It provides client libraries in every major programming language which instrument your software&#8217;s code to capture both error data and tracing telemetry.</p> <p class="valid" valid="valid" title="valid: True, node: 118, tag: p, level: 12" node_number="118">Sentry uses this telemetry in a number of ways. For example, Sentry&#8217;s <a class="valid" valid="valid" title="valid: True, node: 119, tag: a, level: 13" node_number="119">Performance Monitoring</a> feature set uses tracing data to generate waterfall diagrams that illustrate the end-to-end latency of your distributed services&#8217; operations within a trace.</p> <p class="valid" valid="valid" title="valid: True, node: 120, tag: p, level: 12" node_number="120">Sentry additionally uses tracing metadata to augment its Error Monitoring capabilities to understand how an error triggered in one service (e.g. server backend) can propagate to an error in another service (e.g. frontend).</p> <p class="valid" valid="valid" title="valid: True, node: 121, tag: p, level: 12" node_number="121">You can learn more about <a class="valid" valid="valid" title="valid: True, node: 122, tag: a, level: 13" node_number="122">Sentry and distributed tracing here</a>.</p> <h2 class="valid" valid="valid" title="valid: True, node: 123, tag: h2, level: 12" node_number="123">Next: Span trees, OpenTelemetry, and Sentry</h2> <p class="valid" valid="valid" title="valid: True, node: 124, tag: p, level: 12" node_number="124">Congratulations: you&#8217;ve graduated from part 1 of our series on distributed tracing for full stack developers. At this point you should understand what a trace is, how trace information is propagated through services via tracing context, and how trace context can be used to connect logging statements between multiple distributed services.</p> <p class="valid" valid="valid" title="valid: True, node: 125, tag: p, level: 12" node_number="125">Stay tuned for the next post in this series, where we&#8217;ll expand on the OpenTelemetry set of tracing tools, and take a further dive into how Sentry incorporates tracing context to augment error and performance monitoring telemetry.</p></div></article><div class="valid" valid="valid" title="valid: True, node: 126, tag: div, level: 10" node_number="126"><div class="valid" valid="valid" title="valid: True, node: 127, tag: div, level: 11" node_number="127">Your code is broken. Let's Fix it.</div><a class="valid" valid="valid" title="valid: True, node: 128, tag: a, level: 11" node_number="128">Get Started</a></div></div></div></div></div></main><div class="valid" valid="valid" title="valid: True, node: 129, tag: div, level: 5" node_number="129"><div class="valid" valid="valid" title="valid: True, node: 130, tag: div, level: 6" node_number="130"><div class="valid" valid="valid" title="valid: True, node: 131, tag: div, level: 7" node_number="131"><div class="valid" valid="valid" title="valid: True, node: 132, tag: div, level: 8" node_number="132"><div class="valid" valid="valid" title="valid: True, node: 133, tag: div, level: 9" node_number="133"><div class="valid" valid="valid" title="valid: True, node: 134, tag: div, level: 10" node_number="134"><h2 class="valid" valid="valid" title="valid: True, node: 135, tag: h2, level: 11" node_number="135">Do you like corporate newsletters?</h2><p class="valid" valid="valid" title="valid: True, node: 136, tag: p, level: 11" node_number="136">Neither do we. Sign up anyway.</p></div></div></div></div></div></div></div></div></div></body>
        <style tyle='text/css'>
body{
    position: relative;
    padding-left: 30px;
    top: 60px;
}
* {
    border: 1px solid #eee;
    padding: 5px 12px;
    margin: 3px 0;
    box-sizing: content-box;
    background-color: #fff;
    cursor: no-drop;
}
main:hover > *, section:hover > *, header:hover > *, nav:hover > *, a:hover > *, div:hover > *, p:hover > *, ul:hover > *, h1:hover > *, h2:hover > *, h3:hover > *, li:hover > *, span:hover > *{
    border: 2px solid green;
    background-color: #fffeee;
    padding: 5px 23px !important;
    margin: 1px 0;
    color: green;
}
main:hover, section:hover, header:hover, nav:hover, a:hover, div:hover, p:hover, ul:hover, h1:hover, h2:hover, h3:hover, li:hover, span:hover{
    border: 1px solid #fff;
    background-color: #eee;
}
a, span {
    display: block;
}
.selected {
    border: 2px solid orchid !important;
    opacity: 0.8;
    color: orchid !important;
}
.selected * {
    padding: 2px !important;
    color: orchid !important;
}
.valid {
  cursor: pointer;
}
.btn{
  cursor: pointer;
  font-weight: bolder;
  padding: 8px;
}
</style> 
        <script>function OpenOriginalLink($event){
    $event.stopPropagation();
    console.log(url);
}

function removeItem($event){
    $event.stopPropagation();
    console.log('Remove item: ', url)
    localStorage.removeItem(url)
}

function exportData($event){
    $event.stopPropagation();

    result = []
    for(let i=0; i<localStorage.length; i++) {
        let key = localStorage.key(i);
        result.push(localStorage.getItem(key))
    }
    const _url = URL.createObjectURL(new Blob([result.join("\n")], {type: 'text/plain'}))
    $event.target.href = _url;
    localStorage.clear()
}

var removeItemBtn = document.createElement("BUTTON");   // Create a <button> element
removeItemBtn.innerHTML = "Remove Item";
removeItemBtn.classList.add('btn');
removeItemBtn.style.position = "fixed";
removeItemBtn.style.left = '5px';
removeItemBtn.style.top = 0;
removeItemBtn.style.border = "1px solid";
removeItemBtn.style.boxShadow = "3px 3px #888";
removeItemBtn.onclick = removeItem;
document.body.appendChild(removeItemBtn);

var goToOriginLink = document.createElement("A");   // Create a <button> element
goToOriginLink.innerHTML = "GoToOrigin";
goToOriginLink.classList.add('btn');
goToOriginLink.style.position = "fixed"
goToOriginLink.style.left = '115px'
goToOriginLink.style.top = 0;
goToOriginLink.onclick = OpenOriginalLink;
goToOriginLink.setAttribute('href', decodeURIComponent(url));
goToOriginLink.target = '_blank';
document.body.appendChild(goToOriginLink);

var current = new Date
var exportDataLink = document.createElement("A");   // Create a <button> element
exportDataLink.innerHTML = "Export data";
exportDataLink.classList.add('btn');
exportDataLink.download = current.toISOString() + '.exported.txt';
exportDataLink.style.position = "fixed";
exportDataLink.style.right = '5px';
exportDataLink.style.top = 0;
exportDataLink.style.border = "1px solid #888";
exportDataLink.style.boxShadow = "3px 3px #888";
exportDataLink.onclick = exportData;
document.body.appendChild(exportDataLink);

data = {
    'title': null ,
    'article': null
}

var body = document.getElementsByTagName("body")[0];

body.onclick = function($e){
    var num = $e.target.getAttribute('node_number')
    var valid = $e.target.getAttribute('valid')

    if(!valid){
        console.log("Element is invalid")
        return
    }

    if(data.length > 2){
        data = data.splice(0, 2)
    }

    console.log("node:", $e.target)

    if(!data.title && !data.article){
        data.title = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else if (data.title && !data.article){
        data.article = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else{
        selected = Array.from(document.getElementsByClassName("selected"))
        selected.forEach(function(el){
            el.classList.remove('selected')
        })

        data.title = num;
        data.article = null;
        $e.target.classList.add('selected')

    }

    if(data.title && data.article){
        var obj = {
            url: url,
            text: body_html,
            title: data.title,
            article: data.article,
        }

        var datasetItem = JSON.stringify(obj)
        localStorage.setItem(url, datasetItem)
    }
}
</script> 
      </html>