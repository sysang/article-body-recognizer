<!DOCTYPE html>
<html>
<head>

      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

        <script> var url = encodeURIComponent('https://www.instructables.com/Irrigation-Level-Assessment-by-Thermal-Imaging-W-T/');</script>

        <script> var body_html = 'PGJvZHkgPjxoZWFkZXIgPjxkaXYgPjxkaXYgPjwvZGl2PjxkaXYgPkZvbGxvd2luZzwvZGl2PjwvZGl2PjxkaXYgPjxkaXYgPjxhID5pbnN0cnVjdGFibGVzY2lyY3VpdHM8L2E+UHJvamVjdHM8YSA+Q29udGVzdHM8L2E+PC9kaXY+PGRpdiA+PC9kaXY+PC9kaXY+PC9oZWFkZXI+PG1haW4+PGFydGljbGUgPjxoZWFkZXIgPjxoMSA+SXJyaWdhdGlvbiBMZXZlbCBBc3Nlc3NtZW50IGJ5IFRoZXJtYWwgSW1hZ2luZyBXLyBUZW5zb3JGbG93PC9oMT48ZGl2ID48ZGl2ID4gQnkgPGEgPkt1dGx1aGFuIEFrdGFyPC9hPiBpbiA8YSA+Q2lyY3VpdHM8L2E+PGEgPkVsZWN0cm9uaWNzPC9hPjwvZGl2PjxkaXYgPjxwID42LDA5NjwvcD48cCA+MTc8L3A+PHAgPjA8L3A+PHAgPkZlYXR1cmVkPC9wPjwvZGl2PjwvZGl2PjwvaGVhZGVyPjxkaXYgPjxkaXYgPjxzZWN0aW9uID48aDIgPkludHJvZHVjdGlvbjogSXJyaWdhdGlvbiBMZXZlbCBBc3Nlc3NtZW50IGJ5IFRoZXJtYWwgSW1hZ2luZyBXLyBUZW5zb3JGbG93PC9oMj48ZGl2ID48ZGl2ID48ZGl2ID5CeSBLdXRsdWhhbiBBa3RhcjxhID5UaGVBbXBsaXR1aGVkcm9uPC9hPjwvZGl2PjwvZGl2PjxkaXYgPiBNb3JlIGJ5IHRoZSBhdXRob3I6IDwvZGl2PjxkaXYgPiBBYm91dDogU2VsZi1UYXVnaHQgRnVsbCBTdGFjayBEZXZlbG9wZXIgfCBQcm9ncmFtbWVyIHwgTWFrZXIgfCBQaHlzaWNzIEVudGh1c2lhc3QgTW9yZSBBYm91dCBLdXRsdWhhbiBBa3RhciDCuzwvZGl2PjwvZGl2PjxkaXYgPjxwPkNvbGxlY3QgaXJyaWdhdGlvbiBsZXZlbCBkYXRhIGJ5IHRoZXJtYWwgaW1hZ2luZywgYnVpbGQgYW5kIHRyYWluIGEgbmV1cmFsIG5ldHdvcmsgbW9kZWwsIGFuZCBydW4gdGhlIG1vZGVsIGRpcmVjdGx5IG9uIFdpbyBUZXJtaW5hbC48L3A+PC9kaXY+PC9zZWN0aW9uPjxzZWN0aW9uID48aDIgPlN1cHBsaWVzPC9oMj48ZGl2ID48dWw+PGxpPjEgeCBXaW8gVGVybWluYWw8L2xpPjxsaT4xIHggTUxYOTA2NDEgVGhlcm1hbCBJbWFnaW5nIENhbWVyYSAoMTZ4MTIgdy8gMTEwwrAgRk9WKSA8L2xpPjxsaT4xIHggR3JvdmUgLSBVbml2ZXJzYWwgNCBQaW4gQ2FibGU8L2xpPjxsaT4xIHggQ3JlYWxpdHkgQ1ItNiBTRSAzRCBQcmludGVyPC9saT48bGk+MSB4IFJhc3BiZXJyeSBQaSAzQisgb3IgNDwvbGk+PC91bD48L2Rpdj48L3NlY3Rpb24+PHNlY3Rpb24gPjxoMiA+U3RlcCAxOiBTdG9yeTwvaDI+PGRpdiA+PHA+U2luY2UgZ2xvYmFsIHRlbXBlcmF0dXJlcyBhcmUgZXhwZWN0ZWQgdG8gcmlzZSBvdmVyIHRoZSBuZXh0IGZldyBkZWNhZGVzIGR1ZSB0byBjbGltYXRlIGNoYW5nZSBhbmQgdGh1cyBldmFwb3JhdGlvbiByYXRlcyB3aWxsIGluY3JlYXNlLCB3YXRlciBzY2FyY2l0eSBhbmQgdGhlIGV4cGFuc2lvbiBvZiBhcmlkIHJlZ2lvbnMgdGhyZWF0ZW4gcHJvZHVjdGl2ZSBhZ3JpY3VsdHVyYWwgYXJlYXMgYW5kIGxvbmctdGVybSB3YXRlciBhdmFpbGFiaWxpdHkuIENvbnNpZGVyaW5nIHdhdGVyIGF2YWlsYWJpbGl0eSBpcyBhbHJlYWR5IGxpbWl0ZWQsIHdlIG5lZWQgdG8gZGVzaXN0IGZyb20gcHJvZmxpZ2F0ZSB3YXRlciB1dGlsaXphdGlvbiBpbiBhZ3JpY3VsdHVyZSB0byBzdXN0YWluIG91ciBtZWFnZXIgd2F0ZXIgcmVzb3VyY2VzLiBPdGhlcndpc2UsIHdlIHdpbGwgZW5jb3VudGVyIG1vcmUgY3JpdGljYWwgcHJlZGljYW1lbnRzIHRoYW4gZGVwbGV0aW5nIGFyYWJsZSBsYW5kcyBkdWUgdG8gd2F0ZXIgc2NhcmNpdHkgYW5kIGRlZmljaWVuY3kuPC9wPjxwPlNpbmNlIHRoZXJlIGlzIGFscmVhZHkgYW4gaW1iYWxhbmNlIGJldHdlZW4gdGhlIGlycmlnYXRpb24gZGVtYW5kIGFuZCB0aGUgYXZhaWxhYmxlIHdhdGVyIHJlc291cmNlc1sxXSwgaXQgaXMgY3J1Y2lhbCB0byBhdm9pZCBwb29yIGlycmlnYXRpb24gdGltaW5nIGFuZCBpbnN1ZmZpY2llbnQgb3IgZXh0cmF2YWdhbnQgYXBwbGljYXRpb25zIG9mIHdhdGVyLCB3aGljaCBhcmUgdW5mb3J0dW5hdGVseSByaWZlIGluIGFncmljdWx0dXJlLiBUbyBzdXN0YWluIGlycmlnYXRlZCBhZ3JpY3VsdHVyZSBhbmQgbWF4aW1pemUgdGhlIHF1YWxpdHkgb2YgdGhlIHByb2R1Y3QgYW5kIHRoZSBlc3RpbWF0ZWQgY3JvcCB5aWVsZCB3aGlsZSBvcHRpbWl6aW5nIHRoZSBxdWFudGl0eSBvZiB3YXRlciB1c2VkIHBlciB1bml0IGFyZWFbMl0sIHdlIG5lZWQgdG8gYXBwbHkgcHJlY2lzZSBpcnJpZ2F0aW9uIHNjaGVkdWxpbmcgbWV0aG9kcy4gSW4gdGhhdCByZWdhcmQsIHdlIGNhbiBpbXByb3ZlIHdhdGVyIHVzZSBlZmZpY2llbmN5IGFuZCBhZ3JpY3VsdHVyYWwgd2F0ZXIgbWFuYWdlbWVudCB3aGlsZSBwcmVzZXJ2aW5nIHdhdGVyIGFuZCBpbmNyZWFzaW5nIHRoZSBwcm9maXRhYmlsaXR5IG9mIGFncm9lY29zeXN0ZW1zLiA8L3A+PHA+QWZ0ZXIgcGVydXNpbmcgcmVjZW50IHJlc2VhcmNoIHBhcGVycyBvbiBpcnJpZ2F0aW9uIG1hbmFnZW1lbnQsIG1vbml0b3JpbmcsIGFuZCBzY2hlZHVsaW5nLCBJIGRlY2lkZWQgdG8gY3JlYXRlIGFuIGVhc3ktdG8tdXNlIGFuZCBidWRnZXQtZnJpZW5kbHkgZGV2aWNlIHRvIG1vbml0b3IgcGxhbnQgd2F0ZXIgc3RhdHVzIChpcnJpZ2F0aW9uIGxldmVscykgYnkgdGhlcm1hbCBpbWFnaW5nIGluIHRoZSBob3BlIG9mIG1ha2luZyBpcnJpZ2F0aW9uIHNjaGVkdWxpbmcgYWNjZXNzaWJsZSBldmVuIGZvciBob2JieWlzdHMuIEFzIG9wcG9zZWQgdG8gY2xhc3NpY2FsIG1lYXN1cmVtZW50IGRldmljZXMgYW5kIG1ldGhvZHMgZm9yIG1vbml0b3JpbmcgcGxhbnQgd2F0ZXIgc3RhdHVzIChpcnJpZ2F0aW9uIGxldmVscyksIHRoZXJtYWwgaW1hZ2luZyBpcyBhIG5vbi1pbnZhc2l2ZSwgbm9uLWNvbnRhY3QsIGFuZCBub24tZGVzdHJ1Y3RpdmUgdGVjaG5pcXVlLiBBbHNvLCB0aGVybWFsIGltYWdpbmcgYWxsb3dzIHVzIHRvIGVsaWNpdCBtZWFzdXJlbWVudHMgb2Ygd2F0ZXIgc3RhdHVzIChpcnJpZ2F0aW9uIGxldmVscykgZGlyZWN0bHkgZnJvbSBwbGFudHMgd2l0aG91dCBlbXBsb3lpbmcgbGFib3IgZGVtYW5kaW5nIGFuZCB0aW1lLWNvbnN1bWluZyBwcm9jZXNzZXMuIEFzIGV4cGxhaW5lZCBiZWxvdywgdGhlcm1hbCBpbWFnaW5nIGlzIGVtZXJnaW5nIGFzIGEgdWJpcXVpdG91cyBtZXRob2QgdG8gZGV0ZWN0IHBsYW50IHdhdGVyIHN0YXR1cyAoaXJyaWdhdGlvbiBsZXZlbHMpIGR1ZSB0byBpdHMgcHJlY2lzaW9uIGFuZCBhY2Nlc3NpYmlsaXR5LjwvcD48cD5JbmZyYXJlZCB0aGVybW9ncmFwaHkgKHRoZXJtYWwgaW1hZ2luZykgZm9yIG1vbml0b3JpbmcgcGxhbnQgd2F0ZXIgc3RhdHVzIChpcnJpZ2F0aW9uIGxldmVscykgaXMgYSB0ZWNobmlxdWUgYmFzZWQgb24gdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIGxlYXZlcycgKG9yIGNyb3AgY2Fub3B5KSBzdG9tYXRhbCBjbG9zdXJlIG9yIGFwZXJ0dXJlIGFuZCB0aGVpciBzdXJmYWNlIHRlbXBlcmF0dXJlLiBXaGVuIGxlYXZlcyAob3IgY3JvcCBjYW5vcHkpIHRyYW5zcGlyZXMsIHRoZXkgbG9zZSB3YXRlciB0aHJvdWdoIHRoZWlyIHN0b21hdGEsIGFuZCB0aGVyZWZvcmUgdGhlIGNyb3AgY2Fub3B5IHRlbXBlcmF0dXJlIGRlY3JlYXNlcy4gSG93ZXZlciwgb25jZSBwbGFudHMgZ28gaW50byB3YXRlciBzdHJlc3MsIHRoZWlyIHN0b21hdGEgYmVnaW4gdG8gY2xvc2UgYW5kIGNlYXNlIHRvIHRyYW5zcGlyZSwgY2F1c2luZyB0aGUgcGxhbnQgdG8gaGVhdCB1cCBhbmQgdGhlIGNyb3AgY2Fub3B5IHRlbXBlcmF0dXJlIHRvIHJpc2UuIEFsc28sIHRoZSBjcm9wIGNhbm9weSB0ZW1wZXJhdHVyZSBpcyBjb3JyZWxhdGVkIHdpdGggc3BlY2lmaWMgcGxhbnQgcGh5c2lvbG9naWNhbCBwYXJhbWV0ZXJzLCBzdWNoIGFzIHN0b21hdGFsIGNvbmR1Y3RhbmNlLiBJbiBhZGRpdGlvbiwgdGhlcm1hbCBpbWFnaW5nIGFwcGVhcnMgdG8gaGF2ZSBwb3RlbnRpYWwgYWR2YW50YWdlcyBvdmVyIGdhcy1leGNoYW5nZSBtZWFzdXJlbWVudCB3aGVuIG1vbml0b3Jpbmcgc3RvbWF0YWwgcmVzcG9uc2VzIGluIHBoZW5vdHlwaW5nIHBsYW50IHN0dWRpZXNbM10uPC9wPjxwPkV2ZW4gdGhvdWdoIHRoZXJtYWwgaW1hZ2luZyBpcyBhIHRlY2huaXF1ZSB3aXRoIGhpZ2ggcHJlY2lzaW9uIGFuZCBhZHZhbnRhZ2VzLCBpdCBpcyBzdGlsbCBzdHJ1Z2dsaW5nIHRvIGludGVycHJldCBhbmQgYW5hbHl6ZSB0aGVybWFsIGltYWdpbmcgZGF0YSB0byBleHRyYXBvbGF0ZSBhbmQgYXNzZXNzIGlycmlnYXRpb24gbGV2ZWxzIHdpdGhvdXQgYXBwbHlpbmcgYWxnb3JpdGhtcy4gSGVuY2UsIEkgZGVjaWRlZCB0byBidWlsZCBhbmQgdHJhaW4gYW4gYXJ0aWZpY2lhbCBuZXVyYWwgbmV0d29yayBtb2RlbCB0byBkZXRlY3QgaXJyaWdhdGlvbiBsZXZlbHMgYnkgdGhlcm1hbCBpbWFnaW5nIGF1dG9tYXRpY2FsbHkuPC9wPjxwPlRvIGNvbGxhdGUgdGhlcm1hbCBpbWFnaW5nIGRhdGEgYW5kIGNyZWF0ZSBhIGRhdGEgc2V0IGVhc2lseSwgSSBkZXZlbG9wZWQgYSB3ZWIgYXBwbGljYXRpb24gaW4gUEhQIGJlZm9yZSBidWlsZGluZyBhbmQgdGVzdGluZyBteSBuZXVyYWwgbmV0d29yayBtb2RlbC4gVGhlbiwgdG8gbWFrZSBpcnJpZ2F0aW9uIHNjaGVkdWxpbmcgYW5kIG1vbml0b3JpbmcgYnkgdGhlcm1hbCBpbWFnaW5nIGFzIGFjY2Vzc2libGUgYXMgcG9zc2libGUsIEkgdXRpbGl6ZWQgYSBXaW8gVGVybWluYWwgYW5kIGFuIE1MWDkwNjQxIHRoZXJtYWwgaW1hZ2luZyBjYW1lcmEgdG8gY29sbGVjdCB0aGVybWFsIGltYWdpbmcgZGF0YSBhbmQgcnVuIG15IG5ldXJhbCBuZXR3b3JrIG1vZGVsIGFmdGVyIHRyYWluaW5nIGl0LjwvcD48cD5BZnRlciBjb21wbGV0aW5nIG15IGRhdGEgc2V0LCBJIGJ1aWx0IG15IGFydGlmaWNpYWwgbmV1cmFsIG5ldHdvcmsgbW9kZWwgKEFOTikgd2l0aCBUZW5zb3JGbG93IHRvIG1ha2UgcHJlZGljdGlvbnMgb24gdGhlIGlycmlnYXRpb24gY2xhc3NlcyAobGFiZWxzKSBiYXNlZCBvbiB0aGVybWFsIGltYWdpbmcuIEVtcGlyaWNhbGx5LCBJIGFzc2lnbmVkIGFuIGlycmlnYXRpb24gY2xhc3MgKGxhYmVsKSBmb3IgZWFjaCB0aGVybWFsIGltYWdpbmcgYXJyYXkgKGlucHV0KSBnZW5lcmF0ZWQgYnkgdGhlIE1MWDkwNjQxIHRoZXJtYWwgaW1hZ2luZyBjYW1lcmE6PC9wPjx1bD48bGk+RHJ5IDwvbGk+PGxpPk1vZGVyYXRlIDwvbGk+PGxpPlN1ZmZpY2llbnQgPC9saT48bGk+RXhjZXNzaXZlIDwvbGk+PC91bD48cD5BZnRlciB0cmFpbmluZyBhbmQgdGVzdGluZyBteSBuZXVyYWwgbmV0d29yayBtb2RlbCwgSSBjb252ZXJ0ZWQgaXQgZnJvbSBhIFRlbnNvckZsb3cgS2VyYXMgSDUgbW9kZWwgdG8gYSBDIGFycmF5ICguaCBmaWxlKSB0byBleGVjdXRlIHRoZSBtb2RlbCBvbiB0aGUgV2lvIFRlcm1pbmFsLiBTaW5jZSB0aGUgdGhlcm1hbCBpbWFnaW5nIGNhbWVyYSBpcyBkaXJlY3RseSBjb25uZWN0ZWQgdG8gdGhlIFdpbyBUZXJtaW5hbCwgdGhlIGRldmljZSBpcyBjYXBhYmxlIG9mIGRldGVjdGluZyBpcnJpZ2F0aW9uIGxldmVscyAoY2xhc3NlcykgaW4gdGhlIGZpZWxkIGVmZm9ydGxlc3NseS48L3A+PHA+TGFzdGx5LCB0byBtYWtlIHRoZSBkZXZpY2UgYXMgY29tcGFjdCBhbmQgcm9idXN0IGFzIHBvc3NpYmxlLCBJIGRlc2lnbmVkIGEgZm9yZXN0LXRoZW1lZCBjYXNlICgzRCBwcmludGFibGUpLjwvcD48cD5TbywgdGhpcyBpcyBteSBwcm9qZWN0IGluIGEgbnV0c2hlbGwg8J+YgzwvcD48cD5JbiB0aGUgZm9sbG93aW5nIHN0ZXBzLCB5b3UgY2FuIGZpbmQgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBvbiBjb2RpbmcsIGRhdGEgY29sbGVjdGlvbiwgYnVpbGRpbmcgYW4gYXJ0aWZpY2lhbCBuZXVyYWwgbmV0d29yayBtb2RlbCB3aXRoIFRlbnNvckZsb3csIGFuZCBydW5uaW5nIGl0IG9uIFdpbyBUZXJtaW5hbC48L3A+PHA+SHVnZSB0aGFua3MgdG8gPGEgPlNlZWVkIFN0dWRpbzwvYT4gZm9yIHNwb25zb3JpbmcgdGhlc2UgcHJvZHVjdHM6PC9wPjxwPuKtkCBXaW8gVGVybWluYWwgfCA8YSA+SW5zcGVjdDwvYT48L3A+PHA+4q2QIEdyb3ZlIC0gVGhlcm1hbCBJbWFnaW5nIENhbWVyYSAtIE1MWDkwNjQxIHwgPGEgPkluc3BlY3Q8L2E+PC9wPjxwPvCfjoHwn46oIEFsc28sIGh1Z2UgdGhhbmtzIHRvIDxhID5DcmVhbGl0eTNEPC9hPiBmb3Igc3BvbnNvcmluZyBhIDxhID5DcmVhbGl0eSBDUi02IFNFIDNEIFByaW50ZXI8L2E+LjwvcD48cD7wn46B8J+OqCBJZiB5b3Ugd2FudCB0byBwdXJjaGFzZSBzb21lIHByb2R1Y3RzIGZyb20gPGEgPkNyZWFsaXR5M0Q8L2E+LCB5b3UgY2FuIHVzZSBteSAxMCUgZGlzY291bnQgY291cG9uIDxpPihBa3RhcjEwKTwvaT4gZXZlbiBmb3IgdGhlaXIgbmV3IGFuZCBtb3N0IHBvcHVsYXIgcHJpbnRlcnM6IDxhID5DUi0xMCBTbWFydDwvYT4sIDxhID5DUi0zMCAzRFByaW50TWlsbDwvYT4sIDxhID5FbmRlci0zIFBybzwvYT4sIGFuZCA8YSA+RW5kZXItMyBWMjwvYT4uPC9wPjxwPvCfjoHwn46oIFlvdSBjYW4gYWxzbyB1c2UgdGhlIGNvdXBvbiBmb3IgQ3JlYWxpdHkgZmlsYW1lbnRzLCBzdWNoIGFzIDxhID5VcGdyYWRlZCBQTEEgKDIwMGcgeCA1IFBhY2spPC9hPiwgPGEgPlBMQSBXaGl0ZTwvYT4sIGFuZCA8YSA+UExBIEJsYWNrPC9hPi48L3A+PC9kaXY+PC9zZWN0aW9uPjxzZWN0aW9uID48aDIgPlN0ZXAgMjogRGVzaWduaW5nIGFuZCBQcmludGluZyBhIEZvcmVzdC10aGVtZWQgQ2FzZTwvaDI+PGRpdiA+PHA+QXMgYSBub3ZpY2UgaW4gM0QgbW9kZWwgZGVzaWduaW5nIGFuZCBwcmludGluZywgSSBkZWNpZGVkIHRvIGRlc2lnbiBhIGZvcmVzdC10aGVtZWQgY2FzZSBmb3IgdGhpcyBwcm9qZWN0IHRvIGNyZWF0ZSBhIG1vcmUgY29tcGFjdCBhbmQgcm9idXN0IGRldmljZSBvcGVyYXRpbmcgZmxhd2xlc3NseSBpbiB0aGUgZmllbGQuPC9wPjxwPkkgZGVzaWduZWQgdGhlIG1haW4gY2FzZSBhbmQgdHJlZSBiYXNlcyBpbiBBdXRvZGVzayBGdXNpb24gMzYwLiBZb3UgY2FuIGRvd25sb2FkIHRoZWlyIFNUTCBmaWxlcyBiZWxvdy48L3A+PHA+Rm9yIHRyZWVzIG1vdW50ZWQgb24gdGhlIG1haW4gY2FzZSwgSSB1dGlsaXplZCB0aGVzZSBtb2RlbHMgZnJvbSBUaGluZ2l2ZXJzZTo8L3A+PHVsPjxsaT48YSA+VHJlZSBvbiB0aGUgbGVmdDwvYT48L2xpPjxsaT48YSA+VHJlZSBvbiB0aGUgcmlnaHQ8L2E+PC9saT48L3VsPjxwPlNpbmNlIEkgd2FudGVkIHRvIGFwcGx5IGEgc3R5bGlzaCBmb3Jlc3QgdGhlbWUgdG8gdGhlIGRldmljZSwgSSB1dGlsaXplZCB0aHJlZSBQTEEgZmlsYW1lbnRzIHdpdGggZGlmZmVyZW50IGNvbG9yczo8L3A+PHVsPjxsaT5HcmVlbiA8L2xpPjxsaT5CZWlnZSA8L2xpPjxsaT5QZWFrIEdyZWVuIDwvbGk+PC91bD48cD5JIHNsaWNlZCAzRCBtb2RlbHMgKFNUTCBmaWxlcykgZm9yIGVhY2ggY29sb3IgYWJvdmUgaW4gVWx0aW1ha2VyIEN1cmEuPC9wPjxwPkZpbmFsbHksIEkgcHJpbnRlZCBhbGwgcGFydHMgKG1vZGVscykgd2l0aCBteSBDcmVhbGl0eSBDUi02IFNFIDNEIFByaW50ZXIuIEFsdGhvdWdoIEkgYW0gYSBiZWdpbm5lciBpbiAzRCBwcmludGluZyBhbmQgaXQgaXMgbXkgZmlyc3QgM0QgcHJpbnRlciwgSSBnb3QgaW5jcmVkaWJsZSByZXN1bHRzIGVmZm9ydGxlc3NseSB3aXRoIHRoZSBDUi02IFNFIDopPC9wPjwvZGl2Pjwvc2VjdGlvbj48c2VjdGlvbiA+PGgyID5TdGVwIDM6IEFzc2VtYmxpbmcgdGhlIENhc2UgYW5kIEl0cyBDb21wb25lbnRzPC9oMj48ZGl2ID48cD5BZnRlciBwcmludGluZyBhbGwgcGFydHMgKG1vZGVscykgc3VjY2Vzc2Z1bGx5LCBJIGZhc3RlbmVkIHRoZW0gdG9nZXRoZXIgYW5kIGF0dGFjaGVkIHRoZSBXaW8gVGVybWluYWwgYW5kIHRoZSBNTFg5MDY0MSB0aGVybWFsIGltYWdpbmcgY2FtZXJhIHRvIHRoZSBjYXNlLiBJIHVzZWQgYSBHcm92ZSBjb25uZWN0aW9uIGNhYmxlICg0IFBpbikgdG8gY29ubmVjdCB0aGUgV2lvIFRlcm1pbmFsIHRvIHRoZSBNTFg5MDY0MSB0aGVybWFsIGltYWdpbmcgY2FtZXJhLjwvcD48L2Rpdj48L3NlY3Rpb24+PHNlY3Rpb24gPjxoMiA+U3RlcCA0OiBEZXZlbG9waW5nIGEgV2ViIEFwcGxpY2F0aW9uIGluIFBIUCB0byBDb2xsYXRlIERhdGEgb24gSXJyaWdhdGlvbiBMZXZlbHMgYnkgVGhlcm1hbCBJbWFnaW5nPC9oMj48ZGl2ID48cD5CZWZvcmUgY29sbGVjdGluZyB0aGVybWFsIGltYWdpbmcgZGF0YSB3aXRoIHRoZSBXaW8gVGVybWluYWwsIEkgZGVjaWRlZCB0byBkZXZlbG9wIGEgd2ViIGFwcGxpY2F0aW9uIGluIFBIUCwgbmFtZWQgPGk+aXJyaWdhdGlvbiBsZXZlbCBkYXRhIGxvZ2dlcjwvaT4sIHNvIGFzIHRvIHNhdmUgYW5kIGFuYWx5emUgZGF0YSBlYXNpbHkgb24gbXkgc2VydmVyIGhvc3RlZCBvbiBSYXNwYmVycnkgUGkuPC9wPjxwPkFzIHNob3duIGJlbG93LCB0aGUgd2ViIGFwcGxpY2F0aW9uIGNvbnNpc3RzIG9mIG9uZSBmaWxlIGFuZCBoYXMgdGhyZWUgcGFyYW1ldGVycyB0byBjcmVhdGUgdGhlIHJlcXVpcmVkIENTViBmaWxlcyBhbmQgY29sbGVjdCBkYXRhIHN1Y2Nlc3NmdWxseTo8L3A+PHVsPjxsaT5pbmRleC5waHAgPC9saT48L3VsPjxwPlBhcmFtZXRlcnM6PC9wPjx1bD48bGk+Y3JlYXRlX2ZpbGVzIDwvbGk+PGxpPnRoZXJtYWxfaW1nIDwvbGk+PGxpPmxldmVsIDwvbGk+PC91bD48cD7irZAgSW4gdGhlIDxpPmluc2VydF9uZXdfbGluZTwvaT4gZnVuY3Rpb24sIGluc2VydCBhIG5ldyByb3cgdG8gdGhlIGdpdmVuIENTViBmaWxlIGJ5IHVzaW5nIHRoZSA8aT5mcHV0Y3N2PC9pPiBmdW5jdGlvbi4gVG8gYXZvaWQgc3ludGF4IGVycm9ycyBpbiB0aGUgQ1NWIGZpbGVzLCB1c2UgdGhlIDxpPmV4cGxvZGU8L2k+IGZ1bmN0aW9uIHRvIHNhdmUgdGhlIGdpdmVuIGRhdGEgKGFycmF5KSBzdWNjZXNzZnVsbHkuIDwvcD48cHJlPiBmdW5jdGlvbiBpbnNlcnRfbmV3X2xpbmUoJGNzdl9maWxlLCAkbGluZSl7ICRsaW5lID0gYXJyYXkoJGxpbmUpOyAkZiA9IGZvcGVuKCRjc3ZfZmlsZS4iLmNzdiIsICJhIik7IGZwdXRjc3YoJGYsIGV4cGxvZGUoIiwiLCAkbGluZVswXSkpOyBmY2xvc2UoJGYpOyBlY2hvICJUaGUgZ2l2ZW4gbGluZSBpcyBhZGRlZCB0byB0aGUgJmx0O2kmZ3Q7Jmx0O2ImZ3Q7Ii4kY3N2X2ZpbGUuIi5jc3YmbHQ7L2ImZ3Q7Jmx0Oy9pJmd0OyBmaWxlIHN1Y2Nlc3NmdWxseSEiOyB9IDwvcHJlPjxwPuKtkCBJbiB0aGUgPGk+Y3JlYXRlX2Nzdl9maWxlPC9pPiBmdW5jdGlvbiwgY3JlYXRlIGEgbmV3IENTViBmaWxlIHdpdGggdGhlIGdpdmVuIGZpbGUgbmFtZS48L3A+PHByZT4gZnVuY3Rpb24gY3JlYXRlX2Nzdl9maWxlKCRjc3ZfZmlsZSl7ICRmID0gZm9wZW4oJGNzdl9maWxlLicuY3N2JywgJ3diJyk7IGZjbG9zZSgkZik7IGVjaG8gIiZsdDtpJmd0OyZsdDtiJmd0OyIuJGNzdl9maWxlLiIuY3N2Jmx0Oy9iJmd0OyZsdDsvaSZndDsgZmlsZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEmbHQ7YnImZ3Q7Jmx0O2JyJmd0OyI7IH0gPC9wcmU+PHA+4q2QIElmIHRoZSA8aT5jcmVhdGVfZmlsZXM8L2k+IHBhcmFtZXRlciBpcyByZWNlaXZlZCBhbmQgZXF1YWxzIDxpPm9rPC9pPiwgdGhlbiBjcmVhdGUgdGhlIHJlcXVpcmVkIENTViBmaWxlcyB0byBzYXZlIGFuZCBjb2xsZWN0IHRoZXJtYWwgaW1hZ2luZyBkYXRhLiBFYWNoIGZpbGUgbmFtZSByZXByZXNlbnRzIGFuIGlycmlnYXRpb24gY2xhc3M6PC9wPjx1bD48bGk+ZHJ5LmNzdiA8L2xpPjxsaT5tb2RlcmF0ZS5jc3YgPC9saT48bGk+c3VmZmljaWVudC5jc3YgPC9saT48bGk+ZXhjZXNzaXZlLmNzdiA8L2xpPjwvdWw+PHByZT4gaWYoaXNzZXQoJF9HRVRbImNyZWF0ZV9maWxlcyJdKSAkX0dFVFsiY3JlYXRlX2ZpbGVzIl0gPT0gIm9rIil7IGNyZWF0ZV9jc3ZfZmlsZSgiZXhjZXNzaXZlIik7IGNyZWF0ZV9jc3ZfZmlsZSgic3VmZmljaWVudCIpOyBjcmVhdGVfY3N2X2ZpbGUoIm1vZGVyYXRlIik7IGNyZWF0ZV9jc3ZfZmlsZSgiZHJ5Iik7IH0gPC9wcmU+PHA+4q2QIElmIHRoZSA8aT50aGVybWFsX2ltZzwvaT4gYW5kIDxpPmxldmVsPC9pPiBwYXJhbWV0ZXJzIGFyZSByZWNlaXZlZCwgdGhlbiBzYXZlIHRoZSBnaXZlbiB0aGVybWFsIGltYWdpbmcgZGF0YSAoYXJyYXkpIHRvIHRoZSBnaXZlbiBDU1YgZmlsZSAob25lIGZyb20gYWJvdmUpLjwvcD48cHJlPiBpZihpc3NldCgkX0dFVFsidGhlcm1hbF9pbWciXSkgaXNzZXQoJF9HRVRbImxldmVsIl0pKXsgaW5zZXJ0X25ld19saW5lKCRfR0VUWyJsZXZlbCJdLCAkX0dFVFsidGhlcm1hbF9pbWciXSk7IH1lbHNleyBlY2hvICJXYWl0aW5nIERhdGEuLi4iOyB9IDwvcHJlPjwvZGl2Pjwvc2VjdGlvbj48c2VjdGlvbiA+PGgyID5TdGVwIDU6IFNldHRpbmcgVXAgdGhlIFdlYiBBcHBsaWNhdGlvbiBvbiBSYXNwYmVycnkgUGk8L2gyPjxkaXYgPjxwPkFmdGVyIGNyZWF0aW5nIHRoZSBQSFAgd2ViIGFwcGxpY2F0aW9uLCBhcyBtZW50aW9uZWQgYWJvdmUsIEkgcnVuIHRoZSBhcHBsaWNhdGlvbiBvbiBteSBzZXJ2ZXIgaG9zdGVkIG9uIFJhc3BiZXJyeSBQaSwgYnV0IHlvdSBjYW4gcnVuIGl0IG9uIGFueSBzZXJ2ZXIgYXMgbG9uZyBhcyBpdCBpcyBhIFBIUCBzZXJ2ZXIuPC9wPjxwPklmIHlvdSB3YW50IHRvIHVzZSBSYXNwYmVycnkgUGkgdG8gcnVuIHRoZSBhcHBsaWNhdGlvbiwgYXMgZGlkIEksIGJ1dCB5b3UgZG8gbm90IGtub3cgaG93IHRvIHNldCB1cCBhIExBTVAgd2ViIHNlcnZlciBvbiBSYXNwYmVycnkgUGksIHlvdSBjYW4gaW5zcGVjdCA8YSA+bXkgcHJldmlvdXMgdHV0b3JpYWw8L2E+LjwvcD48cD7irZAgRmlyc3Qgb2YgYWxsLCBpbnN0YWxsIGFuZCBleHRyYWN0IHRoZSA8aT5pcnJpZ2F0aW9uX2xldmVsX2RhdGFfbG9nZ2VyLnppcDwvaT4gZm9sZGVyLjwvcD48cD7irZAgVGhlbiwgbW92ZSB0aGUgYXBwbGljYXRpb24gZm9sZGVyICg8aT5pcnJpZ2F0aW9uX2xldmVsX2RhdGFfbG9nZ2VyPC9pPikgdG8gdGhlIEFwYWNoZSBzZXJ2ZXIgKC92YXIvd3d3L2h0bWwpIGJ5IHVzaW5nIHRoZSB0ZXJtaW5hbCBzaW5jZSB0aGUgQXBhY2hlIHNlcnZlciBpcyBhIHByb3RlY3RlZCBsb2NhdGlvbi48L3A+PHA+PGk+c3VkbyBtdiAvaG9tZS9waS9Eb3dubG9hZHMvaXJyaWdhdGlvbl9sZXZlbF9kYXRhX2xvZ2dlciAvdmFyL3d3dy9odG1sLzwvaT48L3A+PC9kaXY+PC9zZWN0aW9uPjxzZWN0aW9uID48aDIgPlN0ZXAgNjogUnVubmluZyBhbmQgVGVzdGluZyB0aGUgV2ViIEFwcGxpY2F0aW9uIG9uIFJhc3BiZXJyeSBQaTwvaDI+PGRpdiA+PHA+4q2QIElmIHRoZSBwYXJhbWV0ZXJzIGFyZSBub3Qgc2V0LCB0aGUgd2ViIGFwcGxpY2F0aW9uIHByaW50czogPGk+V2FpdGluZyBEYXRhLi4uPC9pPjwvcD48cD48aT5odHRwOi8vbG9jYWxob3N0L2lycmlnYXRpb25fbGV2ZWxfZGF0YV9sb2dnZXIvPC9pPjwvcD48cD7irZAgU2luY2UgdGhlIEFwYWNoZSBzZXJ2ZXIgaXMgYSBwcm90ZWN0ZWQgbG9jYXRpb24sIGl0IHRocm93cyBhbiBlcnJvciB3aGlsZSBhdHRlbXB0aW5nIHRvIG1vZGlmeSB0aGUgZmlsZXMgYW5kIGZvbGRlcnMgaW4gaXQuIFRoZXJlZm9yZSwgYmVmb3JlIHV0aWxpemluZyB0aGUgd2ViIGFwcGxpY2F0aW9uIHRvIGNyZWF0ZSB0aGUgcmVxdWlyZWQgQ1NWIGZpbGVzIHRvIHNhdmUgYW5kIGNvbGxlY3QgdGhlcm1hbCBpbWFnaW5nIGRhdGEsIGNoYW5nZSB0aGUgd2ViIGFwcGxpY2F0aW9uJ3MgZm9sZGVyIHBlcm1pc3Npb24gYnkgdXNpbmcgdGhlIHRlcm1pbmFsOjwvcD48cD48aT5zdWRvIGNobW9kIC1SIDc3NyAvdmFyL3d3dy9odG1sL2lycmlnYXRpb25fbGV2ZWxfZGF0YV9sb2dnZXI8L2k+PC9wPjxwPuKtkCBJZiB0aGUgPGk+Y3JlYXRlX2ZpbGVzPC9pPiBwYXJhbWV0ZXIgaXMgcmVjZWl2ZWQgYW5kIGVxdWFscyA8aT5vazwvaT4sIHRoZSB3ZWIgYXBwbGljYXRpb24gY3JlYXRlcyB0aGUgcmVxdWlyZWQgQ1NWIGZpbGVzIChzaG93biBhYm92ZSkgYW5kIHByaW50cyByZWNlbnRseSBjcmVhdGVkIGZpbGUgbmFtZXMuIDwvcD48cD48aT5odHRwOi8vbG9jYWxob3N0L2lycmlnYXRpb25fbGV2ZWxfZGF0YV9sb2dnZXIvP2NyZWF0ZV9maWxlcz1vazwvaT48L3A+PHA+4q2QIElmIHRoZSA8aT50aGVybWFsX2ltZzwvaT4gKHRoZXJtYWwgaW1hZ2luZyBkYXRhKSBhbmQgPGk+bGV2ZWw8L2k+IChDU1YgZmlsZSBuYW1lKSBwYXJhbWV0ZXJzIGFyZSByZWNlaXZlZCwgdGhlIHdlYiBhcHBsaWNhdGlvbiBwcm9jZXNzZXMgdGhlIGdpdmVuIHRoZXJtYWwgaW1hZ2luZyBkYXRhIGFzIGFuIGFycmF5IGFuZCBpbnNlcnRzIGl0IGludG8gdGhlIGdpdmVuIENTViBmaWxlIGFzIGEgbmV3IHJvdy48L3A+PHA+PGk+aHR0cDovL2xvY2FsaG9zdC9pcnJpZ2F0aW9uX2xldmVsX2RhdGFfbG9nZ2VyLz90aGVybWFsX2ltZz0mbHQ7X2RhdGFfJmd0O2xldmVsPSZsdDtfZmlsZV9uYW1lXyZndDs8L2k+PC9wPjxwPuKtkCBUaGVuLCBpZiB0aGUgZ2l2ZW4gdGhlcm1hbCBpbWFnaW5nIGRhdGEgaXMgaW5zZXJ0ZWQgc3VjY2Vzc2Z1bGx5LCB0aGUgYXBwbGljYXRpb24gcHJpbnRzOjwvcD48cD48aT5UaGUgZ2l2ZW4gbGluZSBpcyBhZGRlZCB0byB0aGUgJmx0O19maWxlX25hbWVfJmd0Oy5jc3YgZmlsZSBzdWNjZXNzZnVsbHkhPC9pPjwvcD48L2Rpdj48L3NlY3Rpb24+PHNlY3Rpb24gPjxoMiA+U3RlcCA3OiBVcGRhdGluZyBhbmQgU2V0dGluZyBVcCBXaW8gVGVybWluYWw8L2gyPjxkaXYgPjxwPlNpbmNlIHRoZSBXaW8gVGVybWluYWwgcHJvdmlkZXMgV2ktRmkgY29ubmVjdGl2aXR5IHZpYSB0aGUgYnVpbHQtaW4gV2lyZWxlc3MgQ29yZSBSZWFsdGVrIFJUTDg3MjAsIEkgZW1wbG95ZWQgdGhlIFdpbyBUZXJtaW5hbCB0byBkaXNwbGF5IGFuZCB0cmFuc2ZlciB0aGUgdGhlcm1hbCBpbWFnaW5nIGRhdGEgZ2VuZXJhdGVkIGJ5IHRoZSBNTFg5MDY0MSB0aGVybWFsIGltYWdpbmcgY2FtZXJhLiBIb3dldmVyLCBiZWZvcmUgcHJvY2VlZGluZyB3aXRoIHRoZSBmb2xsb3dpbmcgc3RlcHMsIEkgbmVlZGVkIHRvIHVwZGF0ZSB0aGUgV2lyZWxlc3MgQ29yZSBGaXJtd2FyZSB0byB0aGUgbGF0ZXN0IHZlcnNpb24gdG8gZW5hYmxlIHdpcmVsZXNzIGNvbm5lY3Rpdml0eSBzaW5jZSBTZWVlZCBtb3ZlZCB0aGUgV2ktRmkgc29mdHdhcmUgdG8gdGhlIG5ldyBlUlBDIHN0cnVjdHVyZS4gRm9ydHVuYXRlbHksIFNlZWVkIHByb3ZpZGVzIGEgdG9vbCBuYW1lZCBhbWJkX2ZsYXNoX3Rvb2wgdG8gZXJhc2UgdGhlIGV4aXN0aW5nIGZpcm13YXJlIG9uIHRoZSBSVEw4NzIwIGFuZCBhbHNvIGZsYXNoIHRoZSBsYXRlc3QgZmlybXdhcmUuPC9wPjxwPkkgdXBkYXRlZCB0aGUgV2lyZWxlc3MgQ29yZSBGaXJtd2FyZSBvbiBXaW5kb3dzLiBZb3UgY2FuIGdldCBtb3JlIGluZm9ybWF0aW9uIGZyb20gPGEgPmhlcmU8L2E+IGZvciBNYWMvIExpbnV4LjwvcD48cD4j77iP4oOjIE9wZW4gV2luZG93cyBQb3dlclNoZWxsIGFuZCBleGVjdXRlIHRoZSBjb21tYW5kcyBiZWxvdyB0byBkb3dubG9hZCB0aGUgZmxhc2hpbmcgdG9vbC48L3A+PHA+Y2QgfjwvcD48cD5naXQgY2xvbmUgaHR0cHM6Ly9naXRodWIuY29tL1NlZWVkLVN0dWRpby9hbWJkX2ZsYXNoX3Rvb2w8L3A+PHA+I++4j+KDoyBOYXZpZ2F0ZSB0byB0aGUgYW1iZF9mbGFzaF90b29sIGRpcmVjdG9yeTo8L3A+PHA+Y2QgYW1iZF9mbGFzaF90b29sPC9wPjxwPiPvuI/ig6MgQ29ubmVjdCB0aGUgV2lvIFRlcm1pbmFsIHRvIHRoZSBQQyBhbmQgdHVybiBpdCBvbi48L3A+PHA+I++4j+KDoyBFeGVjdXRlIHRoZSBmb2xsb3dpbmcgY29tbWFuZCB0byBlcmFzZSB0aGUgaW5pdGlhbCBmaXJtd2FyZTo8L3A+PHA+LlxhbWJkX2ZsYXNoX3Rvb2wuZXhlIGVyYXNlPC9wPjxwPiPvuI/ig6MgQWZ0ZXIgZXJhc2luZyB0aGUgaW5pdGlhbCBmaXJtd2FyZSwgaW5zaWRlIHRoZSBhbWJkX2ZsYXNoX3Rvb2wgZGlyZWN0b3J5LCBleGVjdXRlIHRoZSBmb2xsb3dpbmcgY29tbWFuZCB0byBmbGFzaCB0aGUgbGF0ZXN0IGZpcm13YXJlIHRvIHRoZSBSVEw4NzIwOjwvcD48cD4uXGFtYmRfZmxhc2hfdG9vbC5leGUgZmxhc2g8L3A+PHA+QWZ0ZXIgdXBkYXRpbmcgdGhlIFdpcmVsZXNzIENvcmUgRmlybXdhcmUgc3VjY2Vzc2Z1bGx5LCBJIGluc3RhbGxlZCB0aGUgU2VlZWQgU0FNRCBBcmR1aW5vIENvcmUgb24gdGhlIEFyZHVpbm8gSURFIGFuZCBkb3dubG9hZGVkIHRoZSByZXF1aXJlZCBsaWJyYXJpZXMgZm9yIHRoaXMgcHJvamVjdC48L3A+PHA+I++4j+KDoyBUbyBzZXQgdXAgdGhlIFNlZWVkIFNBTUQgQXJkdWlubyBDb3JlLCBvcGVuIHRoZSBBcmR1aW5vIElERSwgY2xpY2sgVG9vbHMg4p6hIEJvYXJkIOKeoSBCb2FyZHMgTWFuYWdlciwgYW5kIHNlYXJjaCBmb3IgV2lvIFRlcm1pbmFsIGluIHRoZSBzZWFyY2ggYm94LiBUaGVuLCBpbnN0YWxsIFNlZWVkIFNBTUQgQm9hcmRzLjwvcD48cD4j77iP4oOjIERvd25sb2FkIHRoZSByZXF1aXJlZCBsaWJyYXJpZXMgZm9yIFdpLUZpIGNvbm5lY3Rpdml0eTo8L3A+PHA+U2VlZWRfQXJkdWlub19ycGNXaUZpIHwgPGEgPkRvd25sb2FkPC9hPjwvcD48cD5TZWVlZF9BcmR1aW5vX3JwY1VuaWZpZWQgfCA8YSA+RG93bmxvYWQ8L2E+PC9wPjxwPlNlZWVkX0FyZHVpbm9fbWJlZHRscyB8IDxhID5Eb3dubG9hZDwvYT48L3A+PHA+U2VlZWRfQXJkdWlub19GUyB8IDxhID5Eb3dubG9hZDwvYT48L3A+PHA+U2VlZWRfQXJkdWlub19TRlVEIHwgPGEgPkRvd25sb2FkPC9hPjwvcD48cD4j77iP4oOjIERvd25sb2FkIHRoZSByZXF1aXJlZCBsaWJyYXJ5IGZvciB0aGUgTUxYOTA2NDEgdGhlcm1hbCBpbWFnaW5nIGNhbWVyYTo8L3A+PHA+U2VlZWRfQXJkdWlub19NTFg5MDY0eCB8IDxhID5Eb3dubG9hZDwvYT48L3A+PC9kaXY+PC9zZWN0aW9uPjxzZWN0aW9uID48aDIgPlN0ZXAgODogQ29sbGVjdGluZyBhbmQgVHJhbnNmZXJyaW5nIElycmlnYXRpb24gTGV2ZWwgRGF0YSBieSBUaGVybWFsIEltYWdpbmcgVy8gV2lvIFRlcm1pbmFsPC9oMj48ZGl2ID48cD5BZnRlciBzZXR0aW5nIHVwIHRoZSBXaW8gVGVybWluYWwgYW5kIGVuYWJsaW5nIFdpLUZpIGNvbm5lY3Rpdml0eSwgSSBwcm9ncmFtbWVkIHRoZSBXaW8gVGVybWluYWwgdG8gc2VuZCB0aGUgdGhlcm1hbCBpbWFnaW5nIGRhdGEgZ2VuZXJhdGVkIGJ5IHRoZSBNTFg5MDY0MSB0aGVybWFsIGltYWdpbmcgY2FtZXJhIHRvIHRoZSB3ZWIgYXBwbGljYXRpb24uPC9wPjxwPlNpbmNlIEkgbmVlZGVkIHRvIGFzc2lnbiBpcnJpZ2F0aW9uIGNsYXNzZXMgKGxhYmVscykgZW1waXJpY2FsbHkgZm9yIGVhY2ggdGhlcm1hbCBpbWFnaW5nIGFycmF5IChpbnB1dCkgdG8gY3JlYXRlIGEgZGF0YSBzZXQsIEkgdXRpbGl6ZWQgdGhlIDUtd2F5IHN3aXRjaCBpbnRlZ3JhdGVkIGludG8gdGhlIFdpbyBUZXJtaW5hbCB0byBjaG9vc2UgYW1vbmcgaXJyaWdhdGlvbiBjbGFzc2VzLiBBZnRlciBzZWxlY3RpbmcgYW4gaXJyaWdhdGlvbiBjbGFzcywgdGhlIFdpbyBUZXJtaW5hbCBzZW5kcyB0aGVybWFsIGltYWdpbmcgZGF0YSAoYXJyYXkpIHRvIHRoZSB3ZWIgYXBwbGljYXRpb24sIGFuZCB0aGUgd2ViIGFwcGxpY2F0aW9uIHNhdmVzIHRoZSB0cmFuc2ZlcnJlZCBkYXRhIHRvIHRoZSBjaG9zZW4gY2xhc3MnIENTViBmaWxlOjwvcD48dWw+PGxpPlVwIOKeoSBFeGNlc3NpdmUgPC9saT48bGk+TGVmdCDinqEgU3VmZmljaWVudCA8L2xpPjxsaT5SaWdodCDinqEgTW9kZXJhdGUgPC9saT48bGk+RG93biDinqEgRHJ5IDwvbGk+PC91bD48cD5Zb3UgY2FuIGRvd25sb2FkIHRoZSA8aT5pcnJpZ2F0aW9uX2xldmVsX2RldGVjdGlvbl9kYXRhX2NvbGxlY3QuaW5vPC9pPiBmaWxlIHRvIHRyeSBhbmQgaW5zcGVjdCB0aGUgY29kZSBmb3IgdGhlcm1hbCBpbWFnaW5nIGRhdGEgY29sbGVjdGluZyB3aXRoIFdpbyBUZXJtaW5hbC4gPC9wPjxwPuKtkCBJbmNsdWRlIHRoZSByZXF1aXJlZCBsaWJyYXJpZXMuPC9wPjxwcmU+ICNpbmNsdWRlICZsdDtycGNXaUZpLmgmZ3Q7ICNpbmNsdWRlICZsdDtURlRfZVNQSS5oJmd0OyAjaW5jbHVkZSAmbHQ7V2lyZS5oJmd0OyAjaW5jbHVkZSAiTUxYOTA2NDFfQVBJLmgiICNpbmNsdWRlICJNTFg5MDY0WF9JMkNfRHJpdmVyLmgiIDwvcHJlPjxwPuKtkCBEZWZpbmUgdGhlIFdpLUZpIG5ldHdvcmsgc2V0dGluZ3MgYW5kIHVzZSB0aGUgPGk+V2lGaUNsaWVudDwvaT4gY2xhc3MgdG8gY3JlYXRlIFRDUCBjb25uZWN0aW9ucy48L3A+PHByZT4gY29uc3QgY2hhciogc3NpZCA9ICImbHQ7X1NTSURfJmd0OyI7IGNvbnN0IGNoYXIqIHBhc3N3b3JkID0gIiZsdDtfUEFTU1dPUkRfJmd0OyI7IC8vIERlZmluZSB0aGUgc2VydmVyIHNldHRpbmdzOiBjb25zdCB1aW50MTZfdCBwb3J0ID0gODA7IC8vIERlZmF1bHQgcG9ydCBjb25zdCBjaGFyKiBob3N0ID0gIjE5Mi4xNjguMS4yMCI7IC8vIFRhcmdldCBTZXJ2ZXIgSVAgQWRkcmVzcyAvLyBVc2UgdGhlIFdpRmlDbGllbnQgY2xhc3MgdG8gY3JlYXRlIFRDUCBjb25uZWN0aW9uczogV2lGaUNsaWVudCBjbGllbnQ7IDwvcHJlPjxwPuKtkCBEZWZpbmUgdGhlIE1MWDkwNjQxIHRoZXJtYWwgaW1hZ2luZyBjYW1lcmEgc2V0dGluZ3MuPC9wPjxwPuKtkCBEZWZpbmUgdGhlIG1heGltdW0gYW5kIG1pbmltdW0gdGVtcGVyYXR1cmUgdmFsdWVzLjwvcD48cHJlPiBjb25zdCBieXRlIE1MWDkwNjQxX2FkZHJlc3MgPSAweDMzOyAvLyBEZWZhdWx0IDctYml0IHVuc2hpZnRlZCBhZGRyZXNzIG9mIHRoZSBNTFg5MDY0MS4gI2RlZmluZSBUQV9TSElGVCAxMiAvLyBEZWZhdWx0IHNoaWZ0IHZhbHVlIGZvciBNTFg5MDY0MSBpbiB0aGUgb3BlbiBhaXIuIHVpbnQxNl90IGVlTUxYOTA2NDFbODMyXTsgZmxvYXQgTUxYOTA2NDFUb1sxOTJdOyB1aW50MTZfdCBNTFg5MDY0MUZyYW1lWzI0Ml07IHBhcmFtc01MWDkwNjQxIE1MWDkwNjQxOyBpbnQgZXJyb3JubyA9IDA7IC8vIERlZmluZSB0aGUgbWF4aW11bSBhbmQgbWluaW11bSB0ZW1wZXJhdHVyZSB2YWx1ZXM6IHVpbnQxNl90IE1pblRlbXAgPSAyMTsgdWludDE2X3QgTWF4VGVtcCA9IDQ1OyA8L3ByZT48cD7irZAgSW5pdGlhbGl6ZSB0aGUgSTJDIGNsb2NrIGZvciB0aGUgTUxYOTA2NDEgdGhlcm1hbCBpbWFnaW5nIGNhbWVyYS48L3A+PHByZT4gV2lyZS5iZWdpbigpOyBXaXJlLnNldENsb2NrKDIwMDAwMDApOyAvLyBJbmNyZWFzZSB0aGUgSTJDIGNsb2NrIHNwZWVkIHRvIDJNLiA8L3ByZT48cD7irZAgSW5pdGlhdGUgdGhlIFRGVCBzY3JlZW4uPC9wPjxwcmU+IHRmdC5iZWdpbigpOyB0ZnQuc2V0Um90YXRpb24oMyk7IHRmdC5maWxsU2NyZWVuKFRGVF9CTEFDSyk7IHRmdC5zZXRUZXh0Q29sb3IoVEZUX0JMQUNLKTsgdGZ0LnNldFRleHRTaXplKDEpOyA8L3ByZT48cD7irZAgQ2hlY2sgdGhlIGNvbm5lY3Rpb24gc3RhdHVzIGJldHdlZW4gdGhlIE1MWDkwNjQxIHRoZXJtYWwgaW1hZ2luZyBjYW1lcmEgYW5kIHRoZSBXaW8gVGVybWluYWwuPC9wPjxwcmU+IGlmKGlzQ29ubmVjdGVkKCkgPT0gZmFsc2UpeyB0ZnQuZmlsbFNjcmVlbihURlRfUkVEKTsgdGZ0LmRyYXdTdHJpbmcoIk1MWDkwNjQxIG5vdCBkZXRlY3RlZCBhdCBkZWZhdWx0IEkyQyBhZGRyZXNzISIsIDUsIDEwKTsgdGZ0LmRyYXdTdHJpbmcoIlBsZWFzZSBjaGVjayB3aXJpbmcuIEZyZWV6aW5nLiIsIDUsIDI1KTsgd2hpbGUgKDEpOyB9IDwvcHJlPjxwPuKtkCBHZXQgdGhlIE1MWDkwNjQxIHRoZXJtYWwgaW1hZ2luZyBjYW1lcmEgcGFyYW1ldGVycy4gT25jZSBwYXJhbXMgYXJlIGV4dHJhY3RlZCwgcmVsZWFzZSB0aGUgPGk+ZWVNTFg5MDY0MTwvaT4gYXJyYXkuPC9wPjxwcmU+IE1MWDkwNjQxX1NldFJlZnJlc2hSYXRlKE1MWDkwNjQxX2FkZHJlc3MsIDB4MDUpOyAvLyBTZXQgcmF0ZSB0byAxNkh6LiA8L3ByZT48cD7irZAgSW4gdGhlIDxpPkdldGFiY2Q8L2k+IGZ1bmN0aW9uLCBnZXQgdGhlIGN1dG9mZiBwb2ludHMgYmFzZWQgb24gdGhlIGdpdmVuIG1heGltdW0gYW5kIG1pbmltdW0gdGVtcGVyYXR1cmUgdmFsdWVzLjwvcD48cHJlPiB2b2lkIEdldGFiY2QoKSB7IC8vIEdldCB0aGUgY3V0b2ZmIHBvaW50cyBiYXNlZCBvbiB0aGUgZ2l2ZW4gbWF4aW11bSBhbmQgbWluaW11bSB0ZW1wZXJhdHVyZSB2YWx1ZXMuIGEgPSBNaW5UZW1wICsgKE1heFRlbXAgLSBNaW5UZW1wKSAqIDAuMjEyMTsgYiA9IE1pblRlbXAgKyAoTWF4VGVtcCAtIE1pblRlbXApICogMC4zMTgyOyBjID0gTWluVGVtcCArIChNYXhUZW1wIC0gTWluVGVtcCkgKiAwLjQyNDI7IGQgPSBNaW5UZW1wICsgKE1heFRlbXAgLSBNaW5UZW1wKSAqIDAuODE4MjsgfSA8L3ByZT48cD7irZAgU2V0IHRoZSBXaS1GaSBtb2R1bGUgdG8gc3RhdGlvbiBtb2RlIGFuZCBkaXNjb25uZWN0IGZyb20gYW4gQVAgaWYgaXQgd2FzIHByZXZpb3VzbHkgY29ubmVjdGVkLjwvcD48cD7irZAgQXR0ZW1wdCB0byBjb25uZWN0IHRvIHRoZSBnaXZlbiBXaS1GaSBuZXR3b3JrLjwvcD48cHJlPiBXaUZpLm1vZGUoV0lGSV9TVEEpOyBXaUZpLmRpc2Nvbm5lY3QoKTsgZGVsYXkoMjAwMCk7IFdpRmkuYmVnaW4oc3NpZCwgcGFzc3dvcmQpOyAvLyBBdHRlbXB0IHRvIGNvbm5lY3QgdG8gdGhlIGdpdmVuIFdpLUZpIG5ldHdvcms6IHdoaWxlKFdpRmkuc3RhdHVzKCkgIT0gV0xfQ09OTkVDVEVEKXsgZGVsYXkoNTAwKTsgdGZ0LmZpbGxTY3JlZW4oVEZUX1JFRCk7IHRmdC5kcmF3U3RyaW5nKCJDb25uZWN0aW5nIHRvIFdpLUZpLi4uIiwgNSwgMTApOyB9IHRmdC5zZXRUZXh0U2l6ZSgyKTsgdGZ0LmZpbGxTY3JlZW4oVEZUX0dSRUVOWUVMTE9XKTsgdGZ0LmRyYXdTdHJpbmcoIkNvbm5lY3RlZCB0byIsIDUsIDEwKTsgdGZ0LmRyYXdTdHJpbmcoInRoZSBXaS1GaSBuZXR3b3JrISIsIDUsIDQwKTsgZGVsYXkoMzAwMCk7IHRmdC5maWxsU2NyZWVuKFRGVF9CTFVFKTsgPC9wcmU+PHA+4q2QIEluIHRoZSA8aT5kcmF3X21lbnU8L2k+IGZ1bmN0aW9uLCBkcmF3IHRoZSBpcnJpZ2F0aW9uIGNsYXNzIG9wdGlvbnMgKFVwLCBMZWZ0LCBSaWdodCwgRG93bikgYW5kIHRoZSBib3JkZXIgb2YgdGhlIHNpbXBsZSBpbWFnZSBnZW5lcmF0ZWQgZnJvbSB0aGUgdGhlcm1hbCBpbWFnaW5nIGFycmF5ICgxNngxMikuIDwvcD48cHJlPiB2b2lkIGRyYXdfbWVudShpbnQgc3RhcnRfeCwgaW50IHN0YXJ0X3ksIGludCB3LCBpbnQgaCl7IC8vIERyYXcgdGhlIGJvcmRlcjogaW50IG9mZnNldCA9IDEwOyB0ZnQuZHJhd1JvdW5kUmVjdChzdGFydF94LW9mZnNldCwgc3RhcnRfeS1vZmZzZXQsICgyKm9mZnNldCkrKHcqMTYpLCAoMipvZmZzZXQpKyhoKjEyKSwgMTAsIFRGVF9XSElURSk7IC8vIERyYXcgb3B0aW9uczogaW50IHhfYyA9IDUyOyBpbnQgeF9zID0geF9jIC0gNzsgaW50IHlfYyA9IDIxMDsgaW50IHlfcyA9IHlfYyAtIDExOyBpbnQgc3AgPSA3MjsgdGZ0LnNldFRleHRTaXplKDEpOyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIHRmdC5maWxsQ2lyY2xlKHhfYywgeV9jLCAyMCwgVEZUX1dISVRFKTsgdGZ0LmRyYXdDaGFyKHhfcywgeV9zLCAnVScsIFRGVF9CTEFDSywgVEZUX1dISVRFLCAzKTsgdGZ0LmRyYXdTdHJpbmcoIkV4Y2Vzc2l2ZSIsIHhfYyAtIDI1LCB5X2MgLSAzMyk7IC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gdGZ0LmZpbGxDaXJjbGUoeF9jICsgc3AsIHlfYywgMjAsIFRGVF9XSElURSk7IHRmdC5kcmF3Q2hhcih4X3MgKyBzcCwgeV9zLCAnTCcsIFRGVF9CTEFDSywgVEZUX1dISVRFLCAzKTsgdGZ0LmRyYXdTdHJpbmcoIlN1ZmZpY2llbnQiLCB4X2MgKyBzcCAtIDI4LCB5X2MgLSAzMyk7IC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gdGZ0LmZpbGxDaXJjbGUoeF9jICsgKDIqc3ApLCB5X2MsIDIwLCBURlRfV0hJVEUpOyB0ZnQuZHJhd0NoYXIoeF9zICsgKDIqc3ApLCB5X3MsICdSJywgVEZUX0JMQUNLLCBURlRfV0hJVEUsIDMpOyB0ZnQuZHJhd1N0cmluZygiTW9kZXJhdGUiLCB4X3MgKyAoMipzcCkgLSAxNiwgeV9jIC0gMzMpOyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIHRmdC5maWxsQ2lyY2xlKHhfYyArICgzKnNwKSwgeV9jLCAyMCwgVEZUX1dISVRFKTsgdGZ0LmRyYXdDaGFyKHhfcyArICgzKnNwKSwgeV9zLCAnRCcsIFRGVF9CTEFDSywgVEZUX1dISVRFLCAzKTsgdGZ0LmRyYXdTdHJpbmcoIkRyeSIsIHhfYyArICgzKnNwKSAtIDgsIHlfYyAtIDMzKTsgfSA8L3ByZT48cD7irZAgSW4gdGhlIDxpPmdldF9hbmRfZGlzcGxheV9kYXRhX2Zyb21fTUxYOTA2NDE8L2k+IGZ1bmN0aW9uLCBhZnRlciBleGVjdXRpbmcgdGhlIDxpPmRyYXdfbWVudTwvaT4gZnVuY3Rpb24sIGVsaWNpdCB0aGUgMTZ4MTIgcGl4ZWwgSVIgdGhlcm1hbCBpbWFnaW5nIGFycmF5IGdlbmVyYXRlZCBieSB0aGUgTUxYOTA2NDEgdGhlcm1hbCBpbWFnaW5nIGNhbWVyYTo8L3A+PHA+4q2QIE9idGFpbiB0aGUgcmVxdWlyZWQgdmFyaWFibGVzIHRvIGNhbGN1bGF0ZSB0aGUgdGhlcm1hbCBpbWFnaW5nIGFycmF5LjwvcD48cD7irZAgRGVmaW5lIHRoZSByZWZsZWN0ZWQgdGVtcGVyYXR1cmUgYmFzZWQgb24gdGhlIHNlbnNvcidzIGFtYmllbnQgdGVtcGVyYXR1cmUuPC9wPjxwPuKtkCBDcmVhdGUgdGhlIHRoZXJtYWwgaW1hZ2luZyBhcnJheS48L3A+PHA+4q2QIFRoZW4sIGNvbnZlcnQgdGhlIDE2eDEyIHBpeGVsIElSIHRoZXJtYWwgaW1hZ2luZyBhcnJheSB0byBzdHJpbmcgPGk+KE1MWDkwNjQxX2RhdGEpPC9pPiBzbyBhcyB0byB0cmFuc2ZlciBpdCB0byB0aGUgd2ViIGFwcGxpY2F0aW9uLjwvcD48cD7irZAgVG8gZGlzcGxheSBhIHNpbXBsZSBpbWFnZSB2ZXJzaW9uIG9mIHRoZSByZWNlbnRseSBnZW5lcmF0ZWQgdGhlcm1hbCBpbWFnaW5nIGFycmF5ICgxNngxMikgb24gdGhlIHNjcmVlbiwgYXNzaWduIGNvbG9ycyBmb3IgZWFjaCBlbGVtZW50IChwaXhlbCkgaW4gdGhlIGFycmF5IGJ5IHVzaW5nIHRoZSA8aT5HZXRDb2xvcjwvaT4gZnVuY3Rpb24uPC9wPjxwPuKtkCBGaW5hbGx5LCBkcmF3IGVhY2ggcGl4ZWwgKHJlY3RhbmdsZSkgdG8gY3JlYXRlIGEgc2ltcGxlIGltYWdlIHZlcnNpb24gb2YgdGhlIGdpdmVuIHRoZXJtYWwgaW1hZ2luZyBhcnJheS48L3A+PHByZT4gdm9pZCBnZXRfYW5kX2Rpc3BsYXlfZGF0YV9mcm9tX01MWDkwNjQxKGludCBzdGFydF94LCBpbnQgc3RhcnRfeSwgaW50IHcsIGludCBoKXsgLy8gRHJhdyB0aGUgb3B0aW9ucyBtZW51OiBkcmF3X21lbnUoc3RhcnRfeCwgc3RhcnRfeSwgdywgaCk7IC8vIEVsaWNpdCB0aGUgMTZ4MTIgcGl4ZWwgSVIgdGhlcm1hbCBpbWFnaW5nIGFycmF5IGdlbmVyYXRlZCBieSB0aGUgTUxYOTA2NDEgVGhlcm1hbCBJbWFnaW5nIENhbWVyYTogZm9yKGJ5dGUgeCA9IDAgOyB4ICZsdDsgMiA7IHgrKyl7IGludCBzdGF0dXMgPSBNTFg5MDY0MV9HZXRGcmFtZURhdGEoTUxYOTA2NDFfYWRkcmVzcywgTUxYOTA2NDFGcmFtZSk7IC8vIE9idGFpbiB0aGUgcmVxdWlyZWQgdmFyaWFibGVzIHRvIGNhbGN1bGF0ZSB0aGUgdGhlcm1hbCBpbWFnaW5nIGFycmF5OiBmbG9hdCB2ZGQgPSBNTFg5MDY0MV9HZXRWZGQoTUxYOTA2NDFGcmFtZSwgTUxYOTA2NDEpOyBmbG9hdCBUYSA9IE1MWDkwNjQxX0dldFRhKE1MWDkwNjQxRnJhbWUsIE1MWDkwNjQxKTsgLy8gRGVmaW5lIHRoZSByZWZsZWN0ZWQgdGVtcGVyYXR1cmUgYmFzZWQgb24gdGhlIHNlbnNvcidzIGFtYmllbnQgdGVtcGVyYXR1cmU6IGZsb2F0IHRyID0gVGEgLSBUQV9TSElGVDsgZmxvYXQgZW1pc3Npdml0eSA9IDAuOTU7IC8vIENyZWF0ZSB0aGUgdGhlcm1hbCBpbWFnaW5nIGFycmF5OiBNTFg5MDY0MV9DYWxjdWxhdGVUbyhNTFg5MDY0MUZyYW1lLCBNTFg5MDY0MSwgZW1pc3Npdml0eSwgdHIsIE1MWDkwNjQxVG8pOyB9IC8vIERlZmluZSBwYXJhbWV0ZXJzOiBNTFg5MDY0MV9kYXRhID0gIiI7IGludCB4ID0gc3RhcnRfeDsgaW50IHkgPSBzdGFydF95ICsgKGgqMTEpOyB1aW50MzJfdCBjID0gVEZUX0JMVUU7IGZvcihpbnQgaSA9IDAgOyBpICZsdDsgMTkyIDsgaSsrKXsgLy8gQ29udmVydCB0aGUgMTZ4MTIgcGl4ZWwgSVIgdGhlcm1hbCBpbWFnaW5nIGFycmF5IHRvIHN0cmluZyAoTUxYOTA2NDFfZGF0YSkgc28gYXMgdG8gdHJhbnNmZXIgaXQgdG8gdGhlIHdlYiBhcHBsaWNhdGlvbjogTUxYOTA2NDFfZGF0YSArPSBTdHJpbmcoTUxYOTA2NDFUb1tpXSk7IGlmKGkgIT0gMTkxKSBNTFg5MDY0MV9kYXRhICs9ICIsIjsgLy8gRGlzcGxheSBhIHNpbXBsZSBpbWFnZSB2ZXJzaW9uIG9mIHRoZSBjb2xsZWN0ZWQgZGF0YSAoYXJyYXkpIG9uIHRoZSBzY3JlZW46IC8vIERlZmluZSB0aGUgY29sb3IgcGFsZXR0ZTogYyA9IEdldENvbG9yKE1MWDkwNjQxVG9baV0pOyAvLyBEcmF3IGltYWdlIHBpeGVscyAocmVjdGFuZ2xlcyk6IHRmdC5maWxsUmVjdCh4LCB5LCB3LCBoLCBjKTsgeCA9IHggKyB3OyAvLyBTdGFydCBhIG5ldyByb3c6IGludCBsID0gaSArIDE7IGlmIChsJTE2ID09IDApIHsgeCA9IHN0YXJ0X3g7IHkgPSB5IC0gaDsgfSB9IH0gPC9wcmU+PHA+4q2QIFRoZSA8YSA+R2V0Q29sb3I8L2E+IGZ1bmN0aW9uIHV0aWxpemVzIHRoZSBidWlsdC1pbiBjb2xvciBtYXBwaW5nIGZ1bmN0aW9uIHRvIGdldCBhIDUtNi01IGNvbG9yIHBhbGV0dGUgKFI9NSBiaXRzLCBHPTYgYml0cywgQi01IGJpdHMpIGZvciBlYWNoIHBpeGVsIGFjY29yZGluZyB0byB0aGUgZXF1YXRpb25zIGFwcGxpZWQgaW4gdGhlIGZ1bmN0aW9uLjwvcD48cHJlPiB1aW50MTZfdCBHZXRDb2xvcihmbG9hdCB2YWwpeyAvLyBBc3NpZ24gY29sb3JzIHRvIHRoZSBnaXZlbiB0ZW1wZXJhdHVyZSByZWFkaW5nczogLy8gUjogcmVkID0gY29uc3RyYWluKDI1NS4wIC8gKGMgLSBiKSAqIHZhbCAtICgoYiAqIDI1NS4wKSAvIChjIC0gYikpLCAwLCAyNTUpOyAvLyBHOiBpZigodmFsICZndDsgTWluVGVtcCkgKHZhbCAmbHQ7IGEpKXsgZ3JlZW4gPSBjb25zdHJhaW4oMjU1LjAgLyAoYSAtIE1pblRlbXApICogdmFsIC0gKDI1NS4wICogTWluVGVtcCkgLyAoYSAtIE1pblRlbXApLCAwLCAyNTUpOyB9ZWxzZSBpZigodmFsICZndDs9IGEpICh2YWwgJmx0Oz0gYykpeyBncmVlbiA9IDI1NTsgfWVsc2UgaWYodmFsICZndDsgYyl7IGdyZWVuID0gY29uc3RyYWluKDI1NS4wIC8gKGMgLSBkKSAqIHZhbCAtIChkICogMjU1LjApIC8gKGMgLSBkKSwgMCwgMjU1KTsgfWVsc2UgaWYoKHZhbCAmZ3Q7IGQpIHwgKHZhbCAmbHQ7IGEpKXsgZ3JlZW4gPSAwOyB9IC8vIEI6IGlmKHZhbCAmbHQ7PSBiKXsgYmx1ZSA9IGNvbnN0cmFpbigyNTUuMCAvIChhIC0gYikgKiB2YWwgLSAoMjU1LjAgKiBiKSAvIChhIC0gYiksIDAsIDI1NSk7IH1lbHNlIGlmKCh2YWwgJmd0OyBiKSAodmFsICZsdDs9IGQpKXsgYmx1ZSA9IDA7IH1lbHNlIGlmICh2YWwgJmd0OyBkKXsgYmx1ZSA9IGNvbnN0cmFpbigyNDAuMCAvIChNYXhUZW1wIC0gZCkgKiB2YWwgLSAoZCAqIDI0MC4wKSAvIChNYXhUZW1wIC0gZCksIDAsIDI0MCk7IH0gLy8gVXRpbGl6ZSB0aGUgYnVpbHQtaW4gY29sb3IgbWFwcGluZyBmdW5jdGlvbiB0byBnZXQgYSA1LTYtNSBjb2xvciBwYWxldHRlIChSPTUgYml0cywgRz02IGJpdHMsIEItNSBiaXRzKTogcmV0dXJuIHRmdC5jb2xvcjU2NShyZWQsIGdyZWVuLCBibHVlKTsgfSA8L3ByZT48cD7irZAgSW4gdGhlIDxpPm1ha2VfYV9nZXRfcmVxdWVzdDwvaT4gZnVuY3Rpb24sIG1ha2UgYSBHZXQgcmVxdWVzdCB0byB0aGUgZ2l2ZW4gc2VydmVyIHRvIHNlbmQgdGhlIHJlY2VudGx5IGdlbmVyYXRlZCBJUiB0aGVybWFsIGltYWdpbmcgYXJyYXkgdG8gdGhlIGdpdmVuIHdlYiBhcHBsaWNhdGlvbiA8aT4oaXJyaWdhdGlvbl9sZXZlbF9kYXRhX2xvZ2dlcik8L2k+LjwvcD48cD7irZAgV2FpdCB1bnRpbCB0aGUgY2xpZW50IGlzIGF2YWlsYWJsZSwgdGhlbiBmZXRjaCB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgZ2l2ZW4gYXBwbGljYXRpb24uPC9wPjxwPuKtkCBJZiB0aGUgd2ViIGFwcGxpY2F0aW9uIHNhdmVzIHRoZSB0cmFuc2ZlcnJlZCB0aGVybWFsIGltYWdpbmcgZGF0YSAoYXJyYXkpIHRvIHRoZSBjaG9zZW4gaXJyaWdhdGlvbiBjbGFzcycgQ1NWIGZpbGUsIHRoZW4gcHJpbnQgdGhlIG1lc3NhZ2UgYmVsb3csIGluY2x1ZGluZyB0aGUgQ1NWIGZpbGUgbmFtZTo8L3A+PHA+PGk+RGF0YSB0cmFuc2ZlcnJlZCBzdWNjZXNzZnVsbHkgdG8gdGhlIHdlYiBhcHBsaWNhdGlvbiE8L2k+PC9wPjxwPjxpPiZsdDtmaWxlX25hbWUmZ3Q7LmNzdiA8L2k+PC9wPjxwcmU+IHZvaWQgbWFrZV9hX2dldF9yZXF1ZXN0KFN0cmluZyBsZXZlbCl7IGlmKCFjbGllbnQuY29ubmVjdChob3N0LCBwb3J0KSl7IHRmdC5maWxsU2NyZWVuKFRGVF9SRUQpOyB0ZnQuc2V0VGV4dFNpemUoMSk7IHRmdC5kcmF3U3RyaW5nKCJDb25uZWN0aW9uIGZhaWxlZCEiLCA1LCAxMCk7IHRmdC5kcmF3U3RyaW5nKCJXYWl0aW5nIDUgc2Vjb25kcyBiZWZvcmUgcmV0cnlpbmcuLi4iLCA1LCAyNSk7IGRlbGF5KDUwMDApOyByZXR1cm47IH0gLy8gTWFrZSBhIEdldCByZXF1ZXN0IHRvIHRoZSBnaXZlbiBzZXJ2ZXIgdG8gc2VuZCB0aGUgcmVjZW50bHkgZ2VuZXJhdGVkIElSIHRoZXJtYWwgaW1hZ2luZyBhcnJheS4gU3RyaW5nIGFwcGxpY2F0aW9uID0gIi9pcnJpZ2F0aW9uX2xldmVsX2RhdGFfbG9nZ2VyLyI7IC8vIERlZmluZSB0aGUgYXBwbGljYXRpb24gbmFtZS4gU3RyaW5nIHF1ZXJ5ID0gYXBwbGljYXRpb24gKyAiP3RoZXJtYWxfaW1nPSIgKyBNTFg5MDY0MV9kYXRhICsgImxldmVsPSIgKyBsZXZlbDsgY2xpZW50LnByaW50bG4oIkdFVCAiICsgcXVlcnkgKyAiIEhUVFAvMS4xIik7IGNsaWVudC5wcmludGxuKCJIb3N0OiAxOTIuMTY4LjEuMjAiKTsgY2xpZW50LnByaW50bG4oIkNvbm5lY3Rpb246IGNsb3NlIik7IGNsaWVudC5wcmludGxuKCk7IC8vIFdhaXQgdW50aWwgdGhlIGNsaWVudCBpcyBhdmFpbGFibGUuIGludCBtYXhsb29wcyA9IDA7IHdoaWxlICghY2xpZW50LmF2YWlsYWJsZSgpIG1heGxvb3BzICZsdDsgMjAwMCkgeyBtYXhsb29wcysrOyBkZWxheSgxKTsgfSAvLyBGZXRjaCB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgZ2l2ZW4gYXBwbGljYXRpb24uIGlmKGNsaWVudC5hdmFpbGFibGUoKSAmZ3Q7IDApeyBTdHJpbmcgcmVzcG9uc2UgPSBjbGllbnQucmVhZFN0cmluZygpOyBpZihyZXNwb25zZSAhPSAiIiByZXNwb25zZS5pbmRleE9mKCJUaGUgZ2l2ZW4gbGluZSBpcyBhZGRlZCB0byB0aGUiKSAmZ3Q7IDApeyB0ZnQuZmlsbFNjcmVlbihURlRfR1JFRU4pOyB0ZnQuc2V0VGV4dFNpemUoMik7IHRmdC5kcmF3U3RyaW5nKCJEYXRhIHRyYW5zZmVycmVkIiwgNSwgMTApOyB0ZnQuZHJhd1N0cmluZygic3VjY2Vzc2Z1bGx5IiwgNSwgNDApOyB0ZnQuZHJhd1N0cmluZygidG8gdGhlIHdlYiBhcHBsaWNhdGlvbiEgIiwgNSwgNzApOyB0ZnQuc2V0VGV4dFNpemUoMyk7IHRmdC5kcmF3U3RyaW5nKGxldmVsICsgIi5jc3YiLCA1LCAxMzApOyB9IH1lbHNleyB0ZnQuZmlsbFNjcmVlbihURlRfUkVEKTsgdGZ0LnNldFRleHRTaXplKDIpOyB0ZnQuZHJhd1N0cmluZygiQ2xpZW50IFRpbWVvdXQhIiwgNSwgMTApOyB9IC8vIFN0b3AgdGhlIGNsaWVudDogY2xpZW50LnN0b3AoKTsgZGVsYXkoMzAwMCk7IHRmdC5maWxsU2NyZWVuKFRGVF9CTFVFKTsgfSA8L3ByZT48cD7irZAgQWNjb3JkaW5nIHRvIHRoZSBtb3ZlbWVudCBvZiB0aGUgNS13YXkgc3dpdGNoIChVcCwgTGVmdCwgUmlnaHQsIERvd24pLCBzZW5kIHRoZSByZWNlbnRseSBnZW5lcmF0ZWQgdGhlcm1hbCBpbWFnaW5nIGFycmF5IHdpdGggdGhlIGNob3NlbiBpcnJpZ2F0aW9uIGNsYXNzIG5hbWUgdG8gdGhlIHdlYiBhcHBsaWNhdGlvbi48L3A+PHByZT4gZ2V0X2FuZF9kaXNwbGF5X2RhdGFfZnJvbV9NTFg5MDY0MSg2NCwgMjAsIDEyLCAxMik7IC8vIERlZmluZSB0aGUgZGF0YSAoQ1NWKSBmaWxlczogaWYoZGlnaXRhbFJlYWQoV0lPXzVTX1VQKSA9PSBMT1cpIG1ha2VfYV9nZXRfcmVxdWVzdCgiZXhjZXNzaXZlIik7IGlmKGRpZ2l0YWxSZWFkKFdJT181U19MRUZUKSA9PSBMT1cpIG1ha2VfYV9nZXRfcmVxdWVzdCgic3VmZmljaWVudCIpOyBpZihkaWdpdGFsUmVhZChXSU9fNVNfUklHSFQpID09IExPVykgbWFrZV9hX2dldF9yZXF1ZXN0KCJtb2RlcmF0ZSIpOyBpZihkaWdpdGFsUmVhZChXSU9fNVNfRE9XTikgPT0gTE9XKSBtYWtlX2FfZ2V0X3JlcXVlc3QoImRyeSIpOyA8L3ByZT48L2Rpdj48L3NlY3Rpb24+PHNlY3Rpb24gPjxoMiA+U3RlcCA5OiBDcmVhdGluZyB0aGUgSXJyaWdhdGlvbiBMZXZlbCBEYXRhIFNldCBieSBUaGVybWFsIEltYWdpbmc8L2gyPjxkaXYgPjxwPkFmdGVyIHVwbG9hZGluZyBhbmQgcnVubmluZyB0aGUgY29kZSBmb3IgdGhlcm1hbCBpbWFnaW5nIGRhdGEgY29sbGVjdGluZyBvbiB0aGUgV2lvIFRlcm1pbmFsOjwvcD48cD7wn4y/8J+SpyBUaGUgZGV2aWNlIGRpc3BsYXlzIHRoZXJtYWwgaW1hZ2luZyBhcnJheXMgYXMgYSByZWFsLXRpbWUgdmlkZW8gc3RyZWFtIG9uIHRoZSBzY3JlZW4uPC9wPjxwPvCfjL/wn5KnIFdoZW4gdGhlIFdpLUZpIG1vZHVsZSBpcyBjb25uZWN0ZWQgdG8gdGhlIGdpdmVuIFdpLUZpIG5ldHdvcmsgc3VjY2Vzc2Z1bGx5LCB0aGUgZGV2aWNlIHByaW50czogPGk+Q29ubmVjdGVkIHRvIHRoZSBXaS1GaSBuZXR3b3JrITwvaT48L3A+PHA+8J+Mv/CfkqcgSWYgdGhlIDUtd2F5IHN3aXRjaCBpcyBwb3NpdGlvbmVkIHRvIHRoZSBVcCwgdGhlIGRldmljZSBzZW5kcyB0aGUgcmVjZW50bHkgZ2VuZXJhdGVkIHRoZXJtYWwgaW1hZ2luZyBhcnJheSB0byB0aGUgd2ViIGFwcGxpY2F0aW9uIHdpdGggdGhlIGV4Y2Vzc2l2ZSBpcnJpZ2F0aW9uIGNsYXNzLiBUaGVuLCBpZiB0aGUgd2ViIGFwcGxpY2F0aW9uIHNhdmVzIHRoZSBnaXZlbiB0aGVybWFsIGltYWdpbmcgZGF0YSBzdWNjZXNzZnVsbHkgdG8gdGhlIDxpPmV4Y2Vzc2l2ZS5jc3Y8L2k+IGZpbGUsIHRoZSBkZXZpY2Ugc2hvd3M6PC9wPjxwPvCfjL/wn5KnIElmIHRoZSA1LXdheSBzd2l0Y2ggaXMgcG9zaXRpb25lZCB0byB0aGUgTGVmdCwgdGhlIGRldmljZSBzZW5kcyB0aGUgcmVjZW50bHkgZ2VuZXJhdGVkIHRoZXJtYWwgaW1hZ2luZyBhcnJheSB0byB0aGUgd2ViIGFwcGxpY2F0aW9uIHdpdGggdGhlIHN1ZmZpY2llbnQgaXJyaWdhdGlvbiBjbGFzcy4gVGhlbiwgaWYgdGhlIHdlYiBhcHBsaWNhdGlvbiBzYXZlcyB0aGUgZ2l2ZW4gdGhlcm1hbCBpbWFnaW5nIGRhdGEgc3VjY2Vzc2Z1bGx5IHRvIHRoZSA8aT5zdWZmaWNpZW50LmNzdjwvaT4gZmlsZSwgdGhlIGRldmljZSBzaG93czo8L3A+PHA+8J+Mv/CfkqcgSWYgdGhlIDUtd2F5IHN3aXRjaCBpcyBwb3NpdGlvbmVkIHRvIHRoZSBSaWdodCwgdGhlIGRldmljZSBzZW5kcyB0aGUgcmVjZW50bHkgZ2VuZXJhdGVkIHRoZXJtYWwgaW1hZ2luZyBhcnJheSB0byB0aGUgd2ViIGFwcGxpY2F0aW9uIHdpdGggdGhlIG1vZGVyYXRlIGlycmlnYXRpb24gY2xhc3MuIFRoZW4sIGlmIHRoZSB3ZWIgYXBwbGljYXRpb24gc2F2ZXMgdGhlIGdpdmVuIHRoZXJtYWwgaW1hZ2luZyBkYXRhIHN1Y2Nlc3NmdWxseSB0byB0aGUgPGk+bW9kZXJhdGUuY3N2PC9pPiBmaWxlLCB0aGUgZGV2aWNlIHNob3dzOjwvcD48cD7wn4y/8J+SpyBJZiB0aGUgNS13YXkgc3dpdGNoIGlzIHBvc2l0aW9uZWQgdG8gdGhlIERvd24sIHRoZSBkZXZpY2Ugc2VuZHMgdGhlIHJlY2VudGx5IGdlbmVyYXRlZCB0aGVybWFsIGltYWdpbmcgYXJyYXkgdG8gdGhlIHdlYiBhcHBsaWNhdGlvbiB3aXRoIHRoZSBkcnkgaXJyaWdhdGlvbiBjbGFzcy4gVGhlbiwgaWYgdGhlIHdlYiBhcHBsaWNhdGlvbiBzYXZlcyB0aGUgZ2l2ZW4gdGhlcm1hbCBpbWFnaW5nIGRhdGEgc3VjY2Vzc2Z1bGx5IHRvIHRoZSA8aT5kcnkuY3N2PC9pPiBmaWxlLCB0aGUgZGV2aWNlIHNob3dzOjwvcD48cD5UbyB0cmFpbiBteSBuZXVyYWwgbmV0d29yayBtb2RlbCBzbyBhcyB0byBtYWtlIHByZWRpY3Rpb25zIG9uIHRoZSBpcnJpZ2F0aW9uIGxldmVscyAoY2xhc3NlcykgYmFzZWQgb24gdGhlcm1hbCBpbWFnaW5nLCBJIG5lZWRlZCB0byBjcmVhdGUgYSBkYXRhIHNldCB3aXRoIGVtaW5lbnQgdmFsaWRpdHkuIFRoZXJlZm9yZSwgSSB1dGlsaXplZCB0aGUgZGV2aWNlIHRvIGNvbGxlY3QgdGhlcm1hbCBpbWFnaW5nIGRhdGEgZnJvbSBteSBwbGFudHMgd2l0aCBkaWZmZXJlbnQgaXJyaWdhdGlvbiBsZXZlbHMgZm9yIG92ZXIgb25lIG1vbnRoLjwvcD48cD5GaW5hbGx5LCBJIGhhZCBhIGRhdGEgc2V0IHdpdGggMTI2NCBpbnB1dHMgaW4gdG90YWwgdW5kZXIgdGhlc2UgQ1NWIGZpbGVzIGluIHRoZSB3ZWIgYXBwbGljYXRpb246PC9wPjx1bD48bGk+ZHJ5LmNzdiA8L2xpPjxsaT5tb2RlcmF0ZS5jc3YgPC9saT48bGk+c3VmZmljaWVudC5jc3YgPC9saT48bGk+ZXhjZXNzaXZlLmNzdiA8L2xpPjwvdWw+PC9kaXY+PC9zZWN0aW9uPjxzZWN0aW9uID48aDIgPlN0ZXAgMTA6IEJ1aWxkaW5nIGFuIEFydGlmaWNpYWwgTmV1cmFsIE5ldHdvcmsgKEFOTikgV2l0aCBUZW5zb3JGbG93PC9oMj48ZGl2ID48cD5XaGVuIEkgY29tcGxldGVkIGNvbGxhdGluZyBteSBpcnJpZ2F0aW9uIGxldmVsIGRhdGEgc2V0IGJ5IHRoZXJtYWwgaW1hZ2luZywgSSBoYWQgc3RhcnRlZCB0byB3b3JrIG9uIG15IGFydGlmaWNpYWwgbmV1cmFsIG5ldHdvcmsgbW9kZWwgKEFOTikgdG8gbWFrZSBwcmVkaWN0aW9ucyBvbiB0aGUgaXJyaWdhdGlvbiBsZXZlbHMgKGNsYXNzZXMpIGJhc2VkIG9uIHRoZXJtYWwgaW1hZ2luZy48L3A+PHA+SSBkZWNpZGVkIHRvIGNyZWF0ZSBteSBuZXVyYWwgbmV0d29yayBtb2RlbCB3aXRoIFRlbnNvckZsb3cgaW4gUHl0aG9uLiBUaHVzLCBmaXJzdCBvZiBhbGwsIEkgZm9sbG93ZWQgdGhlIHN0ZXBzIGJlbG93IHRvIGdyYXNwIGEgYmV0dGVyIHVuZGVyc3RhbmRpbmcgb2YgbXkgZGF0YSBzZXQgc28gYXMgdG8gdHJhaW4gbXkgbW9kZWwgYWNjdXJhdGVseTo8L3A+PHVsPjxsaT5EYXRhIE1lcmdpbmcgKENvbWJpbmluZykgPC9saT48bGk+RGF0YSBTY2FsaW5nIChOb3JtYWxpemluZykgPC9saT48bGk+RGF0YSBQcmVwcm9jZXNzaW5nIDwvbGk+PGxpPkRhdGEgU3BsaXR0aW5nIDwvbGk+PC91bD48cD5BcyBleHBsYWluZWQgaW4gdGhlIHByZXZpb3VzIHN0ZXBzLCB0aGUgd2ViIGFwcGxpY2F0aW9uIHNhdmVzIHRoZSB0aGVybWFsIGltYWdpbmcgZGF0YSB1bmRlciBmb3VyIGRpZmZlcmVudCBDU1YgZmlsZXMgYWNjb3JkaW5nIHRvIHRoZSBlbXBpcmljYWxseSBjaG9zZW4gaXJyaWdhdGlvbiBjbGFzc2VzLiBTaW5jZSB0aGUgdGhlcm1hbCBpbWFnaW5nIGRhdGEgd2FzIGFscmVhZHkgc2VwYXJhdGVkIGJ5IGlycmlnYXRpb24gY2xhc3NlcywgSSBwcmVwcm9jZXNzZWQgbXkgZGF0YSBzZXQgZWZmb3J0bGVzc2x5IHRvIGFzc2lnbiBsYWJlbHMgZm9yIGVhY2ggdGhlcm1hbCBpbWFnaW5nIGFycmF5IChpbnB1dCk6PC9wPjx1bD48bGk+MCDigJQgRHJ5IDwvbGk+PGxpPjEg4oCUIE1vZGVyYXRlIDwvbGk+PGxpPjIg4oCUIFN1ZmZpY2llbnQgPC9saT48bGk+MyDigJQgRXhjZXNzaXZlIDwvbGk+PC91bD48cD5TaW5jZSB0aGUgTUxYOTA2NDEgdGhlcm1hbCBpbWFnaW5nIGNhbWVyYSBnZW5lcmF0ZXMgMTZ4MTIgcGl4ZWwgSVIgYXJyYXlzLCBhZnRlciBzY2FsaW5nIChub3JtYWxpemluZykgYW5kIHByZXByb2Nlc3NpbmcgaW5wdXRzLCBJIG9idGFpbmVkIDE5MiBpbnB1dCB2YXJpYWJsZXMgYW5kIG9uZSBsYWJlbCBmb3IgZWFjaCB0aGVybWFsIGltYWdpbmcgYXJyYXkgaW4gbXkgZGF0YSBzZXQuIFRoZW4sIEkgYnVpbHQgYW4gYXJ0aWZpY2lhbCBuZXVyYWwgbmV0d29yayBtb2RlbCB3aXRoIFRlbnNvckZsb3cgYW5kIHRyYWluZWQgaXQgd2l0aCBteSB0cmFpbmluZyBkYXRhIHNldCB0byBhY3F1aXJlIHRoZSBiZXN0IHJlc3VsdHMgYW5kIHByZWRpY3Rpb25zIHBvc3NpYmxlLjwvcD48cD5MYXllcnM6PC9wPjx1bD48bGk+MTkyIFtJbnB1dF0gPC9saT48bGk+MTI4IFtIaWRkZW5dIDwvbGk+PGxpPjQgW091dHB1dF0gPC9saT48L3VsPjxwPlRvIGV4ZWN1dGUgYWxsIHN0ZXBzIGFib3ZlIGFuZCBjb252ZXJ0IG15IG1vZGVsIGZyb20gYSBUZW5zb3JGbG93IEtlcmFzIEg1IG1vZGVsIHRvIGEgQyBhcnJheSAoLmggZmlsZSkgdG8gcnVuIHRoZSBtb2RlbCBvbiB0aGUgV2lvIFRlcm1pbmFsLCBJIGRldmVsb3BlZCBhbiBhcHBsaWNhdGlvbiBpbiBQeXRob24uIEFzIHNob3duIGJlbG93LCB0aGUgYXBwbGljYXRpb24gY29uc2lzdHMgb2YgdGhyZWUgY29kZSBmaWxlcyBhbmQgdHdvIGZvbGRlcnM6PC9wPjx1bD48bGk+bWFpbi5weSA8L2xpPjxsaT50ZXN0X2RhdGEucHkgPC9saT48bGk+dGZsaXRlX3RvX2NfYXJyYXkucHkgPC9saT48bGk+L2RhdGEgPC9saT48bGk+L21vZGVsIDwvbGk+PC91bD48cD5GaXJzdCBvZiBhbGwsIEkgY3JlYXRlZCBhIGNsYXNzIG5hbWVkIDxpPklycmlnYXRpb25fTGV2ZWw8L2k+IGluIHRoZSA8aT5tYWluLnB5PC9pPiBmaWxlIHRvIGV4ZWN1dGUgdGhlIGZvbGxvd2luZyBmdW5jdGlvbnMgcHJlY2lzZWx5LjwvcD48cD7irZAgSW5jbHVkZSB0aGUgcmVxdWlyZWQgbW9kdWxlcy48L3A+PHByZT4gaW1wb3J0IHRlbnNvcmZsb3cgYXMgdGYgZnJvbSB0ZW5zb3JmbG93IGltcG9ydCBrZXJhcyBpbXBvcnQgbWF0cGxvdGxpYi5weXBsb3QgYXMgcGx0IGltcG9ydCBudW1weSBhcyBucCBpbXBvcnQgcGFuZGFzIGFzIHBkIGZyb20gdGVzdF9kYXRhIGltcG9ydCB0ZXN0X2lucHV0cywgdGVzdF9sYWJlbHMgZnJvbSB0ZmxpdGVfdG9fY19hcnJheSBpbXBvcnQgaGV4X3RvX2NfYXJyYXkgPC9wcmU+PHA+4q2QIEluIHRoZSA8aT5fX2luaXRfXzwvaT4gZnVuY3Rpb24sIGRlZmluZSB0aGUgcmVxdWlyZWQgdmFyaWFibGVzIGZvciBidWlsZGluZyB0aGUgbmV1cmFsIG5ldHdvcmsgbW9kZWwuPC9wPjxwcmU+IGRlZiBfX2luaXRfXyhzZWxmLCBkYXRhX2ZpbGVzKTogc2VsZi5zY2FsZV92YWwgPSAyMiBzZWxmLmxhYmVscyA9IFtdIHNlbGYuZGF0YV9maWxlcyA9IGRhdGFfZmlsZXMgc2VsZi5tb2RlbF9uYW1lID0gImlycmlnYXRpb25fbW9kZWwiIDwvcHJlPjxwPkkgd2lsbCBlbHVjaWRhdGUgZWFjaCBmaWxlIGFuZCBmdW5jdGlvbiBpbiBkZXRhaWwgaW4gdGhlIGZvbGxvd2luZyBzdGVwcy48L3A+PC9kaXY+PC9zZWN0aW9uPjxzZWN0aW9uID48aDIgPlN0ZXAgMTE6IE1lcmdpbmcgYW5kIFNjYWxpbmcgKG5vcm1hbGl6aW5nKSB0aGUgSW5wdXQgRGF0YSBhbmQgQXNzaWduaW5nIExhYmVscyAoaXJyaWdhdGlvbiBDbGFzc2VzKTwvaDI+PGRpdiA+PHA+U2luY2UgdGhlIHRoZXJtYWwgaW1hZ2luZyBkYXRhIGlzIHNlcGFyYXRlZCB1bmRlciBmb3VyIGRpZmZlcmVudCBDU1YgZmlsZXMgd2l0aCBpcnJpZ2F0aW9uIGNsYXNzIG5hbWVzIGluIHRoZSB3ZWIgYXBwbGljYXRpb24sIGFzIHNob3duIGJlbG93LCBJIG5lZWRlZCB0byBtZXJnZSAoY29tYmluZSkgYW5kIHByZXByb2Nlc3MgYWxsIGRhdGEgYmVmb3JlIHByb2NlZWRpbmcuPC9wPjxwPlRvIGJlIGFibGUgdG8gcmVhZCBDU1YgZmlsZXMgaW4gUHl0aG9uLCBJIG1vdmVkIGFsbCBDU1YgZmlsZXMgZnJvbSB0aGUgd2ViIGFwcGxpY2F0aW9uIHRvIHRoZSA8aT5kYXRhPC9pPiBmb2xkZXI6PC9wPjx1bD48bGk+ZHJ5LmNzdiA8L2xpPjxsaT5tb2RlcmF0ZS5jc3YgPC9saT48bGk+c3VmZmljaWVudC5jc3YgPC9saT48bGk+ZXhjZXNzaXZlLmNzdiA8L2xpPjwvdWw+PHA+QWZ0ZXIgbWVyZ2luZyAoY29tYmluaW5nKSBhbGwgdGhlcm1hbCBpbWFnaW5nIGRhdGEsIEkgdXRpbGl6ZWQgZWFjaCB0aGVybWFsIGltYWdpbmcgYXJyYXkgZ2VuZXJhdGVkIGJ5IHRoZSBNTFg5MDY0MSB0aGVybWFsIGltYWdpbmcgY2FtZXJhIGluIG15IGRhdGEgc2V0IGFzIGFuIGlucHV0LiBUaGVuLCBJIHNjYWxlZCAobm9ybWFsaXplZCkgZWFjaCBpbnB1dCB0byBmb3JtYXQgdGhlIGlucHV0IGRhdGEgcHJvcGVybHkuPC9wPjxwPuKtkCBJbiB0aGUgPGk+Y29tYmluZV9hbmRfc2NhbGVfZGF0YV90b19kZWZpbmVfaW5wdXRzPC9pPiBmdW50aW9uLCBtZXJnZSAoY29tYmluZSkgdGhlcm1hbCBpbWFnaW5nIGRhdGEgZnJvbSBhbGwgQ1NWIGZpbGVzIHRvIGNyZWF0ZSBpbnB1dHM6PC9wPjxwPuKtkCBEZWZpbmUgdGhlIDxpPm91dHB1dDwvaT4gYXJyYXkuPC9wPjxwPuKtkCBSZWFkIGRhdGEgZnJvbSBhbGwgQ1NWIGZpbGVzIGluIHRoZSBnaXZlbiBmaWxlIGxpc3QgYXMgTnVtUHkgYXJyYXlzIGJ5IHVzaW5nIHRoZSA8aT5nZW5mcm9tdHh0PC9pPiBmdW5jdGlvbi48L3A+PHA+4q2QIFRoZW4sIGFwcGVuZCB0aGUgcmVjZW50bHkgY29sbGF0ZWQgZGF0YSBmb3IgZWFjaCBDU1YgZmlsZSBhcyBOdW1QeSBhcnJheXMgdG8gdGhlIDxpPm91dHB1dDwvaT4gYXJyYXkuPC9wPjxwPuKtkCBGaW5hbGx5LCBtZXJnZSBhbGwgTnVtUHkgYXJyYXlzIGluIHRoZSA8aT5vdXRwdXQ8L2k+IGFycmF5IGFzIHRoZSA8aT5pbnB1dHM8L2k+IE51bVB5IGFycmF5IGJ5IHVzaW5nIHRoZSA8aT5jb25jYXRlbmF0ZTwvaT4gZnVuY3Rpb24uPC9wPjxwPuKtkCBFYWNoIGlucHV0IGluY2x1ZGVzIDE5MiBwYXJhbWV0ZXJzIFtzaGFwZT0oMTkyLCldOjwvcD48dWw+PGxpPjxpPlsyMi4zMSwgMjIuNjYsIDIyLjM5LCAyMi4yNSwgMjIuODAsIDI1LjAwLCAyOC44MCwgMjguODQsIC4uLl08L2k+PC9saT48L3VsPjxwPuKtkCBBZnRlciBjcmVhdGluZyB0aGUgPGk+aW5wdXRzPC9pPiBhcnJheSwgZGl2aWRlIGl0IGJ5IDIyIChzY2FsZSB2YWx1ZSkgdG8gZm9ybWF0IHRoZSBpbnB1dCBkYXRhIHByb3Blcmx5LjwvcD48cHJlPiBkZWYgY29tYmluZV9hbmRfc2NhbGVfZGF0YV90b19kZWZpbmVfaW5wdXRzKHNlbGYpOiAjIERlZmluZSB0aGUgb3V0cHV0IGFycmF5LiBvdXRwdXQgPSBbXSBmb3IgZmlsZSBpbiBzZWxmLmRhdGFfZmlsZXM6ICMgRGVmaW5lIHRoZSBnaXZlbiBDU1YgZmlsZSBwYXRoLiBjc3ZfcGF0aCA9ICJkYXRhXHt9LmNzdiIuZm9ybWF0KGZpbGUpICMgUmVhZCBkYXRhIGZyb20gdGhlIGdpdmVuIENTViBmaWxlLiB3aXRoIG9wZW4oY3N2X3BhdGgsICdyJykgYXMgZjogZGF0YSA9IG5wLmdlbmZyb210eHQoZiwgZHR5cGU9ZmxvYXQsIGRlbGltaXRlcj0nLCcpICMgQXBwZW5kIHRoZSByZWNlbnRseSBjb2xsYXRlZCBkYXRhIHRvIHRoZSBvdXRwdXQgYXJyYXkuIG91dHB1dC5hcHBlbmQoZGF0YSkgZi5jbG9zZSgpICMgQ29tYmluZSBhbGwgZGF0YSBmcm9tIGVhY2ggaXJyaWdhdGlvbiBsZXZlbCAoY2xhc3MpIHRvIGNyZWF0ZSB0aGUgaW5wdXRzIGFycmF5LiBzZWxmLmlucHV0cyA9IG5wLmNvbmNhdGVuYXRlKFtvdXRwdXRbaV0gZm9yIGkgaW4gcmFuZ2UobGVuKG91dHB1dCkpXSkgIyBTY2FsZSB0aGUgaW5wdXRzIGFycmF5LiBzZWxmLmlucHV0cyA9IHNlbGYuaW5wdXRzIC8gc2VsZi5zY2FsZV92YWwgPC9wcmU+PHA+QWZ0ZXIgY3JlYXRpbmcgaW5wdXRzIGZyb20gdGhlcm1hbCBpbWFnaW5nIGFycmF5cywgSSBuZWVkZWQgdG8gYXNzaWduIGxhYmVscyB0byB0cmFpbiBteSBuZXVyYWwgbmV0d29yayBtb2RlbC48L3A+PHA+4q2QIEluIHRoZSA8aT5kZWZpbmVfYW5kX2Fzc2lnbl9sYWJlbHM8L2k+IGZ1bmN0aW9uLCBkZWZpbmUgaXJyaWdhdGlvbiBjbGFzc2VzIGZvciBlYWNoIENTViBmaWxlIGluIHRoZSBnaXZlbiBmaWxlIGxpc3Q6PC9wPjx1bD48bGk+MCDigJQgRHJ5IDwvbGk+PGxpPjEg4oCUIE1vZGVyYXRlIDwvbGk+PGxpPjIg4oCUIFN1ZmZpY2llbnQgPC9saT48bGk+MyDigJQgRXhjZXNzaXZlIDwvbGk+PC91bD48cD7irZAgUmVhZCBkYXRhIGZyb20gYWxsIENTViBmaWxlcy48L3A+PHA+4q2QIEZvciBlYWNoIHRoZXJtYWwgaW1hZ2luZyBhcnJheSAoaW5wdXQpIGluIGEgZ2l2ZW4gQ1NWIGZpbGUsIGFwcGVuZCBpdHMgYXNzaWduZWQgbGFiZWwgKGlycmlnYXRpb24gY2xhc3MpIFswIC0gM10gdG8gdGhlIDxpPmxhYmVsczwvaT4gYXJyYXkuPC9wPjxwPuKtkCBUaGVuLCBjb252ZXJ0IHRoZSA8aT5sYWJlbHM8L2k+IGFycmF5IHRvIGEgTnVtUHkgYXJyYXkgYnkgdXNpbmcgdGhlIDxpPmFzYXJyYXk8L2k+IGZ1bmN0aW9uLjwvcD48cHJlPiBkZWYgZGVmaW5lX2FuZF9hc3NpZ25fbGFiZWxzKHNlbGYpOiBfY2xhc3MgPSAwIGZvciBmaWxlIGluIHNlbGYuZGF0YV9maWxlczogIyBEZWZpbmUgdGhlIGlycmlnYXRpb24gY2xhc3NlczogaWYgKGZpbGUgPT0gImRyeSIpOiBfY2xhc3MgPSAwIGVsaWYgKGZpbGUgPT0gIm1vZGVyYXRlIik6IF9jbGFzcyA9IDEgZWxpZiAoZmlsZSA9PSAic3VmZmljaWVudCIpOiBfY2xhc3MgPSAyIGVsaWYgKGZpbGUgPT0gImV4Y2Vzc2l2ZSIpOiBfY2xhc3MgPSAzICMgRGVmaW5lIHRoZSBnaXZlbiBDU1YgZmlsZSBwYXRoLiBjc3ZfcGF0aCA9ICJkYXRhXHt9LmNzdiIuZm9ybWF0KGZpbGUpICMgUmVhZCBkYXRhIGZyb20gdGhlIGdpdmVuIENTViBmaWxlLiB3aXRoIG9wZW4oY3N2X3BhdGgsICdyJykgYXMgZjogZGF0YSA9IG5wLmdlbmZyb210eHQoZiwgZHR5cGU9ZmxvYXQsIGRlbGltaXRlcj0nLCcpICMgQXNzaWduIGxhYmVscyBmb3IgZWFjaCBpbnB1dCBpbiB0aGUgZ2l2ZW4gaXJyaWdhdGlvbiBsZXZlbCAoQ1NWIGZpbGUpLiBmb3IgaSBpbiByYW5nZShsZW4oZGF0YSkpOiBzZWxmLmxhYmVscy5hcHBlbmQoX2NsYXNzKSBmLmNsb3NlKCkgc2VsZi5sYWJlbHMgPSBucC5hc2FycmF5KHNlbGYubGFiZWxzKSA8L3ByZT48L2Rpdj48L3NlY3Rpb24+PHNlY3Rpb24gPjxoMiA+U3RlcCAxMjogVHJhaW5pbmcgdGhlIE1vZGVsIChBTk4pIG9uIHRoZSBJcnJpZ2F0aW9uIExldmVscyAoY2xhc3Nlcyk8L2gyPjxkaXYgPjxwPlNpbmNlIG15IGlycmlnYXRpb24gbGV2ZWwgZGF0YSBzZXQgYnkgdGhlcm1hbCBpbWFnaW5nIGlzIGFscmVhZHkgbGltaXRlZCAoMTI2NCBpbnB1dHMgYW5kIGxhYmVscyksIEkgZGVjaWRlZCB0byB1dGlsaXplIGFsbCBvZiBteSBkYXRhIHNldCBhcyB0aGUgdHJhaW5pbmcgZGF0YSBzZXQgaW5zdGVhZCBvZiBzcGxpdHRpbmcgaXQgaW50byB0cmFpbmluZyBhbmQgdGVzdGluZyBkYXRhIHNldHMuIFRodXMsIEkgY3JlYXRlZCBhIHNlcGFyYXRlIHRlc3RpbmcgZGF0YSBzZXQgaW4gdGhlIDxpPnRlc3RfZGF0YS5weTwvaT4gZmlsZS48L3A+PHA+QWZ0ZXIgZGVmaW5pbmcgdHJhaW5pbmcgYW5kIHRlc3RpbmcgZGF0YSBzZXRzLCBJIHNjYWxlZCAobm9ybWFsaXplZCkgdGhlIHRlc3RpbmcgZGF0YSBzZXQgaW5wdXRzIHRvIGZvcm1hdCB0aGVtIHByb3Blcmx5LjwvcD48cHJlPiBkZWYgc3BsaXRfZGF0YShzZWxmKTogIyAodHJhaW5pbmcpIHNlbGYudHJhaW5faW5wdXRzID0gc2VsZi5pbnB1dHMgc2VsZi50cmFpbl9sYWJlbHMgPSBzZWxmLmxhYmVscyAjICh0ZXN0KSBzZWxmLnRlc3RfaW5wdXRzID0gdGVzdF9pbnB1dHMgLyBzZWxmLnNjYWxlX3ZhbCBzZWxmLnRlc3RfbGFiZWxzID0gdGVzdF9sYWJlbHMgIyBQcmludCB0aGUgdG90YWwgaW5wdXQgYW5kIGxhYmVsIG51bWJlcnMuIHByaW50KCJUb3RhbCBJbnB1dDogIiArIHN0cihsZW4oc2VsZi50cmFpbl9pbnB1dHMpKSArICJUb3RhbCBMYWJlbDogIiArIHN0cihsZW4oc2VsZi50cmFpbl9sYWJlbHMpKSArICIiKSA8L3ByZT48cD5UaGVuLCBJIGJ1aWx0IG15IGFydGlmaWNpYWwgbmV1cmFsIG5ldHdvcmsgbW9kZWwgKEFOTikgYnkgdXNpbmcgS2VyYXMgYW5kIHRyYWluZWQgaXQgd2l0aCB0aGUgdHJhaW5pbmcgc2V0IGZvciB0d2VudHkgZXBvY2hzLjwvcD48cD5Zb3UgY2FuIGluc3BlY3QgPGEgPnRoZXNlIHR1dG9yaWFsczwvYT4gdG8gbGVhcm4gYWJvdXQgYWN0aXZhdGlvbiBmdW5jdGlvbnMsIGxvc3MgZnVuY3Rpb25zLCBlcG9jaHMsIGV0Yy4gPC9wPjxwcmU+IGRlZiBidWlsZF9hbmRfdHJhaW5fbW9kZWwoc2VsZik6ICMgQnVpbGQgdGhlIG5ldXJhbCBuZXR3b3JrOiBzZWxmLm1vZGVsID0ga2VyYXMuU2VxdWVudGlhbChbIGtlcmFzLklucHV0KHNoYXBlPSgxOTIsKSksIGtlcmFzLmxheWVycy5EZW5zZSgxMjgsIGFjdGl2YXRpb249J3JlbHUnKSwga2VyYXMubGF5ZXJzLkRlbnNlKDQsIGFjdGl2YXRpb249J3NvZnRtYXgnKSBdKSAjIENvbXBpbGU6IHNlbGYubW9kZWwuY29tcGlsZShvcHRpbWl6ZXI9J2FkYW0nLCBsb3NzPSJzcGFyc2VfY2F0ZWdvcmljYWxfY3Jvc3NlbnRyb3B5IiwgbWV0cmljcz1bJ2FjY3VyYWN5J10pICMgVHJhaW46IHNlbGYubW9kZWwuZml0KHNlbGYudHJhaW5faW5wdXRzLCBzZWxmLnRyYWluX2xhYmVscywgZXBvY2hzPTIwKSAuLi4gPC9wcmU+PHA+QWZ0ZXIgdHJhaW5pbmcgd2l0aCB0aGUgdHJhaW5pbmcgc2V0ICgxMjY0IGlucHV0cyBhbmQgbGFiZWxzKSwgdGhlIGFjY3VyYWN5IG9mIG15IG5ldXJhbCBuZXR3b3JrIG1vZGVsIGlzIGJldHdlZW4gPGk+MC45MzwvaT4gYW5kIDxpPjAuOTc8L2k+LjwvcD48L2Rpdj48L3NlY3Rpb24+PHNlY3Rpb24gPjxoMiA+U3RlcCAxMzogRXZhbHVhdGluZyB0aGUgTW9kZWwgQWNjdXJhY3kgYW5kIENvbnZlcnRpbmcgdGhlIE1vZGVsIHRvIGEgQyBBcnJheTwvaDI+PGRpdiA+PHA+QWZ0ZXIgYnVpbGRpbmcgYW5kIHRyYWluaW5nIG15IGFydGlmaWNpYWwgbmV1cmFsIG5ldHdvcmsgbW9kZWwsIEkgdGVzdGVkIGl0cyBhY2N1cmFjeSBhbmQgdmFsaWRpdHkgYnkgdXRpbGl6aW5nIHRoZSB0ZXN0aW5nIGRhdGEgc2V0IChpbnB1dHMgYW5kIGxhYmVscykuPC9wPjxwPlRoZSBldmFsdWF0ZWQgYWNjdXJhY3kgb2YgdGhlIG1vZGVsIGlzIDxpPjAuOTE2NzwvaT4uPC9wPjxwcmU+IC4uLiAjIFRlc3QgdGhlIGFjY3VyYWN5OiBwcmludCgiTW9kZWwgRXZhbHVhdGlvbjoiKSB0ZXN0X2xvc3MsIHRlc3RfYWNjID0gc2VsZi5tb2RlbC5ldmFsdWF0ZShzZWxmLnRlc3RfaW5wdXRzLCBzZWxmLnRlc3RfbGFiZWxzKSBwcmludCgiRXZhbHVhdGVkIEFjY3VyYWN5OiAiLCB0ZXN0X2FjYykgPC9wcmU+PHA+QWZ0ZXIgZXZhbHVhdGluZyBteSBuZXVyYWwgbmV0d29yayBtb2RlbCwgSSBzYXZlZCBpdCBhcyBhIFRlbnNvckZsb3cgS2VyYXMgSDUgbW9kZWwgPGk+KGlycmlnYXRpb25fbW9kZWwuaDUpPC9pPiB0byB0aGUgPGk+bW9kZWw8L2k+IGZvbGRlci48L3A+PHByZT4gZGVmIHNhdmVfbW9kZWwoc2VsZik6IHNlbGYubW9kZWwuc2F2ZSgibW9kZWwve30uaDUiLmZvcm1hdChzZWxmLm1vZGVsX25hbWUpKSA8L3ByZT48cD5Ib3dldmVyLCBydW5uaW5nIGEgVGVuc29yRmxvdyBLZXJhcyBINSBtb2RlbCBvbiB0aGUgV2lvIFRlcm1pbmFsIHRvIG1ha2UgcHJlZGljdGlvbnMgb24gdGhlIGlycmlnYXRpb24gbGV2ZWxzIChjbGFzc2VzKSBpcyBub3QgZWxpZ2libGUgYW5kIGVmZmljaWVudCBjb25zaWRlcmluZyBzaXplLCBsYXRlbmN5LCBhbmQgcG93ZXIgY29uc3VtcHRpb24uPC9wPjxwPlRodXMsIEkgY29udmVydGVkIG15IG5ldXJhbCBuZXR3b3JrIG1vZGVsIGZyb20gYSBUZW5zb3JGbG93IEtlcmFzIEg1IG1vZGVsICguaDUpIHRvIGEgVGVuc29yRmxvdyBMaXRlIG1vZGVsICgudGZsaXRlKS4gVGhlbiwgSSBtb2RpZmllZCB0aGUgVGVuc29yRmxvdyBMaXRlIG1vZGVsIHRvIGNyZWF0ZSBhIEMgYXJyYXkgKC5oIGZpbGUpIHRvIHJ1biB0aGUgbW9kZWwgb24gdGhlIFdpbyBUZXJtaW5hbCBzdWNjZXNzZnVsbHkuPC9wPjxwPlRvIGFsdGVyIHRoZSBUZW5zb3JGbG93IExpdGUgbW9kZWwgdG8gYSBDIGFycmF5LCBJIGFwcGxpZWQgdGhlIDxpPmhleF90b19jX2FycmF5PC9pPiBmdW5jdGlvbiBjb3BpZWQgZGlyZWN0bHkgZnJvbSA8YSA+dGhpcyB0dXRvcmlhbDwvYT4gdG8gdGhlIDxpPnRmbGl0ZV90b19jX2FycmF5LnB5PC9pPiBmaWxlLjwvcD48cD7irZAgSW4gdGhlIDxpPmNvbnZlcnRfVEZfbW9kZWw8L2k+IGZ1bmN0aW9uLCBjb252ZXJ0IHRoZSByZWNlbnRseSB0cmFpbmVkIGFuZCBldmFsdWF0ZWQgbW9kZWwgdG8gYSBUZW5zb3JGbG93IExpdGUgbW9kZWwgYnkgYXBwbHlpbmcgdGhlIDxhID5UZW5zb3JGbG93IExpdGUgY29udmVydGVyPC9hPjxpPih0Zi5saXRlLlRGTGl0ZUNvbnZlcnRlci5mcm9tX2tlcmFzX21vZGVsKTwvaT4uPC9wPjxwPuKtkCBUaGVuLCBzYXZlIHRoZSBjb252ZXJ0ZWQgVGVuc29yRmxvdyBMaXRlIG1vZGVsIDxpPihpcnJpZ2F0aW9uX21vZGVsLnRmbGl0ZSk8L2k+IHRvIHRoZSA8aT5tb2RlbDwvaT4gZm9sZGVyLjwvcD48cD7irZAgTW9kaWZ5IHRoZSByZWNlbnRseSBjcmVhdGVkIFRlbnNvckZsb3cgTGl0ZSBtb2RlbCB0byBhIEMgYXJyYXkgKC5oIGZpbGUpIGJ5IGV4ZWN1dGluZyB0aGUgPGk+aGV4X3RvX2NfYXJyYXk8L2k+IGZ1bmN0aW9uLjwvcD48cD7irZAgRmluYWxseSwgc2F2ZSB0aGUgY29udmVydGVkIEMgYXJyYXkgPGk+KGlycmlnYXRpb25fbW9kZWwuaCk8L2k+IHRvIHRoZSA8aT5tb2RlbDwvaT4gZm9sZGVyLjwvcD48cHJlPiBkZWYgY29udmVydF9URl9tb2RlbChzZWxmLCBwYXRoKTogI21vZGVsID0gdGYua2VyYXMubW9kZWxzLmxvYWRfbW9kZWwocGF0aCArICIuaDUiKSBjb252ZXJ0ZXIgPSB0Zi5saXRlLlRGTGl0ZUNvbnZlcnRlci5mcm9tX2tlcmFzX21vZGVsKHNlbGYubW9kZWwpICNjb252ZXJ0ZXIub3B0aW1pemF0aW9ucyA9IFt0Zi5saXRlLk9wdGltaXplLkRFRkFVTFRdICNjb252ZXJ0ZXIudGFyZ2V0X3NwZWMuc3VwcG9ydGVkX3R5cGVzID0gW3RmLmZsb2F0MTZdIHRmbGl0ZV9tb2RlbCA9IGNvbnZlcnRlci5jb252ZXJ0KCkgIyBTYXZlIHRoZSBUZW5zb3JGbG93IExpdGUgbW9kZWwuIHdpdGggb3BlbihwYXRoICsgJy50ZmxpdGUnLCAnd2InKSBhcyBmOiBmLndyaXRlKHRmbGl0ZV9tb2RlbCkgcHJpbnQoIlRlbnNvckZsb3cgS2VyYXMgSDUgbW9kZWwgY29udmVydGVkIHRvIGEgVGVuc29yRmxvdyBMaXRlIG1vZGVsISIpICMgQ29udmVydCB0aGUgcmVjZW50bHkgY3JlYXRlZCBUZW5zb3JGbG93IExpdGUgbW9kZWwgdG8gaGV4IGJ5dGVzIChDIGFycmF5KSB0byBnZW5lcmF0ZSBhIC5oIGZpbGUgc3RyaW5nLiB3aXRoIG9wZW4oIm1vZGVsL3t9LmgiLmZvcm1hdChzZWxmLm1vZGVsX25hbWUpLCAndycpIGFzIGZpbGU6IGZpbGUud3JpdGUoaGV4X3RvX2NfYXJyYXkodGZsaXRlX21vZGVsLCBzZWxmLm1vZGVsX25hbWUpKSBwcmludCgiVGVuc29yRmxvdyBMaXRlIG1vZGVsIGNvbnZlcnRlZCB0byBhIEMgaGVhZGVyICguaCkgZmlsZSEiKSA8L3ByZT48L2Rpdj48L3NlY3Rpb24+PHNlY3Rpb24gPjxoMiA+U3RlcCAxNDogU2V0dGluZyBVcCB0aGUgTW9kZWwgb24gV2lvIFRlcm1pbmFsPC9oMj48ZGl2ID48cD5BZnRlciBidWlsZGluZywgdHJhaW5pbmcsIGFuZCBjb252ZXJ0aW5nIG15IG5ldXJhbCBuZXR3b3JrIG1vZGVsIHRvIGEgQyBhcnJheSAoLmggZmlsZSksIEkgbmVlZGVkIHRvIHVwbG9hZCBhbmQgcnVuIHRoZSBtb2RlbCBkaXJlY3RseSBvbiB0aGUgV2lvIFRlcm1pbmFsIHNvIGFzIHRvIGNyZWF0ZSBhbiBlYXN5LXRvLXVzZSBkZXZpY2Ugd2l0aG91dCBhbnkgZGVwZW5kZW5jaWVzLjwvcD48cD5Gb3J0dW5hdGVseSwgdGhlcmUgaXMgYW4gb2ZmaWNpYWwgbGlicmFyeSBwcm92aWRlZCBieSBUZW5zb3JGbG93IHRvIHJ1biBpbmZlcmVuY2VzIG9uIG1pY3JvY29udHJvbGxlcnMgd2l0aCB0aGUgVGVuc29yRmxvdyBMaXRlIG1vZGVscyBjb252ZXJ0ZWQgdG8gQyBhcnJheXMuIEFsdGhvdWdoLCBmb3Igbm93LCBpdCBvbmx5IHN1cHBvcnRzIGEgZmV3IGRldmVsb3BtZW50IGJvYXJkcywgaW5jbHVkaW5nIHRoZSBXaW8gVGVybWluYWwsIGl0IGlzIGEgZmFzdCBhbmQgZWZmaWNpZW50IGxpYnJhcnkgZm9yIHJ1bm5pbmcgYmFzaWMgbmV1cmFsIG5ldHdvcmsgbW9kZWxzIG9uIG1pY3JvY29udHJvbGxlcnMuIFNpbmNlIDxhID5UZW5zb3JGbG93IExpdGUgZm9yIE1pY3JvY29udHJvbGxlcnM8L2E+IGRvZXMgbm90IHJlcXVpcmUgb3BlcmF0aW5nIHN5c3RlbSBzdXBwb3J0LCBhbnkgc3RhbmRhcmQgQyBvciBDKysgbGlicmFyaWVzLCBvciBkeW5hbWljIG1lbW9yeSBhbGxvY2F0aW9uLCB0aGUgV2lvIFRlcm1pbmFsIGNhbiBkZXRlY3QgaXJyaWdhdGlvbiBsZXZlbHMgKGNsYXNzZXMpIHdpdGhvdXQgbmVlZGluZyBXaS1GaSBjb25uZWN0aXZpdHkuPC9wPjxwPuKtkCBUbyBkb3dubG9hZCB0aGUgVGVuc29yRmxvdyBMaXRlIGxpYnJhcnkgb24gdGhlIEFyZHVpbm8gSURFLCBnbyB0byA8aT5Ta2V0Y2gg4p6hIEluY2x1ZGUgTGlicmFyeSDinqEgTWFuYWdlIExpYnJhcmllc+KApjwvaT4gYW5kIHNlYXJjaCBmb3IgVGVuc29yRmxvdy4gVGhlbiwgaW5zdGFsbCB0aGUgbGF0ZXN0IHZlcnNpb24gb2YgdGhlIDxpPkFyZHVpbm9fVGVuc29yRmxvd0xpdGU8L2k+IGxpYnJhcnkuPC9wPjxwPkFmdGVyIGluc3RhbGxpbmcgdGhlIFRlbnNvckZsb3cgTGl0ZSBsaWJyYXJ5IG9uIHRoZSBBcmR1aW5vIElERSwgSSBuZWVkZWQgdG8gaW1wb3J0IG15IG5ldXJhbCBuZXR3b3JrIG1vZGVsIG1vZGlmaWVkIGFzIGEgQyBhcnJheSA8aT4oaXJyaWdhdGlvbl9tb2RlbC5oKTwvaT4gdG8gcnVuIGluZmVyZW5jZXMuPC9wPjxwPuKtkCBUbyBpbXBvcnQgdGhlIGNvbnZlcnRlZCBDIGFycmF5ICguaCBmaWxlKSwgZ28gdG8gPGk+U2tldGNoIOKeoSBBZGQgRmlsZS4uLjwvaT48L3A+PHA+QWZ0ZXIgaW1wb3J0aW5nIHRoZSBjb252ZXJ0ZWQgQyBhcnJheSAoLmggZmlsZSkgc3VjY2Vzc2Z1bGx5IHRvIHRoZSBBcmR1aW5vIElERSwgSSBtb2RpZmllZCB0aGUgY29kZSBpbiA8YSA+dGhpcyB0dXRvcmlhbCBmcm9tIFRlbnNvckZsb3c8L2E+IHRvIHJ1biBteSBuZXVyYWwgbmV0d29yayBtb2RlbC4gSSB1dGlsaXplZCB0aGUgNS13YXkgc3dpdGNoIGludGVncmF0ZWQgaW50byB0aGUgV2lvIFRlcm1pbmFsIHRvIHJ1biBpbmZlcmVuY2UgdG8gZGV0ZWN0IGlycmlnYXRpb24gbGV2ZWxzIChjbGFzc2VzKTo8L3A+PHVsPjxsaT5QcmVzcyDinqEgUnVuIEluZmVyZW5jZSA8L2xpPjwvdWw+PHA+WW91IGNhbiBkb3dubG9hZCB0aGUgPGk+aXJyaWdhdGlvbl9sZXZlbF9kZXRlY3Rpb25fcnVuX21vZGVsLmlubzwvaT4gZmlsZSB0byB0cnkgYW5kIGluc3BlY3QgdGhlIGNvZGUgZm9yIHJ1bm5pbmcgVGVuc29yRmxvdyBMaXRlIG5ldXJhbCBuZXR3b3JrIG1vZGVscyBvbiBXaW8gVGVybWluYWwuPC9wPjxwPuKtkCBJbmNsdWRlIHRoZSByZXF1aXJlZCBsaWJyYXJpZXMuPC9wPjxwPuKtkCBTaW5jZSB0aGUgPGk+bWluPC9pPiBhbmQgPGk+bWF4PC9pPiBmdW5jdGlvbnMgZGVmaW5lZCBmb3IgdGhlIFdpbyBUZXJtaW5hbCBhcmUgYWxzbyBkZWZpbmVkIGluIHRoZSBUZW5zb3JGbG93IExpdGUgbGlicmFyeSwgYWRkIDxpPiN1bmRlZiBtYXg8L2k+IGFuZCA8aT4jdW5kZWYgbWluPC9pPiB0byBhdm9pZCBjb21waWxlIGVycm9ycy48L3A+PHByZT4gI2luY2x1ZGUgJmx0O1RGVF9lU1BJLmgmZ3Q7IC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAvLyBBZGQgdG8gYXZvaWQgc3lzdGVtIGVycm9ycy4gI3VuZGVmIG1heCAjdW5kZWYgbWluIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAjaW5jbHVkZSAmbHQ7V2lyZS5oJmd0OyAjaW5jbHVkZSAiTUxYOTA2NDFfQVBJLmgiICNpbmNsdWRlICJNTFg5MDY0WF9JMkNfRHJpdmVyLmgiIDwvcHJlPjxwPuKtkCBJbXBvcnQgdGhlIHJlcXVpcmVkIFRlbnNvckZsb3cgbW9kdWxlcy48L3A+PHByZT4gI2luY2x1ZGUgIlRlbnNvckZsb3dMaXRlLmgiICNpbmNsdWRlICJ0ZW5zb3JmbG93L2xpdGUvbWljcm8va2VybmVscy9taWNyb19vcHMuaCIgI2luY2x1ZGUgInRlbnNvcmZsb3cvbGl0ZS9taWNyby9taWNyb19lcnJvcl9yZXBvcnRlci5oIiAjaW5jbHVkZSAidGVuc29yZmxvdy9saXRlL21pY3JvL21pY3JvX2ludGVycHJldGVyLmgiICNpbmNsdWRlICJ0ZW5zb3JmbG93L2xpdGUvbWljcm8vYWxsX29wc19yZXNvbHZlci5oIiAjaW5jbHVkZSAidGVuc29yZmxvdy9saXRlL3ZlcnNpb24uaCIgPC9wcmU+PHA+4q2QIEluY2x1ZGUgdGhlIFRlbnNvckZsb3cgTGl0ZSBtb2RlbCBtb2RpZmllZCBhcyBhIEMgYXJyYXkgKC5oIGZpbGUpLjwvcD48cD7irZAgRGVmaW5lIHRoZSBURkxpdGUgZ2xvYmFscyB1c2VkIGZvciBjb21wYXRpYmlsaXR5IHdpdGggQXJkdWluby1zdHlsZSBza2V0Y2hlcy48L3A+PHA+4q2QIENyZWF0ZSBhbiBhcmVhIG9mIG1lbW9yeSB0byB1c2UgZm9yIGlucHV0LCBvdXRwdXQsIGFuZCBvdGhlciBUZW5zb3JGbG93IGFycmF5cy48L3A+PHByZT4gI2luY2x1ZGUgImlycmlnYXRpb25fbW9kZWwuaCIgLy8gVEZMaXRlIGdsb2JhbHMsIHVzZWQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBBcmR1aW5vLXN0eWxlIHNrZXRjaGVzOiBuYW1lc3BhY2UgeyB0ZmxpdGU6OkVycm9yUmVwb3J0ZXIqIGVycm9yX3JlcG9ydGVyID0gbnVsbHB0cjsgY29uc3QgdGZsaXRlOjpNb2RlbCogbW9kZWwgPSBudWxscHRyOyB0ZmxpdGU6Ok1pY3JvSW50ZXJwcmV0ZXIqIGludGVycHJldGVyID0gbnVsbHB0cjsgVGZMaXRlVGVuc29yKiBtb2RlbF9pbnB1dCA9IG51bGxwdHI7IFRmTGl0ZVRlbnNvciogbW9kZWxfb3V0cHV0ID0gbnVsbHB0cjsgLy8gQ3JlYXRlIGFuIGFyZWEgb2YgbWVtb3J5IHRvIHVzZSBmb3IgaW5wdXQsIG91dHB1dCwgYW5kIG90aGVyIFRlbnNvckZsb3cgYXJyYXlzLiBjb25zdGV4cHIgaW50IGtUZW5zb3JBcmVuYVNpemUgPSAxNSAqIDEwMjQ7IHVpbnQ4X3QgdGVuc29yX2FyZW5hW2tUZW5zb3JBcmVuYVNpemVdOyB9IC8vIG5hbWVzcGFjZSA8L3ByZT48cD7irZAgRGVmaW5lIHRoZSB0aHJlc2hvbGQgdmFsdWUgZm9yIHRoZSBtb2RlbCBvdXRwdXRzIChyZXN1bHRzKS48L3A+PHA+4q2QIERlZmluZSB0aGUgaXJyaWdhdGlvbiBsZXZlbCAoY2xhc3MpIG5hbWVzIGFuZCBjb2xvciBjb2Rlczo8L3A+PHVsPjxsaT5Ecnkg4p6hIEdyZWVuIDwvbGk+PGxpPk1vZGVyYXRlIOKeoSBHcmVlbnllbGxvdyA8L2xpPjxsaT5TdWZmaWNpZW50IOKeoSBPcmFuZ2UgPC9saT48bGk+RXhjZXNzaXZlIOKeoSBSZWQgPC9saT48L3VsPjxwcmU+IGZsb2F0IHRocmVzaG9sZCA9IDAuNzU7IC8vIERlZmluZSB0aGUgaXJyaWdhdGlvbiBsZXZlbCAoY2xhc3MpIG5hbWVzIGFuZCBjb2xvciBjb2RlczogU3RyaW5nIGNsYXNzZXNbXSA9IHsiRHJ5IiwgIk1vZGVyYXRlIiwgIlN1ZmZpY2llbnQiLCAiRXhjZXNzaXZlIn07IHVpbnQzMl90IGNsYXNzX2NvbG9yX2NvZGVzW10gPSB7VEZUX0dSRUVOLCBURlRfR1JFRU5ZRUxMT1csIFRGVF9PUkFOR0UsIFRGVF9SRUR9OyA8L3ByZT48cD7irZAgRGVmaW5lIHRoZSBNTFg5MDY0MSB0aGVybWFsIGltYWdpbmcgY2FtZXJhIHNldHRpbmdzLjwvcD48cD7irZAgRGVmaW5lIHRoZSBtYXhpbXVtIGFuZCBtaW5pbXVtIHRlbXBlcmF0dXJlIHZhbHVlcy48L3A+PHByZT4gY29uc3QgYnl0ZSBNTFg5MDY0MV9hZGRyZXNzID0gMHgzMzsgLy8gRGVmYXVsdCA3LWJpdCB1bnNoaWZ0ZWQgYWRkcmVzcyBvZiB0aGUgTUxYOTA2NDEuICNkZWZpbmUgVEFfU0hJRlQgMTIgLy8gRGVmYXVsdCBzaGlmdCB2YWx1ZSBmb3IgTUxYOTA2NDEgaW4gdGhlIG9wZW4gYWlyLiB1aW50MTZfdCBlZU1MWDkwNjQxWzgzMl07IGZsb2F0IE1MWDkwNjQxVG9bMTkyXTsgdWludDE2X3QgTUxYOTA2NDFGcmFtZVsyNDJdOyBwYXJhbXNNTFg5MDY0MSBNTFg5MDY0MTsgaW50IGVycm9ybm8gPSAwOyAvLyBEZWZpbmUgdGhlIG1heGltdW0gYW5kIG1pbmltdW0gdGVtcGVyYXR1cmUgdmFsdWVzOiB1aW50MTZfdCBNaW5UZW1wID0gMjE7IHVpbnQxNl90IE1heFRlbXAgPSA0NTsgPC9wcmU+PHA+4q2QIEluaXRpYWxpemUgdGhlIEkyQyBjbG9jayBmb3IgdGhlIE1MWDkwNjQxIHRoZXJtYWwgaW1hZ2luZyBjYW1lcmEuPC9wPjxwcmU+IFdpcmUuYmVnaW4oKTsgV2lyZS5zZXRDbG9jaygyMDAwMDAwKTsgLy8gSW5jcmVhc2UgdGhlIEkyQyBjbG9jayBzcGVlZCB0byAyTS4gPC9wcmU+PHA+4q2QIEluaXRpYXRlIHRoZSBURlQgc2NyZWVuLjwvcD48cHJlPiB0ZnQuYmVnaW4oKTsgdGZ0LnNldFJvdGF0aW9uKDMpOyB0ZnQuZmlsbFNjcmVlbihURlRfQkxBQ0spOyB0ZnQuc2V0VGV4dENvbG9yKFRGVF9CTEFDSyk7IHRmdC5zZXRUZXh0U2l6ZSgxKTsgPC9wcmU+PHA+4q2QIENoZWNrIHRoZSBjb25uZWN0aW9uIHN0YXR1cyBiZXR3ZWVuIHRoZSBNTFg5MDY0MSB0aGVybWFsIGltYWdpbmcgY2FtZXJhIGFuZCB0aGUgV2lvIFRlcm1pbmFsLjwvcD48cHJlPiBpZihpc0Nvbm5lY3RlZCgpID09IGZhbHNlKXsgdGZ0LmZpbGxTY3JlZW4oVEZUX1JFRCk7IHRmdC5kcmF3U3RyaW5nKCJNTFg5MDY0MSBub3QgZGV0ZWN0ZWQgYXQgZGVmYXVsdCBJMkMgYWRkcmVzcyEiLCA1LCAxMCk7IHRmdC5kcmF3U3RyaW5nKCJQbGVhc2UgY2hlY2sgd2lyaW5nLiBGcmVlemluZy4iLCA1LCAyNSk7IHdoaWxlICgxKTsgfSA8L3ByZT48cD7irZAgR2V0IHRoZSBNTFg5MDY0MSB0aGVybWFsIGltYWdpbmcgY2FtZXJhIHBhcmFtZXRlcnMuIE9uY2UgcGFyYW1zIGFyZSBleHRyYWN0ZWQsIHJlbGVhc2UgdGhlIDxpPmVlTUxYOTA2NDE8L2k+IGFycmF5LjwvcD48cHJlPiBNTFg5MDY0MV9TZXRSZWZyZXNoUmF0ZShNTFg5MDY0MV9hZGRyZXNzLCAweDA1KTsgLy8gU2V0IHJhdGUgdG8gMTZIei4gPC9wcmU+PHA+4q2QIERlZmluZSB0aGUgVGVuc29yRmxvdyBMaXRlIG1vZGVsIHNldHRpbmdzOjwvcD48cD7irZAgU2V0IHVwIGxvZ2dpbmcgKHdpbGwgcmVwb3J0IHRvIFNlcmlhbCwgZXZlbiB3aXRoaW4gVEZMaXRlIGZ1bmN0aW9ucykuPC9wPjxwPuKtkCBNYXAgdGhlIG1vZGVsIGludG8gYSB1c2FibGUgZGF0YSBzdHJ1Y3R1cmUuPC9wPjxwcmU+IHN0YXRpYyB0ZmxpdGU6Ok1pY3JvRXJyb3JSZXBvcnRlciBtaWNyb19lcnJvcl9yZXBvcnRlcjsgZXJyb3JfcmVwb3J0ZXIgPSBtaWNyb19lcnJvcl9yZXBvcnRlcjsgLy8gTWFwIHRoZSBtb2RlbCBpbnRvIGEgdXNhYmxlIGRhdGEgc3RydWN0dXJlLiBtb2RlbCA9IHRmbGl0ZTo6R2V0TW9kZWwoaXJyaWdhdGlvbl9tb2RlbCk7IGlmIChtb2RlbC0mZ3Q7dmVyc2lvbigpICE9IFRGTElURV9TQ0hFTUFfVkVSU0lPTikgeyBlcnJvcl9yZXBvcnRlci0mZ3Q7UmVwb3J0KCJNb2RlbCB2ZXJzaW9uIGRvZXMgbm90IG1hdGNoIFNjaGVtYSIpOyB3aGlsZSgxKTsgfSA8L3ByZT48cD7irZAgUHVsbCBhbGwgdGhlIG9wZXJhdGlvbiBpbXBsZW1lbnRhdGlvbnMuPC9wPjxwPuKtkCBCdWlsZCBhbiBpbnRlcnByZXRlciB0byBydW4gdGhlIG1vZGVsLjwvcD48cHJlPiAvLyBUaGlzIHB1bGxzIGluIGFsbCB0aGUgb3BlcmF0aW9uIGltcGxlbWVudGF0aW9ucyB3ZSBuZWVkLiAvLyBOT0xJTlRORVhUTElORShydW50aW1lLWdsb2JhbC12YXJpYWJsZXMpIHN0YXRpYyB0ZmxpdGU6OkFsbE9wc1Jlc29sdmVyIHJlc29sdmVyOyAvLyBCdWlsZCBhbiBpbnRlcnByZXRlciB0byBydW4gdGhlIG1vZGVsLiBzdGF0aWMgdGZsaXRlOjpNaWNyb0ludGVycHJldGVyIHN0YXRpY19pbnRlcnByZXRlciggbW9kZWwsIHJlc29sdmVyLCB0ZW5zb3JfYXJlbmEsIGtUZW5zb3JBcmVuYVNpemUsIGVycm9yX3JlcG9ydGVyKTsgaW50ZXJwcmV0ZXIgPSBzdGF0aWNfaW50ZXJwcmV0ZXI7IDwvcHJlPjxwPuKtkCBBbGxvY2F0ZSBtZW1vcnkgZnJvbSB0aGUgPGk+dGVuc29yX2FyZW5hPC9pPiBmb3IgdGhlIG1vZGVsJ3MgdGVuc29ycy48L3A+PHA+4q2QIEFzc2lnbiBtb2RlbCBpbnB1dCBhbmQgb3V0cHV0IGJ1ZmZlcnMgKHRlbnNvcnMpIHRvIHBvaW50ZXJzLjwvcD48cHJlPiBUZkxpdGVTdGF0dXMgYWxsb2NhdGVfc3RhdHVzID0gaW50ZXJwcmV0ZXItJmd0O0FsbG9jYXRlVGVuc29ycygpOyBpZiAoYWxsb2NhdGVfc3RhdHVzICE9IGtUZkxpdGVPaykgeyBlcnJvcl9yZXBvcnRlci0mZ3Q7UmVwb3J0KCJBbGxvY2F0ZVRlbnNvcnMoKSBmYWlsZWQiKTsgd2hpbGUoMSk7IH0gLy8gQXNzaWduIG1vZGVsIGlucHV0IGFuZCBvdXRwdXQgYnVmZmVycyAodGVuc29ycykgdG8gcG9pbnRlcnMuIG1vZGVsX2lucHV0ID0gaW50ZXJwcmV0ZXItJmd0O2lucHV0KDApOyBtb2RlbF9vdXRwdXQgPSBpbnRlcnByZXRlci0mZ3Q7b3V0cHV0KDApOyA8L3ByZT48cD7irZAgSW4gdGhlIDxpPmRyYXdfbWVudTwvaT4gZnVuY3Rpb24sIGRyYXcgdGhlIHJ1biBpbmZlcmVuY2Ugb3B0aW9uIChQcmVzcykgYW5kIHRoZSBib3JkZXIgb2YgdGhlIHNpbXBsZSBpbWFnZSBnZW5lcmF0ZWQgZnJvbSB0aGUgdGhlcm1hbCBpbWFnaW5nIGFycmF5ICgxNngxMikuPC9wPjxwcmU+IHZvaWQgZHJhd19tZW51KGludCBzdGFydF94LCBpbnQgc3RhcnRfeSwgaW50IHcsIGludCBoKXsgLy8gRHJhdyB0aGUgYm9yZGVyOiBpbnQgb2Zmc2V0ID0gMTA7IHRmdC5kcmF3Um91bmRSZWN0KHN0YXJ0X3gtb2Zmc2V0LCBzdGFydF95LW9mZnNldCwgKDIqb2Zmc2V0KSsodyoxNiksICgyKm9mZnNldCkrKGgqMTIpLCAxMCwgVEZUX1dISVRFKTsgLy8gRHJhdyBvcHRpb25zOiBpbnQgeF9jID0gMzIwIC8gMjsgaW50IHhfcyA9IHhfYyAtIDc7IGludCB5X2MgPSAyMTA7IGludCB5X3MgPSB5X2MgLSAxMTsgdGZ0LnNldFRleHRTaXplKDEpOyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIHRmdC5maWxsQ2lyY2xlKHhfYywgeV9jLCAyMCwgVEZUX1dISVRFKTsgdGZ0LmRyYXdDaGFyKHhfcywgeV9zLCAnUCcsIFRGVF9CTEFDSywgVEZUX1dISVRFLCAzKTsgdGZ0LmRyYXdTdHJpbmcoIidQcmVzcycgdG8gcnVuIHRoZSBOTiBtb2RlbCIsIHhfYyAtIDgwLCB5X2MgLSAzMyk7IC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gfSA8L3ByZT48cD7irZAgSW4gdGhlIDxpPmdldF9hbmRfZGlzcGxheV9kYXRhX2Zyb21fTUxYOTA2NDE8L2k+IGZ1bmN0aW9uLCBhZnRlciBleGVjdXRpbmcgdGhlIDxpPmRyYXdfbWVudTwvaT4gZnVuY3Rpb24sIGVsaWNpdCB0aGUgMTZ4MTIgcGl4ZWwgSVIgdGhlcm1hbCBpbWFnaW5nIGFycmF5IGdlbmVyYXRlZCBieSB0aGUgTUxYOTA2NDEgdGhlcm1hbCBpbWFnaW5nIGNhbWVyYTo8L3A+PHA+4q2QIE9idGFpbiB0aGUgcmVxdWlyZWQgdmFyaWFibGVzIHRvIGNhbGN1bGF0ZSB0aGUgdGhlcm1hbCBpbWFnaW5nIGFycmF5LjwvcD48cD7irZAgRGVmaW5lIHRoZSByZWZsZWN0ZWQgdGVtcGVyYXR1cmUgYmFzZWQgb24gdGhlIHNlbnNvcidzIGFtYmllbnQgdGVtcGVyYXR1cmUuPC9wPjxwPuKtkCBDcmVhdGUgdGhlIHRoZXJtYWwgaW1hZ2luZyBhcnJheSAtIDxpPk1MWDkwNjQxVG88L2k+LjwvcD48cD7irZAgVG8gZGlzcGxheSBhIHNpbXBsZSBpbWFnZSB2ZXJzaW9uIG9mIHRoZSByZWNlbnRseSBnZW5lcmF0ZWQgdGhlcm1hbCBpbWFnaW5nIGFycmF5ICgxNngxMikgb24gdGhlIHNjcmVlbiwgYXNzaWduIGNvbG9ycyBmb3IgZWFjaCBlbGVtZW50IChwaXhlbCkgaW4gdGhlIGFycmF5IGJ5IHVzaW5nIHRoZSA8aT5HZXRDb2xvcjwvaT4gZnVuY3Rpb24uPC9wPjxwPuKtkCBGaW5hbGx5LCBkcmF3IGVhY2ggcGl4ZWwgKHJlY3RhbmdsZSkgdG8gY3JlYXRlIGEgc2ltcGxlIGltYWdlIHZlcnNpb24gb2YgdGhlIGdpdmVuIHRoZXJtYWwgaW1hZ2luZyBhcnJheS48L3A+PHByZT4gdm9pZCBnZXRfYW5kX2Rpc3BsYXlfZGF0YV9mcm9tX01MWDkwNjQxKGludCBzdGFydF94LCBpbnQgc3RhcnRfeSwgaW50IHcsIGludCBoKXsgLy8gRHJhdyB0aGUgb3B0aW9ucyBtZW51OiBkcmF3X21lbnUoc3RhcnRfeCwgc3RhcnRfeSwgdywgaCk7IC8vIEVsaWNpdCB0aGUgMTZ4MTIgcGl4ZWwgSVIgdGhlcm1hbCBpbWFnaW5nIGFycmF5IGdlbmVyYXRlZCBieSB0aGUgTUxYOTA2NDEgVGhlcm1hbCBJbWFnaW5nIENhbWVyYTogZm9yKGJ5dGUgeCA9IDAgOyB4ICZsdDsgMiA7IHgrKyl7IGludCBzdGF0dXMgPSBNTFg5MDY0MV9HZXRGcmFtZURhdGEoTUxYOTA2NDFfYWRkcmVzcywgTUxYOTA2NDFGcmFtZSk7IC8vIE9idGFpbiB0aGUgcmVxdWlyZWQgdmFyaWFibGVzIHRvIGNhbGN1bGF0ZSB0aGUgdGhlcm1hbCBpbWFnaW5nIGFycmF5OiBmbG9hdCB2ZGQgPSBNTFg5MDY0MV9HZXRWZGQoTUxYOTA2NDFGcmFtZSwgTUxYOTA2NDEpOyBmbG9hdCBUYSA9IE1MWDkwNjQxX0dldFRhKE1MWDkwNjQxRnJhbWUsIE1MWDkwNjQxKTsgLy8gRGVmaW5lIHRoZSByZWZsZWN0ZWQgdGVtcGVyYXR1cmUgYmFzZWQgb24gdGhlIHNlbnNvcidzIGFtYmllbnQgdGVtcGVyYXR1cmU6IGZsb2F0IHRyID0gVGEgLSBUQV9TSElGVDsgZmxvYXQgZW1pc3Npdml0eSA9IDAuOTU7IC8vIENyZWF0ZSB0aGUgdGhlcm1hbCBpbWFnaW5nIGFycmF5OiBNTFg5MDY0MV9DYWxjdWxhdGVUbyhNTFg5MDY0MUZyYW1lLCBNTFg5MDY0MSwgZW1pc3Npdml0eSwgdHIsIE1MWDkwNjQxVG8pOyB9IC8vIERlZmluZSBwYXJhbWV0ZXJzOiBpbnQgeCA9IHN0YXJ0X3g7IGludCB5ID0gc3RhcnRfeSArIChoKjExKTsgdWludDMyX3QgYyA9IFRGVF9CTFVFOyBmb3IoaW50IGkgPSAwIDsgaSAmbHQ7IDE5MiA7IGkrKyl7IC8vIERpc3BsYXkgYSBzaW1wbGUgaW1hZ2UgdmVyc2lvbiBvZiB0aGUgY29sbGVjdGVkIGRhdGEgKGFycmF5KSBvbiB0aGUgc2NyZWVuOiAvLyBEZWZpbmUgdGhlIGNvbG9yIHBhbGV0dGU6IGMgPSBHZXRDb2xvcihNTFg5MDY0MVRvW2ldKTsgLy8gRHJhdyBpbWFnZSBwaXhlbHMgKHJlY3RhbmdsZXMpOiB0ZnQuZmlsbFJlY3QoeCwgeSwgdywgaCwgYyk7IHggPSB4ICsgdzsgLy8gU3RhcnQgYSBuZXcgcm93OiBpbnQgbCA9IGkgKyAxOyBpZiAobCUxNiA9PSAwKSB7IHggPSBzdGFydF94OyB5ID0geSAtIGg7IH0gfSB9IDwvcHJlPjxwPuKtkCBJbiB0aGUgPGk+cnVuX2luZmVyZW5jZV90b19tYWtlX3ByZWRpY3Rpb25zPC9pPiBmdW5jdGlvbjo8L3A+PHA+4q2QIEluaXRpYXRlIHRoZSByZXN1bHRzIChvdXRwdXRzKSBzY3JlZW4uPC9wPjxwPuKtkCBDb3B5IHRoZSByZWNlbnRseSBnZW5lcmF0ZWQgdGhlcm1hbCBpbWFnaW5nIGFycmF5IDxpPihNTFg5MDY0MVRvKTwvaT4gdG8gdGhlIGlucHV0IGJ1ZmZlciAodGVuc29yKS48L3A+PHA+4q2QIFJ1biBpbmZlcmVuY2UuPC9wPjxwPuKtkCBSZWFkIHByZWRpY3RlZCB5IHZhbHVlcyAoaXJyaWdhdGlvbiBjbGFzc2VzKSBmcm9tIHRoZSBvdXRwdXQgYnVmZmVyICh0ZW5zb3IpLjwvcD48cD7irZAgRGlzcGxheSB0aGUgZGV0ZWN0aW9uIHJlc3VsdCBncmVhdGVyIHRoYW4gdGhlIGdpdmVuIHRocmVzaG9sZCAoMC43NSkuIEl0IHJlcHJlc2VudHMgdGhlIG1vc3QgYWNjdXJhdGUgbGFiZWwgKGlycmlnYXRpb24gY2xhc3MpIHByZWRpY3RlZCBieSB0aGUgbW9kZWwuPC9wPjxwcmU+IHZvaWQgcnVuX2luZmVyZW5jZV90b19tYWtlX3ByZWRpY3Rpb25zKCl7IC8vIEluaXRpYXRlIHRoZSByZXN1bHRzIHNjcmVlbi4gdGZ0LmZpbGxTY3JlZW4oVEZUX1BVUlBMRSk7IC8vIENvcHkgdmFsdWVzICh0aGVybWFsIGltYWdpbmcgYXJyYXkpIHRvIHRoZSBpbnB1dCBidWZmZXIgKHRlbnNvcik6IGZvcihpbnQgaSA9IDA7IGkgJmx0OyAxOTI7IGkrKyl7IG1vZGVsX2lucHV0LSZndDtkYXRhLmZbaV0gPSBNTFg5MDY0MVRvW2ldOyB9IC8vIFJ1biBpbmZlcmVuY2U6IFRmTGl0ZVN0YXR1cyBpbnZva2Vfc3RhdHVzID0gaW50ZXJwcmV0ZXItJmd0O0ludm9rZSgpOyBpZiAoaW52b2tlX3N0YXR1cyAhPSBrVGZMaXRlT2spIHsgZXJyb3JfcmVwb3J0ZXItJmd0O1JlcG9ydCgiSW52b2tlIGZhaWxlZCBvbiB0aGUgZ2l2ZW4gaW5wdXQuIik7IH0gLy8gUmVhZCBwcmVkaWN0ZWQgeSB2YWx1ZXMgKGlycmlnYXRpb24gY2xhc3NlcykgZnJvbSB0aGUgb3V0cHV0IGJ1ZmZlciAodGVuc29yKTogZm9yKGludCBpID0gMDsgaSZsdDs0OyBpKyspeyBpZihtb2RlbF9vdXRwdXQtJmd0O2RhdGEuZltpXSAmZ3Q7PSB0aHJlc2hvbGQpeyAvLyBEaXNwbGF5IHRoZSBkZXRlY3Rpb24gcmVzdWx0IChjbGFzcykuIC8vIEJvcmRlcjogaW50IHcgPSAyMDA7IGludCBoID0gNjA7IGludCB4ID0gKDMyMCAtIHcpIC8gMjsgaW50IHkgPSAoMjQwIC0gaCkgLyAyOyBpbnQgb2Zmc2V0ID0gMTU7IGludCBib3JkZXIgPSAxOyBpbnQgciA9IDIwOyB0ZnQuZHJhd1JvdW5kUmVjdCh4IC0gb2Zmc2V0IC0gYm9yZGVyLCB5IC0gb2Zmc2V0IC0gYm9yZGVyLCB3ICsgKDIqb2Zmc2V0KSArICgyKmJvcmRlciksIGggKyAoMipvZmZzZXQpICsgKDIqYm9yZGVyKSwgciwgVEZUX1dISVRFKTsgdGZ0LmZpbGxSb3VuZFJlY3QoeCAtIG9mZnNldCwgeSAtIG9mZnNldCwgdyArICgyKm9mZnNldCksIGggKyAoMipvZmZzZXQpLCByLCBURlRfTUFHRU5UQSk7IHRmdC5maWxsUm91bmRSZWN0KHgsIHksIHcsIGgsIHIsIGNsYXNzX2NvbG9yX2NvZGVzW2ldKTsgLy8gUHJpbnQ6IGludCBzdHJfeCA9IGNsYXNzZXNbaV0ubGVuZ3RoKCkgKiAxMTsgaW50IHN0cl95ID0gMTI7IHRmdC5zZXRUZXh0U2l6ZSgyKTsgdGZ0LmRyYXdTdHJpbmcoY2xhc3Nlc1tpXSwgKDMyMCAtIHN0cl94KSAvIDIsICgyNDAgLSBzdHJfeSkgLyAyKTsgfSB9IC8vIEV4aXQgYW5kIGNsZWFyLiBkZWxheSgzMDAwKTsgdGZ0LnNldFRleHRTaXplKDEpOyB0ZnQuZmlsbFNjcmVlbihURlRfQkxVRSk7IH0gPC9wcmU+PHA+4q2QIElmIHRoZSA1LXdheSBzd2l0Y2ggaXMgcHJlc3NlZCwgcnVuIGluZmVyZW5jZSB0byBkZXRlY3QgaXJyaWdhdGlvbiBsZXZlbHMgKGNsYXNzZXMpLjwvcD48cHJlPiBnZXRfYW5kX2Rpc3BsYXlfZGF0YV9mcm9tX01MWDkwNjQxKDY0LCAyMCwgMTIsIDEyKTsgLy8gRXhlY3V0ZSB0aGUgVGVuc29yRmxvdyBMaXRlIG1vZGVsIHRvIG1ha2UgcHJlZGljdGlvbnMgb24gdGhlIGlycmlnYXRpb24gbGV2ZWxzIChjbGFzc2VzKS4gaWYoZGlnaXRhbFJlYWQoV0lPXzVTX1BSRVNTKSA9PSBMT1cpIHJ1bl9pbmZlcmVuY2VfdG9fbWFrZV9wcmVkaWN0aW9ucygpOyA8L3ByZT48cD5JbiBTdGVwIDQsIHlvdSBjYW4gaW5zcGVjdCA8aT5HZXRDb2xvcjwvaT4gYW5kIDxpPkdldGFiY2Q8L2k+IGZ1bmN0aW9ucyBpbiBkZXRhaWwuPC9wPjwvZGl2Pjwvc2VjdGlvbj48c2VjdGlvbiA+PGgyID5TdGVwIDE1OiBSdW5uaW5nIHRoZSBNb2RlbCBvbiBXaW8gVGVybWluYWwgdG8gTWFrZSBQcmVkaWN0aW9ucyBvbiB0aGUgSXJyaWdhdGlvbiBDbGFzc2VzPC9oMj48ZGl2ID48cD5NeSBuZXVyYWwgbmV0d29yayBtb2RlbCBwcmVkaWN0cyBwb3NzaWJpbGl0aWVzIG9mIGxhYmVscyAoaXJyaWdhdGlvbiBjbGFzc2VzKSBmb3IgZWFjaCBnaXZlbiBpbnB1dCAodGhlcm1hbCBpbWFnaW5nIGFycmF5KSBhcyBhbiBhcnJheSBvZiA0IG51bWJlcnMuIFRoZXkgcmVwcmVzZW50IHRoZSBtb2RlbCdzIDxpPiJjb25maWRlbmNlIjwvaT4gdGhhdCB0aGUgZ2l2ZW4gaW5wdXQgYXJyYXkgY29ycmVzcG9uZHMgdG8gZWFjaCBvZiB0aGUgZm91ciBkaWZmZXJlbnQgaXJyaWdhdGlvbiBjbGFzc2VzIGJhc2VkIG9uIHRoZXJtYWwgaW1hZ2luZyBbMCAtIDNdLCBhcyBzaG93biBpbiBTdGVwIDU6PC9wPjx1bD48bGk+MCDigJQgRHJ5IDwvbGk+PGxpPjEg4oCUIE1vZGVyYXRlIDwvbGk+PGxpPjIg4oCUIFN1ZmZpY2llbnQgPC9saT48bGk+MyDigJQgRXhjZXNzaXZlIDwvbGk+PC91bD48cD5BZnRlciBpbXBvcnRpbmcgYW5kIHNldHRpbmcgdXAgdGhlIG1vZGVsIChhcyBhIEMgYXJyYXkpIG9uIHRoZSBXaW8gVGVybWluYWwgc3VjY2Vzc2Z1bGx5LCBJIHJ1biB0aGUgbW9kZWwgdG8gZGV0ZWN0IGlycmlnYXRpb24gbGV2ZWxzIChjbGFzc2VzKSBvZiB2YXJpb3VzIHBsYW50cyBpbiBteSBnYXJkZW4gYW5kIGJhbGNvbnkuPC9wPjxwPkFmdGVyIGV4ZWN1dGluZyB0aGUgY29kZSBmb3IgcnVubmluZyB0aGUgbW9kZWwgb24gdGhlIFdpbyBUZXJtaW5hbDo8L3A+PHA+8J+Mv/CfkqcgVGhlIGRldmljZSBkaXNwbGF5cyB0aGVybWFsIGltYWdpbmcgYXJyYXlzIGFzIGEgcmVhbC10aW1lIHZpZGVvIHN0cmVhbSBvbiB0aGUgc2NyZWVuLjwvcD48cD7wn4y/8J+SpyBJZiB0aGUgNS13YXkgc3dpdGNoIGlzIHByZXNzZWQsIHRoZSBkZXZpY2UgcnVucyBpbmZlcmVuY2Ugd2l0aCB0aGUgbW9kZWwgYnkgZW1wbG95aW5nIHRoZSBtb3N0IHJlY2VudGx5IGdlbmVyYXRlZCB0aGVybWFsIGltYWdpbmcgYXJyYXkgYXMgdGhlIGlucHV0IGFycmF5LjwvcD48cD7wn4y/8J+SpyBUaGVuLCB0aGUgZGV2aWNlIGRpc3BsYXlzIHRoZSBvdXRwdXQsIHdoaWNoIHJlcHJlc2VudHMgdGhlIG1vc3QgYWNjdXJhdGUgbGFiZWwgKGlycmlnYXRpb24gY2xhc3MpIHByZWRpY3RlZCBieSB0aGUgbW9kZWwuPC9wPjxwPvCfjL/wn5KnIEVhY2ggaXJyaWdhdGlvbiBsZXZlbCAoY2xhc3MpIGFzIHRoZSBvdXRwdXQgaGFzIGl0cyB1bmlxdWUgY29sb3IgY29kZTo8L3A+PHVsPjxsaT5Ecnkg4p6hIEdyZWVuIDwvbGk+PGxpPk1vZGVyYXRlIOKeoSBHcmVlbnllbGxvdyA8L2xpPjxsaT5TdWZmaWNpZW50IOKeoSBPcmFuZ2UgPC9saT48bGk+RXhjZXNzaXZlIOKeoSBSZWQgPC9saT48L3VsPjxwPvCfjL/wn5KnIEFzIGZhciBhcyBteSBleHBlcmltZW50cyBnbywgdGhlIGRldmljZSB3b3JrcyBpbXBlY2NhYmx5IHdoaWxlIGRldGVjdGluZyBpcnJpZ2F0aW9uIGxldmVscyAoY2xhc3Nlcykgb2YgdmFyaW91cyBwbGFudHMgaW4gZGlmZmVyZW50IGNvbmRpdGlvbnMgOik8L3A+PC9kaXY+PC9zZWN0aW9uPjxzZWN0aW9uID48aDIgPlN0ZXAgMTY6IFZpZGVvcyBhbmQgQ29uY2x1c2lvbjwvaDI+PGRpdiA+PHA+QWZ0ZXIgY29tcGxldGluZyBhbGwgc3RlcHMgYWJvdmUgYW5kIGV4cGVyaW1lbnRpbmcsIEkgaGF2ZSBlbXBsb3llZCB0aGUgZGV2aWNlIHRvIGFwcGx5IHByZWNpc2UgaXJyaWdhdGlvbiBzY2hlZHVsaW5nIHRvIG15IHBsYW50cyBzbyBhcyB0byBpbXByb3ZlIHdhdGVyIHVzZSBlZmZpY2llbmN5LjwvcD48L2Rpdj48L3NlY3Rpb24+PHNlY3Rpb24gPjxoMiA+U3RlcCAxNzogRnVydGhlciBEaXNjdXNzaW9uczwvaDI+PGRpdiA+PHA+QnkgYXBwbHlpbmcgbmV1cmFsIG5ldHdvcmsgbW9kZWxzIHRyYWluZWQgb24gdGhlcm1hbCBpbWFnaW5nIGFuZCBzZW5zaW5nIGluIGFncmljdWx0dXJlLCB3ZSBjYW4gYWNoaWV2ZSB0b1szXTo8L3A+PHA+8J+Mv/CfkqcgZGV0ZWN0IHNlZWQgcXVhbGl0eSBlYXJsaWVyLDwvcD48cD7wn4y/8J+SpyBpbXByb3ZlIGlycmlnYXRpb24gc2NoZWR1bGluZyBhbmQgYWdyaWN1bHR1cmFsIHdhdGVyIG1hbmFnZW1lbnQsPC9wPjxwPvCfjL/wn5KnIGRldGVjdCBzb2lsIHNhbGluaXR5LDwvcD48cD7wn4y/8J+SpyBkZXRlY3QgcGxhbnQgZGlzZWFzZXMgYW5kIHBhdGhvZ2Vucyw8L3A+PHA+8J+Mv/CfkqcgaW1wcm92ZSBjcm9wIHlpZWxkIGVzdGltYXRpb24sPC9wPjxwPvCfjL/wn5KnIGFzc2VzcyBjcm9wIG1hdHVyaXR5LDwvcD48cD7wn4y/8J+SpyBkZXRlY3QgYnJ1aXNlcyBhbmQgc2NyYXRjaGVzIG9uIGZydWl0cyBhbmQgdmVnZXRhYmxlcy4gPC9wPiBSZWZlcmVuY2VzIDxwPlsxXSBJLkYuIEdhcmPDrWEtVGVqZXJvLCBBLkUuIFJ1YmlvLCBJLiBWacOxdWVsYSwgQSBIZXJuw6FuZGV6LCBTIEd1dGnDqXJyZXotR29yZGlsbG8sIEMuUi4gUm9kcsOtZ3Vlei1QbGVndWV6dWVsbywgVi5ILiBEdXLDoW4tWnVhem8sIDxpPlRoZXJtYWwgaW1hZ2luZyBhdCBwbGFudCBsZXZlbCB0byBhc3Nlc3MgdGhlIGNyb3Atd2F0ZXIgc3RhdHVzIGluIGFsbW9uZCB0cmVlcyAoY3YuIEd1YXJhKSB1bmRlciBkZWZpY2l0IGlycmlnYXRpb24gc3RyYXRlZ2llczwvaT4sIEFncmljdWx0dXJhbCBXYXRlciBNYW5hZ2VtZW50LCBWb2x1bWUgMjA4LCAyMDE4LCBQYWdlcyAxNzYtMTg2LCBJU1NOIDAzNzgtMzc3NCwgPGk+aHR0cHM6Ly9kb2kub3JnLzEwLjEwMTYvai5hZ3dhdC4yMDE4LjA2LjAwMjwvaT4uPC9wPjxwPlsyXSBPbGdhIE0uIEdyYW50LCDFgXVrYXN6IFRyb25pbmEsIEhhbWx5biBHLiBKb25lcywgTS4gTWFudWVsYSBDaGF2ZXMsIDxpPkV4cGxvcmluZyB0aGVybWFsIGltYWdpbmcgdmFyaWFibGVzIGZvciB0aGUgZGV0ZWN0aW9uIG9mIHN0cmVzcyByZXNwb25zZXMgaW4gZ3JhcGV2aW5lIHVuZGVyIGRpZmZlcmVudCBpcnJpZ2F0aW9uIHJlZ2ltZXM8L2k+LCBKb3VybmFsIG9mIEV4cGVyaW1lbnRhbCBCb3RhbnksIFZvbHVtZSA1OCwgSXNzdWUgNCwgTWFyY2ggMjAwNywgUGFnZXMgODE14oCTODI1LCA8aT5odHRwczovL2RvaS5vcmcvMTAuMTA5My9qeGIvZXJsMTUzPC9pPi48L3A+PHA+WzNdIFJvc2VseW5lIElzaGltd2UsIEsuIEFidXRhbGViLCBGLiBBaG1lZCwgPGk+QXBwbGljYXRpb25zIG9mIFRoZXJtYWwgSW1hZ2luZyBpbiBBZ3JpY3VsdHVyZeKAlEEgUmV2aWV3PC9pPiwgQWR2YW5jZXMgaW4gUmVtb3RlIFNlbnNpbmcsIFZvbHVtZSAzLCBJc3N1ZSAzLCBTZXB0ZW1iZXIgMjAxNCwgUGFnZXMgMTI4LTE0MCwgPGk+aHR0cDovL2R4LmRvaS5vcmcvMTAuNDIzNi9hcnMuMjAxNC4zMzAxMTwvaT4uPC9wPjwvZGl2Pjwvc2VjdGlvbj48c2VjdGlvbiA+PGgyID5TdGVwIDE4OiBTY2hlbWF0aWNzPC9oMj48L3NlY3Rpb24+PHNlY3Rpb24gPjxoMiA+U3RlcCAxOTogQ29kZSBhbmQgRG93bmxvYWRzPC9oMj48ZGl2ID48aDM+PGEgPkluc3RhbGwgYW5kIGluc3BlY3QgY29kZSBmaWxlcy48L2E+PC9oMz48aDM+PGEgPkluc3RhbGwgYW5kIGluc3BlY3QgU1RMIGZpbGVzLjwvYT48L2gzPjwvZGl2Pjwvc2VjdGlvbj48ZGl2ID48ZGl2ID48cD5UaGlzIGlzIGFuIGVudHJ5IGluIHRoZSA8YSA+QW55dGhpbmcgR29lcyBDb250ZXN0IDIwMjE8L2E+PC9wPjwvZGl2PjwvZGl2PjxzZWN0aW9uID48aDI+IEJlIHRoZSBGaXJzdCB0byBTaGFyZSA8L2gyPjxkaXYgPjxkaXYgPjxwPkRpZCB5b3UgbWFrZSB0aGlzIHByb2plY3Q/IFNoYXJlIGl0IHdpdGggdXMhPC9wPjwvZGl2PjwvZGl2Pjwvc2VjdGlvbj48c2VjdGlvbiA+PGgyPlJlY29tbWVuZGF0aW9uczwvaDI+PGRpdiA+PGRpdiA+PGRpdiA+PGEgPk5ZQyBIb3QgRG9nIE1hY2hpbmU8L2E+IGJ5IGJla2F0aHdpYSBpbiBFbGVjdHJvbmljczwvZGl2PjxkaXYgPjxzcGFuID4gMTYgNC4wSyA8L3NwYW4+PC9kaXY+PC9kaXY+PGRpdiA+PGRpdiA+IkNpcmN1aXQtVHJlZSIgdGhlIFNpbmdpbmcgQ2hyaXN0bWFzIFRyZWUgYnkgQnJvd25Eb2dHYWRnZXRzIGluIE1pY3JvY29udHJvbGxlcnM8L2Rpdj48ZGl2ID4gMzYgNC44SyA8L2Rpdj48L2Rpdj48ZGl2ID48ZGl2ID5NYXRyaXggQ29tcHV0ZXIgU2lkZSBQYW5lbCBieSBXaWxsIERvbmFsZHNvbiBpbiBNaWNyb2NvbnRyb2xsZXJzPC9kaXY+PGRpdiA+IDE2OCAyMUsgPC9kaXY+PC9kaXY+PGRpdiA+PGRpdiA+TW90b3JpemVkIExpZ2h0IEJ1bGIgQ2hhbmdlciBieSBtYXR0d2FjaCBpbiBUb29sczwvZGl2PjxkaXYgPjxzcGFuID4gNTcgNy41SyA8L3NwYW4+PC9kaXY+PC9kaXY+PC9kaXY+PHVsID48bGk+PGgzID5Bbnl0aGluZyBHb2VzIENvbnRlc3QgMjAyMTwvaDM+PC9saT48L3VsPjwvc2VjdGlvbj48c2VjdGlvbiA+PGgyPkNvbW1lbnRzPC9oMj48L3NlY3Rpb24+PC9kaXY+PC9kaXY+PC9hcnRpY2xlPjwvbWFpbj48L2JvZHk+'</script>

      </head>
        <body class="valid" valid="valid" title="valid: True, node: 1, tag: body, level: 1" node_number="1"><header class="valid" valid="valid" title="valid: True, node: 2, tag: header, level: 2" node_number="2"><div class="valid" valid="valid" title="valid: True, node: 3, tag: div, level: 3" node_number="3"><div class="valid" valid="valid" title="valid: True, node: 4, tag: div, level: 4" node_number="4"/><div class="valid" valid="valid" title="valid: True, node: 5, tag: div, level: 4" node_number="5">Following</div></div><div class="valid" valid="valid" title="valid: True, node: 6, tag: div, level: 3" node_number="6"><div class="valid" valid="valid" title="valid: True, node: 7, tag: div, level: 4" node_number="7"><a class="valid" valid="valid" title="valid: True, node: 8, tag: a, level: 5" node_number="8">instructablescircuits</a>Projects<a class="valid" valid="valid" title="valid: True, node: 9, tag: a, level: 5" node_number="9">Contests</a></div><div class="valid" valid="valid" title="valid: True, node: 10, tag: div, level: 4" node_number="10"/></div></header><main class="valid" valid="valid" title="valid: True, node: 11, tag: main, level: 2" node_number="11"><article class="valid" valid="valid" title="valid: True, node: 12, tag: article, level: 3" node_number="12"><header class="valid" valid="valid" title="valid: True, node: 13, tag: header, level: 4" node_number="13"><h1 class="valid" valid="valid" title="valid: True, node: 14, tag: h1, level: 5" node_number="14">Irrigation Level Assessment by Thermal Imaging W/ TensorFlow</h1><div class="valid" valid="valid" title="valid: True, node: 15, tag: div, level: 5" node_number="15"><div class="valid" valid="valid" title="valid: True, node: 16, tag: div, level: 6" node_number="16"> By <a class="valid" valid="valid" title="valid: True, node: 17, tag: a, level: 7" node_number="17">Kutluhan Aktar</a> in <a class="valid" valid="valid" title="valid: True, node: 18, tag: a, level: 7" node_number="18">Circuits</a><a class="valid" valid="valid" title="valid: True, node: 19, tag: a, level: 7" node_number="19">Electronics</a></div><div class="valid" valid="valid" title="valid: True, node: 20, tag: div, level: 6" node_number="20"><p class="valid" valid="valid" title="valid: True, node: 21, tag: p, level: 7" node_number="21">6,096</p><p class="valid" valid="valid" title="valid: True, node: 22, tag: p, level: 7" node_number="22">17</p><p class="valid" valid="valid" title="valid: True, node: 23, tag: p, level: 7" node_number="23">0</p><p class="valid" valid="valid" title="valid: True, node: 24, tag: p, level: 7" node_number="24">Featured</p></div></div></header><div class="valid" valid="valid" title="valid: True, node: 25, tag: div, level: 4" node_number="25"><div class="valid" valid="valid" title="valid: True, node: 26, tag: div, level: 5" node_number="26"><section class="valid" valid="valid" title="valid: True, node: 27, tag: section, level: 6" node_number="27"><h2 class="valid" valid="valid" title="valid: True, node: 28, tag: h2, level: 7" node_number="28">Introduction: Irrigation Level Assessment by Thermal Imaging W/ TensorFlow</h2><div class="valid" valid="valid" title="valid: True, node: 29, tag: div, level: 7" node_number="29"><div class="valid" valid="valid" title="valid: True, node: 30, tag: div, level: 8" node_number="30"><div class="valid" valid="valid" title="valid: True, node: 31, tag: div, level: 9" node_number="31">By Kutluhan Aktar<a class="valid" valid="valid" title="valid: True, node: 32, tag: a, level: 10" node_number="32">TheAmplituhedron</a></div></div><div class="valid" valid="valid" title="valid: True, node: 33, tag: div, level: 8" node_number="33"> More by the author: </div><div class="valid" valid="valid" title="valid: True, node: 34, tag: div, level: 8" node_number="34"> About: Self-Taught Full Stack Developer | Programmer | Maker | Physics Enthusiast More About Kutluhan Aktar &#187;</div></div><div class="valid" valid="valid" title="valid: True, node: 35, tag: div, level: 7" node_number="35"><p class="valid" valid="valid" title="valid: True, node: 36, tag: p, level: 8" node_number="36">Collect irrigation level data by thermal imaging, build and train a neural network model, and run the model directly on Wio Terminal.</p></div></section><section class="valid" valid="valid" title="valid: True, node: 37, tag: section, level: 6" node_number="37"><h2 class="valid" valid="valid" title="valid: True, node: 38, tag: h2, level: 7" node_number="38">Supplies</h2><div class="valid" valid="valid" title="valid: True, node: 39, tag: div, level: 7" node_number="39"><ul class="valid" valid="valid" title="valid: True, node: 40, tag: ul, level: 8" node_number="40"><li class="valid" valid="valid" title="valid: True, node: 41, tag: li, level: 9" node_number="41">1 x Wio Terminal</li><li class="valid" valid="valid" title="valid: True, node: 42, tag: li, level: 9" node_number="42">1 x MLX90641 Thermal Imaging Camera (16x12 w/ 110&#176; FOV) </li><li class="valid" valid="valid" title="valid: True, node: 43, tag: li, level: 9" node_number="43">1 x Grove - Universal 4 Pin Cable</li><li class="valid" valid="valid" title="valid: True, node: 44, tag: li, level: 9" node_number="44">1 x Creality CR-6 SE 3D Printer</li><li class="valid" valid="valid" title="valid: True, node: 45, tag: li, level: 9" node_number="45">1 x Raspberry Pi 3B+ or 4</li></ul></div></section><section class="valid" valid="valid" title="valid: True, node: 46, tag: section, level: 6" node_number="46"><h2 class="valid" valid="valid" title="valid: True, node: 47, tag: h2, level: 7" node_number="47">Step 1: Story</h2><div class="valid" valid="valid" title="valid: True, node: 48, tag: div, level: 7" node_number="48"><p class="valid" valid="valid" title="valid: True, node: 49, tag: p, level: 8" node_number="49">Since global temperatures are expected to rise over the next few decades due to climate change and thus evaporation rates will increase, water scarcity and the expansion of arid regions threaten productive agricultural areas and long-term water availability. Considering water availability is already limited, we need to desist from profligate water utilization in agriculture to sustain our meager water resources. Otherwise, we will encounter more critical predicaments than depleting arable lands due to water scarcity and deficiency.</p><p class="valid" valid="valid" title="valid: True, node: 50, tag: p, level: 8" node_number="50">Since there is already an imbalance between the irrigation demand and the available water resources[1], it is crucial to avoid poor irrigation timing and insufficient or extravagant applications of water, which are unfortunately rife in agriculture. To sustain irrigated agriculture and maximize the quality of the product and the estimated crop yield while optimizing the quantity of water used per unit area[2], we need to apply precise irrigation scheduling methods. In that regard, we can improve water use efficiency and agricultural water management while preserving water and increasing the profitability of agroecosystems. </p><p class="valid" valid="valid" title="valid: True, node: 51, tag: p, level: 8" node_number="51">After perusing recent research papers on irrigation management, monitoring, and scheduling, I decided to create an easy-to-use and budget-friendly device to monitor plant water status (irrigation levels) by thermal imaging in the hope of making irrigation scheduling accessible even for hobbyists. As opposed to classical measurement devices and methods for monitoring plant water status (irrigation levels), thermal imaging is a non-invasive, non-contact, and non-destructive technique. Also, thermal imaging allows us to elicit measurements of water status (irrigation levels) directly from plants without employing labor demanding and time-consuming processes. As explained below, thermal imaging is emerging as a ubiquitous method to detect plant water status (irrigation levels) due to its precision and accessibility.</p><p class="valid" valid="valid" title="valid: True, node: 52, tag: p, level: 8" node_number="52">Infrared thermography (thermal imaging) for monitoring plant water status (irrigation levels) is a technique based on the relationship between leaves' (or crop canopy) stomatal closure or aperture and their surface temperature. When leaves (or crop canopy) transpires, they lose water through their stomata, and therefore the crop canopy temperature decreases. However, once plants go into water stress, their stomata begin to close and cease to transpire, causing the plant to heat up and the crop canopy temperature to rise. Also, the crop canopy temperature is correlated with specific plant physiological parameters, such as stomatal conductance. In addition, thermal imaging appears to have potential advantages over gas-exchange measurement when monitoring stomatal responses in phenotyping plant studies[3].</p><p class="valid" valid="valid" title="valid: True, node: 53, tag: p, level: 8" node_number="53">Even though thermal imaging is a technique with high precision and advantages, it is still struggling to interpret and analyze thermal imaging data to extrapolate and assess irrigation levels without applying algorithms. Hence, I decided to build and train an artificial neural network model to detect irrigation levels by thermal imaging automatically.</p><p class="valid" valid="valid" title="valid: True, node: 54, tag: p, level: 8" node_number="54">To collate thermal imaging data and create a data set easily, I developed a web application in PHP before building and testing my neural network model. Then, to make irrigation scheduling and monitoring by thermal imaging as accessible as possible, I utilized a Wio Terminal and an MLX90641 thermal imaging camera to collect thermal imaging data and run my neural network model after training it.</p><p class="valid" valid="valid" title="valid: True, node: 55, tag: p, level: 8" node_number="55">After completing my data set, I built my artificial neural network model (ANN) with TensorFlow to make predictions on the irrigation classes (labels) based on thermal imaging. Empirically, I assigned an irrigation class (label) for each thermal imaging array (input) generated by the MLX90641 thermal imaging camera:</p><ul class="valid" valid="valid" title="valid: True, node: 56, tag: ul, level: 8" node_number="56"><li class="valid" valid="valid" title="valid: True, node: 57, tag: li, level: 9" node_number="57">Dry </li><li class="valid" valid="valid" title="valid: True, node: 58, tag: li, level: 9" node_number="58">Moderate </li><li class="valid" valid="valid" title="valid: True, node: 59, tag: li, level: 9" node_number="59">Sufficient </li><li class="valid" valid="valid" title="valid: True, node: 60, tag: li, level: 9" node_number="60">Excessive </li></ul><p class="valid" valid="valid" title="valid: True, node: 61, tag: p, level: 8" node_number="61">After training and testing my neural network model, I converted it from a TensorFlow Keras H5 model to a C array (.h file) to execute the model on the Wio Terminal. Since the thermal imaging camera is directly connected to the Wio Terminal, the device is capable of detecting irrigation levels (classes) in the field effortlessly.</p><p class="valid" valid="valid" title="valid: True, node: 62, tag: p, level: 8" node_number="62">Lastly, to make the device as compact and robust as possible, I designed a forest-themed case (3D printable).</p><p class="valid" valid="valid" title="valid: True, node: 63, tag: p, level: 8" node_number="63">So, this is my project in a nutshell &#128515;</p><p class="valid" valid="valid" title="valid: True, node: 64, tag: p, level: 8" node_number="64">In the following steps, you can find more detailed information on coding, data collection, building an artificial neural network model with TensorFlow, and running it on Wio Terminal.</p><p class="valid" valid="valid" title="valid: True, node: 65, tag: p, level: 8" node_number="65">Huge thanks to <a class="valid" valid="valid" title="valid: True, node: 66, tag: a, level: 9" node_number="66">Seeed Studio</a> for sponsoring these products:</p><p class="valid" valid="valid" title="valid: True, node: 67, tag: p, level: 8" node_number="67">&#11088; Wio Terminal | <a class="valid" valid="valid" title="valid: True, node: 68, tag: a, level: 9" node_number="68">Inspect</a></p><p class="valid" valid="valid" title="valid: True, node: 69, tag: p, level: 8" node_number="69">&#11088; Grove - Thermal Imaging Camera - MLX90641 | <a class="valid" valid="valid" title="valid: True, node: 70, tag: a, level: 9" node_number="70">Inspect</a></p><p class="valid" valid="valid" title="valid: True, node: 71, tag: p, level: 8" node_number="71">&#127873;&#127912; Also, huge thanks to <a class="valid" valid="valid" title="valid: True, node: 72, tag: a, level: 9" node_number="72">Creality3D</a> for sponsoring a <a class="valid" valid="valid" title="valid: True, node: 73, tag: a, level: 9" node_number="73">Creality CR-6 SE 3D Printer</a>.</p><p class="valid" valid="valid" title="valid: True, node: 74, tag: p, level: 8" node_number="74">&#127873;&#127912; If you want to purchase some products from <a class="valid" valid="valid" title="valid: True, node: 75, tag: a, level: 9" node_number="75">Creality3D</a>, you can use my 10% discount coupon <i class="valid" valid="valid" title="valid: True, node: 76, tag: i, level: 9" node_number="76">(Aktar10)</i> even for their new and most popular printers: <a class="valid" valid="valid" title="valid: True, node: 77, tag: a, level: 9" node_number="77">CR-10 Smart</a>, <a class="valid" valid="valid" title="valid: True, node: 78, tag: a, level: 9" node_number="78">CR-30 3DPrintMill</a>, <a class="valid" valid="valid" title="valid: True, node: 79, tag: a, level: 9" node_number="79">Ender-3 Pro</a>, and <a class="valid" valid="valid" title="valid: True, node: 80, tag: a, level: 9" node_number="80">Ender-3 V2</a>.</p><p class="valid" valid="valid" title="valid: True, node: 81, tag: p, level: 8" node_number="81">&#127873;&#127912; You can also use the coupon for Creality filaments, such as <a class="valid" valid="valid" title="valid: True, node: 82, tag: a, level: 9" node_number="82">Upgraded PLA (200g x 5 Pack)</a>, <a class="valid" valid="valid" title="valid: True, node: 83, tag: a, level: 9" node_number="83">PLA White</a>, and <a class="valid" valid="valid" title="valid: True, node: 84, tag: a, level: 9" node_number="84">PLA Black</a>.</p></div></section><section class="valid" valid="valid" title="valid: True, node: 85, tag: section, level: 6" node_number="85"><h2 class="valid" valid="valid" title="valid: True, node: 86, tag: h2, level: 7" node_number="86">Step 2: Designing and Printing a Forest-themed Case</h2><div class="valid" valid="valid" title="valid: True, node: 87, tag: div, level: 7" node_number="87"><p class="valid" valid="valid" title="valid: True, node: 88, tag: p, level: 8" node_number="88">As a novice in 3D model designing and printing, I decided to design a forest-themed case for this project to create a more compact and robust device operating flawlessly in the field.</p><p class="valid" valid="valid" title="valid: True, node: 89, tag: p, level: 8" node_number="89">I designed the main case and tree bases in Autodesk Fusion 360. You can download their STL files below.</p><p class="valid" valid="valid" title="valid: True, node: 90, tag: p, level: 8" node_number="90">For trees mounted on the main case, I utilized these models from Thingiverse:</p><ul class="valid" valid="valid" title="valid: True, node: 91, tag: ul, level: 8" node_number="91"><li class="valid" valid="valid" title="valid: True, node: 92, tag: li, level: 9" node_number="92"><a class="valid" valid="valid" title="valid: True, node: 93, tag: a, level: 10" node_number="93">Tree on the left</a></li><li class="valid" valid="valid" title="valid: True, node: 94, tag: li, level: 9" node_number="94"><a class="valid" valid="valid" title="valid: True, node: 95, tag: a, level: 10" node_number="95">Tree on the right</a></li></ul><p class="valid" valid="valid" title="valid: True, node: 96, tag: p, level: 8" node_number="96">Since I wanted to apply a stylish forest theme to the device, I utilized three PLA filaments with different colors:</p><ul class="valid" valid="valid" title="valid: True, node: 97, tag: ul, level: 8" node_number="97"><li class="valid" valid="valid" title="valid: True, node: 98, tag: li, level: 9" node_number="98">Green </li><li class="valid" valid="valid" title="valid: True, node: 99, tag: li, level: 9" node_number="99">Beige </li><li class="valid" valid="valid" title="valid: True, node: 100, tag: li, level: 9" node_number="100">Peak Green </li></ul><p class="valid" valid="valid" title="valid: True, node: 101, tag: p, level: 8" node_number="101">I sliced 3D models (STL files) for each color above in Ultimaker Cura.</p><p class="valid" valid="valid" title="valid: True, node: 102, tag: p, level: 8" node_number="102">Finally, I printed all parts (models) with my Creality CR-6 SE 3D Printer. Although I am a beginner in 3D printing and it is my first 3D printer, I got incredible results effortlessly with the CR-6 SE :)</p></div></section><section class="valid" valid="valid" title="valid: True, node: 103, tag: section, level: 6" node_number="103"><h2 class="valid" valid="valid" title="valid: True, node: 104, tag: h2, level: 7" node_number="104">Step 3: Assembling the Case and Its Components</h2><div class="valid" valid="valid" title="valid: True, node: 105, tag: div, level: 7" node_number="105"><p class="valid" valid="valid" title="valid: True, node: 106, tag: p, level: 8" node_number="106">After printing all parts (models) successfully, I fastened them together and attached the Wio Terminal and the MLX90641 thermal imaging camera to the case. I used a Grove connection cable (4 Pin) to connect the Wio Terminal to the MLX90641 thermal imaging camera.</p></div></section><section class="valid" valid="valid" title="valid: True, node: 107, tag: section, level: 6" node_number="107"><h2 class="valid" valid="valid" title="valid: True, node: 108, tag: h2, level: 7" node_number="108">Step 4: Developing a Web Application in PHP to Collate Data on Irrigation Levels by Thermal Imaging</h2><div class="valid" valid="valid" title="valid: True, node: 109, tag: div, level: 7" node_number="109"><p class="valid" valid="valid" title="valid: True, node: 110, tag: p, level: 8" node_number="110">Before collecting thermal imaging data with the Wio Terminal, I decided to develop a web application in PHP, named <i class="valid" valid="valid" title="valid: True, node: 111, tag: i, level: 9" node_number="111">irrigation level data logger</i>, so as to save and analyze data easily on my server hosted on Raspberry Pi.</p><p class="valid" valid="valid" title="valid: True, node: 112, tag: p, level: 8" node_number="112">As shown below, the web application consists of one file and has three parameters to create the required CSV files and collect data successfully:</p><ul class="valid" valid="valid" title="valid: True, node: 113, tag: ul, level: 8" node_number="113"><li class="valid" valid="valid" title="valid: True, node: 114, tag: li, level: 9" node_number="114">index.php </li></ul><p class="valid" valid="valid" title="valid: True, node: 115, tag: p, level: 8" node_number="115">Parameters:</p><ul class="valid" valid="valid" title="valid: True, node: 116, tag: ul, level: 8" node_number="116"><li class="valid" valid="valid" title="valid: True, node: 117, tag: li, level: 9" node_number="117">create_files </li><li class="valid" valid="valid" title="valid: True, node: 118, tag: li, level: 9" node_number="118">thermal_img </li><li class="valid" valid="valid" title="valid: True, node: 119, tag: li, level: 9" node_number="119">level </li></ul><p class="valid" valid="valid" title="valid: True, node: 120, tag: p, level: 8" node_number="120">&#11088; In the <i class="valid" valid="valid" title="valid: True, node: 121, tag: i, level: 9" node_number="121">insert_new_line</i> function, insert a new row to the given CSV file by using the <i class="valid" valid="valid" title="valid: True, node: 122, tag: i, level: 9" node_number="122">fputcsv</i> function. To avoid syntax errors in the CSV files, use the <i class="valid" valid="valid" title="valid: True, node: 123, tag: i, level: 9" node_number="123">explode</i> function to save the given data (array) successfully. </p><pre class="valid" valid="valid" title="valid: True, node: 124, tag: pre, level: 8" node_number="124"> function insert_new_line($csv_file, $line){ $line = array($line); $f = fopen($csv_file.".csv", "a"); fputcsv($f, explode(",", $line[0])); fclose($f); echo "The given line is added to the &lt;i&gt;&lt;b&gt;".$csv_file.".csv&lt;/b&gt;&lt;/i&gt; file successfully!"; } </pre><p class="valid" valid="valid" title="valid: True, node: 125, tag: p, level: 8" node_number="125">&#11088; In the <i class="valid" valid="valid" title="valid: True, node: 126, tag: i, level: 9" node_number="126">create_csv_file</i> function, create a new CSV file with the given file name.</p><pre class="valid" valid="valid" title="valid: True, node: 127, tag: pre, level: 8" node_number="127"> function create_csv_file($csv_file){ $f = fopen($csv_file.'.csv', 'wb'); fclose($f); echo "&lt;i&gt;&lt;b&gt;".$csv_file.".csv&lt;/b&gt;&lt;/i&gt; file created successfully!&lt;br&gt;&lt;br&gt;"; } </pre><p class="valid" valid="valid" title="valid: True, node: 128, tag: p, level: 8" node_number="128">&#11088; If the <i class="valid" valid="valid" title="valid: True, node: 129, tag: i, level: 9" node_number="129">create_files</i> parameter is received and equals <i class="valid" valid="valid" title="valid: True, node: 130, tag: i, level: 9" node_number="130">ok</i>, then create the required CSV files to save and collect thermal imaging data. Each file name represents an irrigation class:</p><ul class="valid" valid="valid" title="valid: True, node: 131, tag: ul, level: 8" node_number="131"><li class="valid" valid="valid" title="valid: True, node: 132, tag: li, level: 9" node_number="132">dry.csv </li><li class="valid" valid="valid" title="valid: True, node: 133, tag: li, level: 9" node_number="133">moderate.csv </li><li class="valid" valid="valid" title="valid: True, node: 134, tag: li, level: 9" node_number="134">sufficient.csv </li><li class="valid" valid="valid" title="valid: True, node: 135, tag: li, level: 9" node_number="135">excessive.csv </li></ul><pre class="valid" valid="valid" title="valid: True, node: 136, tag: pre, level: 8" node_number="136"> if(isset($_GET["create_files"]) $_GET["create_files"] == "ok"){ create_csv_file("excessive"); create_csv_file("sufficient"); create_csv_file("moderate"); create_csv_file("dry"); } </pre><p class="valid" valid="valid" title="valid: True, node: 137, tag: p, level: 8" node_number="137">&#11088; If the <i class="valid" valid="valid" title="valid: True, node: 138, tag: i, level: 9" node_number="138">thermal_img</i> and <i class="valid" valid="valid" title="valid: True, node: 139, tag: i, level: 9" node_number="139">level</i> parameters are received, then save the given thermal imaging data (array) to the given CSV file (one from above).</p><pre class="valid" valid="valid" title="valid: True, node: 140, tag: pre, level: 8" node_number="140"> if(isset($_GET["thermal_img"]) isset($_GET["level"])){ insert_new_line($_GET["level"], $_GET["thermal_img"]); }else{ echo "Waiting Data..."; } </pre></div></section><section class="valid" valid="valid" title="valid: True, node: 141, tag: section, level: 6" node_number="141"><h2 class="valid" valid="valid" title="valid: True, node: 142, tag: h2, level: 7" node_number="142">Step 5: Setting Up the Web Application on Raspberry Pi</h2><div class="valid" valid="valid" title="valid: True, node: 143, tag: div, level: 7" node_number="143"><p class="valid" valid="valid" title="valid: True, node: 144, tag: p, level: 8" node_number="144">After creating the PHP web application, as mentioned above, I run the application on my server hosted on Raspberry Pi, but you can run it on any server as long as it is a PHP server.</p><p class="valid" valid="valid" title="valid: True, node: 145, tag: p, level: 8" node_number="145">If you want to use Raspberry Pi to run the application, as did I, but you do not know how to set up a LAMP web server on Raspberry Pi, you can inspect <a class="valid" valid="valid" title="valid: True, node: 146, tag: a, level: 9" node_number="146">my previous tutorial</a>.</p><p class="valid" valid="valid" title="valid: True, node: 147, tag: p, level: 8" node_number="147">&#11088; First of all, install and extract the <i class="valid" valid="valid" title="valid: True, node: 148, tag: i, level: 9" node_number="148">irrigation_level_data_logger.zip</i> folder.</p><p class="valid" valid="valid" title="valid: True, node: 149, tag: p, level: 8" node_number="149">&#11088; Then, move the application folder (<i class="valid" valid="valid" title="valid: True, node: 150, tag: i, level: 9" node_number="150">irrigation_level_data_logger</i>) to the Apache server (/var/www/html) by using the terminal since the Apache server is a protected location.</p><p class="valid" valid="valid" title="valid: True, node: 151, tag: p, level: 8" node_number="151"><i class="valid" valid="valid" title="valid: True, node: 152, tag: i, level: 9" node_number="152">sudo mv /home/pi/Downloads/irrigation_level_data_logger /var/www/html/</i></p></div></section><section class="valid" valid="valid" title="valid: True, node: 153, tag: section, level: 6" node_number="153"><h2 class="valid" valid="valid" title="valid: True, node: 154, tag: h2, level: 7" node_number="154">Step 6: Running and Testing the Web Application on Raspberry Pi</h2><div class="valid" valid="valid" title="valid: True, node: 155, tag: div, level: 7" node_number="155"><p class="valid" valid="valid" title="valid: True, node: 156, tag: p, level: 8" node_number="156">&#11088; If the parameters are not set, the web application prints: <i class="valid" valid="valid" title="valid: True, node: 157, tag: i, level: 9" node_number="157">Waiting Data...</i></p><p class="valid" valid="valid" title="valid: True, node: 158, tag: p, level: 8" node_number="158"><i class="valid" valid="valid" title="valid: True, node: 159, tag: i, level: 9" node_number="159">http://localhost/irrigation_level_data_logger/</i></p><p class="valid" valid="valid" title="valid: True, node: 160, tag: p, level: 8" node_number="160">&#11088; Since the Apache server is a protected location, it throws an error while attempting to modify the files and folders in it. Therefore, before utilizing the web application to create the required CSV files to save and collect thermal imaging data, change the web application's folder permission by using the terminal:</p><p class="valid" valid="valid" title="valid: True, node: 161, tag: p, level: 8" node_number="161"><i class="valid" valid="valid" title="valid: True, node: 162, tag: i, level: 9" node_number="162">sudo chmod -R 777 /var/www/html/irrigation_level_data_logger</i></p><p class="valid" valid="valid" title="valid: True, node: 163, tag: p, level: 8" node_number="163">&#11088; If the <i class="valid" valid="valid" title="valid: True, node: 164, tag: i, level: 9" node_number="164">create_files</i> parameter is received and equals <i class="valid" valid="valid" title="valid: True, node: 165, tag: i, level: 9" node_number="165">ok</i>, the web application creates the required CSV files (shown above) and prints recently created file names. </p><p class="valid" valid="valid" title="valid: True, node: 166, tag: p, level: 8" node_number="166"><i class="valid" valid="valid" title="valid: True, node: 167, tag: i, level: 9" node_number="167">http://localhost/irrigation_level_data_logger/?create_files=ok</i></p><p class="valid" valid="valid" title="valid: True, node: 168, tag: p, level: 8" node_number="168">&#11088; If the <i class="valid" valid="valid" title="valid: True, node: 169, tag: i, level: 9" node_number="169">thermal_img</i> (thermal imaging data) and <i class="valid" valid="valid" title="valid: True, node: 170, tag: i, level: 9" node_number="170">level</i> (CSV file name) parameters are received, the web application processes the given thermal imaging data as an array and inserts it into the given CSV file as a new row.</p><p class="valid" valid="valid" title="valid: True, node: 171, tag: p, level: 8" node_number="171"><i class="valid" valid="valid" title="valid: True, node: 172, tag: i, level: 9" node_number="172">http://localhost/irrigation_level_data_logger/?thermal_img=&lt;_data_&gt;level=&lt;_file_name_&gt;</i></p><p class="valid" valid="valid" title="valid: True, node: 173, tag: p, level: 8" node_number="173">&#11088; Then, if the given thermal imaging data is inserted successfully, the application prints:</p><p class="valid" valid="valid" title="valid: True, node: 174, tag: p, level: 8" node_number="174"><i class="valid" valid="valid" title="valid: True, node: 175, tag: i, level: 9" node_number="175">The given line is added to the &lt;_file_name_&gt;.csv file successfully!</i></p></div></section><section class="valid" valid="valid" title="valid: True, node: 176, tag: section, level: 6" node_number="176"><h2 class="valid" valid="valid" title="valid: True, node: 177, tag: h2, level: 7" node_number="177">Step 7: Updating and Setting Up Wio Terminal</h2><div class="valid" valid="valid" title="valid: True, node: 178, tag: div, level: 7" node_number="178"><p class="valid" valid="valid" title="valid: True, node: 179, tag: p, level: 8" node_number="179">Since the Wio Terminal provides Wi-Fi connectivity via the built-in Wireless Core Realtek RTL8720, I employed the Wio Terminal to display and transfer the thermal imaging data generated by the MLX90641 thermal imaging camera. However, before proceeding with the following steps, I needed to update the Wireless Core Firmware to the latest version to enable wireless connectivity since Seeed moved the Wi-Fi software to the new eRPC structure. Fortunately, Seeed provides a tool named ambd_flash_tool to erase the existing firmware on the RTL8720 and also flash the latest firmware.</p><p class="valid" valid="valid" title="valid: True, node: 180, tag: p, level: 8" node_number="180">I updated the Wireless Core Firmware on Windows. You can get more information from <a class="valid" valid="valid" title="valid: True, node: 181, tag: a, level: 9" node_number="181">here</a> for Mac/ Linux.</p><p class="valid" valid="valid" title="valid: True, node: 182, tag: p, level: 8" node_number="182">#&#65039;&#8419; Open Windows PowerShell and execute the commands below to download the flashing tool.</p><p class="valid" valid="valid" title="valid: True, node: 183, tag: p, level: 8" node_number="183">cd ~</p><p class="valid" valid="valid" title="valid: True, node: 184, tag: p, level: 8" node_number="184">git clone https://github.com/Seeed-Studio/ambd_flash_tool</p><p class="valid" valid="valid" title="valid: True, node: 185, tag: p, level: 8" node_number="185">#&#65039;&#8419; Navigate to the ambd_flash_tool directory:</p><p class="valid" valid="valid" title="valid: True, node: 186, tag: p, level: 8" node_number="186">cd ambd_flash_tool</p><p class="valid" valid="valid" title="valid: True, node: 187, tag: p, level: 8" node_number="187">#&#65039;&#8419; Connect the Wio Terminal to the PC and turn it on.</p><p class="valid" valid="valid" title="valid: True, node: 188, tag: p, level: 8" node_number="188">#&#65039;&#8419; Execute the following command to erase the initial firmware:</p><p class="valid" valid="valid" title="valid: True, node: 189, tag: p, level: 8" node_number="189">.\ambd_flash_tool.exe erase</p><p class="valid" valid="valid" title="valid: True, node: 190, tag: p, level: 8" node_number="190">#&#65039;&#8419; After erasing the initial firmware, inside the ambd_flash_tool directory, execute the following command to flash the latest firmware to the RTL8720:</p><p class="valid" valid="valid" title="valid: True, node: 191, tag: p, level: 8" node_number="191">.\ambd_flash_tool.exe flash</p><p class="valid" valid="valid" title="valid: True, node: 192, tag: p, level: 8" node_number="192">After updating the Wireless Core Firmware successfully, I installed the Seeed SAMD Arduino Core on the Arduino IDE and downloaded the required libraries for this project.</p><p class="valid" valid="valid" title="valid: True, node: 193, tag: p, level: 8" node_number="193">#&#65039;&#8419; To set up the Seeed SAMD Arduino Core, open the Arduino IDE, click Tools &#10145; Board &#10145; Boards Manager, and search for Wio Terminal in the search box. Then, install Seeed SAMD Boards.</p><p class="valid" valid="valid" title="valid: True, node: 194, tag: p, level: 8" node_number="194">#&#65039;&#8419; Download the required libraries for Wi-Fi connectivity:</p><p class="valid" valid="valid" title="valid: True, node: 195, tag: p, level: 8" node_number="195">Seeed_Arduino_rpcWiFi | <a class="valid" valid="valid" title="valid: True, node: 196, tag: a, level: 9" node_number="196">Download</a></p><p class="valid" valid="valid" title="valid: True, node: 197, tag: p, level: 8" node_number="197">Seeed_Arduino_rpcUnified | <a class="valid" valid="valid" title="valid: True, node: 198, tag: a, level: 9" node_number="198">Download</a></p><p class="valid" valid="valid" title="valid: True, node: 199, tag: p, level: 8" node_number="199">Seeed_Arduino_mbedtls | <a class="valid" valid="valid" title="valid: True, node: 200, tag: a, level: 9" node_number="200">Download</a></p><p class="valid" valid="valid" title="valid: True, node: 201, tag: p, level: 8" node_number="201">Seeed_Arduino_FS | <a class="valid" valid="valid" title="valid: True, node: 202, tag: a, level: 9" node_number="202">Download</a></p><p class="valid" valid="valid" title="valid: True, node: 203, tag: p, level: 8" node_number="203">Seeed_Arduino_SFUD | <a class="valid" valid="valid" title="valid: True, node: 204, tag: a, level: 9" node_number="204">Download</a></p><p class="valid" valid="valid" title="valid: True, node: 205, tag: p, level: 8" node_number="205">#&#65039;&#8419; Download the required library for the MLX90641 thermal imaging camera:</p><p class="valid" valid="valid" title="valid: True, node: 206, tag: p, level: 8" node_number="206">Seeed_Arduino_MLX9064x | <a class="valid" valid="valid" title="valid: True, node: 207, tag: a, level: 9" node_number="207">Download</a></p></div></section><section class="valid" valid="valid" title="valid: True, node: 208, tag: section, level: 6" node_number="208"><h2 class="valid" valid="valid" title="valid: True, node: 209, tag: h2, level: 7" node_number="209">Step 8: Collecting and Transferring Irrigation Level Data by Thermal Imaging W/ Wio Terminal</h2><div class="valid" valid="valid" title="valid: True, node: 210, tag: div, level: 7" node_number="210"><p class="valid" valid="valid" title="valid: True, node: 211, tag: p, level: 8" node_number="211">After setting up the Wio Terminal and enabling Wi-Fi connectivity, I programmed the Wio Terminal to send the thermal imaging data generated by the MLX90641 thermal imaging camera to the web application.</p><p class="valid" valid="valid" title="valid: True, node: 212, tag: p, level: 8" node_number="212">Since I needed to assign irrigation classes (labels) empirically for each thermal imaging array (input) to create a data set, I utilized the 5-way switch integrated into the Wio Terminal to choose among irrigation classes. After selecting an irrigation class, the Wio Terminal sends thermal imaging data (array) to the web application, and the web application saves the transferred data to the chosen class' CSV file:</p><ul class="valid" valid="valid" title="valid: True, node: 213, tag: ul, level: 8" node_number="213"><li class="valid" valid="valid" title="valid: True, node: 214, tag: li, level: 9" node_number="214">Up &#10145; Excessive </li><li class="valid" valid="valid" title="valid: True, node: 215, tag: li, level: 9" node_number="215">Left &#10145; Sufficient </li><li class="valid" valid="valid" title="valid: True, node: 216, tag: li, level: 9" node_number="216">Right &#10145; Moderate </li><li class="valid" valid="valid" title="valid: True, node: 217, tag: li, level: 9" node_number="217">Down &#10145; Dry </li></ul><p class="valid" valid="valid" title="valid: True, node: 218, tag: p, level: 8" node_number="218">You can download the <i class="valid" valid="valid" title="valid: True, node: 219, tag: i, level: 9" node_number="219">irrigation_level_detection_data_collect.ino</i> file to try and inspect the code for thermal imaging data collecting with Wio Terminal. </p><p class="valid" valid="valid" title="valid: True, node: 220, tag: p, level: 8" node_number="220">&#11088; Include the required libraries.</p><pre class="valid" valid="valid" title="valid: True, node: 221, tag: pre, level: 8" node_number="221"> #include &lt;rpcWiFi.h&gt; #include &lt;TFT_eSPI.h&gt; #include &lt;Wire.h&gt; #include "MLX90641_API.h" #include "MLX9064X_I2C_Driver.h" </pre><p class="valid" valid="valid" title="valid: True, node: 222, tag: p, level: 8" node_number="222">&#11088; Define the Wi-Fi network settings and use the <i class="valid" valid="valid" title="valid: True, node: 223, tag: i, level: 9" node_number="223">WiFiClient</i> class to create TCP connections.</p><pre class="valid" valid="valid" title="valid: True, node: 224, tag: pre, level: 8" node_number="224"> const char* ssid = "&lt;_SSID_&gt;"; const char* password = "&lt;_PASSWORD_&gt;"; // Define the server settings: const uint16_t port = 80; // Default port const char* host = "192.168.1.20"; // Target Server IP Address // Use the WiFiClient class to create TCP connections: WiFiClient client; </pre><p class="valid" valid="valid" title="valid: True, node: 225, tag: p, level: 8" node_number="225">&#11088; Define the MLX90641 thermal imaging camera settings.</p><p class="valid" valid="valid" title="valid: True, node: 226, tag: p, level: 8" node_number="226">&#11088; Define the maximum and minimum temperature values.</p><pre class="valid" valid="valid" title="valid: True, node: 227, tag: pre, level: 8" node_number="227"> const byte MLX90641_address = 0x33; // Default 7-bit unshifted address of the MLX90641. #define TA_SHIFT 12 // Default shift value for MLX90641 in the open air. uint16_t eeMLX90641[832]; float MLX90641To[192]; uint16_t MLX90641Frame[242]; paramsMLX90641 MLX90641; int errorno = 0; // Define the maximum and minimum temperature values: uint16_t MinTemp = 21; uint16_t MaxTemp = 45; </pre><p class="valid" valid="valid" title="valid: True, node: 228, tag: p, level: 8" node_number="228">&#11088; Initialize the I2C clock for the MLX90641 thermal imaging camera.</p><pre class="valid" valid="valid" title="valid: True, node: 229, tag: pre, level: 8" node_number="229"> Wire.begin(); Wire.setClock(2000000); // Increase the I2C clock speed to 2M. </pre><p class="valid" valid="valid" title="valid: True, node: 230, tag: p, level: 8" node_number="230">&#11088; Initiate the TFT screen.</p><pre class="valid" valid="valid" title="valid: True, node: 231, tag: pre, level: 8" node_number="231"> tft.begin(); tft.setRotation(3); tft.fillScreen(TFT_BLACK); tft.setTextColor(TFT_BLACK); tft.setTextSize(1); </pre><p class="valid" valid="valid" title="valid: True, node: 232, tag: p, level: 8" node_number="232">&#11088; Check the connection status between the MLX90641 thermal imaging camera and the Wio Terminal.</p><pre class="valid" valid="valid" title="valid: True, node: 233, tag: pre, level: 8" node_number="233"> if(isConnected() == false){ tft.fillScreen(TFT_RED); tft.drawString("MLX90641 not detected at default I2C address!", 5, 10); tft.drawString("Please check wiring. Freezing.", 5, 25); while (1); } </pre><p class="valid" valid="valid" title="valid: True, node: 234, tag: p, level: 8" node_number="234">&#11088; Get the MLX90641 thermal imaging camera parameters. Once params are extracted, release the <i class="valid" valid="valid" title="valid: True, node: 235, tag: i, level: 9" node_number="235">eeMLX90641</i> array.</p><pre class="valid" valid="valid" title="valid: True, node: 236, tag: pre, level: 8" node_number="236"> MLX90641_SetRefreshRate(MLX90641_address, 0x05); // Set rate to 16Hz. </pre><p class="valid" valid="valid" title="valid: True, node: 237, tag: p, level: 8" node_number="237">&#11088; In the <i class="valid" valid="valid" title="valid: True, node: 238, tag: i, level: 9" node_number="238">Getabcd</i> function, get the cutoff points based on the given maximum and minimum temperature values.</p><pre class="valid" valid="valid" title="valid: True, node: 239, tag: pre, level: 8" node_number="239"> void Getabcd() { // Get the cutoff points based on the given maximum and minimum temperature values. a = MinTemp + (MaxTemp - MinTemp) * 0.2121; b = MinTemp + (MaxTemp - MinTemp) * 0.3182; c = MinTemp + (MaxTemp - MinTemp) * 0.4242; d = MinTemp + (MaxTemp - MinTemp) * 0.8182; } </pre><p class="valid" valid="valid" title="valid: True, node: 240, tag: p, level: 8" node_number="240">&#11088; Set the Wi-Fi module to station mode and disconnect from an AP if it was previously connected.</p><p class="valid" valid="valid" title="valid: True, node: 241, tag: p, level: 8" node_number="241">&#11088; Attempt to connect to the given Wi-Fi network.</p><pre class="valid" valid="valid" title="valid: True, node: 242, tag: pre, level: 8" node_number="242"> WiFi.mode(WIFI_STA); WiFi.disconnect(); delay(2000); WiFi.begin(ssid, password); // Attempt to connect to the given Wi-Fi network: while(WiFi.status() != WL_CONNECTED){ delay(500); tft.fillScreen(TFT_RED); tft.drawString("Connecting to Wi-Fi...", 5, 10); } tft.setTextSize(2); tft.fillScreen(TFT_GREENYELLOW); tft.drawString("Connected to", 5, 10); tft.drawString("the Wi-Fi network!", 5, 40); delay(3000); tft.fillScreen(TFT_BLUE); </pre><p class="valid" valid="valid" title="valid: True, node: 243, tag: p, level: 8" node_number="243">&#11088; In the <i class="valid" valid="valid" title="valid: True, node: 244, tag: i, level: 9" node_number="244">draw_menu</i> function, draw the irrigation class options (Up, Left, Right, Down) and the border of the simple image generated from the thermal imaging array (16x12). </p><pre class="valid" valid="valid" title="valid: True, node: 245, tag: pre, level: 8" node_number="245"> void draw_menu(int start_x, int start_y, int w, int h){ // Draw the border: int offset = 10; tft.drawRoundRect(start_x-offset, start_y-offset, (2*offset)+(w*16), (2*offset)+(h*12), 10, TFT_WHITE); // Draw options: int x_c = 52; int x_s = x_c - 7; int y_c = 210; int y_s = y_c - 11; int sp = 72; tft.setTextSize(1); ///////////////////////////////////// tft.fillCircle(x_c, y_c, 20, TFT_WHITE); tft.drawChar(x_s, y_s, 'U', TFT_BLACK, TFT_WHITE, 3); tft.drawString("Excessive", x_c - 25, y_c - 33); ///////////////////////////////////// tft.fillCircle(x_c + sp, y_c, 20, TFT_WHITE); tft.drawChar(x_s + sp, y_s, 'L', TFT_BLACK, TFT_WHITE, 3); tft.drawString("Sufficient", x_c + sp - 28, y_c - 33); ///////////////////////////////////// tft.fillCircle(x_c + (2*sp), y_c, 20, TFT_WHITE); tft.drawChar(x_s + (2*sp), y_s, 'R', TFT_BLACK, TFT_WHITE, 3); tft.drawString("Moderate", x_s + (2*sp) - 16, y_c - 33); ///////////////////////////////////// tft.fillCircle(x_c + (3*sp), y_c, 20, TFT_WHITE); tft.drawChar(x_s + (3*sp), y_s, 'D', TFT_BLACK, TFT_WHITE, 3); tft.drawString("Dry", x_c + (3*sp) - 8, y_c - 33); } </pre><p class="valid" valid="valid" title="valid: True, node: 246, tag: p, level: 8" node_number="246">&#11088; In the <i class="valid" valid="valid" title="valid: True, node: 247, tag: i, level: 9" node_number="247">get_and_display_data_from_MLX90641</i> function, after executing the <i class="valid" valid="valid" title="valid: True, node: 248, tag: i, level: 9" node_number="248">draw_menu</i> function, elicit the 16x12 pixel IR thermal imaging array generated by the MLX90641 thermal imaging camera:</p><p class="valid" valid="valid" title="valid: True, node: 249, tag: p, level: 8" node_number="249">&#11088; Obtain the required variables to calculate the thermal imaging array.</p><p class="valid" valid="valid" title="valid: True, node: 250, tag: p, level: 8" node_number="250">&#11088; Define the reflected temperature based on the sensor's ambient temperature.</p><p class="valid" valid="valid" title="valid: True, node: 251, tag: p, level: 8" node_number="251">&#11088; Create the thermal imaging array.</p><p class="valid" valid="valid" title="valid: True, node: 252, tag: p, level: 8" node_number="252">&#11088; Then, convert the 16x12 pixel IR thermal imaging array to string <i class="valid" valid="valid" title="valid: True, node: 253, tag: i, level: 9" node_number="253">(MLX90641_data)</i> so as to transfer it to the web application.</p><p class="valid" valid="valid" title="valid: True, node: 254, tag: p, level: 8" node_number="254">&#11088; To display a simple image version of the recently generated thermal imaging array (16x12) on the screen, assign colors for each element (pixel) in the array by using the <i class="valid" valid="valid" title="valid: True, node: 255, tag: i, level: 9" node_number="255">GetColor</i> function.</p><p class="valid" valid="valid" title="valid: True, node: 256, tag: p, level: 8" node_number="256">&#11088; Finally, draw each pixel (rectangle) to create a simple image version of the given thermal imaging array.</p><pre class="valid" valid="valid" title="valid: True, node: 257, tag: pre, level: 8" node_number="257"> void get_and_display_data_from_MLX90641(int start_x, int start_y, int w, int h){ // Draw the options menu: draw_menu(start_x, start_y, w, h); // Elicit the 16x12 pixel IR thermal imaging array generated by the MLX90641 Thermal Imaging Camera: for(byte x = 0 ; x &lt; 2 ; x++){ int status = MLX90641_GetFrameData(MLX90641_address, MLX90641Frame); // Obtain the required variables to calculate the thermal imaging array: float vdd = MLX90641_GetVdd(MLX90641Frame, MLX90641); float Ta = MLX90641_GetTa(MLX90641Frame, MLX90641); // Define the reflected temperature based on the sensor's ambient temperature: float tr = Ta - TA_SHIFT; float emissivity = 0.95; // Create the thermal imaging array: MLX90641_CalculateTo(MLX90641Frame, MLX90641, emissivity, tr, MLX90641To); } // Define parameters: MLX90641_data = ""; int x = start_x; int y = start_y + (h*11); uint32_t c = TFT_BLUE; for(int i = 0 ; i &lt; 192 ; i++){ // Convert the 16x12 pixel IR thermal imaging array to string (MLX90641_data) so as to transfer it to the web application: MLX90641_data += String(MLX90641To[i]); if(i != 191) MLX90641_data += ","; // Display a simple image version of the collected data (array) on the screen: // Define the color palette: c = GetColor(MLX90641To[i]); // Draw image pixels (rectangles): tft.fillRect(x, y, w, h, c); x = x + w; // Start a new row: int l = i + 1; if (l%16 == 0) { x = start_x; y = y - h; } } } </pre><p class="valid" valid="valid" title="valid: True, node: 258, tag: p, level: 8" node_number="258">&#11088; The <a class="valid" valid="valid" title="valid: True, node: 259, tag: a, level: 9" node_number="259">GetColor</a> function utilizes the built-in color mapping function to get a 5-6-5 color palette (R=5 bits, G=6 bits, B-5 bits) for each pixel according to the equations applied in the function.</p><pre class="valid" valid="valid" title="valid: True, node: 260, tag: pre, level: 8" node_number="260"> uint16_t GetColor(float val){ // Assign colors to the given temperature readings: // R: red = constrain(255.0 / (c - b) * val - ((b * 255.0) / (c - b)), 0, 255); // G: if((val &gt; MinTemp) (val &lt; a)){ green = constrain(255.0 / (a - MinTemp) * val - (255.0 * MinTemp) / (a - MinTemp), 0, 255); }else if((val &gt;= a) (val &lt;= c)){ green = 255; }else if(val &gt; c){ green = constrain(255.0 / (c - d) * val - (d * 255.0) / (c - d), 0, 255); }else if((val &gt; d) | (val &lt; a)){ green = 0; } // B: if(val &lt;= b){ blue = constrain(255.0 / (a - b) * val - (255.0 * b) / (a - b), 0, 255); }else if((val &gt; b) (val &lt;= d)){ blue = 0; }else if (val &gt; d){ blue = constrain(240.0 / (MaxTemp - d) * val - (d * 240.0) / (MaxTemp - d), 0, 240); } // Utilize the built-in color mapping function to get a 5-6-5 color palette (R=5 bits, G=6 bits, B-5 bits): return tft.color565(red, green, blue); } </pre><p class="valid" valid="valid" title="valid: True, node: 261, tag: p, level: 8" node_number="261">&#11088; In the <i class="valid" valid="valid" title="valid: True, node: 262, tag: i, level: 9" node_number="262">make_a_get_request</i> function, make a Get request to the given server to send the recently generated IR thermal imaging array to the given web application <i class="valid" valid="valid" title="valid: True, node: 263, tag: i, level: 9" node_number="263">(irrigation_level_data_logger)</i>.</p><p class="valid" valid="valid" title="valid: True, node: 264, tag: p, level: 8" node_number="264">&#11088; Wait until the client is available, then fetch the response from the given application.</p><p class="valid" valid="valid" title="valid: True, node: 265, tag: p, level: 8" node_number="265">&#11088; If the web application saves the transferred thermal imaging data (array) to the chosen irrigation class' CSV file, then print the message below, including the CSV file name:</p><p class="valid" valid="valid" title="valid: True, node: 266, tag: p, level: 8" node_number="266"><i class="valid" valid="valid" title="valid: True, node: 267, tag: i, level: 9" node_number="267">Data transferred successfully to the web application!</i></p><p class="valid" valid="valid" title="valid: True, node: 268, tag: p, level: 8" node_number="268"><i class="valid" valid="valid" title="valid: True, node: 269, tag: i, level: 9" node_number="269">&lt;file_name&gt;.csv </i></p><pre class="valid" valid="valid" title="valid: True, node: 270, tag: pre, level: 8" node_number="270"> void make_a_get_request(String level){ if(!client.connect(host, port)){ tft.fillScreen(TFT_RED); tft.setTextSize(1); tft.drawString("Connection failed!", 5, 10); tft.drawString("Waiting 5 seconds before retrying...", 5, 25); delay(5000); return; } // Make a Get request to the given server to send the recently generated IR thermal imaging array. String application = "/irrigation_level_data_logger/"; // Define the application name. String query = application + "?thermal_img=" + MLX90641_data + "level=" + level; client.println("GET " + query + " HTTP/1.1"); client.println("Host: 192.168.1.20"); client.println("Connection: close"); client.println(); // Wait until the client is available. int maxloops = 0; while (!client.available() maxloops &lt; 2000) { maxloops++; delay(1); } // Fetch the response from the given application. if(client.available() &gt; 0){ String response = client.readString(); if(response != "" response.indexOf("The given line is added to the") &gt; 0){ tft.fillScreen(TFT_GREEN); tft.setTextSize(2); tft.drawString("Data transferred", 5, 10); tft.drawString("successfully", 5, 40); tft.drawString("to the web application! ", 5, 70); tft.setTextSize(3); tft.drawString(level + ".csv", 5, 130); } }else{ tft.fillScreen(TFT_RED); tft.setTextSize(2); tft.drawString("Client Timeout!", 5, 10); } // Stop the client: client.stop(); delay(3000); tft.fillScreen(TFT_BLUE); } </pre><p class="valid" valid="valid" title="valid: True, node: 271, tag: p, level: 8" node_number="271">&#11088; According to the movement of the 5-way switch (Up, Left, Right, Down), send the recently generated thermal imaging array with the chosen irrigation class name to the web application.</p><pre class="valid" valid="valid" title="valid: True, node: 272, tag: pre, level: 8" node_number="272"> get_and_display_data_from_MLX90641(64, 20, 12, 12); // Define the data (CSV) files: if(digitalRead(WIO_5S_UP) == LOW) make_a_get_request("excessive"); if(digitalRead(WIO_5S_LEFT) == LOW) make_a_get_request("sufficient"); if(digitalRead(WIO_5S_RIGHT) == LOW) make_a_get_request("moderate"); if(digitalRead(WIO_5S_DOWN) == LOW) make_a_get_request("dry"); </pre></div></section><section class="valid" valid="valid" title="valid: True, node: 273, tag: section, level: 6" node_number="273"><h2 class="valid" valid="valid" title="valid: True, node: 274, tag: h2, level: 7" node_number="274">Step 9: Creating the Irrigation Level Data Set by Thermal Imaging</h2><div class="valid" valid="valid" title="valid: True, node: 275, tag: div, level: 7" node_number="275"><p class="valid" valid="valid" title="valid: True, node: 276, tag: p, level: 8" node_number="276">After uploading and running the code for thermal imaging data collecting on the Wio Terminal:</p><p class="valid" valid="valid" title="valid: True, node: 277, tag: p, level: 8" node_number="277">&#127807;&#128167; The device displays thermal imaging arrays as a real-time video stream on the screen.</p><p class="valid" valid="valid" title="valid: True, node: 278, tag: p, level: 8" node_number="278">&#127807;&#128167; When the Wi-Fi module is connected to the given Wi-Fi network successfully, the device prints: <i class="valid" valid="valid" title="valid: True, node: 279, tag: i, level: 9" node_number="279">Connected to the Wi-Fi network!</i></p><p class="valid" valid="valid" title="valid: True, node: 280, tag: p, level: 8" node_number="280">&#127807;&#128167; If the 5-way switch is positioned to the Up, the device sends the recently generated thermal imaging array to the web application with the excessive irrigation class. Then, if the web application saves the given thermal imaging data successfully to the <i class="valid" valid="valid" title="valid: True, node: 281, tag: i, level: 9" node_number="281">excessive.csv</i> file, the device shows:</p><p class="valid" valid="valid" title="valid: True, node: 282, tag: p, level: 8" node_number="282">&#127807;&#128167; If the 5-way switch is positioned to the Left, the device sends the recently generated thermal imaging array to the web application with the sufficient irrigation class. Then, if the web application saves the given thermal imaging data successfully to the <i class="valid" valid="valid" title="valid: True, node: 283, tag: i, level: 9" node_number="283">sufficient.csv</i> file, the device shows:</p><p class="valid" valid="valid" title="valid: True, node: 284, tag: p, level: 8" node_number="284">&#127807;&#128167; If the 5-way switch is positioned to the Right, the device sends the recently generated thermal imaging array to the web application with the moderate irrigation class. Then, if the web application saves the given thermal imaging data successfully to the <i class="valid" valid="valid" title="valid: True, node: 285, tag: i, level: 9" node_number="285">moderate.csv</i> file, the device shows:</p><p class="valid" valid="valid" title="valid: True, node: 286, tag: p, level: 8" node_number="286">&#127807;&#128167; If the 5-way switch is positioned to the Down, the device sends the recently generated thermal imaging array to the web application with the dry irrigation class. Then, if the web application saves the given thermal imaging data successfully to the <i class="valid" valid="valid" title="valid: True, node: 287, tag: i, level: 9" node_number="287">dry.csv</i> file, the device shows:</p><p class="valid" valid="valid" title="valid: True, node: 288, tag: p, level: 8" node_number="288">To train my neural network model so as to make predictions on the irrigation levels (classes) based on thermal imaging, I needed to create a data set with eminent validity. Therefore, I utilized the device to collect thermal imaging data from my plants with different irrigation levels for over one month.</p><p class="valid" valid="valid" title="valid: True, node: 289, tag: p, level: 8" node_number="289">Finally, I had a data set with 1264 inputs in total under these CSV files in the web application:</p><ul class="valid" valid="valid" title="valid: True, node: 290, tag: ul, level: 8" node_number="290"><li class="valid" valid="valid" title="valid: True, node: 291, tag: li, level: 9" node_number="291">dry.csv </li><li class="valid" valid="valid" title="valid: True, node: 292, tag: li, level: 9" node_number="292">moderate.csv </li><li class="valid" valid="valid" title="valid: True, node: 293, tag: li, level: 9" node_number="293">sufficient.csv </li><li class="valid" valid="valid" title="valid: True, node: 294, tag: li, level: 9" node_number="294">excessive.csv </li></ul></div></section><section class="valid" valid="valid" title="valid: True, node: 295, tag: section, level: 6" node_number="295"><h2 class="valid" valid="valid" title="valid: True, node: 296, tag: h2, level: 7" node_number="296">Step 10: Building an Artificial Neural Network (ANN) With TensorFlow</h2><div class="valid" valid="valid" title="valid: True, node: 297, tag: div, level: 7" node_number="297"><p class="valid" valid="valid" title="valid: True, node: 298, tag: p, level: 8" node_number="298">When I completed collating my irrigation level data set by thermal imaging, I had started to work on my artificial neural network model (ANN) to make predictions on the irrigation levels (classes) based on thermal imaging.</p><p class="valid" valid="valid" title="valid: True, node: 299, tag: p, level: 8" node_number="299">I decided to create my neural network model with TensorFlow in Python. Thus, first of all, I followed the steps below to grasp a better understanding of my data set so as to train my model accurately:</p><ul class="valid" valid="valid" title="valid: True, node: 300, tag: ul, level: 8" node_number="300"><li class="valid" valid="valid" title="valid: True, node: 301, tag: li, level: 9" node_number="301">Data Merging (Combining) </li><li class="valid" valid="valid" title="valid: True, node: 302, tag: li, level: 9" node_number="302">Data Scaling (Normalizing) </li><li class="valid" valid="valid" title="valid: True, node: 303, tag: li, level: 9" node_number="303">Data Preprocessing </li><li class="valid" valid="valid" title="valid: True, node: 304, tag: li, level: 9" node_number="304">Data Splitting </li></ul><p class="valid" valid="valid" title="valid: True, node: 305, tag: p, level: 8" node_number="305">As explained in the previous steps, the web application saves the thermal imaging data under four different CSV files according to the empirically chosen irrigation classes. Since the thermal imaging data was already separated by irrigation classes, I preprocessed my data set effortlessly to assign labels for each thermal imaging array (input):</p><ul class="valid" valid="valid" title="valid: True, node: 306, tag: ul, level: 8" node_number="306"><li class="valid" valid="valid" title="valid: True, node: 307, tag: li, level: 9" node_number="307">0 &#8212; Dry </li><li class="valid" valid="valid" title="valid: True, node: 308, tag: li, level: 9" node_number="308">1 &#8212; Moderate </li><li class="valid" valid="valid" title="valid: True, node: 309, tag: li, level: 9" node_number="309">2 &#8212; Sufficient </li><li class="valid" valid="valid" title="valid: True, node: 310, tag: li, level: 9" node_number="310">3 &#8212; Excessive </li></ul><p class="valid" valid="valid" title="valid: True, node: 311, tag: p, level: 8" node_number="311">Since the MLX90641 thermal imaging camera generates 16x12 pixel IR arrays, after scaling (normalizing) and preprocessing inputs, I obtained 192 input variables and one label for each thermal imaging array in my data set. Then, I built an artificial neural network model with TensorFlow and trained it with my training data set to acquire the best results and predictions possible.</p><p class="valid" valid="valid" title="valid: True, node: 312, tag: p, level: 8" node_number="312">Layers:</p><ul class="valid" valid="valid" title="valid: True, node: 313, tag: ul, level: 8" node_number="313"><li class="valid" valid="valid" title="valid: True, node: 314, tag: li, level: 9" node_number="314">192 [Input] </li><li class="valid" valid="valid" title="valid: True, node: 315, tag: li, level: 9" node_number="315">128 [Hidden] </li><li class="valid" valid="valid" title="valid: True, node: 316, tag: li, level: 9" node_number="316">4 [Output] </li></ul><p class="valid" valid="valid" title="valid: True, node: 317, tag: p, level: 8" node_number="317">To execute all steps above and convert my model from a TensorFlow Keras H5 model to a C array (.h file) to run the model on the Wio Terminal, I developed an application in Python. As shown below, the application consists of three code files and two folders:</p><ul class="valid" valid="valid" title="valid: True, node: 318, tag: ul, level: 8" node_number="318"><li class="valid" valid="valid" title="valid: True, node: 319, tag: li, level: 9" node_number="319">main.py </li><li class="valid" valid="valid" title="valid: True, node: 320, tag: li, level: 9" node_number="320">test_data.py </li><li class="valid" valid="valid" title="valid: True, node: 321, tag: li, level: 9" node_number="321">tflite_to_c_array.py </li><li class="valid" valid="valid" title="valid: True, node: 322, tag: li, level: 9" node_number="322">/data </li><li class="valid" valid="valid" title="valid: True, node: 323, tag: li, level: 9" node_number="323">/model </li></ul><p class="valid" valid="valid" title="valid: True, node: 324, tag: p, level: 8" node_number="324">First of all, I created a class named <i class="valid" valid="valid" title="valid: True, node: 325, tag: i, level: 9" node_number="325">Irrigation_Level</i> in the <i class="valid" valid="valid" title="valid: True, node: 326, tag: i, level: 9" node_number="326">main.py</i> file to execute the following functions precisely.</p><p class="valid" valid="valid" title="valid: True, node: 327, tag: p, level: 8" node_number="327">&#11088; Include the required modules.</p><pre class="valid" valid="valid" title="valid: True, node: 328, tag: pre, level: 8" node_number="328"> import tensorflow as tf from tensorflow import keras import matplotlib.pyplot as plt import numpy as np import pandas as pd from test_data import test_inputs, test_labels from tflite_to_c_array import hex_to_c_array </pre><p class="valid" valid="valid" title="valid: True, node: 329, tag: p, level: 8" node_number="329">&#11088; In the <i class="valid" valid="valid" title="valid: True, node: 330, tag: i, level: 9" node_number="330">__init__</i> function, define the required variables for building the neural network model.</p><pre class="valid" valid="valid" title="valid: True, node: 331, tag: pre, level: 8" node_number="331"> def __init__(self, data_files): self.scale_val = 22 self.labels = [] self.data_files = data_files self.model_name = "irrigation_model" </pre><p class="valid" valid="valid" title="valid: True, node: 332, tag: p, level: 8" node_number="332">I will elucidate each file and function in detail in the following steps.</p></div></section><section class="valid" valid="valid" title="valid: True, node: 333, tag: section, level: 6" node_number="333"><h2 class="valid" valid="valid" title="valid: True, node: 334, tag: h2, level: 7" node_number="334">Step 11: Merging and Scaling (normalizing) the Input Data and Assigning Labels (irrigation Classes)</h2><div class="valid" valid="valid" title="valid: True, node: 335, tag: div, level: 7" node_number="335"><p class="valid" valid="valid" title="valid: True, node: 336, tag: p, level: 8" node_number="336">Since the thermal imaging data is separated under four different CSV files with irrigation class names in the web application, as shown below, I needed to merge (combine) and preprocess all data before proceeding.</p><p class="valid" valid="valid" title="valid: True, node: 337, tag: p, level: 8" node_number="337">To be able to read CSV files in Python, I moved all CSV files from the web application to the <i class="valid" valid="valid" title="valid: True, node: 338, tag: i, level: 9" node_number="338">data</i> folder:</p><ul class="valid" valid="valid" title="valid: True, node: 339, tag: ul, level: 8" node_number="339"><li class="valid" valid="valid" title="valid: True, node: 340, tag: li, level: 9" node_number="340">dry.csv </li><li class="valid" valid="valid" title="valid: True, node: 341, tag: li, level: 9" node_number="341">moderate.csv </li><li class="valid" valid="valid" title="valid: True, node: 342, tag: li, level: 9" node_number="342">sufficient.csv </li><li class="valid" valid="valid" title="valid: True, node: 343, tag: li, level: 9" node_number="343">excessive.csv </li></ul><p class="valid" valid="valid" title="valid: True, node: 344, tag: p, level: 8" node_number="344">After merging (combining) all thermal imaging data, I utilized each thermal imaging array generated by the MLX90641 thermal imaging camera in my data set as an input. Then, I scaled (normalized) each input to format the input data properly.</p><p class="valid" valid="valid" title="valid: True, node: 345, tag: p, level: 8" node_number="345">&#11088; In the <i class="valid" valid="valid" title="valid: True, node: 346, tag: i, level: 9" node_number="346">combine_and_scale_data_to_define_inputs</i> funtion, merge (combine) thermal imaging data from all CSV files to create inputs:</p><p class="valid" valid="valid" title="valid: True, node: 347, tag: p, level: 8" node_number="347">&#11088; Define the <i class="valid" valid="valid" title="valid: True, node: 348, tag: i, level: 9" node_number="348">output</i> array.</p><p class="valid" valid="valid" title="valid: True, node: 349, tag: p, level: 8" node_number="349">&#11088; Read data from all CSV files in the given file list as NumPy arrays by using the <i class="valid" valid="valid" title="valid: True, node: 350, tag: i, level: 9" node_number="350">genfromtxt</i> function.</p><p class="valid" valid="valid" title="valid: True, node: 351, tag: p, level: 8" node_number="351">&#11088; Then, append the recently collated data for each CSV file as NumPy arrays to the <i class="valid" valid="valid" title="valid: True, node: 352, tag: i, level: 9" node_number="352">output</i> array.</p><p class="valid" valid="valid" title="valid: True, node: 353, tag: p, level: 8" node_number="353">&#11088; Finally, merge all NumPy arrays in the <i class="valid" valid="valid" title="valid: True, node: 354, tag: i, level: 9" node_number="354">output</i> array as the <i class="valid" valid="valid" title="valid: True, node: 355, tag: i, level: 9" node_number="355">inputs</i> NumPy array by using the <i class="valid" valid="valid" title="valid: True, node: 356, tag: i, level: 9" node_number="356">concatenate</i> function.</p><p class="valid" valid="valid" title="valid: True, node: 357, tag: p, level: 8" node_number="357">&#11088; Each input includes 192 parameters [shape=(192,)]:</p><ul class="valid" valid="valid" title="valid: True, node: 358, tag: ul, level: 8" node_number="358"><li class="valid" valid="valid" title="valid: True, node: 359, tag: li, level: 9" node_number="359"><i class="valid" valid="valid" title="valid: True, node: 360, tag: i, level: 10" node_number="360">[22.31, 22.66, 22.39, 22.25, 22.80, 25.00, 28.80, 28.84, ...]</i></li></ul><p class="valid" valid="valid" title="valid: True, node: 361, tag: p, level: 8" node_number="361">&#11088; After creating the <i class="valid" valid="valid" title="valid: True, node: 362, tag: i, level: 9" node_number="362">inputs</i> array, divide it by 22 (scale value) to format the input data properly.</p><pre class="valid" valid="valid" title="valid: True, node: 363, tag: pre, level: 8" node_number="363"> def combine_and_scale_data_to_define_inputs(self): # Define the output array. output = [] for file in self.data_files: # Define the given CSV file path. csv_path = "data\{}.csv".format(file) # Read data from the given CSV file. with open(csv_path, 'r') as f: data = np.genfromtxt(f, dtype=float, delimiter=',') # Append the recently collated data to the output array. output.append(data) f.close() # Combine all data from each irrigation level (class) to create the inputs array. self.inputs = np.concatenate([output[i] for i in range(len(output))]) # Scale the inputs array. self.inputs = self.inputs / self.scale_val </pre><p class="valid" valid="valid" title="valid: True, node: 364, tag: p, level: 8" node_number="364">After creating inputs from thermal imaging arrays, I needed to assign labels to train my neural network model.</p><p class="valid" valid="valid" title="valid: True, node: 365, tag: p, level: 8" node_number="365">&#11088; In the <i class="valid" valid="valid" title="valid: True, node: 366, tag: i, level: 9" node_number="366">define_and_assign_labels</i> function, define irrigation classes for each CSV file in the given file list:</p><ul class="valid" valid="valid" title="valid: True, node: 367, tag: ul, level: 8" node_number="367"><li class="valid" valid="valid" title="valid: True, node: 368, tag: li, level: 9" node_number="368">0 &#8212; Dry </li><li class="valid" valid="valid" title="valid: True, node: 369, tag: li, level: 9" node_number="369">1 &#8212; Moderate </li><li class="valid" valid="valid" title="valid: True, node: 370, tag: li, level: 9" node_number="370">2 &#8212; Sufficient </li><li class="valid" valid="valid" title="valid: True, node: 371, tag: li, level: 9" node_number="371">3 &#8212; Excessive </li></ul><p class="valid" valid="valid" title="valid: True, node: 372, tag: p, level: 8" node_number="372">&#11088; Read data from all CSV files.</p><p class="valid" valid="valid" title="valid: True, node: 373, tag: p, level: 8" node_number="373">&#11088; For each thermal imaging array (input) in a given CSV file, append its assigned label (irrigation class) [0 - 3] to the <i class="valid" valid="valid" title="valid: True, node: 374, tag: i, level: 9" node_number="374">labels</i> array.</p><p class="valid" valid="valid" title="valid: True, node: 375, tag: p, level: 8" node_number="375">&#11088; Then, convert the <i class="valid" valid="valid" title="valid: True, node: 376, tag: i, level: 9" node_number="376">labels</i> array to a NumPy array by using the <i class="valid" valid="valid" title="valid: True, node: 377, tag: i, level: 9" node_number="377">asarray</i> function.</p><pre class="valid" valid="valid" title="valid: True, node: 378, tag: pre, level: 8" node_number="378"> def define_and_assign_labels(self): _class = 0 for file in self.data_files: # Define the irrigation classes: if (file == "dry"): _class = 0 elif (file == "moderate"): _class = 1 elif (file == "sufficient"): _class = 2 elif (file == "excessive"): _class = 3 # Define the given CSV file path. csv_path = "data\{}.csv".format(file) # Read data from the given CSV file. with open(csv_path, 'r') as f: data = np.genfromtxt(f, dtype=float, delimiter=',') # Assign labels for each input in the given irrigation level (CSV file). for i in range(len(data)): self.labels.append(_class) f.close() self.labels = np.asarray(self.labels) </pre></div></section><section class="valid" valid="valid" title="valid: True, node: 379, tag: section, level: 6" node_number="379"><h2 class="valid" valid="valid" title="valid: True, node: 380, tag: h2, level: 7" node_number="380">Step 12: Training the Model (ANN) on the Irrigation Levels (classes)</h2><div class="valid" valid="valid" title="valid: True, node: 381, tag: div, level: 7" node_number="381"><p class="valid" valid="valid" title="valid: True, node: 382, tag: p, level: 8" node_number="382">Since my irrigation level data set by thermal imaging is already limited (1264 inputs and labels), I decided to utilize all of my data set as the training data set instead of splitting it into training and testing data sets. Thus, I created a separate testing data set in the <i class="valid" valid="valid" title="valid: True, node: 383, tag: i, level: 9" node_number="383">test_data.py</i> file.</p><p class="valid" valid="valid" title="valid: True, node: 384, tag: p, level: 8" node_number="384">After defining training and testing data sets, I scaled (normalized) the testing data set inputs to format them properly.</p><pre class="valid" valid="valid" title="valid: True, node: 385, tag: pre, level: 8" node_number="385"> def split_data(self): # (training) self.train_inputs = self.inputs self.train_labels = self.labels # (test) self.test_inputs = test_inputs / self.scale_val self.test_labels = test_labels # Print the total input and label numbers. print("Total Input: " + str(len(self.train_inputs)) + "Total Label: " + str(len(self.train_labels)) + "") </pre><p class="valid" valid="valid" title="valid: True, node: 386, tag: p, level: 8" node_number="386">Then, I built my artificial neural network model (ANN) by using Keras and trained it with the training set for twenty epochs.</p><p class="valid" valid="valid" title="valid: True, node: 387, tag: p, level: 8" node_number="387">You can inspect <a class="valid" valid="valid" title="valid: True, node: 388, tag: a, level: 9" node_number="388">these tutorials</a> to learn about activation functions, loss functions, epochs, etc. </p><pre class="valid" valid="valid" title="valid: True, node: 389, tag: pre, level: 8" node_number="389"> def build_and_train_model(self): # Build the neural network: self.model = keras.Sequential([ keras.Input(shape=(192,)), keras.layers.Dense(128, activation='relu'), keras.layers.Dense(4, activation='softmax') ]) # Compile: self.model.compile(optimizer='adam', loss="sparse_categorical_crossentropy", metrics=['accuracy']) # Train: self.model.fit(self.train_inputs, self.train_labels, epochs=20) ... </pre><p class="valid" valid="valid" title="valid: True, node: 390, tag: p, level: 8" node_number="390">After training with the training set (1264 inputs and labels), the accuracy of my neural network model is between <i class="valid" valid="valid" title="valid: True, node: 391, tag: i, level: 9" node_number="391">0.93</i> and <i class="valid" valid="valid" title="valid: True, node: 392, tag: i, level: 9" node_number="392">0.97</i>.</p></div></section><section class="valid" valid="valid" title="valid: True, node: 393, tag: section, level: 6" node_number="393"><h2 class="valid" valid="valid" title="valid: True, node: 394, tag: h2, level: 7" node_number="394">Step 13: Evaluating the Model Accuracy and Converting the Model to a C Array</h2><div class="valid" valid="valid" title="valid: True, node: 395, tag: div, level: 7" node_number="395"><p class="valid" valid="valid" title="valid: True, node: 396, tag: p, level: 8" node_number="396">After building and training my artificial neural network model, I tested its accuracy and validity by utilizing the testing data set (inputs and labels).</p><p class="valid" valid="valid" title="valid: True, node: 397, tag: p, level: 8" node_number="397">The evaluated accuracy of the model is <i class="valid" valid="valid" title="valid: True, node: 398, tag: i, level: 9" node_number="398">0.9167</i>.</p><pre class="valid" valid="valid" title="valid: True, node: 399, tag: pre, level: 8" node_number="399"> ... # Test the accuracy: print("Model Evaluation:") test_loss, test_acc = self.model.evaluate(self.test_inputs, self.test_labels) print("Evaluated Accuracy: ", test_acc) </pre><p class="valid" valid="valid" title="valid: True, node: 400, tag: p, level: 8" node_number="400">After evaluating my neural network model, I saved it as a TensorFlow Keras H5 model <i class="valid" valid="valid" title="valid: True, node: 401, tag: i, level: 9" node_number="401">(irrigation_model.h5)</i> to the <i class="valid" valid="valid" title="valid: True, node: 402, tag: i, level: 9" node_number="402">model</i> folder.</p><pre class="valid" valid="valid" title="valid: True, node: 403, tag: pre, level: 8" node_number="403"> def save_model(self): self.model.save("model/{}.h5".format(self.model_name)) </pre><p class="valid" valid="valid" title="valid: True, node: 404, tag: p, level: 8" node_number="404">However, running a TensorFlow Keras H5 model on the Wio Terminal to make predictions on the irrigation levels (classes) is not eligible and efficient considering size, latency, and power consumption.</p><p class="valid" valid="valid" title="valid: True, node: 405, tag: p, level: 8" node_number="405">Thus, I converted my neural network model from a TensorFlow Keras H5 model (.h5) to a TensorFlow Lite model (.tflite). Then, I modified the TensorFlow Lite model to create a C array (.h file) to run the model on the Wio Terminal successfully.</p><p class="valid" valid="valid" title="valid: True, node: 406, tag: p, level: 8" node_number="406">To alter the TensorFlow Lite model to a C array, I applied the <i class="valid" valid="valid" title="valid: True, node: 407, tag: i, level: 9" node_number="407">hex_to_c_array</i> function copied directly from <a class="valid" valid="valid" title="valid: True, node: 408, tag: a, level: 9" node_number="408">this tutorial</a> to the <i class="valid" valid="valid" title="valid: True, node: 409, tag: i, level: 9" node_number="409">tflite_to_c_array.py</i> file.</p><p class="valid" valid="valid" title="valid: True, node: 410, tag: p, level: 8" node_number="410">&#11088; In the <i class="valid" valid="valid" title="valid: True, node: 411, tag: i, level: 9" node_number="411">convert_TF_model</i> function, convert the recently trained and evaluated model to a TensorFlow Lite model by applying the <a class="valid" valid="valid" title="valid: True, node: 412, tag: a, level: 9" node_number="412">TensorFlow Lite converter</a><i class="valid" valid="valid" title="valid: True, node: 413, tag: i, level: 9" node_number="413">(tf.lite.TFLiteConverter.from_keras_model)</i>.</p><p class="valid" valid="valid" title="valid: True, node: 414, tag: p, level: 8" node_number="414">&#11088; Then, save the converted TensorFlow Lite model <i class="valid" valid="valid" title="valid: True, node: 415, tag: i, level: 9" node_number="415">(irrigation_model.tflite)</i> to the <i class="valid" valid="valid" title="valid: True, node: 416, tag: i, level: 9" node_number="416">model</i> folder.</p><p class="valid" valid="valid" title="valid: True, node: 417, tag: p, level: 8" node_number="417">&#11088; Modify the recently created TensorFlow Lite model to a C array (.h file) by executing the <i class="valid" valid="valid" title="valid: True, node: 418, tag: i, level: 9" node_number="418">hex_to_c_array</i> function.</p><p class="valid" valid="valid" title="valid: True, node: 419, tag: p, level: 8" node_number="419">&#11088; Finally, save the converted C array <i class="valid" valid="valid" title="valid: True, node: 420, tag: i, level: 9" node_number="420">(irrigation_model.h)</i> to the <i class="valid" valid="valid" title="valid: True, node: 421, tag: i, level: 9" node_number="421">model</i> folder.</p><pre class="valid" valid="valid" title="valid: True, node: 422, tag: pre, level: 8" node_number="422"> def convert_TF_model(self, path): #model = tf.keras.models.load_model(path + ".h5") converter = tf.lite.TFLiteConverter.from_keras_model(self.model) #converter.optimizations = [tf.lite.Optimize.DEFAULT] #converter.target_spec.supported_types = [tf.float16] tflite_model = converter.convert() # Save the TensorFlow Lite model. with open(path + '.tflite', 'wb') as f: f.write(tflite_model) print("TensorFlow Keras H5 model converted to a TensorFlow Lite model!") # Convert the recently created TensorFlow Lite model to hex bytes (C array) to generate a .h file string. with open("model/{}.h".format(self.model_name), 'w') as file: file.write(hex_to_c_array(tflite_model, self.model_name)) print("TensorFlow Lite model converted to a C header (.h) file!") </pre></div></section><section class="valid" valid="valid" title="valid: True, node: 423, tag: section, level: 6" node_number="423"><h2 class="valid" valid="valid" title="valid: True, node: 424, tag: h2, level: 7" node_number="424">Step 14: Setting Up the Model on Wio Terminal</h2><div class="valid" valid="valid" title="valid: True, node: 425, tag: div, level: 7" node_number="425"><p class="valid" valid="valid" title="valid: True, node: 426, tag: p, level: 8" node_number="426">After building, training, and converting my neural network model to a C array (.h file), I needed to upload and run the model directly on the Wio Terminal so as to create an easy-to-use device without any dependencies.</p><p class="valid" valid="valid" title="valid: True, node: 427, tag: p, level: 8" node_number="427">Fortunately, there is an official library provided by TensorFlow to run inferences on microcontrollers with the TensorFlow Lite models converted to C arrays. Although, for now, it only supports a few development boards, including the Wio Terminal, it is a fast and efficient library for running basic neural network models on microcontrollers. Since <a class="valid" valid="valid" title="valid: True, node: 428, tag: a, level: 9" node_number="428">TensorFlow Lite for Microcontrollers</a> does not require operating system support, any standard C or C++ libraries, or dynamic memory allocation, the Wio Terminal can detect irrigation levels (classes) without needing Wi-Fi connectivity.</p><p class="valid" valid="valid" title="valid: True, node: 429, tag: p, level: 8" node_number="429">&#11088; To download the TensorFlow Lite library on the Arduino IDE, go to <i class="valid" valid="valid" title="valid: True, node: 430, tag: i, level: 9" node_number="430">Sketch &#10145; Include Library &#10145; Manage Libraries&#8230;</i> and search for TensorFlow. Then, install the latest version of the <i class="valid" valid="valid" title="valid: True, node: 431, tag: i, level: 9" node_number="431">Arduino_TensorFlowLite</i> library.</p><p class="valid" valid="valid" title="valid: True, node: 432, tag: p, level: 8" node_number="432">After installing the TensorFlow Lite library on the Arduino IDE, I needed to import my neural network model modified as a C array <i class="valid" valid="valid" title="valid: True, node: 433, tag: i, level: 9" node_number="433">(irrigation_model.h)</i> to run inferences.</p><p class="valid" valid="valid" title="valid: True, node: 434, tag: p, level: 8" node_number="434">&#11088; To import the converted C array (.h file), go to <i class="valid" valid="valid" title="valid: True, node: 435, tag: i, level: 9" node_number="435">Sketch &#10145; Add File...</i></p><p class="valid" valid="valid" title="valid: True, node: 436, tag: p, level: 8" node_number="436">After importing the converted C array (.h file) successfully to the Arduino IDE, I modified the code in <a class="valid" valid="valid" title="valid: True, node: 437, tag: a, level: 9" node_number="437">this tutorial from TensorFlow</a> to run my neural network model. I utilized the 5-way switch integrated into the Wio Terminal to run inference to detect irrigation levels (classes):</p><ul class="valid" valid="valid" title="valid: True, node: 438, tag: ul, level: 8" node_number="438"><li class="valid" valid="valid" title="valid: True, node: 439, tag: li, level: 9" node_number="439">Press &#10145; Run Inference </li></ul><p class="valid" valid="valid" title="valid: True, node: 440, tag: p, level: 8" node_number="440">You can download the <i class="valid" valid="valid" title="valid: True, node: 441, tag: i, level: 9" node_number="441">irrigation_level_detection_run_model.ino</i> file to try and inspect the code for running TensorFlow Lite neural network models on Wio Terminal.</p><p class="valid" valid="valid" title="valid: True, node: 442, tag: p, level: 8" node_number="442">&#11088; Include the required libraries.</p><p class="valid" valid="valid" title="valid: True, node: 443, tag: p, level: 8" node_number="443">&#11088; Since the <i class="valid" valid="valid" title="valid: True, node: 444, tag: i, level: 9" node_number="444">min</i> and <i class="valid" valid="valid" title="valid: True, node: 445, tag: i, level: 9" node_number="445">max</i> functions defined for the Wio Terminal are also defined in the TensorFlow Lite library, add <i class="valid" valid="valid" title="valid: True, node: 446, tag: i, level: 9" node_number="446">#undef max</i> and <i class="valid" valid="valid" title="valid: True, node: 447, tag: i, level: 9" node_number="447">#undef min</i> to avoid compile errors.</p><pre class="valid" valid="valid" title="valid: True, node: 448, tag: pre, level: 8" node_number="448"> #include &lt;TFT_eSPI.h&gt; ////////////////////////////// // Add to avoid system errors. #undef max #undef min ////////////////////////////// #include &lt;Wire.h&gt; #include "MLX90641_API.h" #include "MLX9064X_I2C_Driver.h" </pre><p class="valid" valid="valid" title="valid: True, node: 449, tag: p, level: 8" node_number="449">&#11088; Import the required TensorFlow modules.</p><pre class="valid" valid="valid" title="valid: True, node: 450, tag: pre, level: 8" node_number="450"> #include "TensorFlowLite.h" #include "tensorflow/lite/micro/kernels/micro_ops.h" #include "tensorflow/lite/micro/micro_error_reporter.h" #include "tensorflow/lite/micro/micro_interpreter.h" #include "tensorflow/lite/micro/all_ops_resolver.h" #include "tensorflow/lite/version.h" </pre><p class="valid" valid="valid" title="valid: True, node: 451, tag: p, level: 8" node_number="451">&#11088; Include the TensorFlow Lite model modified as a C array (.h file).</p><p class="valid" valid="valid" title="valid: True, node: 452, tag: p, level: 8" node_number="452">&#11088; Define the TFLite globals used for compatibility with Arduino-style sketches.</p><p class="valid" valid="valid" title="valid: True, node: 453, tag: p, level: 8" node_number="453">&#11088; Create an area of memory to use for input, output, and other TensorFlow arrays.</p><pre class="valid" valid="valid" title="valid: True, node: 454, tag: pre, level: 8" node_number="454"> #include "irrigation_model.h" // TFLite globals, used for compatibility with Arduino-style sketches: namespace { tflite::ErrorReporter* error_reporter = nullptr; const tflite::Model* model = nullptr; tflite::MicroInterpreter* interpreter = nullptr; TfLiteTensor* model_input = nullptr; TfLiteTensor* model_output = nullptr; // Create an area of memory to use for input, output, and other TensorFlow arrays. constexpr int kTensorArenaSize = 15 * 1024; uint8_t tensor_arena[kTensorArenaSize]; } // namespace </pre><p class="valid" valid="valid" title="valid: True, node: 455, tag: p, level: 8" node_number="455">&#11088; Define the threshold value for the model outputs (results).</p><p class="valid" valid="valid" title="valid: True, node: 456, tag: p, level: 8" node_number="456">&#11088; Define the irrigation level (class) names and color codes:</p><ul class="valid" valid="valid" title="valid: True, node: 457, tag: ul, level: 8" node_number="457"><li class="valid" valid="valid" title="valid: True, node: 458, tag: li, level: 9" node_number="458">Dry &#10145; Green </li><li class="valid" valid="valid" title="valid: True, node: 459, tag: li, level: 9" node_number="459">Moderate &#10145; Greenyellow </li><li class="valid" valid="valid" title="valid: True, node: 460, tag: li, level: 9" node_number="460">Sufficient &#10145; Orange </li><li class="valid" valid="valid" title="valid: True, node: 461, tag: li, level: 9" node_number="461">Excessive &#10145; Red </li></ul><pre class="valid" valid="valid" title="valid: True, node: 462, tag: pre, level: 8" node_number="462"> float threshold = 0.75; // Define the irrigation level (class) names and color codes: String classes[] = {"Dry", "Moderate", "Sufficient", "Excessive"}; uint32_t class_color_codes[] = {TFT_GREEN, TFT_GREENYELLOW, TFT_ORANGE, TFT_RED}; </pre><p class="valid" valid="valid" title="valid: True, node: 463, tag: p, level: 8" node_number="463">&#11088; Define the MLX90641 thermal imaging camera settings.</p><p class="valid" valid="valid" title="valid: True, node: 464, tag: p, level: 8" node_number="464">&#11088; Define the maximum and minimum temperature values.</p><pre class="valid" valid="valid" title="valid: True, node: 465, tag: pre, level: 8" node_number="465"> const byte MLX90641_address = 0x33; // Default 7-bit unshifted address of the MLX90641. #define TA_SHIFT 12 // Default shift value for MLX90641 in the open air. uint16_t eeMLX90641[832]; float MLX90641To[192]; uint16_t MLX90641Frame[242]; paramsMLX90641 MLX90641; int errorno = 0; // Define the maximum and minimum temperature values: uint16_t MinTemp = 21; uint16_t MaxTemp = 45; </pre><p class="valid" valid="valid" title="valid: True, node: 466, tag: p, level: 8" node_number="466">&#11088; Initialize the I2C clock for the MLX90641 thermal imaging camera.</p><pre class="valid" valid="valid" title="valid: True, node: 467, tag: pre, level: 8" node_number="467"> Wire.begin(); Wire.setClock(2000000); // Increase the I2C clock speed to 2M. </pre><p class="valid" valid="valid" title="valid: True, node: 468, tag: p, level: 8" node_number="468">&#11088; Initiate the TFT screen.</p><pre class="valid" valid="valid" title="valid: True, node: 469, tag: pre, level: 8" node_number="469"> tft.begin(); tft.setRotation(3); tft.fillScreen(TFT_BLACK); tft.setTextColor(TFT_BLACK); tft.setTextSize(1); </pre><p class="valid" valid="valid" title="valid: True, node: 470, tag: p, level: 8" node_number="470">&#11088; Check the connection status between the MLX90641 thermal imaging camera and the Wio Terminal.</p><pre class="valid" valid="valid" title="valid: True, node: 471, tag: pre, level: 8" node_number="471"> if(isConnected() == false){ tft.fillScreen(TFT_RED); tft.drawString("MLX90641 not detected at default I2C address!", 5, 10); tft.drawString("Please check wiring. Freezing.", 5, 25); while (1); } </pre><p class="valid" valid="valid" title="valid: True, node: 472, tag: p, level: 8" node_number="472">&#11088; Get the MLX90641 thermal imaging camera parameters. Once params are extracted, release the <i class="valid" valid="valid" title="valid: True, node: 473, tag: i, level: 9" node_number="473">eeMLX90641</i> array.</p><pre class="valid" valid="valid" title="valid: True, node: 474, tag: pre, level: 8" node_number="474"> MLX90641_SetRefreshRate(MLX90641_address, 0x05); // Set rate to 16Hz. </pre><p class="valid" valid="valid" title="valid: True, node: 475, tag: p, level: 8" node_number="475">&#11088; Define the TensorFlow Lite model settings:</p><p class="valid" valid="valid" title="valid: True, node: 476, tag: p, level: 8" node_number="476">&#11088; Set up logging (will report to Serial, even within TFLite functions).</p><p class="valid" valid="valid" title="valid: True, node: 477, tag: p, level: 8" node_number="477">&#11088; Map the model into a usable data structure.</p><pre class="valid" valid="valid" title="valid: True, node: 478, tag: pre, level: 8" node_number="478"> static tflite::MicroErrorReporter micro_error_reporter; error_reporter = micro_error_reporter; // Map the model into a usable data structure. model = tflite::GetModel(irrigation_model); if (model-&gt;version() != TFLITE_SCHEMA_VERSION) { error_reporter-&gt;Report("Model version does not match Schema"); while(1); } </pre><p class="valid" valid="valid" title="valid: True, node: 479, tag: p, level: 8" node_number="479">&#11088; Pull all the operation implementations.</p><p class="valid" valid="valid" title="valid: True, node: 480, tag: p, level: 8" node_number="480">&#11088; Build an interpreter to run the model.</p><pre class="valid" valid="valid" title="valid: True, node: 481, tag: pre, level: 8" node_number="481"> // This pulls in all the operation implementations we need. // NOLINTNEXTLINE(runtime-global-variables) static tflite::AllOpsResolver resolver; // Build an interpreter to run the model. static tflite::MicroInterpreter static_interpreter( model, resolver, tensor_arena, kTensorArenaSize, error_reporter); interpreter = static_interpreter; </pre><p class="valid" valid="valid" title="valid: True, node: 482, tag: p, level: 8" node_number="482">&#11088; Allocate memory from the <i class="valid" valid="valid" title="valid: True, node: 483, tag: i, level: 9" node_number="483">tensor_arena</i> for the model's tensors.</p><p class="valid" valid="valid" title="valid: True, node: 484, tag: p, level: 8" node_number="484">&#11088; Assign model input and output buffers (tensors) to pointers.</p><pre class="valid" valid="valid" title="valid: True, node: 485, tag: pre, level: 8" node_number="485"> TfLiteStatus allocate_status = interpreter-&gt;AllocateTensors(); if (allocate_status != kTfLiteOk) { error_reporter-&gt;Report("AllocateTensors() failed"); while(1); } // Assign model input and output buffers (tensors) to pointers. model_input = interpreter-&gt;input(0); model_output = interpreter-&gt;output(0); </pre><p class="valid" valid="valid" title="valid: True, node: 486, tag: p, level: 8" node_number="486">&#11088; In the <i class="valid" valid="valid" title="valid: True, node: 487, tag: i, level: 9" node_number="487">draw_menu</i> function, draw the run inference option (Press) and the border of the simple image generated from the thermal imaging array (16x12).</p><pre class="valid" valid="valid" title="valid: True, node: 488, tag: pre, level: 8" node_number="488"> void draw_menu(int start_x, int start_y, int w, int h){ // Draw the border: int offset = 10; tft.drawRoundRect(start_x-offset, start_y-offset, (2*offset)+(w*16), (2*offset)+(h*12), 10, TFT_WHITE); // Draw options: int x_c = 320 / 2; int x_s = x_c - 7; int y_c = 210; int y_s = y_c - 11; tft.setTextSize(1); ///////////////////////////////////// tft.fillCircle(x_c, y_c, 20, TFT_WHITE); tft.drawChar(x_s, y_s, 'P', TFT_BLACK, TFT_WHITE, 3); tft.drawString("'Press' to run the NN model", x_c - 80, y_c - 33); ///////////////////////////////////// } </pre><p class="valid" valid="valid" title="valid: True, node: 489, tag: p, level: 8" node_number="489">&#11088; In the <i class="valid" valid="valid" title="valid: True, node: 490, tag: i, level: 9" node_number="490">get_and_display_data_from_MLX90641</i> function, after executing the <i class="valid" valid="valid" title="valid: True, node: 491, tag: i, level: 9" node_number="491">draw_menu</i> function, elicit the 16x12 pixel IR thermal imaging array generated by the MLX90641 thermal imaging camera:</p><p class="valid" valid="valid" title="valid: True, node: 492, tag: p, level: 8" node_number="492">&#11088; Obtain the required variables to calculate the thermal imaging array.</p><p class="valid" valid="valid" title="valid: True, node: 493, tag: p, level: 8" node_number="493">&#11088; Define the reflected temperature based on the sensor's ambient temperature.</p><p class="valid" valid="valid" title="valid: True, node: 494, tag: p, level: 8" node_number="494">&#11088; Create the thermal imaging array - <i class="valid" valid="valid" title="valid: True, node: 495, tag: i, level: 9" node_number="495">MLX90641To</i>.</p><p class="valid" valid="valid" title="valid: True, node: 496, tag: p, level: 8" node_number="496">&#11088; To display a simple image version of the recently generated thermal imaging array (16x12) on the screen, assign colors for each element (pixel) in the array by using the <i class="valid" valid="valid" title="valid: True, node: 497, tag: i, level: 9" node_number="497">GetColor</i> function.</p><p class="valid" valid="valid" title="valid: True, node: 498, tag: p, level: 8" node_number="498">&#11088; Finally, draw each pixel (rectangle) to create a simple image version of the given thermal imaging array.</p><pre class="valid" valid="valid" title="valid: True, node: 499, tag: pre, level: 8" node_number="499"> void get_and_display_data_from_MLX90641(int start_x, int start_y, int w, int h){ // Draw the options menu: draw_menu(start_x, start_y, w, h); // Elicit the 16x12 pixel IR thermal imaging array generated by the MLX90641 Thermal Imaging Camera: for(byte x = 0 ; x &lt; 2 ; x++){ int status = MLX90641_GetFrameData(MLX90641_address, MLX90641Frame); // Obtain the required variables to calculate the thermal imaging array: float vdd = MLX90641_GetVdd(MLX90641Frame, MLX90641); float Ta = MLX90641_GetTa(MLX90641Frame, MLX90641); // Define the reflected temperature based on the sensor's ambient temperature: float tr = Ta - TA_SHIFT; float emissivity = 0.95; // Create the thermal imaging array: MLX90641_CalculateTo(MLX90641Frame, MLX90641, emissivity, tr, MLX90641To); } // Define parameters: int x = start_x; int y = start_y + (h*11); uint32_t c = TFT_BLUE; for(int i = 0 ; i &lt; 192 ; i++){ // Display a simple image version of the collected data (array) on the screen: // Define the color palette: c = GetColor(MLX90641To[i]); // Draw image pixels (rectangles): tft.fillRect(x, y, w, h, c); x = x + w; // Start a new row: int l = i + 1; if (l%16 == 0) { x = start_x; y = y - h; } } } </pre><p class="valid" valid="valid" title="valid: True, node: 500, tag: p, level: 8" node_number="500">&#11088; In the <i class="valid" valid="valid" title="valid: True, node: 501, tag: i, level: 9" node_number="501">run_inference_to_make_predictions</i> function:</p><p class="valid" valid="valid" title="valid: True, node: 502, tag: p, level: 8" node_number="502">&#11088; Initiate the results (outputs) screen.</p><p class="valid" valid="valid" title="valid: True, node: 503, tag: p, level: 8" node_number="503">&#11088; Copy the recently generated thermal imaging array <i class="valid" valid="valid" title="valid: True, node: 504, tag: i, level: 9" node_number="504">(MLX90641To)</i> to the input buffer (tensor).</p><p class="valid" valid="valid" title="valid: True, node: 505, tag: p, level: 8" node_number="505">&#11088; Run inference.</p><p class="valid" valid="valid" title="valid: True, node: 506, tag: p, level: 8" node_number="506">&#11088; Read predicted y values (irrigation classes) from the output buffer (tensor).</p><p class="valid" valid="valid" title="valid: True, node: 507, tag: p, level: 8" node_number="507">&#11088; Display the detection result greater than the given threshold (0.75). It represents the most accurate label (irrigation class) predicted by the model.</p><pre class="valid" valid="valid" title="valid: True, node: 508, tag: pre, level: 8" node_number="508"> void run_inference_to_make_predictions(){ // Initiate the results screen. tft.fillScreen(TFT_PURPLE); // Copy values (thermal imaging array) to the input buffer (tensor): for(int i = 0; i &lt; 192; i++){ model_input-&gt;data.f[i] = MLX90641To[i]; } // Run inference: TfLiteStatus invoke_status = interpreter-&gt;Invoke(); if (invoke_status != kTfLiteOk) { error_reporter-&gt;Report("Invoke failed on the given input."); } // Read predicted y values (irrigation classes) from the output buffer (tensor): for(int i = 0; i&lt;4; i++){ if(model_output-&gt;data.f[i] &gt;= threshold){ // Display the detection result (class). // Border: int w = 200; int h = 60; int x = (320 - w) / 2; int y = (240 - h) / 2; int offset = 15; int border = 1; int r = 20; tft.drawRoundRect(x - offset - border, y - offset - border, w + (2*offset) + (2*border), h + (2*offset) + (2*border), r, TFT_WHITE); tft.fillRoundRect(x - offset, y - offset, w + (2*offset), h + (2*offset), r, TFT_MAGENTA); tft.fillRoundRect(x, y, w, h, r, class_color_codes[i]); // Print: int str_x = classes[i].length() * 11; int str_y = 12; tft.setTextSize(2); tft.drawString(classes[i], (320 - str_x) / 2, (240 - str_y) / 2); } } // Exit and clear. delay(3000); tft.setTextSize(1); tft.fillScreen(TFT_BLUE); } </pre><p class="valid" valid="valid" title="valid: True, node: 509, tag: p, level: 8" node_number="509">&#11088; If the 5-way switch is pressed, run inference to detect irrigation levels (classes).</p><pre class="valid" valid="valid" title="valid: True, node: 510, tag: pre, level: 8" node_number="510"> get_and_display_data_from_MLX90641(64, 20, 12, 12); // Execute the TensorFlow Lite model to make predictions on the irrigation levels (classes). if(digitalRead(WIO_5S_PRESS) == LOW) run_inference_to_make_predictions(); </pre><p class="valid" valid="valid" title="valid: True, node: 511, tag: p, level: 8" node_number="511">In Step 4, you can inspect <i class="valid" valid="valid" title="valid: True, node: 512, tag: i, level: 9" node_number="512">GetColor</i> and <i class="valid" valid="valid" title="valid: True, node: 513, tag: i, level: 9" node_number="513">Getabcd</i> functions in detail.</p></div></section><section class="valid" valid="valid" title="valid: True, node: 514, tag: section, level: 6" node_number="514"><h2 class="valid" valid="valid" title="valid: True, node: 515, tag: h2, level: 7" node_number="515">Step 15: Running the Model on Wio Terminal to Make Predictions on the Irrigation Classes</h2><div class="valid" valid="valid" title="valid: True, node: 516, tag: div, level: 7" node_number="516"><p class="valid" valid="valid" title="valid: True, node: 517, tag: p, level: 8" node_number="517">My neural network model predicts possibilities of labels (irrigation classes) for each given input (thermal imaging array) as an array of 4 numbers. They represent the model's <i class="valid" valid="valid" title="valid: True, node: 518, tag: i, level: 9" node_number="518">"confidence"</i> that the given input array corresponds to each of the four different irrigation classes based on thermal imaging [0 - 3], as shown in Step 5:</p><ul class="valid" valid="valid" title="valid: True, node: 519, tag: ul, level: 8" node_number="519"><li class="valid" valid="valid" title="valid: True, node: 520, tag: li, level: 9" node_number="520">0 &#8212; Dry </li><li class="valid" valid="valid" title="valid: True, node: 521, tag: li, level: 9" node_number="521">1 &#8212; Moderate </li><li class="valid" valid="valid" title="valid: True, node: 522, tag: li, level: 9" node_number="522">2 &#8212; Sufficient </li><li class="valid" valid="valid" title="valid: True, node: 523, tag: li, level: 9" node_number="523">3 &#8212; Excessive </li></ul><p class="valid" valid="valid" title="valid: True, node: 524, tag: p, level: 8" node_number="524">After importing and setting up the model (as a C array) on the Wio Terminal successfully, I run the model to detect irrigation levels (classes) of various plants in my garden and balcony.</p><p class="valid" valid="valid" title="valid: True, node: 525, tag: p, level: 8" node_number="525">After executing the code for running the model on the Wio Terminal:</p><p class="valid" valid="valid" title="valid: True, node: 526, tag: p, level: 8" node_number="526">&#127807;&#128167; The device displays thermal imaging arrays as a real-time video stream on the screen.</p><p class="valid" valid="valid" title="valid: True, node: 527, tag: p, level: 8" node_number="527">&#127807;&#128167; If the 5-way switch is pressed, the device runs inference with the model by employing the most recently generated thermal imaging array as the input array.</p><p class="valid" valid="valid" title="valid: True, node: 528, tag: p, level: 8" node_number="528">&#127807;&#128167; Then, the device displays the output, which represents the most accurate label (irrigation class) predicted by the model.</p><p class="valid" valid="valid" title="valid: True, node: 529, tag: p, level: 8" node_number="529">&#127807;&#128167; Each irrigation level (class) as the output has its unique color code:</p><ul class="valid" valid="valid" title="valid: True, node: 530, tag: ul, level: 8" node_number="530"><li class="valid" valid="valid" title="valid: True, node: 531, tag: li, level: 9" node_number="531">Dry &#10145; Green </li><li class="valid" valid="valid" title="valid: True, node: 532, tag: li, level: 9" node_number="532">Moderate &#10145; Greenyellow </li><li class="valid" valid="valid" title="valid: True, node: 533, tag: li, level: 9" node_number="533">Sufficient &#10145; Orange </li><li class="valid" valid="valid" title="valid: True, node: 534, tag: li, level: 9" node_number="534">Excessive &#10145; Red </li></ul><p class="valid" valid="valid" title="valid: True, node: 535, tag: p, level: 8" node_number="535">&#127807;&#128167; As far as my experiments go, the device works impeccably while detecting irrigation levels (classes) of various plants in different conditions :)</p></div></section><section class="valid" valid="valid" title="valid: True, node: 536, tag: section, level: 6" node_number="536"><h2 class="valid" valid="valid" title="valid: True, node: 537, tag: h2, level: 7" node_number="537">Step 16: Videos and Conclusion</h2><div class="valid" valid="valid" title="valid: True, node: 538, tag: div, level: 7" node_number="538"><p class="valid" valid="valid" title="valid: True, node: 539, tag: p, level: 8" node_number="539">After completing all steps above and experimenting, I have employed the device to apply precise irrigation scheduling to my plants so as to improve water use efficiency.</p></div></section><section class="valid" valid="valid" title="valid: True, node: 540, tag: section, level: 6" node_number="540"><h2 class="valid" valid="valid" title="valid: True, node: 541, tag: h2, level: 7" node_number="541">Step 17: Further Discussions</h2><div class="valid" valid="valid" title="valid: True, node: 542, tag: div, level: 7" node_number="542"><p class="valid" valid="valid" title="valid: True, node: 543, tag: p, level: 8" node_number="543">By applying neural network models trained on thermal imaging and sensing in agriculture, we can achieve to[3]:</p><p class="valid" valid="valid" title="valid: True, node: 544, tag: p, level: 8" node_number="544">&#127807;&#128167; detect seed quality earlier,</p><p class="valid" valid="valid" title="valid: True, node: 545, tag: p, level: 8" node_number="545">&#127807;&#128167; improve irrigation scheduling and agricultural water management,</p><p class="valid" valid="valid" title="valid: True, node: 546, tag: p, level: 8" node_number="546">&#127807;&#128167; detect soil salinity,</p><p class="valid" valid="valid" title="valid: True, node: 547, tag: p, level: 8" node_number="547">&#127807;&#128167; detect plant diseases and pathogens,</p><p class="valid" valid="valid" title="valid: True, node: 548, tag: p, level: 8" node_number="548">&#127807;&#128167; improve crop yield estimation,</p><p class="valid" valid="valid" title="valid: True, node: 549, tag: p, level: 8" node_number="549">&#127807;&#128167; assess crop maturity,</p><p class="valid" valid="valid" title="valid: True, node: 550, tag: p, level: 8" node_number="550">&#127807;&#128167; detect bruises and scratches on fruits and vegetables. </p> References <p class="valid" valid="valid" title="valid: True, node: 551, tag: p, level: 8" node_number="551">[1] I.F. Garc&#237;a-Tejero, A.E. Rubio, I. Vi&#241;uela, A Hern&#225;ndez, S Guti&#233;rrez-Gordillo, C.R. Rodr&#237;guez-Pleguezuelo, V.H. Dur&#225;n-Zuazo, <i class="valid" valid="valid" title="valid: True, node: 552, tag: i, level: 9" node_number="552">Thermal imaging at plant level to assess the crop-water status in almond trees (cv. Guara) under deficit irrigation strategies</i>, Agricultural Water Management, Volume 208, 2018, Pages 176-186, ISSN 0378-3774, <i class="valid" valid="valid" title="valid: True, node: 553, tag: i, level: 9" node_number="553">https://doi.org/10.1016/j.agwat.2018.06.002</i>.</p><p class="valid" valid="valid" title="valid: True, node: 554, tag: p, level: 8" node_number="554">[2] Olga M. Grant, &#321;ukasz Tronina, Hamlyn G. Jones, M. Manuela Chaves, <i class="valid" valid="valid" title="valid: True, node: 555, tag: i, level: 9" node_number="555">Exploring thermal imaging variables for the detection of stress responses in grapevine under different irrigation regimes</i>, Journal of Experimental Botany, Volume 58, Issue 4, March 2007, Pages 815&#8211;825, <i class="valid" valid="valid" title="valid: True, node: 556, tag: i, level: 9" node_number="556">https://doi.org/10.1093/jxb/erl153</i>.</p><p class="valid" valid="valid" title="valid: True, node: 557, tag: p, level: 8" node_number="557">[3] Roselyne Ishimwe, K. Abutaleb, F. Ahmed, <i class="valid" valid="valid" title="valid: True, node: 558, tag: i, level: 9" node_number="558">Applications of Thermal Imaging in Agriculture&#8212;A Review</i>, Advances in Remote Sensing, Volume 3, Issue 3, September 2014, Pages 128-140, <i class="valid" valid="valid" title="valid: True, node: 559, tag: i, level: 9" node_number="559">http://dx.doi.org/10.4236/ars.2014.33011</i>.</p></div></section><section class="valid" valid="valid" title="valid: True, node: 560, tag: section, level: 6" node_number="560"><h2 class="valid" valid="valid" title="valid: True, node: 561, tag: h2, level: 7" node_number="561">Step 18: Schematics</h2></section><section class="valid" valid="valid" title="valid: True, node: 562, tag: section, level: 6" node_number="562"><h2 class="valid" valid="valid" title="valid: True, node: 563, tag: h2, level: 7" node_number="563">Step 19: Code and Downloads</h2><div class="valid" valid="valid" title="valid: True, node: 564, tag: div, level: 7" node_number="564"><h3 class="valid" valid="valid" title="valid: True, node: 565, tag: h3, level: 8" node_number="565"><a class="valid" valid="valid" title="valid: True, node: 566, tag: a, level: 9" node_number="566">Install and inspect code files.</a></h3><h3 class="valid" valid="valid" title="valid: True, node: 567, tag: h3, level: 8" node_number="567"><a class="valid" valid="valid" title="valid: True, node: 568, tag: a, level: 9" node_number="568">Install and inspect STL files.</a></h3></div></section><div class="valid" valid="valid" title="valid: True, node: 569, tag: div, level: 6" node_number="569"><div class="valid" valid="valid" title="valid: True, node: 570, tag: div, level: 7" node_number="570"><p class="valid" valid="valid" title="valid: True, node: 571, tag: p, level: 8" node_number="571">This is an entry in the <a class="valid" valid="valid" title="valid: True, node: 572, tag: a, level: 9" node_number="572">Anything Goes Contest 2021</a></p></div></div><section class="valid" valid="valid" title="valid: True, node: 573, tag: section, level: 6" node_number="573"><h2 class="valid" valid="valid" title="valid: True, node: 574, tag: h2, level: 7" node_number="574"> Be the First to Share </h2><div class="valid" valid="valid" title="valid: True, node: 575, tag: div, level: 7" node_number="575"><div class="valid" valid="valid" title="valid: True, node: 576, tag: div, level: 8" node_number="576"><p class="valid" valid="valid" title="valid: True, node: 577, tag: p, level: 9" node_number="577">Did you make this project? Share it with us!</p></div></div></section><section class="valid" valid="valid" title="valid: True, node: 578, tag: section, level: 6" node_number="578"><h2 class="valid" valid="valid" title="valid: True, node: 579, tag: h2, level: 7" node_number="579">Recommendations</h2><div class="valid" valid="valid" title="valid: True, node: 580, tag: div, level: 7" node_number="580"><div class="valid" valid="valid" title="valid: True, node: 581, tag: div, level: 8" node_number="581"><div class="valid" valid="valid" title="valid: True, node: 582, tag: div, level: 9" node_number="582"><a class="valid" valid="valid" title="valid: True, node: 583, tag: a, level: 10" node_number="583">NYC Hot Dog Machine</a> by bekathwia in Electronics</div><div class="valid" valid="valid" title="valid: True, node: 584, tag: div, level: 9" node_number="584"><span class="valid" valid="valid" title="valid: True, node: 585, tag: span, level: 10" node_number="585"> 16 4.0K </span></div></div><div class="valid" valid="valid" title="valid: True, node: 586, tag: div, level: 8" node_number="586"><div class="valid" valid="valid" title="valid: True, node: 587, tag: div, level: 9" node_number="587">"Circuit-Tree" the Singing Christmas Tree by BrownDogGadgets in Microcontrollers</div><div class="valid" valid="valid" title="valid: True, node: 588, tag: div, level: 9" node_number="588"> 36 4.8K </div></div><div class="valid" valid="valid" title="valid: True, node: 589, tag: div, level: 8" node_number="589"><div class="valid" valid="valid" title="valid: True, node: 590, tag: div, level: 9" node_number="590">Matrix Computer Side Panel by Will Donaldson in Microcontrollers</div><div class="valid" valid="valid" title="valid: True, node: 591, tag: div, level: 9" node_number="591"> 168 21K </div></div><div class="valid" valid="valid" title="valid: True, node: 592, tag: div, level: 8" node_number="592"><div class="valid" valid="valid" title="valid: True, node: 593, tag: div, level: 9" node_number="593">Motorized Light Bulb Changer by mattwach in Tools</div><div class="valid" valid="valid" title="valid: True, node: 594, tag: div, level: 9" node_number="594"><span class="valid" valid="valid" title="valid: True, node: 595, tag: span, level: 10" node_number="595"> 57 7.5K </span></div></div></div><ul class="valid" valid="valid" title="valid: True, node: 596, tag: ul, level: 7" node_number="596"><li class="valid" valid="valid" title="valid: True, node: 597, tag: li, level: 8" node_number="597"><h3 class="valid" valid="valid" title="valid: True, node: 598, tag: h3, level: 9" node_number="598">Anything Goes Contest 2021</h3></li></ul></section><section class="valid" valid="valid" title="valid: True, node: 599, tag: section, level: 6" node_number="599"><h2 class="valid" valid="valid" title="valid: True, node: 600, tag: h2, level: 7" node_number="600">Comments</h2></section></div></div></article></main></body>
        <style tyle='text/css'>
body{
    position: relative;
    padding-left: 30px;
    top: 60px;
}
* {
    border: 1px solid #eee;
    padding: 5px 12px;
    margin: 3px 0;
    box-sizing: content-box;
    background-color: #fff;
    cursor: no-drop;
}
main:hover > *, section:hover > *, header:hover > *, nav:hover > *, a:hover > *, div:hover > *, p:hover > *, ul:hover > *, h1:hover > *, h2:hover > *, h3:hover > *, li:hover > *, span:hover > *{
    border: 2px solid green;
    background-color: #fffeee;
    padding: 5px 23px !important;
    margin: 1px 0;
    color: green;
}
main:hover, section:hover, header:hover, nav:hover, a:hover, div:hover, p:hover, ul:hover, h1:hover, h2:hover, h3:hover, li:hover, span:hover{
    border: 1px solid #fff;
    background-color: #eee;
}
a, span {
    display: block;
}
.selected {
    border: 2px solid orchid !important;
    opacity: 0.8;
    color: orchid !important;
}
.selected * {
    padding: 2px !important;
    color: orchid !important;
}
.valid {
  cursor: pointer;
}
.btn{
  cursor: pointer;
  font-weight: bolder;
  padding: 8px;
}
</style> 
        <script>function OpenOriginalLink($event){
    $event.stopPropagation();
    console.log(url);
}

function removeItem($event){
    $event.stopPropagation();
    console.log('Remove item: ', url)
    localStorage.removeItem(url)
}

function exportData($event){
    $event.stopPropagation();

    result = []
    for(let i=0; i<localStorage.length; i++) {
        let key = localStorage.key(i);
        result.push(localStorage.getItem(key))
    }
    const _url = URL.createObjectURL(new Blob([result.join("\n")], {type: 'text/plain'}))
    $event.target.href = _url;
    localStorage.clear()
}

var removeItemBtn = document.createElement("BUTTON");   // Create a <button> element
removeItemBtn.innerHTML = "Remove Item";
removeItemBtn.classList.add('btn');
removeItemBtn.style.position = "fixed";
removeItemBtn.style.left = '5px';
removeItemBtn.style.top = 0;
removeItemBtn.style.border = "1px solid";
removeItemBtn.style.boxShadow = "3px 3px #888";
removeItemBtn.onclick = removeItem;
document.body.appendChild(removeItemBtn);

var goToOriginLink = document.createElement("A");   // Create a <button> element
goToOriginLink.innerHTML = "GoToOrigin";
goToOriginLink.classList.add('btn');
goToOriginLink.style.position = "fixed"
goToOriginLink.style.left = '115px'
goToOriginLink.style.top = 0;
goToOriginLink.onclick = OpenOriginalLink;
goToOriginLink.setAttribute('href', decodeURIComponent(url));
goToOriginLink.target = '_blank';
document.body.appendChild(goToOriginLink);

var current = new Date
var exportDataLink = document.createElement("A");   // Create a <button> element
exportDataLink.innerHTML = "Export data";
exportDataLink.classList.add('btn');
exportDataLink.download = current.toISOString() + '.exported.txt';
exportDataLink.style.position = "fixed";
exportDataLink.style.right = '5px';
exportDataLink.style.top = 0;
exportDataLink.style.border = "1px solid #888";
exportDataLink.style.boxShadow = "3px 3px #888";
exportDataLink.onclick = exportData;
document.body.appendChild(exportDataLink);

data = {
    'title': null ,
    'article': null
}

var body = document.getElementsByTagName("body")[0];

body.onclick = function($e){
    var num = $e.target.getAttribute('node_number')
    var valid = $e.target.getAttribute('valid')

    if(!valid){
        console.log("Element is invalid")
        return
    }

    if(data.length > 2){
        data = data.splice(0, 2)
    }

    console.log("node:", $e.target)

    if(!data.title && !data.article){
        data.title = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else if (data.title && !data.article){
        data.article = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else{
        selected = Array.from(document.getElementsByClassName("selected"))
        selected.forEach(function(el){
            el.classList.remove('selected')
        })

        data.title = num;
        data.article = null;
        $e.target.classList.add('selected')

    }

    if(data.title && data.article){
        var obj = {
            url: url,
            text: body_html,
            title: data.title,
            article: data.article,
        }

        var datasetItem = JSON.stringify(obj)
        localStorage.setItem(url, datasetItem)
    }
}
</script> 
      </html>