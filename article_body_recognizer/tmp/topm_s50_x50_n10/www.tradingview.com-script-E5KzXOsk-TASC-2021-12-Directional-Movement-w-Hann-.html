<!DOCTYPE html>
<html>
<head>

      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

        <script> var url = encodeURIComponent('https://www.tradingview.com/script/E5KzXOsk-TASC-2021-12-Directional-Movement-w-Hann/');</script>

        <script> var body_html = 'PGJvZHkgPiA8ZGl2ID4gPGRpdiA+IDxkaXYgPiA8ZGl2ID4gIDwvZGl2PiA8ZGl2ID4gPGRpdiA+PHNwYW4gPjxhID5HZXQgc3RhcnRlZDxzbWFsbD48L3NtYWxsPjwvYT48L3NwYW4+PC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDxkaXYgPiA8ZGl2ID4gPGRpdiA+IDxkaXYgPiA8ZGl2ID4gPGRpdiA+IDxkaXYgPiA8ZGl2ID4gPGRpdiA+IDxoMSA+VEFTQyAyMDIxLjEyIERpcmVjdGlvbmFsIE1vdmVtZW50IHcvSGFubjwvaDE+IDwvZGl2PiA8L2Rpdj4gPGRpdiA+IFBpbmVDb2RlcnNUQVNDIDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2ID4gPGRpdiA+IEF2ZXJhZ2UgRGlyZWN0aW9uYWwgSW5kZXggKEFEWCkgPGEgPkRpcmVjdGlvbmFsIE1vdmVtZW50IEluZGV4IChETUkpPC9hPiA8YSA+aGFubjwvYT4gPC9kaXY+IDxkaXYgPiAxMTAyMiB2aWV3cyA8L2Rpdj4gPGRpdiA+IDxkaXYgPiA0NzYgPC9kaXY+IDxkaXYgPiA0IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDxkaXYgPiBhdmVyYWdlZGlyZWN0aW9uYWxpbmRleCA8YSA+ZGlyZWN0aW9uYWxtb3ZlbWVudDwvYT4gPGEgPmhhbm48L2E+IDwvZGl2PiA8ZGl2ID4gPGRpdiA+4paI4oCDT1ZFUlZJRVcgUHJlc2VudGVkIGhlcmUgaXMgY29kZSBmb3IgdGhlICJEaXJlY3Rpb25hbCBNb3ZlbWVudCB3L0hhbm4iIGluZGljYXRvciBvcmlnaW5hbGx5IGNvbmNlaXZlZCBieSBKb2huIOKAi0VobGVycy4gVGhlIGNvZGUgaXMgYWxzbyBwdWJsaXNoZWQgaW4gdGhlIDxhID5EZWNlbWJlciAyMDIxIGlzc3VlIG9mIFRyYWRlcidzIFRpcHM8L2E+IGJ5IDxhID5UZWNobmljYWwgQW5hbHlzaXMgb2YgU3RvY2tzIOKAi0NvbW1vZGl0aWVzIChUQVNDKTwvYT4gbWFnYXppbmUuIDxhID5FaGxlcnM8L2E+IGNvbnRpbnVlcyBoZXJlIGhpcyBleHBsb3JhdGlvbiBvZiB0aGUgYXBwbGljYXRpb24gb2YgPGEgPkhhbm4gd2luZG93aW5nPC9hPiB0byBjb252ZW50aW9uYWwgdHJhZGluZyBpbmRpY2F0b3JzLiDilojigINGRUFUVVJFUyBUaGUgcm9sbGluZyBsZW5ndGggY2FuIGJlIG1vZGlmaWVkIGluIHRoZSBzY3JpcHQncyBpbnB1dHMsIGFzIHdlbGwgYXMgdGhlIHdpZHRoIG9mIHRoZSBsaW5lLiDilojigINOT1RFUyBDYWxjdWxhdGlvbnMgVGhlIGNhbGN1bGF0aW9uIHN0YXJ0cyB3aXRoIHRoZSBjbGFzc2ljIGRlZmluaXRpb24gb2YgUGx1c0RNIGFuZCBNaW51c0RNLiBUaGVzZSBkaXJlY3Rpb25hbCBtb3ZlbWVudHMgYXJlIHN1bW1lZCBpbiBhbiA8YSA+ZXhwb25lbnRpYWwgbW92aW5nIGF2ZXJhZ2U8L2E+ICggPGEgPkVNQTwvYT4gKS4gVGhlbiwgdGhpcyA8YSA+RU1BPC9hPiBpcyBmdXJ0aGVyIHNtb290aGVkIGluIGEgZmluaXRlIGltcHVsc2UgcmVzcG9uc2UgKEZJUikgZmlsdGVyIHVzaW5nIEhhbm4gd2luZG93IGNvZWZmaWNpZW50cyBvdmVyIHRoZSBjYWxjdWxhdGlvbiBwZXJpb2QuIEJhY2tncm91bmQgVGhlIERNSSBhbmQgQURYIGluZGljYXRvcnMgd2VyZSBkZXNpZ25lZCBieSBKLiBXZWxsZXMgV2lsZGVyIGFuZCBwcmVzZW50ZWQgaW4gaGlzICJOZXcgQ29uY2VwdHMgaW4gVGVjaG5pY2FsIFRyYWRpbmcgU3lzdGVtcyIgYm9vayBwdWJsaXNoZWQgaW4gMTk3OC4gPGEgPkpvaW4gVHJhZGluZ1ZpZXchPC9hPjwvZGl2PiA8L2Rpdj4gPGRpdiA+IFRvb2xzIGFuZCBpZGVhcyBmb3IgYWxsIFBpbmUgY29kZXJzOiA8YSA+aHR0cHM6Ly93d3cudHJhZGluZ3ZpZXcuY29tL3UvUGluZUNvZGVycy88L2E+UGluZSBuZXdzIGJyb2FkY2FzdHM6IDxhID5odHRwczovL3QubWUvUGluZUNvZGVyc1NxdWF3a0JveDwvYT4gb3IgPGEgPmh0dHBzOi8vdHdpdHRlci5jb20vUGluZUNvZGVyczwvYT5UQVNDOiA8YSA+aHR0cDovL3RyYWRlcnMuY29tLzwvYT4gPC9kaXY+IDxkaXYgPjxkaXYgPjxkaXYgPjxkaXYgPjxkaXYgPjxhID5Ud2l0dGVyPC9hPjwvZGl2PjxkaXYgPjxhID5XZWJzaXRlPC9hPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PiA8ZGl2ID4gPGRpdiA+IDxkaXYgPk9wZW4tc291cmNlIHNjcmlwdDwvZGl2PiA8L2Rpdj4gPGRpdiA+IDxwPiBJbiB0cnVlIFRyYWRpbmdWaWV3IHNwaXJpdCwgdGhlIGF1dGhvciBvZiB0aGlzIHNjcmlwdCBoYXMgcHVibGlzaGVkIGl0IG9wZW4tc291cmNlLCBzbyB0cmFkZXJzIGNhbiB1bmRlcnN0YW5kIGFuZCB2ZXJpZnkgaXQuIENoZWVycyB0byB0aGUgYXV0aG9yISBZb3UgbWF5IHVzZSBpdCBmb3IgZnJlZSwgYnV0IHJldXNlIG9mIHRoaXMgY29kZSBpbiBhIHB1YmxpY2F0aW9uIGlzIGdvdmVybmVkIGJ5IDxhID5Ib3VzZSBSdWxlczwvYT4uIFlvdSBjYW4gZmF2b3JpdGUgaXQgdG8gdXNlIGl0IG9uIGEgY2hhcnQuIDwvcD4gPC9kaXY+IDxkaXYgPiBXYW50IHRvIHVzZSB0aGlzIHNjcmlwdCBvbiBhIGNoYXJ0PyA8L2Rpdj4gPC9kaXY+IDxkaXYgPiA8ZGl2ID4gPGRpdiA+PHByZSA+PC9wcmU+PC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2JvZHk+'</script>

      </head>
        <body class="valid" valid="valid" title="valid: True, node: 1, level: 1" node_number="1"> <div class="valid" valid="valid" title="valid: True, node: 2, level: 2" node_number="2"> <div class="valid" valid="valid" title="valid: True, node: 3, level: 3" node_number="3"> <div class="valid" valid="valid" title="valid: True, node: 4, level: 4" node_number="4"> <div class="valid" valid="valid" title="valid: True, node: 5, level: 5" node_number="5">  </div> <div class="valid" valid="valid" title="valid: True, node: 6, level: 5" node_number="6"> <div class="valid" valid="valid" title="valid: True, node: 7, level: 6" node_number="7"><span class="valid" valid="valid" title="valid: True, node: 8, level: 7" node_number="8"><a class="valid" valid="valid" title="valid: True, node: 9, level: 8" node_number="9">Get started<small class="valid" valid="valid" title="valid: True, node: 10, level: 9" node_number="10"/></a></span></div> </div> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 11, level: 3" node_number="11"> <div class="valid" valid="valid" title="valid: True, node: 12, level: 4" node_number="12"> <div class="valid" valid="valid" title="valid: True, node: 13, level: 5" node_number="13"> <div class="valid" valid="valid" title="valid: True, node: 14, level: 6" node_number="14"> <div class="valid" valid="valid" title="valid: True, node: 15, level: 7" node_number="15"> <div class="valid" valid="valid" title="valid: True, node: 16, level: 8" node_number="16"> <div class="valid" valid="valid" title="valid: True, node: 17, level: 9" node_number="17"> <div class="valid" valid="valid" title="valid: True, node: 18, level: 10" node_number="18"> <div class="valid" valid="valid" title="valid: True, node: 19, level: 11" node_number="19"> <h1 class="valid" valid="valid" title="valid: True, node: 20, level: 12" node_number="20">TASC 2021.12 Directional Movement w/Hann</h1> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 21, level: 10" node_number="21"> PineCodersTASC </div> </div> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 22, level: 7" node_number="22"> <div class="valid" valid="valid" title="valid: True, node: 23, level: 8" node_number="23"> Average Directional Index (ADX) <a class="valid" valid="valid" title="valid: True, node: 24, level: 9" node_number="24">Directional Movement Index (DMI)</a> <a class="valid" valid="valid" title="valid: True, node: 25, level: 9" node_number="25">hann</a> </div> <div class="valid" valid="valid" title="valid: True, node: 26, level: 8" node_number="26"> 11022 views </div> <div class="valid" valid="valid" title="valid: True, node: 27, level: 8" node_number="27"> <div class="valid" valid="valid" title="valid: True, node: 28, level: 9" node_number="28"> 476 </div> <div class="valid" valid="valid" title="valid: True, node: 29, level: 9" node_number="29"> 4 </div> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 30, level: 7" node_number="30"> averagedirectionalindex <a class="valid" valid="valid" title="valid: True, node: 31, level: 8" node_number="31">directionalmovement</a> <a class="valid" valid="valid" title="valid: True, node: 32, level: 8" node_number="32">hann</a> </div> <div class="valid" valid="valid" title="valid: True, node: 33, level: 7" node_number="33"> <div class="valid" valid="valid" title="valid: True, node: 34, level: 8" node_number="34">&#9608;&#8195;OVERVIEW Presented here is code for the "Directional Movement w/Hann" indicator originally conceived by John &#8203;Ehlers. The code is also published in the <a class="valid" valid="valid" title="valid: True, node: 35, level: 9" node_number="35">December 2021 issue of Trader's Tips</a> by <a class="valid" valid="valid" title="valid: True, node: 36, level: 9" node_number="36">Technical Analysis of Stocks &#8203;Commodities (TASC)</a> magazine. <a class="valid" valid="valid" title="valid: True, node: 37, level: 9" node_number="37">Ehlers</a> continues here his exploration of the application of <a class="valid" valid="valid" title="valid: True, node: 38, level: 9" node_number="38">Hann windowing</a> to conventional trading indicators. &#9608;&#8195;FEATURES The rolling length can be modified in the script's inputs, as well as the width of the line. &#9608;&#8195;NOTES Calculations The calculation starts with the classic definition of PlusDM and MinusDM. These directional movements are summed in an <a class="valid" valid="valid" title="valid: True, node: 39, level: 9" node_number="39">exponential moving average</a> ( <a class="valid" valid="valid" title="valid: True, node: 40, level: 9" node_number="40">EMA</a> ). Then, this <a class="valid" valid="valid" title="valid: True, node: 41, level: 9" node_number="41">EMA</a> is further smoothed in a finite impulse response (FIR) filter using Hann window coefficients over the calculation period. Background The DMI and ADX indicators were designed by J. Welles Wilder and presented in his "New Concepts in Technical Trading Systems" book published in 1978. <a class="valid" valid="valid" title="valid: True, node: 42, level: 9" node_number="42">Join TradingView!</a></div> </div> <div class="valid" valid="valid" title="valid: True, node: 43, level: 7" node_number="43"> Tools and ideas for all Pine coders: <a class="valid" valid="valid" title="valid: True, node: 44, level: 8" node_number="44">https://www.tradingview.com/u/PineCoders/</a>Pine news broadcasts: <a class="valid" valid="valid" title="valid: True, node: 45, level: 8" node_number="45">https://t.me/PineCodersSquawkBox</a> or <a class="valid" valid="valid" title="valid: True, node: 46, level: 8" node_number="46">https://twitter.com/PineCoders</a>TASC: <a class="valid" valid="valid" title="valid: True, node: 47, level: 8" node_number="47">http://traders.com/</a> </div> <div class="valid" valid="valid" title="valid: True, node: 48, level: 7" node_number="48"><div class="valid" valid="valid" title="valid: True, node: 49, level: 8" node_number="49"><div class="valid" valid="valid" title="valid: True, node: 50, level: 9" node_number="50"><div class="valid" valid="valid" title="valid: True, node: 51, level: 10" node_number="51"><div class="valid" valid="valid" title="valid: True, node: 52, level: 11" node_number="52"><a class="valid" valid="valid" title="valid: True, node: 53, level: 12" node_number="53">Twitter</a></div><div class="valid" valid="valid" title="valid: True, node: 54, level: 11" node_number="54"><a class="valid" valid="valid" title="valid: True, node: 55, level: 12" node_number="55">Website</a></div></div></div></div></div> <div class="valid" valid="valid" title="valid: True, node: 56, level: 7" node_number="56"> <div class="valid" valid="valid" title="valid: True, node: 57, level: 8" node_number="57"> <div class="valid" valid="valid" title="valid: True, node: 58, level: 9" node_number="58">Open-source script</div> </div> <div class="valid" valid="valid" title="valid: True, node: 59, level: 8" node_number="59"> <p class="valid" valid="valid" title="valid: True, node: 60, level: 9" node_number="60"> In true TradingView spirit, the author of this script has published it open-source, so traders can understand and verify it. Cheers to the author! You may use it for free, but reuse of this code in a publication is governed by <a class="valid" valid="valid" title="valid: True, node: 61, level: 10" node_number="61">House Rules</a>. You can favorite it to use it on a chart. </p> </div> <div class="valid" valid="valid" title="valid: True, node: 62, level: 8" node_number="62"> Want to use this script on a chart? </div> </div> <div class="valid" valid="valid" title="valid: True, node: 63, level: 7" node_number="63"> <div class="valid" valid="valid" title="valid: True, node: 64, level: 8" node_number="64"> <div class="valid" valid="valid" title="valid: True, node: 65, level: 9" node_number="65"><pre class="valid" valid="valid" title="valid: True, node: 66, level: 10" node_number="66"/></div> </div> </div> </div> </div> </div> </div> </div> </body>
        <style tyle='text/css'>
body{
    position: relative;
    padding-left: 30px;
    top: 60px;
}
* {
    border: 1px solid #eee;
    padding: 5px 12px;
    margin: 3px 0;
    box-sizing: content-box;
    background-color: #fff;
    cursor: no-drop;
}
main:hover > *, section:hover > *, header:hover > *, nav:hover > *, a:hover > *, div:hover > *, p:hover > *, ul:hover > *, h1:hover > *, h2:hover > *, h3:hover > *, li:hover > *, span:hover > *{
    border: 2px solid green;
    background-color: #fffeee;
    padding: 5px 23px !important;
    margin: 1px 0;
    color: green;
}
main:hover, section:hover, header:hover, nav:hover, a:hover, div:hover, p:hover, ul:hover, h1:hover, h2:hover, h3:hover, li:hover, span:hover{
    border: 1px solid #fff;
    background-color: #eee;
}
a, span {
    display: block;
}
.selected {
    border: 2px solid orchid !important;
    opacity: 0.8;
    color: orchid !important;
}
.selected * {
    padding: 2px !important;
    color: orchid !important;
}
.valid {
  cursor: pointer;
}
.btn{
  cursor: pointer;
  font-weight: bolder;
  padding: 8px;
}
</style> 
        <script>function OpenOriginalLink($event){
    $event.stopPropagation();
    console.log(url);
}

function removeItem($event){
    $event.stopPropagation();
    console.log('Remove item: ', url)
    localStorage.removeItem(url)
}

function exportData($event){
    $event.stopPropagation();

    result = []
    for(let i=0; i<localStorage.length; i++) {
        let key = localStorage.key(i);
        result.push(localStorage.getItem(key))
    }
    const _url = URL.createObjectURL(new Blob([result.join("\n")], {type: 'text/plain'}))
    $event.target.href = _url;
    localStorage.clear()
}

var removeItemBtn = document.createElement("BUTTON");   // Create a <button> element
removeItemBtn.innerHTML = "Remove Item";
removeItemBtn.classList.add('btn');
removeItemBtn.style.position = "fixed";
removeItemBtn.style.left = '5px';
removeItemBtn.style.top = 0;
removeItemBtn.style.border = "1px solid";
removeItemBtn.style.boxShadow = "3px 3px #888";
removeItemBtn.onclick = removeItem;
document.body.appendChild(removeItemBtn);

var goToOriginLink = document.createElement("A");   // Create a <button> element
goToOriginLink.innerHTML = "GoToOrigin";
goToOriginLink.classList.add('btn');
goToOriginLink.style.position = "fixed"
goToOriginLink.style.left = '115px'
goToOriginLink.style.top = 0;
goToOriginLink.onclick = OpenOriginalLink;
goToOriginLink.setAttribute('href', decodeURIComponent(url));
goToOriginLink.target = '_blank';
document.body.appendChild(goToOriginLink);

var current = new Date
var exportDataLink = document.createElement("A");   // Create a <button> element
exportDataLink.innerHTML = "Export data";
exportDataLink.classList.add('btn');
exportDataLink.download = current.toISOString() + '.exported.txt';
exportDataLink.style.position = "fixed";
exportDataLink.style.right = '5px';
exportDataLink.style.top = 0;
exportDataLink.style.border = "1px solid #888";
exportDataLink.style.boxShadow = "3px 3px #888";
exportDataLink.onclick = exportData;
document.body.appendChild(exportDataLink);

data = {
    'title': null ,
    'article': null
}

var body = document.getElementsByTagName("body")[0];

body.onclick = function($e){
    var num = $e.target.getAttribute('node_number')
    var valid = $e.target.getAttribute('valid')

    if(!valid){
        console.log("Element is invalid")
        return
    }

    if(data.length > 2){
        data = data.splice(0, 2)
    }

    console.log("node:", $e.target)

    if(!data.title && !data.article){
        data.title = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else if (data.title && !data.article){
        data.article = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else{
        selected = Array.from(document.getElementsByClassName("selected"))
        selected.forEach(function(el){
            el.classList.remove('selected')
        })

        data.title = num;
        data.article = null;
        $e.target.classList.add('selected')

    }

    if(data.title && data.article){
        var obj = {
            url: url,
            text: body_html,
            title: data.title,
            article: data.article,
        }

        var datasetItem = JSON.stringify(obj)
        localStorage.setItem(url, datasetItem)
    }
}
</script> 
      </html>