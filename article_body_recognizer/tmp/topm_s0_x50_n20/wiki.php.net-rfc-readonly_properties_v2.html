<!DOCTYPE html>
<html>
<head>

      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

        <script> var url = encodeURIComponent('https://wiki.php.net/rfc/readonly_properties_v2');</script>

        <script> var body_html = 'PGJvZHkgPiA8ZGl2ID4gPGhlYWRlciA+ICA8L2hlYWRlcj4gPHNlY3Rpb24gPiA8c2VjdGlvbiA+ICA8L3NlY3Rpb24+IDxzZWN0aW9uID4gPGRpdiA+PGRpdiA+IDxkaXYgPiA8ZGl2ID48ZGl2ID4gPGRpdiA+cmZjOnJlYWRvbmx5X3Byb3BlcnRpZXNfdjI8L2Rpdj4gPGRpdiA+IDxoMSA+UEhQIFJGQzogUmVhZG9ubHkgcHJvcGVydGllcyAyLjA8L2gxPiA8ZGl2ID4gPHVsPiA8bGkgPjxkaXYgPiBEYXRlOiAyMDIxLTA2LTAyPC9kaXY+IDwvbGk+IDxsaSA+PGRpdiA+IEF1dGhvcjogTmlraXRhIFBvcG92IG5pa2ljQHBocC5uZXQ8L2Rpdj4gPC9saT4gPGxpID48ZGl2ID4gU3RhdHVzOiBJbXBsZW1lbnRlZDwvZGl2PiA8L2xpPiA8bGkgPjxkaXYgPiBUYXJnZXQgVmVyc2lvbjogUEhQIDguMTwvZGl2PiA8L2xpPiA8bGkgPjxkaXYgPiBJbXBsZW1lbnRhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL3BocC9waHAtc3JjL3B1bGwvNzA4OTwvZGl2PiA8L2xpPiA8L3VsPiA8L2Rpdj4gPGgyID5JbnRyb2R1Y3Rpb248L2gyPiA8ZGl2ID4gPHA+IFRoaXMgPGFiYnIgPlJGQzwvYWJicj4gaW50cm9kdWNlcyBhIDxjb2RlPnJlYWRvbmx5PC9jb2RlPiBwcm9wZXJ0eSBtb2RpZmllciwgd2hpY2ggcHJldmVudHMgbW9kaWZpY2F0aW9uIG9mIHRoZSBwcm9wZXJ0eSBhZnRlciBpbml0aWFsaXphdGlvbi4gPC9wPiA8cD4gVmFsdWUgb2JqZWN0cyBhcmUgb2Z0ZW4gaW1tdXRhYmxlOiBQcm9wZXJ0aWVzIGFyZSBpbml0aWFsaXplZCBvbmNlIGluIHRoZSBjb25zdHJ1Y3RvciwgYW5kIHNob3VsZCBub3QgYmUgbW9kaWZpZWQgYWZ0ZXJ3YXJkcy4gUEhQIGN1cnJlbnRseSBoYXMgbm8gd2F5IHRvIGVuZm9yY2UgdGhpcyBjb25zdHJhaW50LiBUaGUgY2xvc2VzdCBhbHRlcm5hdGl2ZSBpcyB0byBkZWNsYXJlIHRoZSBwcm9wZXJ0eSBwcml2YXRlLCBhbmQgb25seSBleHBvc2UgYSBwdWJsaWMgZ2V0dGVyOiA8L3A+IDxwcmUgPmNsYXNzIFVzZXIgeyBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoIHByaXZhdGUgc3RyaW5nICRuYW1lICkge30gcHVibGljIGZ1bmN0aW9uIGdldE5hbWUoKTogc3RyaW5nIHsgcmV0dXJuICR0aGlzLSZndDtuYW1lOyB9IH08L3ByZT4gPHA+IFRoaXMgZG9lc24ndCBhY3R1YWxseSBtYWtlIHRoZSBwcm9wZXJ0eSByZWFkb25seSwgYnV0IGl0IGRvZXMgdGlnaHRlbiB0aGUgc2NvcGUgd2hlcmUgbW9kaWZpY2F0aW9uIGNvdWxkIG9jY3VyIHRvIGEgc2luZ2xlIGNsYXNzIGRlY2xhcmF0aW9uLiBVbmZvcnR1bmF0ZWx5LCB0aGlzIHJlcXVpcmVzIHRoZSB1c2Ugb2YgZ2V0dGVyIGJvaWxlcnBsYXRlLCB3aGljaCByZXN1bHRzIGluIHdvcnNlIGVyZ29ub21pY3MgZm9yIHRoZSBjb25zdW1lci4gPC9wPiA8cD4gU3VwcG9ydCBmb3IgZmlyc3QtY2xhc3MgcmVhZG9ubHkgcHJvcGVydGllcyBhbGxvd3MgeW91IHRvIGRpcmVjdGx5IGV4cG9zZSBwdWJsaWMgcmVhZG9ubHkgcHJvcGVydGllcywgd2l0aG91dCBmZWFyIHRoYXQgY2xhc3MgaW52YXJpYW50cyBjb3VsZCBiZSBicm9rZW4gdGhyb3VnaCBleHRlcm5hbCBtb2RpZmljYXRpb246IDwvcD4gPHByZSA+Y2xhc3MgVXNlciB7IHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCggcHVibGljIHJlYWRvbmx5IHN0cmluZyAkbmFtZSApIHt9IH08L3ByZT4gPC9kaXY+IDxoMiA+UHJvcG9zYWw8L2gyPiA8ZGl2ID4gPHA+IEEgPGNvZGU+cmVhZG9ubHk8L2NvZGU+IHByb3BlcnR5IGNhbiBvbmx5IGJlIGluaXRpYWxpemVkIG9uY2UsIGFuZCBvbmx5IGZyb20gdGhlIHNjb3BlIHdoZXJlIGl0IGhhcyBiZWVuIGRlY2xhcmVkLiBBbnkgb3RoZXIgYXNzaWdubWVudCBvciBtb2RpZmljYXRpb24gb2YgdGhlIHByb3BlcnR5IHdpbGwgcmVzdWx0IGluIGFuIDxjb2RlPkVycm9yPC9jb2RlPiBleGNlcHRpb24uIDwvcD4gPHByZSA+Y2xhc3MgVGVzdCB7IHB1YmxpYyByZWFkb25seSBzdHJpbmcgJHByb3A7IHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdChzdHJpbmcgJHByb3ApIHsgLy8gTGVnYWwgaW5pdGlhbGl6YXRpb24uICR0aGlzLSZndDtwcm9wID0gJHByb3A7IH0gfSAkdGVzdCA9IG5ldyBUZXN0KCJmb29iYXIiKTsgLy8gTGVnYWwgcmVhZC4gdmFyX2R1bXAoJHRlc3QtJmd0O3Byb3ApOyAvLyBzdHJpbmcoNikgImZvb2JhciIgLy8gSWxsZWdhbCByZWFzc2lnbm1lbnQuIEl0IGRvZXMgbm90IG1hdHRlciB0aGF0IHRoZSBhc3NpZ25lZCB2YWx1ZSBpcyB0aGUgc2FtZS4gJHRlc3QtJmd0O3Byb3AgPSAiZm9vYmFyIjsgLy8gRXJyb3I6IENhbm5vdCBtb2RpZnkgcmVhZG9ubHkgcHJvcGVydHkgVGVzdDo6JHByb3A8L3ByZT4gPHA+IFRoaXMgdmFyaWFudCBpcyBub3QgYWxsb3dlZCwgYXMgdGhlIGluaXRpYWxpemluZyBhc3NpZ25tZW50IG9jY3VycyBmcm9tIG91dHNpZGUgdGhlIGNsYXNzOiA8L3A+IDxwcmUgPmNsYXNzIFRlc3QgeyBwdWJsaWMgcmVhZG9ubHkgc3RyaW5nICRwcm9wOyB9ICR0ZXN0ID0gbmV3IFRlc3Q7IC8vIElsbGVnYWwgaW5pdGlhbGl6YXRpb24gb3V0c2lkZSBvZiBwcml2YXRlIHNjb3BlLiAkdGVzdC0mZ3Q7cHJvcCA9ICJmb29iYXIiOyAvLyBFcnJvcjogQ2Fubm90IGluaXRpYWxpemUgcmVhZG9ubHkgcHJvcGVydHkgVGVzdDo6JHByb3AgZnJvbSBnbG9iYWwgc2NvcGU8L3ByZT4gPHA+IE1vZGlmaWNhdGlvbnMgYXJlIG5vdCBuZWNlc3NhcmlseSBwbGFpbiBhc3NpZ25tZW50cywgYWxsIG9mIHRoZSBmb2xsb3dpbmcgd2lsbCBhbHNvIHJlc3VsdCBpbiBhbiA8Y29kZT5FcnJvcjwvY29kZT4gZXhjZXB0aW9uOiA8L3A+IDxwcmUgPmNsYXNzIFRlc3QgeyBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoIHB1YmxpYyByZWFkb25seSBpbnQgJGkgPSAwLCBwdWJsaWMgcmVhZG9ubHkgYXJyYXkgJGFyeSA9IFtdLCApIHt9IH0gJHRlc3QgPSBuZXcgVGVzdDsgJHRlc3QtJmd0O2kgKz0gMTsgJHRlc3QtJmd0O2krKzsgKyskdGVzdC0mZ3Q7aTsgJHRlc3QtJmd0O2FyeVtdID0gMTsgJHRlc3QtJmd0O2FyeVswXVtdID0gMTsgJHJlZiA9ICR0ZXN0LSZndDtpOyAkdGVzdC0mZ3Q7aSA9ICRyZWY7IGJ5UmVmKCR0ZXN0LSZndDtpKTsgZm9yZWFjaCAoJHRlc3QgYXMgJHByb3ApOzwvcHJlPiA8cD4gSG93ZXZlciwgcmVhZG9ubHkgcHJvcGVydGllcyBkbyBub3QgcHJlY2x1ZGUgaW50ZXJpb3IgbXV0YWJpbGl0eS4gT2JqZWN0cyAob3IgcmVzb3VyY2VzKSBzdG9yZWQgaW4gcmVhZG9ubHkgcHJvcGVydGllcyBtYXkgc3RpbGwgYmUgbW9kaWZpZWQgaW50ZXJuYWxseTogPC9wPiA8cHJlID5jbGFzcyBUZXN0IHsgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KHB1YmxpYyByZWFkb25seSBvYmplY3QgJG9iaikge30gfSAkdGVzdCA9IG5ldyBUZXN0KG5ldyBzdGRDbGFzcyk7IC8vIExlZ2FsIGludGVyaW9yIG11dGF0aW9uLiAkdGVzdC0mZ3Q7b2JqLSZndDtmb28gPSAxOyAvLyBJbGxlZ2FsIHJlYXNzaWdubWVudC4gJHRlc3QtJmd0O29iaiA9IG5ldyBzdGRDbGFzczs8L3ByZT4gPC9kaXY+IDxoMyA+UmVzdHJpY3Rpb25zPC9oMz4gPGRpdiA+IDxwPiBUaGUgPGNvZGU+cmVhZG9ubHk8L2NvZGU+IG1vZGlmaWVyIGNhbiBvbmx5IGJlIGFwcGxpZWQgdG8gdHlwZWQgcHJvcGVydGllcy4gVGhlIHJlYXNvbiBpcyB0aGF0IHVudHlwZWQgcHJvcGVydGllcyBoYXZlIGFuIGltcGxpY2l0IDxjb2RlPm51bGw8L2NvZGU+IGRlZmF1bHQgdmFsdWUsIHdoaWNoIGNvdW50cyBhcyBhbiBpbml0aWFsaXppbmcgYXNzaWdubWVudCwgYW5kIHdvdWxkIGxpa2VseSBjYXVzZSBjb25mdXNpb24uIDwvcD4gPHA+IFRoYW5rcyB0byB0aGUgaW50cm9kdWN0aW9uIG9mIHRoZSA8Y29kZT5taXhlZDwvY29kZT4gdHlwZSBpbiBQSFAgOC4wLCBhIHJlYWRvbmx5IHByb3BlcnR5IHdpdGhvdXQgdHlwZSBjb25zdHJhaW50cyBjYW4gYmUgY3JlYXRlZCB1c2luZyB0aGUgPGNvZGU+bWl4ZWQ8L2NvZGU+IHR5cGU6IDwvcD4gPHByZSA+Y2xhc3MgVGVzdCB7IHB1YmxpYyByZWFkb25seSBtaXhlZCAkcHJvcDsgfTwvcHJlPiA8cD4gVGhlIGFsdGVybmF0aXZlIHdvdWxkIGJlIHRvIG5vdCB1c2UgYW4gaW1wbGljaXQgbnVsbCBkZWZhdWx0IHZhbHVlIGZvciB1bnR5cGVkIHJlYWRvbmx5IHByb3BlcnRpZXMuIEhvd2V2ZXIsIHRoaXMgd291bGQgbWFrZSB0aGUgcnVsZXMgZm9yIGltcGxpY2l0IHByb3BlcnR5IGRlZmF1bHQgdmFsdWVzIG1vcmUgY29tcGxleCBhbmQgY29uZnVzaW5nLiBTaW1wbHkgbWFraW5nIGl0IGFuIGVycm9yIGNvbmRpdGlvbiBsZXQncyB0aGUgcHJvZ3JhbW1lciBleHBsaWNpdGx5IG9wdC1pbiBieSBzcGVjaWZ5aW5nIHRoZSA8Y29kZT5taXhlZDwvY29kZT4gdHlwZS4gPC9wPiA8cD4gU3BlY2lmeWluZyBhbiBleHBsaWNpdCBkZWZhdWx0IHZhbHVlIG9uIHJlYWRvbmx5IHByb3BlcnRpZXMgaXMgYWxzbyBub3QgYWxsb3dlZDogPC9wPiA8cHJlID5jbGFzcyBUZXN0IHsgLy8gRmF0YWwgZXJyb3I6IFJlYWRvbmx5IHByb3BlcnR5IFRlc3Q6OiRwcm9wIGNhbm5vdCBoYXZlIGRlZmF1bHQgdmFsdWUgcHVibGljIHJlYWRvbmx5IGludCAkcHJvcCA9IDQyOyB9PC9wcmU+IDxwPiBBcyB0aGUgZGVmYXVsdCB2YWx1ZSBjb3VudHMgYXMgYW4gaW5pdGlhbGl6aW5nIGFzc2lnbm1lbnQsIGEgcmVhZG9ubHkgcHJvcGVydHkgd2l0aCBhIGRlZmF1bHQgdmFsdWUgaXMgZXNzZW50aWFsbHkgdGhlIHNhbWUgYXMgYSBjb25zdGFudCwgYW5kIHRodXMgbm90IHBhcnRpY3VsYXJseSB1c2VmdWwuIFRoZSBub3Rpb24gY291bGQgYmVjb21lIG1vcmUgdXNlZnVsIGluIHRoZSBmdXR1cmUsIGlmIDxjb2RlPm5ldzwvY29kZT4gZXhwcmVzc2lvbnMgYXJlIGFsbG93ZWQgYXMgcHJvcGVydHkgZGVmYXVsdCB2YWx1ZXMuIEF0IHRoZSBzYW1lIHRpbWUsIGRlcGVuZGluZyBvbiBob3cgZXhhY3RseSBwcm9wZXJ0eSBpbml0aWFsaXphdGlvbiB3b3VsZCB3b3JrIGluIHRoYXQgY2FzZSwgaGF2aW5nIGEgZGVmYXVsdCB2YWx1ZSBvbiBhIHJlYWRvbmx5IHByb3BlcnR5IGNvdWxkIHByZWNsdWRlIHVzZXJsYW5kIHNlcmlhbGl6YXRpb24gbGlicmFyaWVzIGZyb20gd29ya2luZywgYXMgdGhleSB3b3VsZCBub3QgYmUgYWJsZSB0byByZXBsYWNlIHRoZSBkZWZhdWx0LWNvbnN0cnVjdGVkIG9iamVjdC4gV2hldGhlciBvciBub3QgdGhpcyBpcyBhIGNvbmNlcm4gZGVwZW5kcyBvbiB3aGV0aGVyIHRoZSBwcm9wZXJ0eSBpcyBpbml0aWFsaXplZCBhdCB0aW1lIG9mIG9iamVjdCBjcmVhdGlvbiwgb3IgYXMgYW4gaW1wbGljaXQgcGFydCBvZiB0aGUgY29uc3RydWN0b3IgKG9yIHNpbWlsYXIpLiBBcyB0aGVzZSBhcmUgb3BlbiBxdWVzdGlvbnMsIHRoZSBjb25zZXJ2YXRpdmUgY2hvaWNlIGlzIHRvIGZvcmJpZCBkZWZhdWx0IHZhbHVlcyB1bnRpbCB0aGVzZSBxdWVzdGlvbnMgYXJlIHJlc29sdmVkLiA8L3A+IDxwPiBJdCBpcyB3b3J0aCByZWl0ZXJhdGluZyBoZXJlIHRoYXQgZGVmYXVsdCB2YWx1ZXMgb24gcHJvbW90ZWQgcGFyYW1ldGVycyBvbmx5IGFwcGx5IHRvIHRoZSBwYXJhbWV0ZXIsIG5vdCB0aGUgcHJvcGVydHk6IDwvcD4gPHByZSA+Y2xhc3MgVGVzdCB7IHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCggcHVibGljIHJlYWRvbmx5IGludCAkcHJvcCA9IDAsICkge30gfSAvLyBEZXN1Z2FycyB0bzogY2xhc3MgVGVzdCB7IHB1YmxpYyByZWFkb25seSBpbnQgJHByb3A7IHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdChpbnQgJHByb3AgPSAwKSB7ICR0aGlzLSZndDtwcm9wID0gJHByb3A7IH0gfTwvcHJlPiA8cD4gQXMgdGhlIHByb3BlcnR5IGhhcyBubyBkZWZhdWx0IHZhbHVlLCB0aGUgYXNzaWdubWVudCBpbiB0aGUgY29uc3RydWN0b3IgaXMgaW5pdGlhbGl6aW5nLCBhbmQgdGh1cyBsZWdhbC4gVGhlIGNvbnN0cnVjdG9yIHByb3BlcnR5IHByb21vdGlvbiBmZWF0dXJlIHdhcyBzcGVjaWZpY2FsbHkgZGVzaWduZWQgZm9yIGZvcndhcmQtY29tcGF0aWJpbGl0eSB3aXRoIHJlYWRvbmx5IHByb3BlcnRpZXMuIDwvcD4gPHA+IFJlYWRvbmx5IHN0YXRpYyBwcm9wZXJ0aWVzIGFyZSBub3Qgc3VwcG9ydGVkLiBUaGlzIGlzIGEgdGVjaG5pY2FsIGxpbWl0YXRpb24sIGluIHRoYXQgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGltcGxlbWVudCByZWFkb25seSBzdGF0aWMgcHJvcGVydGllcyBub24taW50cnVzaXZlbHkuIEluIGNvbmp1bmN0aW9uIHdpdGggdGhlIHF1ZXN0aW9uYWJsZSB1c2VmdWxuZXNzIG9mIHJlYWRvbmx5IHN0YXRpYyBwcm9wZXJ0aWVzLCB0aGlzIGlzIG5vdCBjb25zaWRlcmVkIHdvcnRod2hpbGUgYXQgdGhpcyB0aW1lLiA8L3A+IDwvZGl2PiA8aDMgPkluaGVyaXRhbmNlPC9oMz4gPGRpdiA+IDxwPiBJdCBpcyBub3QgYWxsb3dlZCB0byBvdmVycmlkZSBhIHJlYWQtd3JpdGUgcHJvcGVydHkgd2l0aCBhIHJlYWQtb25seSBwcm9wZXJ0eSBvciB2aWNlIHZlcnNhLiBCb3RoIG9mIHRoZSBmb2xsb3dpbmcgYXJlIG5vdCBsZWdhbDogPC9wPiA8cHJlID5jbGFzcyBBIHsgcHVibGljIGludCAkcHJvcDsgfSBjbGFzcyBCIGV4dGVuZHMgQSB7IC8vIElsbGVnYWw6IHJlYWR3cml0ZSAtJmd0OyByZWFkb25seSBwdWJsaWMgcmVhZG9ubHkgaW50ICRwcm9wOyB9PC9wcmU+PHByZSA+Y2xhc3MgQSB7IHB1YmxpYyByZWFkb25seSBpbnQgJHByb3A7IH0gY2xhc3MgQiBleHRlbmRzIEEgeyAvLyBJbGxlZ2FsOiByZWFkb25seSAtJmd0OyByZWFkd3JpdGUgcHVibGljIGludCAkcHJvcDsgfTwvcHJlPiA8cD4gSXQgaXMgb2J2aW91cyB0aGF0IG92ZXJyaWRpbmcgYSByZWFkd3JpdGUgcHJvcGVydHkgd2l0aCBhIHJlYWRvbmx5IHByb3BlcnR5IG5lZWRzIHRvIGJlIGZvcmJpZGRlbiwgYmVjYXVzZSB0aGF0IG1heSByZW5kZXIgb3BlcmF0aW9ucyBwZXJmb3JtZWQgaW4gdGhlIHBhcmVudCBjbGFzcyBpbnZhbGlkLiBIb3dldmVyLCB0aGlzIHByb3Bvc2FsIHZpZXdzIHJlYWRvbmx5IG5vdCBqdXN0IGFzIGEgbGFjayBvZiBjYXBhYmlsaXRpZXMgKHdoaWNoIHdvdWxkIGJlIHNhZmUgdG8gaW5jcmVhc2UgaW4gYSBjaGlsZCBjbGFzcyksIGJ1dCBhcyBhbiBpbnRlbnRpb25hbCByZXN0cmljdGlvbi4gTGlmdGluZyB0aGUgcmVzdHJpY3Rpb24gaW4gdGhlIGNoaWxkIGNsYXNzIGNvdWxkIGJyZWFrIGludmFyaWFudHMgaW4gdGhlIHBhcmVudCBjbGFzcy4gQXMgc3VjaCwgYSByZWFkb25seSBtb2RpZmllciBtYXkgYmUgbmVpdGhlciBhZGRlZCBub3IgcmVtb3ZlZCBkdXJpbmcgaW5oZXJpdGFuY2UuIDwvcD4gPHA+IEl0IGlzIGludGVyZXN0aW5nIHRvIGNvbnNpZGVyIGhvdyBwcm9wZXJ0eSByZWRlY2xhcmF0aW9uIGludGVyYWN0cyB3aXRoIHRoZSByZXN0cmljdGlvbiB0aGF0IGluaXRpYWxpemF0aW9uIGNhbiBvbmx5IG9jY3VyIGluIHRoZSBkZWNsYXJpbmcgY2xhc3M6IDwvcD4gPHByZSA+Y2xhc3MgQSB7IHB1YmxpYyByZWFkb25seSBpbnQgJHByb3A7IH0gY2xhc3MgQiBleHRlbmRzIEEgeyBwdWJsaWMgcmVhZG9ubHkgaW50ICRwcm9wOyB9PC9wcmU+IDxwPiBIZXJlLCBpbml0aWFsaXphdGlvbiBvZiA8Y29kZT5COjokcHJvcDwvY29kZT4gd291bGQgYmUgcGVybWl0dGVkIGJvdGggZnJvbSBpbnNpZGUgPGNvZGU+QTwvY29kZT4gYW5kIDxjb2RlPkI8L2NvZGU+LCBhcyBib3RoIGNsYXNzZXMgZGVjbGFyZSB0aGUgcHJvcGVydHkuIEEgcG9zc2libGUgYWx0ZXJuYXRpdmUgd291bGQgYmUgdG8gYWxsb3cgaW5pdGlhbGl6YXRpb24gb25seSBmcm9tIDxjb2RlPkI8L2NvZGU+LCB0aG91Z2ggdGhhdCB3b3VsZCBtZWFuIHRoYXQgYSByZWRlY2xhcmF0aW9uIGluIGEgY2hpbGQgY2xhc3MgY291bGQgYnJlYWsgdXNhZ2UgaW4gYSBwYXJlbnQgY2xhc3MuIDwvcD4gPHA+IFdoZW4gdGhlIHNhbWUgcHJvcGVydHkgaXMgaW1wb3J0ZWQgZnJvbSB0d28gdHJhaXRzLCB0aGUgPGNvZGU+cmVhZG9ubHk8L2NvZGU+IG1vZGlmaWVycyBtdXN0IGFsc28gbWF0Y2g6IDwvcD4gPHByZSA+dHJhaXQgVDEgeyBwdWJsaWMgcmVhZG9ubHkgaW50ICRwcm9wOyB9IHRyYWl0IFQyIHsgcHVibGljIGludCAkcHJvcDsgfSBjbGFzcyBDIHsgLy8gSWxsZWdhbDogQ29uZmxpY3RpbmcgcHJvcGVydGllcy4gdXNlIFQxLCBUMjsgfTwvcHJlPiA8cD4gVHlwZXMgb24gcmVhZG9ubHkgcHJvcGVydGllcyByZW1haW4gaW52YXJpYW50LiBPbmUgY291bGQgYXJndWUgdGhhdCB0eXBlcyBvZiByZWFkb25seSBwcm9wZXJ0aWVzIGNvdWxkIGJlIGNvdmFyaWFudCBpbnN0ZWFkOiA8L3A+IDxwcmUgPmNsYXNzIEEgeyBwdWJsaWMgcmVhZG9ubHkgaW50fGZsb2F0ICRwcm9wOyB9IGNsYXNzIEIgZXh0ZW5kcyBBIHsgcHVibGljIHJlYWRvbmx5IGludCAkcHJvcDsgfTwvcHJlPiA8cD4gQ292YXJpYW5jZSB3b3VsZCBob2xkIGZvciByZWFkcyBmcm9tIHRoZSBwcm9wZXJ0eSwgYnV0IG5vdCBmb3IgdGhlIGluaXRpYWxpemluZyBhc3NpZ25tZW50LCB3aGljaCBpcyBwZXJtaXR0ZWQgZnJvbSBib3RoIDxjb2RlPkE8L2NvZGU+IGFuZCA8Y29kZT5CPC9jb2RlPiBoZXJlLiBJIGJlbGlldmUgdGhhdCBjb3ZhcmlhbmNlIHdvdWxkIG9ubHkgYmUgdHJ1bHkgY29ycmVjdCBpZiB0aGUgcGFyZW50IHByb3BlcnR5IHdlcmUgYWJzdHJhY3QsIHdoaWNoIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkLiBBIHJlbGF4YXRpb24gdG8gY292YXJpYW50IHNlbWFudGljcyAoZWl0aGVyIHdob2xlc2FsZSwgb3IgZm9yIGFic3RyYWN0IHBhcmVudHMpIHdvdWxkIGJlIHBvc3NpYmxlIGluIHRoZSBmdXR1cmUuIDwvcD4gPC9kaXY+IDxoMyA+VW5zZXQ8L2gzPiA8ZGl2ID4gPHA+IFJlYWRvbmx5IHByb3BlcnRpZXMgY2Fubm90IGJlIHVuc2V0IG9uY2UgdGhleSBhcmUgaW5pdGlhbGl6ZWQ6IDwvcD4gPHByZSA+Y2xhc3MgVGVzdCB7IHB1YmxpYyByZWFkb25seSBpbnQgJHByb3A7IHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpIHsgJHRoaXMtJmd0O3Byb3AgPSAxOyB1bnNldCgkdGhpcy0mZ3Q7cHJvcCk7IC8vIEVycm9yOiBDYW5ub3QgdW5zZXQgcmVhZG9ubHkgcHJvcGVydHkgVGVzdDo6JHByb3AgfSB9PC9wcmU+IDxwPiBIb3dldmVyLCBpdCBpcyBwb3NzaWJsZSB0byB1bnNldCBhIHJlYWRvbmx5IHByb3BlcnR5IHByaW9yIHRvIGluaXRpYWxpemF0aW9uLCBmcm9tIHRoZSBzY29wZSB3aGVyZSB0aGUgcHJvcGVydHkgaGFzIGJlZW4gZGVjbGFyZWQuIEp1c3QgbGlrZSB3aXRoIG5vcm1hbCB0eXBlZCBwcm9wZXJ0aWVzLCBleHBsaWNpdGx5IHVuc2V0dGluZyB0aGUgcHJvcGVydHkgbWFrZXMgaXQgdmlzaWJsZSB0byBtYWdpYyBtZXRob2RzLiBJbiBwYXJ0aWN1bGFyLCB0aGlzIGVuYWJsZXMgdGhlIHVzdWFsIGxhenkgaW5pdGlhbGl6YXRpb24gcGF0dGVybiB0byB3b3JrOiA8L3A+IDxwcmUgPmNsYXNzIFRlc3QgeyBwdWJsaWMgcmVhZG9ubHkgaW50ICRwcm9wOyBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKSB7IHVuc2V0KCR0aGlzLSZndDtwcm9wKTsgfSBwdWJsaWMgZnVuY3Rpb24gX19nZXQoJG5hbWUpIHsgaWYgKCRuYW1lID09PSAncHJvcCcpIHsgJHRoaXMtJmd0O3Byb3AgPSAkdGhpcy0mZ3Q7bGF6aWx5Q29tcHV0ZVByb3AoKTsgfSByZXR1cm4gJHRoaXMtJmd0OyRuYW1lOyB9IH08L3ByZT4gPC9kaXY+IDxoMyA+UmVmbGVjdGlvbjwvaDM+IDxkaXYgPiA8cD4gQSA8Y29kZT5SZWZsZWN0aW9uUHJvcGVydHk6OmlzUmVhZE9ubHkoKTwvY29kZT4gbWV0aG9kIGlzIGFkZGVkLCB3aGljaCByZXBvcnRzIHdoZXRoZXIgYSBwcm9wZXJ0eSBpcyBkZWNsYXJlZCBhcyByZWFkLW9ubHkuIDxjb2RlPlJlZmxlY3Rpb25Qcm9wZXJ0eTo6Z2V0TW9kaWZpZXJzKCk8L2NvZGU+IHdpbGwgYWxzbyByZXBvcnQgYSA8Y29kZT5SZWZsZWN0aW9uUHJvcGVydHk6OklTX1JFQURPTkxZPC9jb2RlPiBmbGFnLiA8L3A+IDxwPiA8Y29kZT5SZWZsZWN0aW9uUHJvcGVydHk6OnNldFZhbHVlKCk8L2NvZGU+IGNhbiBieXBhc3MgdGhlIHJlcXVpcmVtZW50IHRoYXQgaW5pdGlhbGl6YXRpb24gb2NjdXJzIGZyb20gdGhlIHNjb3BlIHdoZXJlIHRoZSBwcm9wZXJ0eSBoYXMgYmVlbiBkZWNsYXJlZC4gSG93ZXZlciwgcmVmbGVjdGlvbiBjYW5ub3QgbW9kaWZ5IGEgcmVhZG9ubHkgcHJvcGVydHkgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkLiA8L3A+IDxwPiBTaW1pbGFybHksIGNsb3N1cmUgcmViaW5kaW5nIGNhbiBiZSB1c2VkIHRvIGJ5cGFzcyB0aGUgaW5pdGlhbGl6YXRpb24gc2NvcGUgcmVxdWlyZW1lbnQuIDwvcD4gPC9kaXY+IDxoMyA+U2VyaWFsaXphdGlvbjwvaDM+IDxkaXYgPiA8cD4gUmVhZG9ubHkgcHJvcGVydGllcyBoYXZlIG5vIGltcGFjdCBvbiBzZXJpYWxpemF0aW9uLiBBcyA8Y29kZT5fX3Vuc2VyaWFsaXplKCk8L2NvZGU+IChhbmQgdGhlIGxlZ2FjeSA8Y29kZT5TZXJpYWxpemFibGU6OnVuc2VyaWFsaXplKCk8L2NvZGU+KSBtZXRob2QgYXJlIGludm9rZWQgd2l0aG91dCBhIHByaW9yIGNvbnN0cnVjdG9yIGNhbGwsIHJlYWRvbmx5IHByb3BlcnRpZXMgd2lsbCBiZSBpbiBhbiB1bmluaXRpYWxpemVkIHN0YXRlIGFuZCBjYW4gYmUgc2V0IGJ5IHRoZSA8Y29kZT5fX3Vuc2VyaWFsaXplKCk8L2NvZGU+IGltcGxlbWVudGF0aW9uLiA8L3A+IDxwPiBUaGlzIGFsc28gYXBwbGllcyB0byB1c2VybGFuZCBzZXJpYWxpemVycyBhbmQgaHlkcmF0b3JzLiBBcyBsb25nIGFzIHRoZSBvYmplY3QgaXMgY3JlYXRlZCB1c2luZyA8Y29kZT5SZWZsZWN0aW9uQ2xhc3M6Om5ld0luc3RhbmNlV2l0aG91dENvbnN0cnVjdG9yKCk8L2NvZGU+IG9yIHNvbWUgb3RoZXIgY29uc3RydWN0b3ItYnlwYXNzLCBpdCBpcyBhbHdheXMgc2FmZSB0byBpbml0aWFsaXplIHJlYWRvbmx5IHByb3BlcnRpZXMuIDwvcD4gPC9kaXY+IDxoMiA+UmF0aW9uYWxlPC9oMj4gPGRpdiA+IDxwPiBUaGUgcmVhZG9ubHkgcHJvcGVydHkgY29uY2VwdCBpbnRyb2R1Y2VkIGluIHRoaXMgcHJvcG9zYWwgcHJvdmlkZXMgc3Ryb25nIGltbXV0YWJpbGl0eSBndWFyYW50ZWVzLCB3aGljaCBhcHBseSBib3RoIGluc2lkZSBhbmQgb3V0c2lkZSB0aGUgY2xhc3MuIE9uY2UgYSBwcm9wZXJ0eSBoYXMgYmVlbiBpbml0aWFsaXplZCwgaXQgY2Fubm90IGJlIGNoYW5nZWQgdW5kZXIgYW55IGNpcmN1bXN0YW5jZXMuIFJlYWRpbmcgYSByZWFkb25seSBwcm9wZXJ0eSB3aWxsIGFsd2F5cyByZXR1cm4gdGhlIHNhbWUgdmFsdWUsIG5vIG1hdHRlciB3aGF0IGNvZGUgcnVucyBpbiBiZXR3ZWVuOiA8L3A+IDxwcmUgPmNsYXNzIFRlc3QgeyBwdWJsaWMgcmVhZG9ubHkgc3RyaW5nICRwcm9wOyBwdWJsaWMgZnVuY3Rpb24gbWV0aG9kKENsb3N1cmUgJGZuKSB7ICRwcm9wID0gJHRoaXMtJmd0O3Byb3A7ICRmbigpOyAvLyBBbnkgY29kZSBtYXkgcnVuIGhlcmUuICRwcm9wMiA9ICR0aGlzLSZndDtwcm9wOyBhc3NlcnQoJHByb3AgPT09ICRwcm9wMik7IC8vIEFsd2F5cyBob2xkcy4gfSB9PC9wcmU+IDxwPiBUaGVzZSBndWFyYW50ZWVzIGFyZSB0b28gc3Ryb25nIGZvciBjZXJ0YWluIHVzZS1jYXNlcy4gRm9yIGV4YW1wbGUsIHNvbWUgY2xhc3NlcyBtYXkgd2lzaCB0byBoYXZlIHByb3BlcnRpZXMgdGhhdCBhcmUgcHVibGljbHkgcmVhZGFibGUsIGJ1dCBjYW4gb25seSBiZSB3cml0dGVuIGZyb20gd2l0aGluIHRoZSBjbGFzcy4gVGhpcyBpcyBhIG11Y2ggd2Vha2VyIGd1YXJhbnRlZSwgYXMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgY2FuIGNoYW5nZSBkdXJpbmcgdGhlIGxpZmV0aW1lIG9mIGFuIG9iamVjdC4gQm90aCB2YXJpYW50cyBjYW4gYmUgdXNlZnVsIGRlcGVuZGluZyBvbiB0aGUgc2l0dWF0aW9uLCBhbmQgdGhlIGFkZGl0aW9uIG9mIHJlYWRvbmx5IHByb3BlcnRpZXMgbmVpdGhlciBwcmVjbHVkZXMgbm9yIGRpc2NvdXJhZ2VzIHRoZSBhZGRpdGlvbiBvZiBhc3ltbWV0cmljIHByb3BlcnR5IHZpc2liaWxpdHkuIDwvcD4gPHA+IEEgc3BlY2lhbCBjYXNlIHdvcnRoIG1lbnRpb25pbmcgYXJlIGNsYXNzZXMgdXNpbmcgY2xvbmUtYmFzZWQgd2l0aGVyczogPC9wPiA8cHJlID5jbGFzcyBQb2ludCB7IHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCggcHVibGljIHJlYWRvbmx5IGZsb2F0ICR4LCBwdWJsaWMgcmVhZG9ubHkgZmxvYXQgJHksIHB1YmxpYyByZWFkb25seSBmbG9hdCAkeiwgKSB7fSBwdWJsaWMgZnVuY3Rpb24gd2l0aFgoZmxvYXQgJHgpOiBzdGF0aWMgeyAvLyBUaGlzIGltcGxlbWVudGF0aW9uIHdvcmtzOiByZXR1cm4gbmV3IHN0YXRpYygkeCwgJHRoaXMtJmd0O3ksICR0aGlzLSZndDt6KTsgLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiBkb2VzIG5vdDogJGNsb25lID0gY2xvbmUgJHRoaXM7ICRjbG9uZS0mZ3Q7eCA9ICR4OyByZXR1cm4gJGNsb25lOyB9IH08L3ByZT4gPHA+IFRoZSBjbG9uZS1iYXNlZCBpbXBsZW1lbnRhdGlvbiB3aWxsIHJlc3VsdCBpbiBhbiBlcnJvciwgYmVjYXVzZSB0aGUgPGNvZGU+eDwvY29kZT4gcHJvcGVydHkgb24gdGhlIGNsb25lZCBvYmplY3QgaXMgYWxyZWFkeSBpbml0aWFsaXplZCwgYW5kIG1vZGlmaWNhdGlvbiBpcyB0aHVzIHJlamVjdGVkLiBUaGlzIGlzIGJ5IGRlc2lnbjogVGhlIHByb3BlcnR5IGRvZXMgaW5kZWVkIGdldCBtb2RpZmllZCBwb3N0LWluaXRpYWxpemF0aW9uLCBhbmQgdGhlIGZhY3QgdGhhdCB0aGlzIGlzIG9ubHkg4oCcdGVtcG9yYXJ54oCdIGlzIHVsdGltYXRlbHkgaXJyZWxldmFudC4gPC9wPiA8cD4gSW4gdGhlIGZ1dHVyZSwgYSBjbG9uZSB3aXRoIGNvbnN0cnVjdCwgd2hpY2ggYWxsb3dzIHNldHRpbmcgcHJvcGVydGllcyBkdXJpbmcgdGhlIGNsb25pbmcgcHJvY2Vzcywgd291bGQgbWFrZSBzdWNoIGltcGxlbWVudGF0aW9ucyBjb21wYXRpYmxlIHdpdGggcmVhZG9ubHkgcHJvcGVydGllcy4gVGhlIGltcG9ydGFudCBkaWZmZXJlbmNlIGlzIHRoYXQgdGhlIG5ldyB2YWx1ZSBmb3IgdGhlIHByb3BlcnR5IGlzIGFzc2lnbmVkIGRpcmVjdGx5LCB3aXRob3V0IGFzc2lnbmluZyB0aGUgb2xkIGNsb25lZCB2YWx1ZSBmaXJzdC4gPC9wPiA8cD4gQWx0ZXJuYXRpdmVseSwgc3VjaCBwcm9wZXJ0aWVzIGNvdWxkIHVzZSBhIGZ1dHVyZSBhc3ltbWV0cmljIHZpc2liaWxpdHkgY29uY2VwdCwgdGhvdWdoIGl0IGRvZXMgbm90IGV4cHJlc3MgdGhlIGFjdHVhbCBpbnZhcmlhbnQgYXMgcHJlY2lzZWx5LiA8L3A+IDxwPiBUaGlzIHByb3Bvc2FsIGlzIHZlcnkgc2ltaWxhciB0byB0aGUgcHJldmlvdXNseSBkZWNsaW5lZCA8YSA+V3JpdGUtT25jZSBQcm9wZXJ0aWVzPC9hPiA8YWJiciA+UkZDPC9hYmJyPi4gSSB0aGluayB0aGF0IGEga2V5IG1pc3Rha2Ugb2YgdGhhdCA8YWJiciA+UkZDPC9hYmJyPiB3YXMgc3BlY2lmaWNhbGx5IHRoZSDigJx3cml0ZS1vbmNl4oCdIGZyYW1pbmcuIFdoaWxlIG1heWJlIHRlY2huaWNhbGx5IGFjY3VyYXRlLCBpdCBtYWtlcyBmb3IgY29uZnVzaW5nIG1lc3NhZ2luZywgYXMgdGhlIGludGVuZGVkIDxhYmJyID5BUEk8L2FiYnI+IGNvbnRyYWN0IGlzIHRoYXQgb2Yg4oCccmVhZC1vbmx54oCdLCBub3Qg4oCcd3JpdGUtb25jZeKAnS4gSXQgc3RhbmRzIHRvIHJlYXNvbiB0aGF0IGEgcmVhZG9ubHkgcHJvcGVydHkgc3RpbGwgbmVlZHMgdG8gYmUgaW5pdGlhbGl6ZWQgYXQgc29tZSBwb2ludCwgYW5kIHRoZXJlIGlzIG5vIG5lZWQgdG8gcHV0IGEgcGFydGljdWxhciBmb2N1cyBvbiB0aGF0IGluaXRpYWxpemF0aW9uLiA8L3A+IDxwPiBUaGlzIHByb3Bvc2FsIGRvZXMgZGV2aWF0ZSBmcm9tIHRoZSB3cml0ZS1vbmNlIHByb3BlcnRpZXMgPGFiYnIgPlJGQzwvYWJicj4gaW4gb25lIHNpZ25pZmljYW50IHJlc3BlY3Q6IEluaXRpYWxpemF0aW9uIGlzIG9ubHkgYWxsb3dlZCBmcm9tIHdpdGhpbiB0aGUgZGVjbGFyaW5nIGNsYXNzIChtb2R1bG8gdGhlIHVzdWFsIHJlYmluZGluZyBhbmQgcmVmbGVjdGlvbiB3b3JrYXJvdW5kcykuIFRoaXMgZW5zdXJlcyB0aGF0IHRoZXNlIHByb3BlcnRpZXMgYXJlIGFsd2F5cyByZWFkLW9ubHkgZnJvbSBhIHB1YmxpYyA8YWJiciA+QVBJPC9hYmJyPiBwZXJzcGVjdGl2ZSwgZXZlbiBpZiB0aGV5IGRvbid0IGdldCBpbml0aWFsaXplZCBpbiB0aGUgY2xhc3MgY29uc3RydWN0b3IuIFRoZSDigJx3cml0ZS1vbmNl4oCdIGxpbWl0YXRpb24gaXMgaW50ZW5kZWQgc3BlY2lmaWNhbGx5IGZvciBpbml0aWFsaXphdGlvbiwgbm90IGFzIGEgb25lLXNob3QgY29tbXVuaWNhdGlvbiBjaGFubmVsLiA8L3A+IDxwPiBUaGlzIGFsc28gZW5zdXJlcyB0aGF0IGEgcG90ZW50aWFsIGZ1dHVyZSDigJxjbG9uZSB3aXRo4oCdIGltcGxlbWVudGF0aW9uIHdpbGwgb25seSBiZSBhYmxlIHRvIG1vZGlmeSByZWFkb25seSBwcm9wZXJ0aWVzIGZyb20gcHJpdmF0ZSBzY29wZSBhbmQgdGh1cyBjYW5ub3QgYnlwYXNzIGFkZGl0aW9uYWwgaW52YXJpYW50cyBpbXBvc2VkIGJ5IHRoZSBpbXBsZW1lbnRhdGlvbiB3aGVuIHVzZWQgZnJvbSBhIGRpZmZlcmVudCBzY29wZS4gPC9wPiA8cD4gVGhpcyA8YWJiciA+UkZDPC9hYmJyPiBvdmVybGFwcyB3aXRoIHRoZSA8YSA+UHJvcGVydHkgQWNjZXNzb3JzIFJGQzwvYT4uIEluIHBhcnRpY3VsYXIsIGl0IGltcGxlbWVudHMgdGhlIOKAnG9ubHkgaW1wbGljaXQgZ2V04oCdIGFzcGVjdCwgdGhvdWdoIG5vdCB3aXRoIHRoZSBleGFjdCBzYW1lIHNlbWFudGljcy4gQXMgbWVudGlvbmVkIGluIHRoZSA8YWJiciA+UkZDPC9hYmJyPiwgSSdtIG5vdCBjb252aW5jZWQgdGhhdCB0aGUgZnVsbCBjb21wbGV4aXR5IG9mIGFjY2Vzc29ycyBpcyB0cnVseSB3YXJyYW50ZWQuIFN1cHBvcnRpbmcgcmVhZG9ubHkgcHJvcGVydGllcyBhbmQgYXN5bW1ldHJpYyB2aXNpYmlsaXR5IHdvdWxkIGNvdmVyIGEgc2lnbmlmaWNhbnQgcG9ydGlvbiBvZiB0aGUgdXNlLWNhc2VzLCBhdCBhIGxvd2VyIGxhbmd1YWdlIGNvbXBsZXhpdHkgY29zdC4gPC9wPiA8cD4gSXQgaXMgd29ydGggbm90aW5nIHRoYXQgaGF2aW5nIGEgcmVhZG9ubHkgcHJvcGVydHkgZmVhdHVyZSBkb2VzIG5vdCBwcmVjbHVkZSBpbnRyb2R1Y3Rpb24gb2YgYWNjZXNzb3JzLiBDIyBzdXBwb3J0cyBib3RoIHJlYWRvbmx5IHByb3BlcnRpZXMgYW5kIGFjY2Vzc29ycy4gQyMgYWxzbyBwcm92aWRlcyBwcm9wZXJ0aWVzIHdpdGggaW1wbGljaXQgYmFja2luZyBzdG9yYWdlIHRocm91Z2ggYWNjZXNzb3Igc3ludGF4LCBidXQgdGhpcyBpcyBub3QgdGhlIG9ubHkgd2F5IHRvIGRvIGl0LiBGb3IgZXhhbXBsZSwgU3dpZnQgaGFzIHNwZWNpYWwgc3ludGF4IGZvciBhc3ltbWV0cmljIHZpc2liaWxpdHksIHJhdGhlciB0aGFuIHNwZWNpZnlpbmcgdmlzaWJpbGl0eSBvbiBpbXBsaWNpdGx5IGltcGxlbWVudGVkIGFjY2Vzc29ycy4gPC9wPiA8cD4gRXZlbiBpZiB3ZSBoYXZlIHByb3BlcnR5IGFjY2Vzc29ycywgSSBiZWxpZXZlIGl0IG1heSBiZSB3b3J0aHdoaWxlIHRvIGxpbWl0IHRoZW0gdG8gY29tcHV0ZWQgcHJvcGVydGllcyBvbmx5LCBhbmQgc29sdmUgdXNlLWNhc2VzIHRoYXQgaW52b2x2ZSBlbmdpbmUtbWFuYWdlZCBzdG9yYWdlIHRocm91Z2ggb3RoZXIgbWVjaGFuaXNtcywgc3VjaCBhcyByZWFkb25seSBwcm9wZXJ0aWVzIGFuZCBwcm9wZXJ0eS1sZXZlbCBhc3ltbWV0cmljIHZpc2liaWxpdHkuIFRoaXMgYXZvaWRzIGNvbmZ1c2lvbiByZWxhdGluZyB0byB0aGUgdHdvIGtpbmRzIG9mIGFjY2Vzc29ycyAoaW1wbGljaXQgYW5kIGV4cGxpY2l0KSwgYW5kIGFsc28gYWxsb3dzIHVzIHRvIG1ha2UgdGhlaXIgYmVoYXZpb3IgaW5kZXBlbmRlbnQgb2YgYWNjZXNzb3IgY29uc3RyYWludHMuIEZvciBleGFtcGxlLCBhIGZpcnN0LWNsYXNzIGFzeW1tZXRyaWMgdmlzaWJpbGl0eSBmZWF0dXJlIHdvdWxkIHNoaWVsZCB0aGUgdXNlciBmcm9tIGNvbnNpZGVyaW5nIGRpc3RpbmN0aW9ucyBzdWNoIGFzIDxjb2RlPmdldDs8L2NvZGU+IHZzIDxjb2RlPmdldDs8L2NvZGU+IGFjY2Vzc29ycy4gVGhlc2UgYXJlIGV4dGVybmFsaXRpZXMgb2YgdGhlIGdlbmVyYWwgYWNjZXNzb3IgZmVhdHVyZSBhbmQgbm90IG5lZWRlZCBmb3IgYXN5bW1ldHJpYyB2aXNpYmlsaXR5LiA8L3A+IDxwPiBBIHNlcGFyYXRlIGltcGxlbWVudGF0aW9uIGNhbiBhbHNvIGJlIG1vcmUgZWZmaWNpZW50LiBBZnRlciBpbml0aWFsaXphdGlvbiwgYSByZWFkb25seSBwcm9wZXJ0eSB3aWxsIGhhdmUgdGhlIHNhbWUgcGVyZm9ybWFuY2UgY2hhcmFjdGVyaXN0aWNzIGFzIGEgbm9ybWFsIHByb3BlcnR5LiBBY2Nlc3Nvci1iYXNlZCBwcm9wZXJ0aWVzLCBldmVuIHdpdGggaW1wbGljaXQgc3RvcmFnZSwgc3RpbGwgY2FycnkgYSBwZXJmb3JtYW5jZSBwZW5hbHR5LiA8L3A+IDwvZGl2PiA8aDIgPkJhY2t3YXJkIEluY29tcGF0aWJsZSBDaGFuZ2VzPC9oMj4gPGRpdiA+IDxwPiBBIG5ldyA8Y29kZT5yZWFkb25seTwvY29kZT4ga2V5d29yZCBpcyByZXNlcnZlZC4gPC9wPiA8cD4gQXNzdW1wdGlvbnMgb2YgZXhpc3RpbmcgY29kZSB0aGF0IGFsbCBhY2Nlc3NpYmxlIHByb3BlcnRpZXMgYXJlIGFsc28gd3JpdGFibGUgbWF5IGJlIGJyb2tlbi4gPC9wPiA8L2Rpdj4gPGgyID5Wb3RlPC9oMj4gPGRpdiA+IDxwPiBWb3Rpbmcgc3RhcnRlZCBvbiAyMDIxLTA3LTAxIGFuZCBjbG9zZXMgb24gMjAyMS0wNy0xNS4gPC9wPiA8L2Rpdj4gPC9kaXY+IDxkaXYgPjxiZGk+cmZjL3JlYWRvbmx5X3Byb3BlcnRpZXNfdjIudHh0PC9iZGk+IMK3IExhc3QgbW9kaWZpZWQ6IDIwMjEvMDcvMjAgMTU6MzcgYnkgPGJkaT5uaWtpYzwvYmRpPjwvZGl2PiA8L2Rpdj48L2Rpdj4gPGRpdiA+IDxoMyA+UGFnZSBUb29sczwvaDM+IDxkaXYgPiA8dWw+IDxsaT48YSA+U2hvdyBwYWdlc291cmNlPC9hPjwvbGk+PGxpPjxhID5PbGQgcmV2aXNpb25zPC9hPjwvbGk+PGxpPjxhID5CYWNrbGlua3M8L2E+PC9saT48bGk+PGEgPkJhY2sgdG8gdG9wPC9hPjwvbGk+IDwvdWw+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PjwvZGl2PiA8L3NlY3Rpb24+IO+7vzxzZWN0aW9uID4gPGRpdiA+IDxoMyA+VGFibGUgb2YgQ29udGVudHM8L2gzPiA8ZGl2PiA8dWwgPiA8bGkgPjxkaXYgPjxhID5QSFAgUkZDOiBSZWFkb25seSBwcm9wZXJ0aWVzIDIuMDwvYT48L2Rpdj4gPHVsID4gPGxpID48ZGl2ID48YSA+SW50cm9kdWN0aW9uPC9hPjwvZGl2PjwvbGk+IDxsaSA+PGRpdiA+PGEgPlByb3Bvc2FsPC9hPjwvZGl2PiA8dWwgPiA8bGkgPjxkaXYgPjxhID5SZXN0cmljdGlvbnM8L2E+PC9kaXY+PC9saT4gPGxpID48ZGl2ID48YSA+SW5oZXJpdGFuY2U8L2E+PC9kaXY+PC9saT4gPGxpID48ZGl2ID48YSA+VW5zZXQ8L2E+PC9kaXY+PC9saT4gPGxpID48ZGl2ID48YSA+UmVmbGVjdGlvbjwvYT48L2Rpdj48L2xpPiA8bGkgPjxkaXYgPjxhID5TZXJpYWxpemF0aW9uPC9hPjwvZGl2PjwvbGk+IDwvdWw+IDwvbGk+IDxsaSA+PGRpdiA+PGEgPlJhdGlvbmFsZTwvYT48L2Rpdj48L2xpPiA8bGkgPjxkaXYgPjxhID5CYWNrd2FyZCBJbmNvbXBhdGlibGUgQ2hhbmdlczwvYT48L2Rpdj48L2xpPiA8bGkgPjxkaXYgPjxhID5Wb3RlPC9hPjwvZGl2PjwvbGk+IDwvdWw+PC9saT4gPC91bD4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IDwvc2VjdGlvbj4gPC9kaXY+IDwvYm9keT4='</script>

      </head>
        <body class="valid" valid="valid" title="valid: True, node: 1, level: 1" node_number="1"> <div class="valid" valid="valid" title="valid: True, node: 2, level: 2" node_number="2"> <header class="valid" valid="valid" title="valid: True, node: 3, level: 3" node_number="3">  </header> <section class="valid" valid="valid" title="valid: True, node: 4, level: 3" node_number="4"> <section class="valid" valid="valid" title="valid: True, node: 5, level: 4" node_number="5">  </section> <section class="valid" valid="valid" title="valid: True, node: 6, level: 4" node_number="6"> <div class="valid" valid="valid" title="valid: True, node: 7, level: 5" node_number="7"><div class="valid" valid="valid" title="valid: True, node: 8, level: 6" node_number="8"> <div class="valid" valid="valid" title="valid: True, node: 9, level: 7" node_number="9"> <div class="valid" valid="valid" title="valid: True, node: 10, level: 8" node_number="10"><div class="valid" valid="valid" title="valid: True, node: 11, level: 9" node_number="11"> <div class="valid" valid="valid" title="valid: True, node: 12, level: 10" node_number="12">rfc:readonly_properties_v2</div> <div class="valid" valid="valid" title="valid: True, node: 13, level: 10" node_number="13"> <h1 class="valid" valid="valid" title="valid: True, node: 14, level: 11" node_number="14">PHP RFC: Readonly properties 2.0</h1> <div class="valid" valid="valid" title="valid: True, node: 15, level: 11" node_number="15"> <ul class="valid" valid="valid" title="valid: True, node: 16, level: 12" node_number="16"> <li class="valid" valid="valid" title="valid: True, node: 17, level: 13" node_number="17"><div class="valid" valid="valid" title="valid: True, node: 18, level: 14" node_number="18"> Date: 2021-06-02</div> </li> <li class="valid" valid="valid" title="valid: True, node: 19, level: 13" node_number="19"><div class="valid" valid="valid" title="valid: True, node: 20, level: 14" node_number="20"> Author: Nikita Popov nikic@php.net</div> </li> <li class="valid" valid="valid" title="valid: True, node: 21, level: 13" node_number="21"><div class="valid" valid="valid" title="valid: True, node: 22, level: 14" node_number="22"> Status: Implemented</div> </li> <li class="valid" valid="valid" title="valid: True, node: 23, level: 13" node_number="23"><div class="valid" valid="valid" title="valid: True, node: 24, level: 14" node_number="24"> Target Version: PHP 8.1</div> </li> <li class="valid" valid="valid" title="valid: True, node: 25, level: 13" node_number="25"><div class="valid" valid="valid" title="valid: True, node: 26, level: 14" node_number="26"> Implementation: https://github.com/php/php-src/pull/7089</div> </li> </ul> </div> <h2 class="valid" valid="valid" title="valid: True, node: 27, level: 11" node_number="27">Introduction</h2> <div class="valid" valid="valid" title="valid: True, node: 28, level: 11" node_number="28"> <p class="valid" valid="valid" title="valid: True, node: 29, level: 12" node_number="29"> This <abbr class="valid" valid="valid" title="valid: True, node: 30, level: 13" node_number="30">RFC</abbr> introduces a <code class="valid" valid="valid" title="valid: True, node: 31, level: 13" node_number="31">readonly</code> property modifier, which prevents modification of the property after initialization. </p> <p class="valid" valid="valid" title="valid: True, node: 32, level: 12" node_number="32"> Value objects are often immutable: Properties are initialized once in the constructor, and should not be modified afterwards. PHP currently has no way to enforce this constraint. The closest alternative is to declare the property private, and only expose a public getter: </p> <pre class="valid" valid="valid" title="valid: True, node: 33, level: 12" node_number="33">class User { public function __construct( private string $name ) {} public function getName(): string { return $this-&gt;name; } }</pre> <p class="valid" valid="valid" title="valid: True, node: 34, level: 12" node_number="34"> This doesn't actually make the property readonly, but it does tighten the scope where modification could occur to a single class declaration. Unfortunately, this requires the use of getter boilerplate, which results in worse ergonomics for the consumer. </p> <p class="valid" valid="valid" title="valid: True, node: 35, level: 12" node_number="35"> Support for first-class readonly properties allows you to directly expose public readonly properties, without fear that class invariants could be broken through external modification: </p> <pre class="valid" valid="valid" title="valid: True, node: 36, level: 12" node_number="36">class User { public function __construct( public readonly string $name ) {} }</pre> </div> <h2 class="valid" valid="valid" title="valid: True, node: 37, level: 11" node_number="37">Proposal</h2> <div class="valid" valid="valid" title="valid: True, node: 38, level: 11" node_number="38"> <p class="valid" valid="valid" title="valid: True, node: 39, level: 12" node_number="39"> A <code class="valid" valid="valid" title="valid: True, node: 40, level: 13" node_number="40">readonly</code> property can only be initialized once, and only from the scope where it has been declared. Any other assignment or modification of the property will result in an <code class="valid" valid="valid" title="valid: True, node: 41, level: 13" node_number="41">Error</code> exception. </p> <pre class="valid" valid="valid" title="valid: True, node: 42, level: 12" node_number="42">class Test { public readonly string $prop; public function __construct(string $prop) { // Legal initialization. $this-&gt;prop = $prop; } } $test = new Test("foobar"); // Legal read. var_dump($test-&gt;prop); // string(6) "foobar" // Illegal reassignment. It does not matter that the assigned value is the same. $test-&gt;prop = "foobar"; // Error: Cannot modify readonly property Test::$prop</pre> <p class="valid" valid="valid" title="valid: True, node: 43, level: 12" node_number="43"> This variant is not allowed, as the initializing assignment occurs from outside the class: </p> <pre class="valid" valid="valid" title="valid: True, node: 44, level: 12" node_number="44">class Test { public readonly string $prop; } $test = new Test; // Illegal initialization outside of private scope. $test-&gt;prop = "foobar"; // Error: Cannot initialize readonly property Test::$prop from global scope</pre> <p class="valid" valid="valid" title="valid: True, node: 45, level: 12" node_number="45"> Modifications are not necessarily plain assignments, all of the following will also result in an <code class="valid" valid="valid" title="valid: True, node: 46, level: 13" node_number="46">Error</code> exception: </p> <pre class="valid" valid="valid" title="valid: True, node: 47, level: 12" node_number="47">class Test { public function __construct( public readonly int $i = 0, public readonly array $ary = [], ) {} } $test = new Test; $test-&gt;i += 1; $test-&gt;i++; ++$test-&gt;i; $test-&gt;ary[] = 1; $test-&gt;ary[0][] = 1; $ref = $test-&gt;i; $test-&gt;i = $ref; byRef($test-&gt;i); foreach ($test as $prop);</pre> <p class="valid" valid="valid" title="valid: True, node: 48, level: 12" node_number="48"> However, readonly properties do not preclude interior mutability. Objects (or resources) stored in readonly properties may still be modified internally: </p> <pre class="valid" valid="valid" title="valid: True, node: 49, level: 12" node_number="49">class Test { public function __construct(public readonly object $obj) {} } $test = new Test(new stdClass); // Legal interior mutation. $test-&gt;obj-&gt;foo = 1; // Illegal reassignment. $test-&gt;obj = new stdClass;</pre> </div> <h3 class="valid" valid="valid" title="valid: True, node: 50, level: 11" node_number="50">Restrictions</h3> <div class="valid" valid="valid" title="valid: True, node: 51, level: 11" node_number="51"> <p class="valid" valid="valid" title="valid: True, node: 52, level: 12" node_number="52"> The <code class="valid" valid="valid" title="valid: True, node: 53, level: 13" node_number="53">readonly</code> modifier can only be applied to typed properties. The reason is that untyped properties have an implicit <code class="valid" valid="valid" title="valid: True, node: 54, level: 13" node_number="54">null</code> default value, which counts as an initializing assignment, and would likely cause confusion. </p> <p class="valid" valid="valid" title="valid: True, node: 55, level: 12" node_number="55"> Thanks to the introduction of the <code class="valid" valid="valid" title="valid: True, node: 56, level: 13" node_number="56">mixed</code> type in PHP 8.0, a readonly property without type constraints can be created using the <code class="valid" valid="valid" title="valid: True, node: 57, level: 13" node_number="57">mixed</code> type: </p> <pre class="valid" valid="valid" title="valid: True, node: 58, level: 12" node_number="58">class Test { public readonly mixed $prop; }</pre> <p class="valid" valid="valid" title="valid: True, node: 59, level: 12" node_number="59"> The alternative would be to not use an implicit null default value for untyped readonly properties. However, this would make the rules for implicit property default values more complex and confusing. Simply making it an error condition let's the programmer explicitly opt-in by specifying the <code class="valid" valid="valid" title="valid: True, node: 60, level: 13" node_number="60">mixed</code> type. </p> <p class="valid" valid="valid" title="valid: True, node: 61, level: 12" node_number="61"> Specifying an explicit default value on readonly properties is also not allowed: </p> <pre class="valid" valid="valid" title="valid: True, node: 62, level: 12" node_number="62">class Test { // Fatal error: Readonly property Test::$prop cannot have default value public readonly int $prop = 42; }</pre> <p class="valid" valid="valid" title="valid: True, node: 63, level: 12" node_number="63"> As the default value counts as an initializing assignment, a readonly property with a default value is essentially the same as a constant, and thus not particularly useful. The notion could become more useful in the future, if <code class="valid" valid="valid" title="valid: True, node: 64, level: 13" node_number="64">new</code> expressions are allowed as property default values. At the same time, depending on how exactly property initialization would work in that case, having a default value on a readonly property could preclude userland serialization libraries from working, as they would not be able to replace the default-constructed object. Whether or not this is a concern depends on whether the property is initialized at time of object creation, or as an implicit part of the constructor (or similar). As these are open questions, the conservative choice is to forbid default values until these questions are resolved. </p> <p class="valid" valid="valid" title="valid: True, node: 65, level: 12" node_number="65"> It is worth reiterating here that default values on promoted parameters only apply to the parameter, not the property: </p> <pre class="valid" valid="valid" title="valid: True, node: 66, level: 12" node_number="66">class Test { public function __construct( public readonly int $prop = 0, ) {} } // Desugars to: class Test { public readonly int $prop; public function __construct(int $prop = 0) { $this-&gt;prop = $prop; } }</pre> <p class="valid" valid="valid" title="valid: True, node: 67, level: 12" node_number="67"> As the property has no default value, the assignment in the constructor is initializing, and thus legal. The constructor property promotion feature was specifically designed for forward-compatibility with readonly properties. </p> <p class="valid" valid="valid" title="valid: True, node: 68, level: 12" node_number="68"> Readonly static properties are not supported. This is a technical limitation, in that it is not possible to implement readonly static properties non-intrusively. In conjunction with the questionable usefulness of readonly static properties, this is not considered worthwhile at this time. </p> </div> <h3 class="valid" valid="valid" title="valid: True, node: 69, level: 11" node_number="69">Inheritance</h3> <div class="valid" valid="valid" title="valid: True, node: 70, level: 11" node_number="70"> <p class="valid" valid="valid" title="valid: True, node: 71, level: 12" node_number="71"> It is not allowed to override a read-write property with a read-only property or vice versa. Both of the following are not legal: </p> <pre class="valid" valid="valid" title="valid: True, node: 72, level: 12" node_number="72">class A { public int $prop; } class B extends A { // Illegal: readwrite -&gt; readonly public readonly int $prop; }</pre><pre class="valid" valid="valid" title="valid: True, node: 73, level: 12" node_number="73">class A { public readonly int $prop; } class B extends A { // Illegal: readonly -&gt; readwrite public int $prop; }</pre> <p class="valid" valid="valid" title="valid: True, node: 74, level: 12" node_number="74"> It is obvious that overriding a readwrite property with a readonly property needs to be forbidden, because that may render operations performed in the parent class invalid. However, this proposal views readonly not just as a lack of capabilities (which would be safe to increase in a child class), but as an intentional restriction. Lifting the restriction in the child class could break invariants in the parent class. As such, a readonly modifier may be neither added nor removed during inheritance. </p> <p class="valid" valid="valid" title="valid: True, node: 75, level: 12" node_number="75"> It is interesting to consider how property redeclaration interacts with the restriction that initialization can only occur in the declaring class: </p> <pre class="valid" valid="valid" title="valid: True, node: 76, level: 12" node_number="76">class A { public readonly int $prop; } class B extends A { public readonly int $prop; }</pre> <p class="valid" valid="valid" title="valid: True, node: 77, level: 12" node_number="77"> Here, initialization of <code class="valid" valid="valid" title="valid: True, node: 78, level: 13" node_number="78">B::$prop</code> would be permitted both from inside <code class="valid" valid="valid" title="valid: True, node: 79, level: 13" node_number="79">A</code> and <code class="valid" valid="valid" title="valid: True, node: 80, level: 13" node_number="80">B</code>, as both classes declare the property. A possible alternative would be to allow initialization only from <code class="valid" valid="valid" title="valid: True, node: 81, level: 13" node_number="81">B</code>, though that would mean that a redeclaration in a child class could break usage in a parent class. </p> <p class="valid" valid="valid" title="valid: True, node: 82, level: 12" node_number="82"> When the same property is imported from two traits, the <code class="valid" valid="valid" title="valid: True, node: 83, level: 13" node_number="83">readonly</code> modifiers must also match: </p> <pre class="valid" valid="valid" title="valid: True, node: 84, level: 12" node_number="84">trait T1 { public readonly int $prop; } trait T2 { public int $prop; } class C { // Illegal: Conflicting properties. use T1, T2; }</pre> <p class="valid" valid="valid" title="valid: True, node: 85, level: 12" node_number="85"> Types on readonly properties remain invariant. One could argue that types of readonly properties could be covariant instead: </p> <pre class="valid" valid="valid" title="valid: True, node: 86, level: 12" node_number="86">class A { public readonly int|float $prop; } class B extends A { public readonly int $prop; }</pre> <p class="valid" valid="valid" title="valid: True, node: 87, level: 12" node_number="87"> Covariance would hold for reads from the property, but not for the initializing assignment, which is permitted from both <code class="valid" valid="valid" title="valid: True, node: 88, level: 13" node_number="88">A</code> and <code class="valid" valid="valid" title="valid: True, node: 89, level: 13" node_number="89">B</code> here. I believe that covariance would only be truly correct if the parent property were abstract, which is currently not supported. A relaxation to covariant semantics (either wholesale, or for abstract parents) would be possible in the future. </p> </div> <h3 class="valid" valid="valid" title="valid: True, node: 90, level: 11" node_number="90">Unset</h3> <div class="valid" valid="valid" title="valid: True, node: 91, level: 11" node_number="91"> <p class="valid" valid="valid" title="valid: True, node: 92, level: 12" node_number="92"> Readonly properties cannot be unset once they are initialized: </p> <pre class="valid" valid="valid" title="valid: True, node: 93, level: 12" node_number="93">class Test { public readonly int $prop; public function __construct() { $this-&gt;prop = 1; unset($this-&gt;prop); // Error: Cannot unset readonly property Test::$prop } }</pre> <p class="valid" valid="valid" title="valid: True, node: 94, level: 12" node_number="94"> However, it is possible to unset a readonly property prior to initialization, from the scope where the property has been declared. Just like with normal typed properties, explicitly unsetting the property makes it visible to magic methods. In particular, this enables the usual lazy initialization pattern to work: </p> <pre class="valid" valid="valid" title="valid: True, node: 95, level: 12" node_number="95">class Test { public readonly int $prop; public function __construct() { unset($this-&gt;prop); } public function __get($name) { if ($name === 'prop') { $this-&gt;prop = $this-&gt;lazilyComputeProp(); } return $this-&gt;$name; } }</pre> </div> <h3 class="valid" valid="valid" title="valid: True, node: 96, level: 11" node_number="96">Reflection</h3> <div class="valid" valid="valid" title="valid: True, node: 97, level: 11" node_number="97"> <p class="valid" valid="valid" title="valid: True, node: 98, level: 12" node_number="98"> A <code class="valid" valid="valid" title="valid: True, node: 99, level: 13" node_number="99">ReflectionProperty::isReadOnly()</code> method is added, which reports whether a property is declared as read-only. <code class="valid" valid="valid" title="valid: True, node: 100, level: 13" node_number="100">ReflectionProperty::getModifiers()</code> will also report a <code class="valid" valid="valid" title="valid: True, node: 101, level: 13" node_number="101">ReflectionProperty::IS_READONLY</code> flag. </p> <p class="valid" valid="valid" title="valid: True, node: 102, level: 12" node_number="102"> <code class="valid" valid="valid" title="valid: True, node: 103, level: 13" node_number="103">ReflectionProperty::setValue()</code> can bypass the requirement that initialization occurs from the scope where the property has been declared. However, reflection cannot modify a readonly property that has already been initialized. </p> <p class="valid" valid="valid" title="valid: True, node: 104, level: 12" node_number="104"> Similarly, closure rebinding can be used to bypass the initialization scope requirement. </p> </div> <h3 class="valid" valid="valid" title="valid: True, node: 105, level: 11" node_number="105">Serialization</h3> <div class="valid" valid="valid" title="valid: True, node: 106, level: 11" node_number="106"> <p class="valid" valid="valid" title="valid: True, node: 107, level: 12" node_number="107"> Readonly properties have no impact on serialization. As <code class="valid" valid="valid" title="valid: True, node: 108, level: 13" node_number="108">__unserialize()</code> (and the legacy <code class="valid" valid="valid" title="valid: True, node: 109, level: 13" node_number="109">Serializable::unserialize()</code>) method are invoked without a prior constructor call, readonly properties will be in an uninitialized state and can be set by the <code class="valid" valid="valid" title="valid: True, node: 110, level: 13" node_number="110">__unserialize()</code> implementation. </p> <p class="valid" valid="valid" title="valid: True, node: 111, level: 12" node_number="111"> This also applies to userland serializers and hydrators. As long as the object is created using <code class="valid" valid="valid" title="valid: True, node: 112, level: 13" node_number="112">ReflectionClass::newInstanceWithoutConstructor()</code> or some other constructor-bypass, it is always safe to initialize readonly properties. </p> </div> <h2 class="valid" valid="valid" title="valid: True, node: 113, level: 11" node_number="113">Rationale</h2> <div class="valid" valid="valid" title="valid: True, node: 114, level: 11" node_number="114"> <p class="valid" valid="valid" title="valid: True, node: 115, level: 12" node_number="115"> The readonly property concept introduced in this proposal provides strong immutability guarantees, which apply both inside and outside the class. Once a property has been initialized, it cannot be changed under any circumstances. Reading a readonly property will always return the same value, no matter what code runs in between: </p> <pre class="valid" valid="valid" title="valid: True, node: 116, level: 12" node_number="116">class Test { public readonly string $prop; public function method(Closure $fn) { $prop = $this-&gt;prop; $fn(); // Any code may run here. $prop2 = $this-&gt;prop; assert($prop === $prop2); // Always holds. } }</pre> <p class="valid" valid="valid" title="valid: True, node: 117, level: 12" node_number="117"> These guarantees are too strong for certain use-cases. For example, some classes may wish to have properties that are publicly readable, but can only be written from within the class. This is a much weaker guarantee, as the value of a property can change during the lifetime of an object. Both variants can be useful depending on the situation, and the addition of readonly properties neither precludes nor discourages the addition of asymmetric property visibility. </p> <p class="valid" valid="valid" title="valid: True, node: 118, level: 12" node_number="118"> A special case worth mentioning are classes using clone-based withers: </p> <pre class="valid" valid="valid" title="valid: True, node: 119, level: 12" node_number="119">class Point { public function __construct( public readonly float $x, public readonly float $y, public readonly float $z, ) {} public function withX(float $x): static { // This implementation works: return new static($x, $this-&gt;y, $this-&gt;z); // This implementation does not: $clone = clone $this; $clone-&gt;x = $x; return $clone; } }</pre> <p class="valid" valid="valid" title="valid: True, node: 120, level: 12" node_number="120"> The clone-based implementation will result in an error, because the <code class="valid" valid="valid" title="valid: True, node: 121, level: 13" node_number="121">x</code> property on the cloned object is already initialized, and modification is thus rejected. This is by design: The property does indeed get modified post-initialization, and the fact that this is only &#8220;temporary&#8221; is ultimately irrelevant. </p> <p class="valid" valid="valid" title="valid: True, node: 122, level: 12" node_number="122"> In the future, a clone with construct, which allows setting properties during the cloning process, would make such implementations compatible with readonly properties. The important difference is that the new value for the property is assigned directly, without assigning the old cloned value first. </p> <p class="valid" valid="valid" title="valid: True, node: 123, level: 12" node_number="123"> Alternatively, such properties could use a future asymmetric visibility concept, though it does not express the actual invariant as precisely. </p> <p class="valid" valid="valid" title="valid: True, node: 124, level: 12" node_number="124"> This proposal is very similar to the previously declined <a class="valid" valid="valid" title="valid: True, node: 125, level: 13" node_number="125">Write-Once Properties</a> <abbr class="valid" valid="valid" title="valid: True, node: 126, level: 13" node_number="126">RFC</abbr>. I think that a key mistake of that <abbr class="valid" valid="valid" title="valid: True, node: 127, level: 13" node_number="127">RFC</abbr> was specifically the &#8220;write-once&#8221; framing. While maybe technically accurate, it makes for confusing messaging, as the intended <abbr class="valid" valid="valid" title="valid: True, node: 128, level: 13" node_number="128">API</abbr> contract is that of &#8220;read-only&#8221;, not &#8220;write-once&#8221;. It stands to reason that a readonly property still needs to be initialized at some point, and there is no need to put a particular focus on that initialization. </p> <p class="valid" valid="valid" title="valid: True, node: 129, level: 12" node_number="129"> This proposal does deviate from the write-once properties <abbr class="valid" valid="valid" title="valid: True, node: 130, level: 13" node_number="130">RFC</abbr> in one significant respect: Initialization is only allowed from within the declaring class (modulo the usual rebinding and reflection workarounds). This ensures that these properties are always read-only from a public <abbr class="valid" valid="valid" title="valid: True, node: 131, level: 13" node_number="131">API</abbr> perspective, even if they don't get initialized in the class constructor. The &#8220;write-once&#8221; limitation is intended specifically for initialization, not as a one-shot communication channel. </p> <p class="valid" valid="valid" title="valid: True, node: 132, level: 12" node_number="132"> This also ensures that a potential future &#8220;clone with&#8221; implementation will only be able to modify readonly properties from private scope and thus cannot bypass additional invariants imposed by the implementation when used from a different scope. </p> <p class="valid" valid="valid" title="valid: True, node: 133, level: 12" node_number="133"> This <abbr class="valid" valid="valid" title="valid: True, node: 134, level: 13" node_number="134">RFC</abbr> overlaps with the <a class="valid" valid="valid" title="valid: True, node: 135, level: 13" node_number="135">Property Accessors RFC</a>. In particular, it implements the &#8220;only implicit get&#8221; aspect, though not with the exact same semantics. As mentioned in the <abbr class="valid" valid="valid" title="valid: True, node: 136, level: 13" node_number="136">RFC</abbr>, I'm not convinced that the full complexity of accessors is truly warranted. Supporting readonly properties and asymmetric visibility would cover a significant portion of the use-cases, at a lower language complexity cost. </p> <p class="valid" valid="valid" title="valid: True, node: 137, level: 12" node_number="137"> It is worth noting that having a readonly property feature does not preclude introduction of accessors. C# supports both readonly properties and accessors. C# also provides properties with implicit backing storage through accessor syntax, but this is not the only way to do it. For example, Swift has special syntax for asymmetric visibility, rather than specifying visibility on implicitly implemented accessors. </p> <p class="valid" valid="valid" title="valid: True, node: 138, level: 12" node_number="138"> Even if we have property accessors, I believe it may be worthwhile to limit them to computed properties only, and solve use-cases that involve engine-managed storage through other mechanisms, such as readonly properties and property-level asymmetric visibility. This avoids confusion relating to the two kinds of accessors (implicit and explicit), and also allows us to make their behavior independent of accessor constraints. For example, a first-class asymmetric visibility feature would shield the user from considering distinctions such as <code class="valid" valid="valid" title="valid: True, node: 139, level: 13" node_number="139">get;</code> vs <code class="valid" valid="valid" title="valid: True, node: 140, level: 13" node_number="140">get;</code> accessors. These are externalities of the general accessor feature and not needed for asymmetric visibility. </p> <p class="valid" valid="valid" title="valid: True, node: 141, level: 12" node_number="141"> A separate implementation can also be more efficient. After initialization, a readonly property will have the same performance characteristics as a normal property. Accessor-based properties, even with implicit storage, still carry a performance penalty. </p> </div> <h2 class="valid" valid="valid" title="valid: True, node: 142, level: 11" node_number="142">Backward Incompatible Changes</h2> <div class="valid" valid="valid" title="valid: True, node: 143, level: 11" node_number="143"> <p class="valid" valid="valid" title="valid: True, node: 144, level: 12" node_number="144"> A new <code class="valid" valid="valid" title="valid: True, node: 145, level: 13" node_number="145">readonly</code> keyword is reserved. </p> <p class="valid" valid="valid" title="valid: True, node: 146, level: 12" node_number="146"> Assumptions of existing code that all accessible properties are also writable may be broken. </p> </div> <h2 class="valid" valid="valid" title="valid: True, node: 147, level: 11" node_number="147">Vote</h2> <div class="valid" valid="valid" title="valid: True, node: 148, level: 11" node_number="148"> <p class="valid" valid="valid" title="valid: True, node: 149, level: 12" node_number="149"> Voting started on 2021-07-01 and closes on 2021-07-15. </p> </div> </div> <div class="valid" valid="valid" title="valid: True, node: 150, level: 10" node_number="150"><bdi class="valid" valid="valid" title="valid: True, node: 151, level: 11" node_number="151">rfc/readonly_properties_v2.txt</bdi> &#183; Last modified: 2021/07/20 15:37 by <bdi class="valid" valid="valid" title="valid: True, node: 152, level: 11" node_number="152">nikic</bdi></div> </div></div> <div class="valid" valid="valid" title="valid: True, node: 153, level: 8" node_number="153"> <h3 class="valid" valid="valid" title="valid: True, node: 154, level: 9" node_number="154">Page Tools</h3> <div class="valid" valid="valid" title="valid: True, node: 155, level: 9" node_number="155"> <ul class="valid" valid="valid" title="valid: True, node: 156, level: 10" node_number="156"> <li class="valid" valid="valid" title="valid: True, node: 157, level: 11" node_number="157"><a class="valid" valid="valid" title="valid: True, node: 158, level: 12" node_number="158">Show pagesource</a></li><li class="valid" valid="valid" title="valid: True, node: 159, level: 11" node_number="159"><a class="valid" valid="valid" title="valid: True, node: 160, level: 12" node_number="160">Old revisions</a></li><li class="valid" valid="valid" title="valid: True, node: 161, level: 11" node_number="161"><a class="valid" valid="valid" title="valid: True, node: 162, level: 12" node_number="162">Backlinks</a></li><li class="valid" valid="valid" title="valid: True, node: 163, level: 11" node_number="163"><a class="valid" valid="valid" title="valid: True, node: 164, level: 12" node_number="164">Back to top</a></li> </ul> </div> </div> </div> </div></div> </section> &#65279;<section class="valid" valid="valid" title="valid: True, node: 165, level: 4" node_number="165"> <div class="valid" valid="valid" title="valid: True, node: 166, level: 5" node_number="166"> <h3 class="valid" valid="valid" title="valid: True, node: 167, level: 6" node_number="167">Table of Contents</h3> <div class="valid" valid="valid" title="valid: True, node: 168, level: 6" node_number="168"> <ul class="valid" valid="valid" title="valid: True, node: 169, level: 7" node_number="169"> <li class="valid" valid="valid" title="valid: True, node: 170, level: 8" node_number="170"><div class="valid" valid="valid" title="valid: True, node: 171, level: 9" node_number="171"><a class="valid" valid="valid" title="valid: True, node: 172, level: 10" node_number="172">PHP RFC: Readonly properties 2.0</a></div> <ul class="valid" valid="valid" title="valid: True, node: 173, level: 9" node_number="173"> <li class="valid" valid="valid" title="valid: True, node: 174, level: 10" node_number="174"><div class="valid" valid="valid" title="valid: True, node: 175, level: 11" node_number="175"><a class="valid" valid="valid" title="valid: True, node: 176, level: 12" node_number="176">Introduction</a></div></li> <li class="valid" valid="valid" title="valid: True, node: 177, level: 10" node_number="177"><div class="valid" valid="valid" title="valid: True, node: 178, level: 11" node_number="178"><a class="valid" valid="valid" title="valid: True, node: 179, level: 12" node_number="179">Proposal</a></div> <ul class="valid" valid="valid" title="valid: True, node: 180, level: 11" node_number="180"> <li class="valid" valid="valid" title="valid: True, node: 181, level: 12" node_number="181"><div class="valid" valid="valid" title="valid: True, node: 182, level: 13" node_number="182"><a class="valid" valid="valid" title="valid: True, node: 183, level: 14" node_number="183">Restrictions</a></div></li> <li class="valid" valid="valid" title="valid: True, node: 184, level: 12" node_number="184"><div class="valid" valid="valid" title="valid: True, node: 185, level: 13" node_number="185"><a class="valid" valid="valid" title="valid: True, node: 186, level: 14" node_number="186">Inheritance</a></div></li> <li class="valid" valid="valid" title="valid: True, node: 187, level: 12" node_number="187"><div class="valid" valid="valid" title="valid: True, node: 188, level: 13" node_number="188"><a class="valid" valid="valid" title="valid: True, node: 189, level: 14" node_number="189">Unset</a></div></li> <li class="valid" valid="valid" title="valid: True, node: 190, level: 12" node_number="190"><div class="valid" valid="valid" title="valid: True, node: 191, level: 13" node_number="191"><a class="valid" valid="valid" title="valid: True, node: 192, level: 14" node_number="192">Reflection</a></div></li> <li class="valid" valid="valid" title="valid: True, node: 193, level: 12" node_number="193"><div class="valid" valid="valid" title="valid: True, node: 194, level: 13" node_number="194"><a class="valid" valid="valid" title="valid: True, node: 195, level: 14" node_number="195">Serialization</a></div></li> </ul> </li> <li class="valid" valid="valid" title="valid: True, node: 196, level: 10" node_number="196"><div class="valid" valid="valid" title="valid: True, node: 197, level: 11" node_number="197"><a class="valid" valid="valid" title="valid: True, node: 198, level: 12" node_number="198">Rationale</a></div></li> <li class="valid" valid="valid" title="valid: True, node: 199, level: 10" node_number="199"><div class="valid" valid="valid" title="valid: True, node: 200, level: 11" node_number="200"><a class="valid" valid="valid" title="valid: True, node: 201, level: 12" node_number="201">Backward Incompatible Changes</a></div></li> <li class="valid" valid="valid" title="valid: True, node: 202, level: 10" node_number="202"><div class="valid" valid="valid" title="valid: True, node: 203, level: 11" node_number="203"><a class="valid" valid="valid" title="valid: True, node: 204, level: 12" node_number="204">Vote</a></div></li> </ul></li> </ul> </div> </div> </section> </section> </div> </body>
        <style tyle='text/css'>
body{
    position: relative;
    padding-left: 30px;
    top: 60px;
}
* {
    border: 1px solid #eee;
    padding: 5px 12px;
    margin: 3px 0;
    box-sizing: content-box;
    background-color: #fff;
    cursor: no-drop;
}
main:hover > *, section:hover > *, header:hover > *, nav:hover > *, a:hover > *, div:hover > *, p:hover > *, ul:hover > *, h1:hover > *, h2:hover > *, h3:hover > *, li:hover > *, span:hover > *{
    border: 2px solid green;
    background-color: #fffeee;
    padding: 5px 23px !important;
    margin: 1px 0;
    color: green;
}
main:hover, section:hover, header:hover, nav:hover, a:hover, div:hover, p:hover, ul:hover, h1:hover, h2:hover, h3:hover, li:hover, span:hover{
    border: 1px solid #fff;
    background-color: #eee;
}
a, span {
    display: block;
}
.selected {
    border: 2px solid orchid !important;
    opacity: 0.8;
    color: orchid !important;
}
.selected * {
    padding: 2px !important;
    color: orchid !important;
}
.valid {
  cursor: pointer;
}
.btn{
  cursor: pointer;
  font-weight: bolder;
  padding: 8px;
}
</style> 
        <script>function OpenOriginalLink($event){
    $event.stopPropagation();
    console.log(url);
}

function removeItem($event){
    $event.stopPropagation();
    console.log('Remove item: ', url)
    localStorage.removeItem(url)
}

function exportData($event){
    $event.stopPropagation();

    result = []
    for(let i=0; i<localStorage.length; i++) {
        let key = localStorage.key(i);
        result.push(localStorage.getItem(key))
    }
    const _url = URL.createObjectURL(new Blob([result.join("\n")], {type: 'text/plain'}))
    $event.target.href = _url;
    localStorage.clear()
}

var removeItemBtn = document.createElement("BUTTON");   // Create a <button> element
removeItemBtn.innerHTML = "Remove Item";
removeItemBtn.classList.add('btn');
removeItemBtn.style.position = "fixed";
removeItemBtn.style.left = '5px';
removeItemBtn.style.top = 0;
removeItemBtn.style.border = "1px solid";
removeItemBtn.style.boxShadow = "3px 3px #888";
removeItemBtn.onclick = removeItem;
document.body.appendChild(removeItemBtn);

var goToOriginLink = document.createElement("A");   // Create a <button> element
goToOriginLink.innerHTML = "GoToOrigin";
goToOriginLink.classList.add('btn');
goToOriginLink.style.position = "fixed"
goToOriginLink.style.left = '115px'
goToOriginLink.style.top = 0;
goToOriginLink.onclick = OpenOriginalLink;
goToOriginLink.setAttribute('href', decodeURIComponent(url));
goToOriginLink.target = '_blank';
document.body.appendChild(goToOriginLink);

var current = new Date
var exportDataLink = document.createElement("A");   // Create a <button> element
exportDataLink.innerHTML = "Export data";
exportDataLink.classList.add('btn');
exportDataLink.download = current.toISOString() + '.exported.txt';
exportDataLink.style.position = "fixed";
exportDataLink.style.right = '5px';
exportDataLink.style.top = 0;
exportDataLink.style.border = "1px solid #888";
exportDataLink.style.boxShadow = "3px 3px #888";
exportDataLink.onclick = exportData;
document.body.appendChild(exportDataLink);

data = {
    'title': null ,
    'article': null
}

var body = document.getElementsByTagName("body")[0];

body.onclick = function($e){
    var num = $e.target.getAttribute('node_number')
    var valid = $e.target.getAttribute('valid')

    if(!valid){
        console.log("Element is invalid")
        return
    }

    if(data.length > 2){
        data = data.splice(0, 2)
    }

    console.log("node:", $e.target)

    if(!data.title && !data.article){
        data.title = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else if (data.title && !data.article){
        data.article = num;
        console.log("data:", data)
        $e.target.classList.add('selected')
    }else{
        selected = Array.from(document.getElementsByClassName("selected"))
        selected.forEach(function(el){
            el.classList.remove('selected')
        })

        data.title = num;
        data.article = null;
        $e.target.classList.add('selected')

    }

    if(data.title && data.article){
        var obj = {
            url: url,
            text: body_html,
            title: data.title,
            article: data.article,
        }

        var datasetItem = JSON.stringify(obj)
        localStorage.setItem(url, datasetItem)
    }
}
</script> 
      </html>